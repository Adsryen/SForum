(()=>{class e{constructor(e){const n={logo:"OwO表情",container:document.getElementsByClassName("OwO")[0],target:document.getElementsByTagName("textarea")[0],position:"down",width:"100%",maxHeight:"250px",api:"/api/core/OwO.json"};for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t]);this.container=e.container,this.target=e.target,e.position==="up"&&this.container.classList.add("OwO-up");const t=new XMLHttpRequest;t.onreadystatechange=()=>{t.readyState===4&&(t.status>=200&&t.status<300||t.status===304?(this.odata=JSON.parse(t.responseText),this.init(e)):console.log("OwO data request was unsuccessful: "+t.status))},t.open("get",e.api,!0),t.send(null)}init(e){this.area=e.target,this.packages=Object.keys(this.odata);var t=`
            <div class="OwO-logo"><span>${e.logo}</span></div>
            <div class="OwO-body" style="width: ${e.width}">`;for(let n=0;n<this.packages.length;n++){t+=`
                <ul class="OwO-items OwO-items-${this.odata[this.packages[n]].type}" style="max-height: ${parseInt(e.maxHeight)-53+"px"};">`;let s=this.odata[this.packages[n]].container;for(let e=0;e<s.length;e++)t+=`
                    <li class="OwO-item" title="${s[e].text}">${s[e].icon}</li>`;t+=`
                </ul>`}t+=`
                <div class="OwO-bar">
                    <ul class="OwO-packages">`;for(let e=0;e<this.packages.length;e++)t+=`
                        <li><span>${this.packages[e]}</span></li>`;t+=`
                    </ul>
                </div>
            </div>
            `,this.container.innerHTML=t,this.logo=this.container.getElementsByClassName("OwO-logo")[0],this.logo.addEventListener("click",()=>{this.toggle()}),this.container.getElementsByClassName("OwO-body")[0].addEventListener("click",e=>{let t=null;if(e.target.classList.contains("OwO-item")?t=e.target:e.target.parentNode.classList.contains("OwO-item")&&(t=e.target.parentNode),t){const n=this.area.selectionEnd;let s=this.area.value;const o=e.target.getElementsByTagName("img");e.target.nodeName!=="IMG"?o.length>0?this.area.value=s.slice(0,n)+" "+e.target.title+" "+s.slice(n):this.area.value=s.slice(0,n)+" "+t.innerHTML+" "+s.slice(n):this.area.value=s.slice(0,n)+" "+e.target.parentElement.title+" "+s.slice(n),this.area.focus(),this.toggle()}}),this.packagesEle=this.container.getElementsByClassName("OwO-packages")[0];for(let e=0;e<this.packagesEle.children.length;e++)(t=>{this.packagesEle.children[e].addEventListener("click",()=>{this.tab(t)})})(e);this.tab(0)}toggle(){this.container.classList.contains("OwO-open")?this.container.classList.remove("OwO-open"):this.container.classList.add("OwO-open")}tab(e){const t=this.container.getElementsByClassName("OwO-items-show")[0];t&&t.classList.remove("OwO-items-show"),this.container.getElementsByClassName("OwO-items")[e].classList.add("OwO-items-show");const n=this.container.getElementsByClassName("OwO-package-active")[0];n&&n.classList.remove("OwO-package-active"),this.packagesEle.getElementsByTagName("li")[e].classList.add("OwO-package-active")}}typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=e:window.OwO=e})()