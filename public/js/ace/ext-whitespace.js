ace.define("ace/ext/whitespace",["require","exports","module","ace/lib/lang"],function(e,t){"use strict";var n=e("../lib/lang");t.$detectIndentation=function(e){for(var n,s,o,i,r,c,l,f,a=[],d=[],u=0,h=0,m=Math.min(e.length,1e3),t=0;t<m;t++){if(n=e[t],!/^\s*[^*+\-\s]/.test(n))continue;for(n[0]=="	"?(u++,h=-Number.MAX_VALUE):(s=n.match(/^ */)[0].length,s&&n[s]!="	"&&(r=s-h,r>0&&!(h%r)&&!(s%r)&&(d[r]=(d[r]||0)+1),a[s]=(a[s]||0)+1),h=s);t<m&&n[n.length-1]=="\\";)n=e[t++]}function p(e){for(var n=0,t=e;t<a.length;t+=e)n+=a[t]||0;return n}f=d.reduce(function(e,t){return e+t},0),i={score:0,length:0},c=0;for(t=1;t<12;t++)o=p(t),t==1?(c=o,o=a[1]?.9:.8,a.length||(o=0)):o/=c,d[t]&&(o+=d[t]/f),o>i.score&&(i={score:o,length:t});if(i.score&&i.score>1.4&&(l=i.length),u>c+1)return(l==1||c<u/4||i.score<1.8)&&(l=void 0),{ch:"	",length:l};if(c>u+1)return{ch:" ",length:l}},t.detectIndentation=function(e){var s=e.getLines(0,1e3),n=t.$detectIndentation(s)||{};return n.ch&&e.setUseSoftTabs(n.ch==" "),n.length&&e.setTabSize(n.length),n},t.trimTrailingSpace=function(e,t){var o,i,a,r,c,l=e.getDocument(),d=l.getAllLines(),u=t&&t.trimEmpty?-1:0,n=[],s=-1;t&&t.keepCursorPosition&&(e.selection.rangeCount?e.selection.rangeList.ranges.forEach(function(e,t,s){var o=s[t+1];if(o&&o.cursor.row==e.cursor.row)return;n.push(e.cursor)}):n.push(e.selection.getCursor()),s=0),a=n[s]&&n[s].row;for(o=0,c=d.length;o<c;o++)r=d[o],i=r.search(/\s+$/),o==a&&(i<n[s].column&&i>u&&(i=n[s].column),s++,a=n[s]?n[s].row:-1),i>u&&l.removeInLine(o,i,r.length)},t.convertIndentation=function(e,t,s){g=e.getTabString()[0],a=e.getTabSize(),s||(s=a),t||(t=g),v=t=="	"?t:n.stringRepeat(t,s),c=e.doc,m=c.getAllLines(),h={},u={};for(var i,a,r,c,l,d,u,h,m,f,p,g,v,o=0,b=m.length;o<b;o++)p=m[o],i=p.match(/^\s*/)[0],i&&(f=e.$getStringScreenWidth(i)[0],d=Math.floor(f/a),l=f%a,r=h[d]||(h[d]=n.stringRepeat(v,d)),r+=u[l]||(u[l]=n.stringRepeat(" ",l)),r!=i&&(c.removeInLine(o,0,i.length),c.insertInLine({row:o,column:0},r)));e.setTabSize(s),e.setUseSoftTabs(t==" ")},t.$parseStringArg=function(e){var n,t={};return/t/.test(e)?t.ch="	":/s/.test(e)&&(t.ch=" "),n=e.match(/\d+/),n&&(t.length=parseInt(n[0],10)),t},t.$parseArg=function(e){return e?typeof e=="string"?t.$parseStringArg(e):typeof e.text=="string"?t.$parseStringArg(e.text):e:{}},t.commands=[{name:"detectIndentation",description:"Detect indentation from content",exec:function(e){t.detectIndentation(e.session)}},{name:"trimTrailingSpace",description:"Trim trailing whitespace",exec:function(e,n){t.trimTrailingSpace(e.session,n)}},{name:"convertIndentation",description:"Convert indentation to ...",exec:function(e,n){var s=t.$parseArg(n);t.convertIndentation(e.session,s.ch,s.length)}},{name:"setIndentation",description:"Set indentation",exec:function(e,n){var s=t.$parseArg(n);s.length&&e.session.setTabSize(s.length),s.ch&&e.session.setUseSoftTabs(s.ch==" ")}}]}),function(){ace.require(["ace/ext/whitespace"],function(e){typeof module=="object"&&typeof exports=="object"&&module&&(module.exports=e)})}()