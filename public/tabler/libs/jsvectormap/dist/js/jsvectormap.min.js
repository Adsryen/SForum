!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).jsVectorMap=t()}(this,function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var n=(this.document||this.ownerDocument).querySelectorAll(e),t=n.length;--t>=0&&n.item(t)!==this;);return t>-1}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e==null)throw new TypeError("Cannot convert first argument to object");for(o=Object(e),n=1;n<arguments.length;n++)if(t=arguments[n],t!=null){t=Object(t);for(var t,n,s,o,a,r=Object.keys(Object(t)),i=0,c=r.length;i<c;i++)s=r[i],a=Object.getOwnPropertyDescriptor(t,s),void 0!==a&&a.enumerable&&(o[s]=t[s])}return o}}),j=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e instanceof Node}(e)||function(e){return e.$$typeof===w}(e)}(e)},w="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function l(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function N(e,t,n){return e.concat(t).map(function(e){return l(e,n)})}function O(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}(e))}function C(e,t){try{return t in e}catch{return!1}}function T(e,t,n){var s={};return n.isMergeableObject(e)&&O(e).forEach(function(t){s[t]=l(e[t],n)}),O(t).forEach(function(o){(function(e,t){return C(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(C(e,o)&&n.isMergeableObject(t[o])?s[o]=function(e,t){if(!t.customMerge)return d;var n=t.customMerge(e);return"function"==typeof n?n:d}(o,n)(e[o],t[o],n):s[o]=l(t[o],n))}),s}var v,j,y,w,k,d=function(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||N,n.isMergeableObject=n.isMergeableObject||j,n.cloneUnlessOtherwiseSpecified=l;var s=Array.isArray(t);return s===Array.isArray(e)?s?n.arrayMerge(e,t,n):T(e,t,n):l(t,n)},S=function(e){return"object"==typeof e&&void 0!==e.nodeType?e:"string"==typeof e?document.querySelector(e):null},n=function(e,t,n,s){void 0===s&&(s=!1);var o=document.createElement(e);return n&&(o[s?"innerHTML":"textContent"]=n),t&&(o.className=t),o},h=function(e){e.parentNode.removeChild(e)},t=function(e,t,n){return void 0===n&&(n=!1),n?d(e,t):Object.assign(e,t)},f=function(e,t){return e.toLowerCase()+":to:"+t.toLowerCase()},A=function(e,t){Object.assign(e.prototype,t)},a={},M=1,e={on:function(e,t,n,s){void 0===s&&(s={});var o="jvm:"+t+"::"+M++;a[o]={selector:e,handler:n},n._uid=o,e.addEventListener(t,n,s)},delegate:function(t,n,s,o){(n=n.split(" ")).forEach(function(n){e.on(t,n,function(e){var t=e.target;t.matches(s)&&o.call(t,e)})})},off:function(e,t,n){var s=t.split(":")[1];e.removeEventListener(s,n),delete a[n._uid]},flush:function(){Object.keys(a).forEach(function(t){e.off(a[t].selector,t,a[t].handler)})},getEventRegistry:function(){return a}},i={onViewportChange:"viewport:changed",onRegionClick:"region:clicked",onMarkerClick:"marker:clicked",onRegionSelected:"region:selected",onMarkerSelected:"marker:selected",onRegionTooltipShow:"region.tooltip:show",onMarkerTooltipShow:"marker.tooltip:show",onLoaded:"map:loaded",onDestroyed:"map:destroyed"};function g(e,t,n){var i=S(t),s=-1===i.getAttribute("class").indexOf("jvm-region")?"marker":"region",o="region"===s?i.getAttribute("data-code"):i.getAttribute("data-index"),a=s+":selected";return n&&(a=s+".tooltip:show"),{event:a,type:s,code:o,element:"region"===s?e.regions[o].element:e.markers[o].element,tooltipText:"region"===s?e.mapData.paths[o].name||"":e.markers[o].config.name||""}}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function D(e,t){var s,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),s=0,function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=function(){function e(){}return e.prototype.dispose=function(){this._tooltip?h(this._tooltip):this.shape.remove();for(var e,t=D(Object.getOwnPropertyNames(this));!(e=t()).done;)this[e.value]=null},e}(),x={getLabelText:function(e,t){if(t){if("function"==typeof t.render){var n=[];return this.config&&this.config.marker&&n.push(this.config.marker),n.push(e),t.render.apply(this,n)}return e}},getLabelOffsets:function(e,t){return"function"==typeof t.offsets?t.offsets(e):Array.isArray(t.offsets)?t.offsets[e]:[0,0]},setStyle:function(e,t){this.shape.setStyle(e,t)},remove:function(){this.shape.remove(),this.label&&this.label.remove()},hover:function(e){this._setStatus("isHovered",e)},select:function(e){this._setStatus("isSelected",e)},_setStatus:function(e,t){this.shape[e]=t,this.shape.updateStyle(),this[e]=t,this.label&&(this.label[e]=t,this.label.updateStyle())}},E=function(e){function t(t){var n,s,a,r,c=t.map,o=t.code,l=t.path,d=t.style,i=t.label,u=t.labelStyle,h=t.labelsGroup;return(n=e.call(this)||this)._map=c,n.shape=n._createRegion(l,o,d),s=n.shape.getBBox(),a=n.getLabelText(o,i),i&&a&&(r=n.getLabelOffsets(o,i),n.labelX=s.x+s.width/2+r[0],n.labelY=s.y+s.height/2+r[1],n.label=n._map.canvas.createText({text:a,textAnchor:"middle",alignmentBaseline:"central",dataCode:o,x:n.labelX,y:n.labelY},u,h),n.label.addClass("jvm-region jvm-element")),n}s(t,e);var n=t.prototype;return n._createRegion=function(e,t,n){return(e=this._map.canvas.createPath({d:e,dataCode:t},n)).addClass("jvm-region jvm-element"),e},n.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this._map.scale+this._map.transX*this._map.scale,y:this.labelY*this._map.scale+this._map.transY*this._map.scale})},t}(u);A(E,x),k=function(e){function t(t){var n,s=t.index,o=t.map,i=t.style,a=t.x1,r=t.y1,c=t.x2,l=t.y2,d=t.group,u=t.config;return(n=e.call(this)||this).config=u,n.shape=o.canvas.createLine({x1:a,y1:r,x2:c,y2:l,dataIndex:s},i,d),n.shape.addClass("jvm-line"),n}return s(t,e),t.prototype.setStyle=function(e,t){this.shape.setStyle(e,t)},t}(u),v=function(e){function t(t){var n,i=t.index,s=t.style,a=t.label,r=t.cx,c=t.cy,o=t.map,l=t.group;return(n=e.call(this)||this)._map=o,n._isImage=!!s.initial.image,n.config=arguments[0],n.shape=o.canvas[n._isImage?"createImage":"createCircle"]({dataIndex:i,cx:r,cy:c},s,l),n.shape.addClass("jvm-marker jvm-element"),n._isImage&&n.updateLabelPosition(),a&&n._createLabel(n.config),n}s(t,e);var n=t.prototype;return n.updateLabelPosition=function(){this.label&&this.label.set({x:this._labelX*this._map.scale+this._offsets[0]+this._map.transX*this._map.scale+5+(this._isImage?(this.shape.width||0)/2:this.shape.node.r.baseVal.value),y:this._labelY*this._map.scale+this._map.transY*this._map.scale+this._offsets[1]})},n._createLabel=function(e){var n=e.index,t=e.map,s=e.label,a=e.labelsGroup,r=e.cx,c=e.cy,o=e.marker,i=e.isRecentlyCreated,l=this.getLabelText(n,s);this._labelX=r/t.scale-t.transX,this._labelY=c/t.scale-t.transY,this._offsets=i&&o.offsets?o.offsets:this.getLabelOffsets(n,s),this.label=t.canvas.createText({text:l,dataIndex:n,x:this._labelX,y:this._labelY,dy:"0.6ex"},t.params.markerLabelStyle,a),this.label.addClass("jvm-marker jvm-element"),i&&this.updateLabelPosition()},t}(u),A(v,x);var F=function(){function e(e){void 0===e&&(e={}),this._options=e,this._map=this._options.map,this._series=this._options.series,this._body=n("div","jvm-legend"),this._options.cssClass&&this._body.setAttribute("class",this._options.cssClass),e.vertical?this._map.legendVertical.appendChild(this._body):this._map.legendHorizontal.appendChild(this._body),this.render()}return e.prototype.render=function(){var e,s,o,i,a,c,l,t=this._series.scale.getTicks(),r=n("div","jvm-legend-inner");(this._body.innderHTML="",this._options.title)&&(c=n("div","jvm-legend-title",this._options.title),this._body.appendChild(c)),this._body.appendChild(r);for(e=0;e<t.length;e++){switch(o=n("div","jvm-legend-tick"),s=n("div","jvm-legend-tick-sample"),this._series.config.attribute){case"fill":a=t[e].value,/\.(jpg|gif|png)$/.test(a)?s.style.background="url("+t[e].value+")":s.style.background=t[e].value;break;case"stroke":s.style.background=t[e].value;break;case"image":s.style.background="url("+("object"==typeof t[e].value?t[e].value.url:t[e].value)+") no-repeat center center",s.style.backgroundSize="cover"}o.appendChild(s),i=t[e].label,this._options.labelRender&&(i=this._options.labelRender(i)),l=n("div","jvm-legend-tick-text",i),o.appendChild(l),r.appendChild(o)}},e}(),V=function(){function e(e){this._scale=e}var t=e.prototype;return t.getValue=function(e){return this._scale[e]},t.getTicks=function(){var t,e=[];for(t in this._scale)e.push({label:t,value:this._scale[t]});return e},e}(),B=function(){function n(e,n,s){void 0===e&&(e={}),this._map=s,this._elements=n,this._values=e.values||{},this.config=e,this.config.attribute=e.attribute||"fill",e.attributes&&this.setAttributes(e.attributes),"object"==typeof e.scale&&(this.scale=new V(e.scale)),this.config.legend&&(this.legend=new F(t({map:this._map,series:this},this.config.legend))),this.setValues(this._values)}var e=n.prototype;return e.setValues=function(e){var t,n={};for(t in e)e[t]&&(n[t]=this.scale.getValue(e[t]));this.setAttributes(n)},e.setAttributes=function(e){for(var t in e)this._elements[t]&&this._elements[t].element.setStyle(this.config.attribute,e[t])},e.clear=function(){var e,t={};for(e in this._values)this._elements[e]&&(t[e]=this._elements[e].element.shape.style.initial[this.config.attribute]);this.setAttributes(t),this._values={}},n}(),m={mill:function(e,t,n){return{x:this.radius*(t-n)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*e)*this.radDeg))/.8}},merc:function(e,t,n){return{x:this.radius*(t-n)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}},aea:function(e,t,n){var c=n*this.radDeg,o=29.5*this.radDeg,l=45.5*this.radDeg,d=e*this.radDeg,u=t*this.radDeg,s=(Math.sin(o)+Math.sin(l))/2,i=Math.cos(o)*Math.cos(o)+2*s*Math.sin(o),a=s*(u-c),r=Math.sqrt(i-2*s*Math.sin(d))/s,h=Math.sqrt(i-2*s*Math.sin(0))/s;return{x:r*Math.sin(a)*this.radius,y:-(h-r*Math.cos(a))*this.radius}},lcc:function(e,t,n){var i=n*this.radDeg,a=t*this.radDeg,o=33*this.radDeg,r=45*this.radDeg,d=e*this.radDeg,s=Math.log(Math.cos(o)*(1/Math.cos(r)))/Math.log(Math.tan(Math.PI/4+r/2)*(1/Math.tan(Math.PI/4+o/2))),c=Math.cos(o)*Math.pow(Math.tan(Math.PI/4+o/2),s)/s,l=c*Math.pow(1/Math.tan(Math.PI/4+d/2),s),u=c*Math.pow(1/Math.tan(Math.PI/4+0),s);return{x:l*Math.sin(s*(a-i))*this.radius,y:-(u-l*Math.cos(s*(a-i)))*this.radius}}};m.degRad=180/Math.PI,m.radDeg=Math.PI/180,m.radius=6381372;var z={_setupContainerEvents:function(){var n,s,i=this,o=!1,t=this;this.params.draggable&&(e.on(this.container,"mousemove",function(e){if(!o)return!1;t.transX-=(n-e.pageX)/t.scale,t.transY-=(s-e.pageY)/t.scale,t._applyTransform(),n=e.pageX,s=e.pageY}),e.on(this.container,"mousedown",function(e){return o=!0,n=e.pageX,s=e.pageY,!1}),e.on(document.body,"mouseup",function(){o=!1})),this.params.zoomOnScroll&&e.on(this.container,"wheel",function(e){n=0,n=(e.deltaY||-e.wheelDelta||e.detail)>>10||1,n*=75;var n,s=i.container.getBoundingClientRect(),o=e.pageX-s.left-window.pageXOffset,a=e.pageY-s.top-window.pageYOffset,r=Math.pow(1+t.params.zoomOnScrollSpeed/1e3,-1.5*n);t.tooltip&&t.tooltip.hide(),t._setScale(t.scale*r,o,a),e.preventDefault()})},_setupElementEvents:function(){var s,o,a,t=this,n=this.container;e.on(n,"mousemove",function(e){Math.abs(o-e.pageX)+Math.abs(a-e.pageY)>2&&(s=!0)}),e.delegate(n,"mousedown",".jvm-element",function(e){o=e.pageX,a=e.pageY,s=!1}),e.delegate(n,"mouseover mouseout",".jvm-element",function(e){var n=g(t,this,!0),s=t.params.showTooltip;"mouseover"===e.type?(n.element.hover(!0),t.tooltip.text(n.tooltipText),t._emit(n.event,[e,t.tooltip,n.code]),e.defaultPrevented||s&&t.tooltip.show()):(n.element.hover(!1),s&&t.tooltip.hide())}),e.delegate(n,"mouseup",".jvm-element",function(){var o,n=g(t,this);!s&&("region"===n.type&&t.params.regionsSelectable||"marker"===n.type&&t.params.markersSelectable)&&(o=n.element,t.params[n.type+"sSelectableOne"]&&t._clearSelected(n.type+"s"),n.element.isSelected?o.select(!1):o.select(!0),t._emit(n.event,[n.code,o.isSelected,t._getSelected(n.type+"s")]))}),e.delegate(n,"click",".jvm-element",function(e){var n=g(t,this),s=n.type,o=n.code;t._emit("region"===s?i.onRegionClick:i.onMarkerClick,[e,o])})},_setupZoomButtons:function(){var s=this,t=this,o=n("div","jvm-zoom-btn jvm-zoomin","&#43;",!0),i=n("div","jvm-zoom-btn jvm-zoomout","&#x2212",!0);this.container.appendChild(o),this.container.appendChild(i),e.on(o,"click",function(){s._setScale(t.scale*t.params.zoomStep,t.width/2,t.height/2,!1,t.params.zoomAnimate)}),e.on(i,"click",function(){s._setScale(t.scale/t.params.zoomStep,t.width/2,t.height/2,!1,t.params.zoomAnimate)})},_setupContainerTouchEvents:function(){var n,s,o,i,a,r,c,t=this,l=function(e){var d,u,h,m,f,l=e.touches;"touchstart"==e.type&&(n=0),1==l.length?(1==n&&(m=t.transX,f=t.transY,t.transX-=(r-l[0].pageX)/t.scale,t.transY-=(c-l[0].pageY)/t.scale,t.tooltip.hide(),t._applyTransform(),m==t.transX&&f==t.transY||e.preventDefault()),r=l[0].pageX,c=l[0].pageY):2==l.length&&(2==n?(h=Math.sqrt(Math.pow(l[0].pageX-l[1].pageX,2)+Math.pow(l[0].pageY-l[1].pageY,2))/a,t._setScale(i*h,s,o),t.tooltip.hide(),e.preventDefault()):(u=t.container.selector.getBoundingClientRect(),d={top:u.top+window.scrollY,left:u.left+window.scrollX},s=l[0].pageX>l[1].pageX?l[1].pageX+(l[0].pageX-l[1].pageX)/2:l[0].pageX+(l[1].pageX-l[0].pageX)/2,o=l[0].pageY>l[1].pageY?l[1].pageY+(l[0].pageY-l[1].pageY)/2:l[0].pageY+(l[1].pageY-l[0].pageY)/2,s-=d.left,o-=d.top,i=t.scale,a=Math.sqrt(Math.pow(l[0].pageX-l[1].pageX,2)+Math.pow(l[0].pageY-l[1].pageY,2)))),n=l.length};e.on(t.container,"touchstart",l),e.on(t.container,"touchmove",l)},_createRegions:function(){var e,n;for(e in this._regionLabelsGroup=this._regionLabelsGroup||this.canvas.createGroup("jvm-regions-labels-group"),this.mapData.paths)n=new E({map:this,code:e,path:this.mapData.paths[e].path,style:t({},this.params.regionStyle),labelStyle:this.params.regionLabelStyle,labelsGroup:this._regionLabelsGroup,label:this.params.labels&&this.params.labels.regions}),this.regions[e]={config:this.mapData.paths[e],element:n}},_createLines:function(e,n,s){void 0===s&&(s=!1);var o,i,c,l,a=!1,r=!1;for(c in this.linesGroup=this.linesGroup||this.canvas.createGroup("jvm-lines-group"),e){o=e[c];for(l in n)i=s?n[l].config:n[l],i.name===o.from&&(a=this.getMarkerPosition(i)),i.name===o.to&&(r=this.getMarkerPosition(i));!1!==a&&!1!==r&&(this.lines[f(o.from,o.to)]=new k({index:c,map:this,style:t({initial:this.params.lineStyle},{initial:o.style||{}},!0),x1:a.x,y1:a.y,x2:r.x,y2:r.y,group:this.linesGroup,config:o}))}},_createMarkers:function(e,n){var s,o,i,a,r,c=this;for(o in void 0===e&&(e={}),void 0===n&&(n=!1),this._markersGroup=this._markersGroup||this.canvas.createGroup("jvm-markers-group"),this._markerLabelsGroup=this._markerLabelsGroup||this.canvas.createGroup("jvm-markers-labels-group"),e)if(s=e[o],i=this.getMarkerPosition(s),a=s.coords.join(":"),i){if(n){if(Object.keys(this.markers).filter(function(e){return c.markers[e]._uid===a}).length)continue;o=Object.keys(this.markers).length}r=new v({index:o,map:this,style:t(this.params.markerStyle,{initial:s.style||{}},!0),label:this.params.labels&&this.params.labels.markers,labelsGroup:this._markerLabelsGroup,cx:i.x,cy:i.y,group:this._markersGroup,marker:s,isRecentlyCreated:n}),this.markers[o]&&this.removeMarkers([o]),this.markers[o]={_uid:a,config:s,element:r}}},_createSeries:function(){for(e in this.series={markers:[],regions:[]},this.params.series)for(var e,t=0;t<this.params.series[e].length;t++)this.series[e][t]=new B(this.params.series[e][t],this[e],this)},_applyTransform:function(){var e,t,n,s;this.defaultWidth*this.scale<=this.width?(e=(this.width-this.defaultWidth*this.scale)/(2*this.scale),n=(this.width-this.defaultWidth*this.scale)/(2*this.scale)):(e=0,n=(this.width-this.defaultWidth*this.scale)/this.scale),this.defaultHeight*this.scale<=this.height?(t=(this.height-this.defaultHeight*this.scale)/(2*this.scale),s=(this.height-this.defaultHeight*this.scale)/(2*this.scale)):(t=0,s=(this.height-this.defaultHeight*this.scale)/this.scale),this.transY>t?this.transY=t:this.transY<s&&(this.transY=s),this.transX>e?this.transX=e:this.transX<n&&(this.transX=n),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this.markers&&this._repositionMarkers(),this.lines&&this._repositionLines(),this._repositionLabels()},_resize:function(){var e=this.baseScale;this.width/this.height>this.defaultWidth/this.defaultHeight?(this.baseScale=this.height/this.defaultHeight,this.baseTransX=Math.abs(this.width-this.defaultWidth*this.baseScale)/(2*this.baseScale)):(this.baseScale=this.width/this.defaultWidth,this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale)),this.scale*=this.baseScale/e,this.transX*=this.baseScale/e,this.transY*=this.baseScale/e},_setScale:function(e,t,n,s,o){var l,d,u,h,m,f,p,g,v,b,a=this,c=0,r=Math.abs(Math.round(60*(e-this.scale)/Math.max(e,this.scale)));e>this.params.zoomMax*this.baseScale?e=this.params.zoomMax*this.baseScale:e<this.params.zoomMin*this.baseScale&&(e=this.params.zoomMin*this.baseScale),void 0!==t&&void 0!==n&&(h=e/this.scale,s?(l=t+this.defaultWidth*(this.width/(this.defaultWidth*e))/2,d=n+this.defaultHeight*(this.height/(this.defaultHeight*e))/2):(l=this.transX-(h-1)/e*t,d=this.transY-(h-1)/e*n)),o&&r>0?(f=this.scale,v=(e-f)/r,m=this.transX*this.scale,u=this.transY*this.scale,g=(l*e-m)/r,p=(d*e-u)/r,b=setInterval(function(){c+=1,a.scale=f+v*c,a.transX=(m+g*c)/a.scale,a.transY=(u+p*c)/a.scale,a._applyTransform(),c==r&&(clearInterval(b),a._emit(i.onViewportChange,[a.scale,a.transX,a.transY]))},10)):(this.transX=l,this.transY=d,this.scale=e,this._applyTransform(),this._emit(i.onViewportChange,[this.scale,this.transX,this.transY]))},setFocus:function(e){if(s=this,void 0===e&&(e={}),n=[],e.region?n.push(e.region):e.regions&&(n=e.regions),n.length)return n.forEach(function(e){if(s.regions[e]){var n=s.regions[e].element.shape.getBBox();n&&(t=void 0===t?n:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.max(t.x+t.width,n.x+n.width)-Math.min(t.x,n.x),height:Math.max(t.y+t.height,n.y+n.height)-Math.min(t.y,n.y)})}}),this._setScale(Math.min(this.width/t.width,this.height/t.height),-(t.x+t.width/2),-(t.y+t.height/2),!0,e.animate);if(e.coords){var t,n,s,o=this.coordsToPoint(e.coords[0],e.coords[1]),i=this.transX-o.x/this.scale,a=this.transY-o.y/this.scale;return this._setScale(e.scale*this.baseScale,i,a,!0,e.animate)}},updateSize:function(){this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this._resize(),this.canvas.setSize(this.width,this.height),this._applyTransform()},coordsToPoint:function(e,t){var n,s,i,a=o.maps[this.params.map].projection,r=a.centralMeridian;return n=m[a.type](e,t,r),!!(i=this.getInsetForPoint(n.x,n.y))&&(s=i.bbox,n.x=(n.x-s[0].x)/(s[1].x-s[0].x)*i.width*this.scale,n.y=(n.y-s[0].y)/(s[1].y-s[0].y)*i.height*this.scale,{x:n.x+this.transX*this.scale+i.left*this.scale,y:n.y+this.transY*this.scale+i.top*this.scale})},getInsetForPoint:function(e,t){var n,s,i=o.maps[this.params.map].insets;for(n=0;n<i.length;n++)if(e>(s=i[n].bbox)[0].x&&e<s[1].x&&t>s[0].y&&t<s[1].y)return i[n]},getMarkerPosition:function(e){var t=e.coords;return o.maps[this.params.map].projection?this.coordsToPoint.apply(this,t):{x:t[0]*this.scale+this.transX*this.scale,y:t[1]*this.scale+this.transY*this.scale}},_repositionLines:function(){var e,s,o,t=!1,n=!1;for(s in this.lines){for(o in this.markers)e=this.markers[o],e.config.name===this.lines[s].config.from&&(t=this.getMarkerPosition(e.config)),e.config.name===this.lines[s].config.to&&(n=this.getMarkerPosition(e.config));!1!==t&&!1!==n&&this.lines[s].setStyle({x1:t.x,y1:t.y,x2:n.x,y2:n.y})}},_repositionMarkers:function(){var e,t;for(t in this.markers)!1!==(e=this.getMarkerPosition(this.markers[t].config))&&this.markers[t].element.setStyle({cx:e.x,cy:e.y})},_repositionLabels:function(){var t,n,e=this.params.labels;if(e){if(e.regions)for(t in this.regions)this.regions[t].element.updateLabelPosition();if(e.markers)for(n in this.markers)this.markers[n].element.updateLabelPosition()}}},c=function(){function t(e,t){this.node=this._createElement(e),t&&this.set(t)}var e=t.prototype;return e._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},e.addClass=function(e){this.node.setAttribute("class",e)},e.getBBox=function(){return this.node.getBBox()},e.set=function(e,t){if("object"==typeof e)for(var n in e)this.applyAttr(n,e[n]);else this.applyAttr(e,t)},e.get=function(e){return this.style.initial[e]},e.applyAttr=function(e,t){this.node.setAttribute(e.replace(/[\w]([A-Z])/g,function(e){return e[0]+"-"+e[1]}).toLowerCase(),t)},e.remove=function(){h(this.node)},t}(),r=function(e){function n(t,n,s){var o;return void 0===s&&(s={}),(o=e.call(this,t,n)||this).isHovered=!1,o.isSelected=!1,o.style=s,o.style.current={},o.updateStyle(),o}s(n,e);var o=n.prototype;return o.setStyle=function(e,n){var s;"object"==typeof e?t(this.style.current,e):t(this.style.current,((s={})[e]=n,s)),this.updateStyle()},o.updateStyle=function(){var e={};t(e,this.style.initial),t(e,this.style.current),this.isHovered&&t(e,this.style.hover),this.isSelected&&(t(e,this.style.selected),this.isHovered&&t(e,this.style.selectedHover)),this.set(e)},n}(c),L=function(e){function t(t,n){return e.call(this,"text",t,n)||this}return s(t,e),t.prototype.applyAttr=function(t,n){"text"===t?this.node.textContent=n:e.prototype.applyAttr.call(this,t,n)},t}(r),R=function(e){function t(t,n){return e.call(this,"image",t,n)||this}return s(t,e),t.prototype.applyAttr=function(t,n){var s;"image"===t?("object"==typeof n?(s=n.url,this.offset=n.offset||[0,0]):(s=n,this.offset=[0,0]),this.node.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.width=23,this.height=23,this.applyAttr("width",this.width),this.applyAttr("height",this.height),this.applyAttr("x",this.cx-this.width/2+this.offset[0]),this.applyAttr("y",this.cy-this.height/2+this.offset[1])):"cx"==t?(this.cx=n,this.width&&this.applyAttr("x",n-this.width/2+this.offset[0])):"cy"==t?(this.cy=n,this.height&&this.applyAttr("y",n-this.height/2+this.offset[1])):e.prototype.applyAttr.apply(this,arguments)},t}(r),P=function(e){function n(t){var n;return(n=e.call(this,"svg")||this)._container=t,n._defsElement=new c("defs"),n._rootElement=new c("g",{id:"jvm-regions-group"}),n.node.appendChild(n._defsElement.node),n.node.appendChild(n._rootElement.node),n._container.appendChild(n.node),n}s(n,e);var t=n.prototype;return t.setSize=function(e,t){this.node.setAttribute("width",e),this.node.setAttribute("height",t)},t.applyTransformParams=function(e,t,n){this._rootElement.node.setAttribute("transform","scale("+e+") translate("+t+", "+n+")")},t.createPath=function(e,t){var n=new r("path",e,t);return n.node.setAttribute("fill-rule","evenodd"),this.add(n)},t.createCircle=function(e,t,n){var s=new r("circle",e,t);return this.add(s,n)},t.createLine=function(e,t,n){var s=new r("line",e,t);return this.add(s,n)},t.createText=function(e,t,n){var s=new L(e,t);return this.add(s,n)},t.createImage=function(e,t,n){var s=new R(e,t);return this.add(s,n)},t.createGroup=function(e){var t=new c("g");return this.node.appendChild(t.node),e&&(t.node.id=e),t.canvas=this,t},t.add=function(e,t){return(t=t||this._rootElement).node.appendChild(e.node),e},n}(c),H=function(t){function i(e){var s=t.call(this)||this,o=n("div","jvm-tooltip");return s._map=e,s._tooltip=document.body.appendChild(o),s._bindEventListeners(),_(s)||_(s)}s(i,t);var o=i.prototype;return o._bindEventListeners=function(){var t=this;e.on(this._map.container,"mousemove",function(e){if(t._tooltip.classList.contains("active")){var o,i,a=(o=t._map.container,i="#jvm-regions-group",Element.prototype.querySelector.call(o,i)).getBoundingClientRect(),r=t._tooltip.getBoundingClientRect(),s=r.height,c=r.width,l=e.clientY<=a.top+s+5,d=e.pageY-s-5,n=e.pageX-c-5;l&&(d+=s+5,n-=10),e.clientX<a.left+c+5&&(n=e.pageX+5+2,l&&(n+=10)),t.css({top:d+"px",left:n+"px"})}})},o.getElement=function(){return this._tooltip},o.show=function(){this._tooltip.classList.add("active")},o.hide=function(){this._tooltip.classList.remove("active")},o.text=function(e,t){void 0===t&&(t=!1);var n=t?"innerHTML":"textContent";if(!e)return this._tooltip[n];this._tooltip[n]=e},o.css=function(e){for(var t in e)this._tooltip.style[t]=e[t];return this},i}(u),I=function(){function t(e,t){var n=e.scale,s=e.values;this._scale=n,this._values=s,this._fromColor=this.hexToRgb(n[0]),this._toColor=this.hexToRgb(n[1]),this._map=t,this.setMinMaxValues(s),this.visualize()}var e=t.prototype;return e.setMinMaxValues=function(e){for(var t in this.min=Number.MAX_VALUE,this.max=0,e)(t=parseFloat(e[t]))>this.max&&(this.max=t),t<this.min&&(this.min=t)},e.visualize=function(){var e,n,t={};for(n in this._values)e=parseFloat(this._values[n]),isNaN(e)||(t[n]=this.getValue(e));this.setAttributes(t)},e.setAttributes=function(e){for(var t in e)this._map.regions[t]&&this._map.regions[t].element.setStyle("fill",e[t])},e.getValue=function(e){for(var n,s="#",t=0;t<3;t++)s+=(1===(n=Math.round(this._fromColor[t]+(this._toColor[t]-this._fromColor[t])*((e-this.min)/(this.max-this.min))).toString(16)).length?"0":"")+n;return s},e.hexToRgb=function(e){var t=0,n=0,s=0;return 4==e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],s="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],s="0x"+e[5]+e[6]),[parseInt(t),parseInt(n),parseInt(s)]},t}(),o=function(){function o(e){var n=this;if(void 0===e&&(e={}),this.params=t(o.defaults,e,!0),!o.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+e.map);this.mapData=o.maps[this.params.map],this.regions={},this.markers={},this.lines={},this.defaultWidth=this.mapData.width,this.defaultHeight=this.mapData.height,this.height=0,this.width=0,this.scale=1,this.baseScale=1,this.transX=0,this.transY=0,this.baseTransX=0,this.baseTransY=0,"loading"!==document.readyState?this._init():window.addEventListener("DOMContentLoaded",function(){return n._init()})}var s=o.prototype;return s._init=function(){var e=this.params;this.container=S(e.selector),this.container.classList.add("jvm-container"),this.canvas=new P(this.container),this.setBackgroundColor(e.backgroundColor),this._createRegions(),this.updateSize(),this._createLines(e.lines||{},e.markers||{}),this._createMarkers(e.markers),this._repositionLabels(),this._setupContainerEvents(),this._setupElementEvents(),e.zoomButtons&&this._setupZoomButtons(),e.showTooltip&&(this.tooltip=new H(this)),e.selectedRegions&&this._setSelected("regions",e.selectedRegions),e.selectedMarkers&&this._setSelected("markers",e.selectedMarkers),e.focusOn&&this.setFocus(e.focusOn),e.visualizeData&&(this.dataVisualization=new I(e.visualizeData,this)),e.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&this._setupContainerTouchEvents(),e.series&&(this.container.appendChild(this.legendHorizontal=n("div","jvm-series-container jvm-series-h")),this.container.appendChild(this.legendVertical=n("div","jvm-series-container jvm-series-v")),this._createSeries()),this._emit(i.onLoaded,[this])},s._emit=function(e,t){for(var n in i)i[n]===e&&"function"==typeof this.params[n]&&this.params[n].apply(this,t)},s.setBackgroundColor=function(e){this.container.style.backgroundColor=e},s._getSelected=function(e){var t,n=[];for(t in this[e])this[e][t].element.isSelected&&n.push(t);return n},s._setSelected=function(e,t){var n=this;t.forEach(function(t){n[e][t]&&n[e][t].element.select(!0)})},s._clearSelected=function(e){var t=this;this._getSelected(e).forEach(function(n){t[e][n].element.select(!1)})},s.getSelectedRegions=function(){return this._getSelected("regions")},s.clearSelectedRegions=function(){this._clearSelected("regions")},s.getSelectedMarkers=function(){return this._getSelected("markers")},s.clearSelectedMarkers=function(){this._clearSelected("markers")},s.addMarkers=function(e){if(Array.isArray(e))return this._createMarkers(e,!0);this._createMarkers([e],!0)},s.removeMarkers=function(e){var t=this;e||(e=Object.keys(this.markers)),e.forEach(function(e){t.markers[e].element.remove(),delete t.markers[e]})},s.addLine=function(e,t,n){void 0===n&&(n={}),console.warn("`addLine` method is deprecated, please use `addLines` instead."),this._createLines([{from:e,to:t,style:n}],this.markers,!0)},s.addLines=function(e){var t=this._getLinesAsUids();Array.isArray(e)||(e=[e]),this._createLines(e.filter(function(e){return!(t.indexOf(f(e.from,e.to))>-1)}),this.markers,!0)},s.removeLines=function(e){var t=this;(e=Array.isArray(e)?e.map(function(e){return f(e.from,e.to)}):this._getLinesAsUids()).forEach(function(e){t.lines[e].dispose(),delete t.lines[e]})},s._getLinesAsUids=function(){return Object.keys(this.lines)},s.removeLine=function(e,t){console.warn("`removeLine` method is deprecated, please use `removeLines` instead.");var n=f(e,t);this.lines.hasOwnProperty(n)&&(this.lines[n].element.remove(),delete this.lines[n])},s.reset=function(){for(t in this.series)for(var t,e=0;e<this.series[t].length;e++)this.series[t][e].clear();this.legendHorizontal&&(h(this.legendHorizontal),this.legendHorizontal=null),this.legendVertical&&(h(this.legendVertical),this.legendVertical=null),this.scale=this.baseScale,this.transX=this.baseTransX,this.transY=this.baseTransY,this._applyTransform(),this.clearSelectedMarkers(),this.clearSelectedRegions(),this.removeMarkers()},s.destroy=function(t){var n=this;void 0===t&&(t=!0),e.flush(),this.tooltip.dispose(),this._emit(i.onDestroyed),t&&Object.keys(this).forEach(function(e){try{delete n[e]}catch{}})},s.extend=function(e,t){if("function"==typeof this[e])throw new Error("The method ["+e+"] already exists internally please use another name.");o.prototype[e]=t},o}();return o.maps={},o.defaults={map:"world",backgroundColor:"transparent",draggable:!0,zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,zoomMax:12,zoomMin:1,zoomAnimate:!0,showTooltip:!0,zoomStep:1.5,bindTouchEvents:!0,lineStyle:{stroke:"#808080",strokeWidth:1,strokeLinecap:"round"},markersSelectable:!1,markersSelectableOne:!1,markerStyle:{initial:{r:7,fill:"#374151",fillOpacity:1,stroke:"#FFF",strokeWidth:5,strokeOpacity:.5},hover:{fill:"#3cc0ff",cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{fontFamily:"Verdana",fontSize:12,fontWeight:500,cursor:"default",fill:"#374151"},hover:{cursor:"pointer"},selected:{},selectedHover:{}},regionsSelectable:!1,regionsSelectableOne:!1,regionStyle:{initial:{fill:"#dee2e8",fillOpacity:1,stroke:"none",strokeWidth:0},hover:{fillOpacity:.7,cursor:"pointer"},selected:{fill:"#9ca3af"},selectedHover:{}},regionLabelStyle:{initial:{fontFamily:"Verdana",fontSize:"12",fontWeight:"bold",cursor:"default",fill:"#35373e"},hover:{cursor:"pointer"}}},Object.assign(o.prototype,z),y=function(){function e(e){if(void 0===e&&(e={}),!e.selector)throw new Error("Selector is not given.");return new o(e)}return e.addMap=function(e,t){o.maps[e]=t},e}(),window.jsVectorMap=y})