(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.dropdown_input=t())})(this,function(){"use strict";const s=27,a=9;typeof navigator!="undefined"&&/Mac/.test(navigator.userAgent);const o="[̀-ͯ·ʾʼ]",t={},n={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let e in n){let s=n[e]||"";for(let n=0;n<s.length;n++){let o=s.substring(n,n+1);t[o]=e}}new RegExp(Object.keys(t).join("|")+"|"+o,"gu");const i=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},e=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(r(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},r=e=>typeof e=="string"&&e.indexOf("<")>-1,d=(e,...t)=>{var n=l(t);e=c(e),e.map(e=>{n.map(t=>{e.classList.add(t)})})},l=e=>{var t=[];return i(e,e=>{typeof e=="string"&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},c=e=>(Array.isArray(e)||(e=[e]),e),u=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},h=(e,t,n,s)=>{e.addEventListener(t,n,s)};function m(){const t=this;t.settings.shouldOpen=!0,t.hook("before","setup",()=>{t.focus_node=t.control,d(t.control_input,"dropdown-input");const n=e('<div class="dropdown-input-wrap">');n.append(t.control_input),t.dropdown.insertBefore(n,t.dropdown.firstChild);const s=e('<input class="items-placeholder" tabindex="-1" />');s.placeholder=t.settings.placeholder||"",t.control.append(s)}),t.on("initialize",()=>{t.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case s:t.isOpen&&(u(e,!0),t.close()),t.clearActiveItems();return;case a:t.focus_node.tabIndex=-1;break}return t.onKeyDown.call(t,e)}),t.on("blur",()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex}),t.on("dropdown_open",()=>{t.control_input.focus()});const e=t.onBlur;t.hook("instead","onBlur",n=>{if(n&&n.relatedTarget==t.control_input)return;return e.call(t)}),h(t.control_input,"blur",()=>t.onBlur()),t.hook("before","close",()=>{if(!t.isOpen)return;t.focus_node.focus({preventScroll:!0})})})}return m})