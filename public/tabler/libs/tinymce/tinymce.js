(function(){"use strict";Jr=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},rg=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ig=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},ng=function(e,t){return ws(function(n,s){return e.eq(t(n),t(s))})},ws=function(e){return{eq:e}},tg=ws(function(e,t){return e===t}),Zp=tg,tu=function(e){return ws(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!e.eq(t[s],n[s]))return!1;return!0})},Gp=function(e,t){return ng(tu(e),function(e){return ig(e,t)})},Rd=function(e){return ws(function(t,n){var s,i,a,o=Object.keys(t),r=Object.keys(n);if(!Gp(Zp).eq(o,r))return!1;a=o.length;for(s=0;s<a;s++)if(i=o[s],!e.eq(t[i],n[i]))return!1;return!0})},qi=ws(function(e,t){if(e===t)return!0;var n=Jr(e),s=Jr(t);return n===s&&(rg(n)?e===t:n==="array"?tu(qi).eq(e,t):n==="object"&&Rd(qi).eq(e,t))});const $H=Object.getPrototypeOf,qp=(e,t,n)=>{var s;return!!n(e,t.prototype)||((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},BH=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&qp(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},vd=e=>t=>BH(t)===e,gd=e=>t=>typeof t===e,Vp=e=>t=>e===t,Si=(e,t)=>ie(e)&&qp(e,t,(e,t)=>$H(e)===t),h=vd("string"),ie=vd("object"),Bp=e=>Si(e,Object),R=vd("array"),Yt=Vp(null),sn=gd("boolean"),ae=Vp(void 0),D=e=>e==null,r=e=>!D(e),_=gd("function"),$e=gd("number"),Yn=(e,t)=>{if(R(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},g=()=>{},En=(e,t)=>(...n)=>e(t.apply(null,n)),Hp=(e,t)=>n=>e(t(n)),a=e=>()=>e,se=e=>e,IH=(e,t)=>e===t;function d(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const ci=e=>t=>!e(t),zH=e=>()=>{throw new Error(e)},Ql=e=>e(),Io=e=>{e()},S=a(!1),N=a(!0);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return r(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const Vl=Array.prototype.slice,AH=Array.prototype.indexOf,kH=Array.prototype.push,Lp=(e,t)=>AH.call(e,t),EH=(t,n)=>{const s=Lp(t,n);return s===-1?e.none():e.some(s)},O=(e,t)=>Lp(e,t)>-1,T=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},b=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s},o=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},Tp=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},zo=(e,t)=>{const n=[],s=[];for(let o=0,a=e.length;o<a;o++){const i=e[o],r=t(i,o)?n:s;r.push(i)}return{pass:n,fail:s}},m=(e,t)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];t(o,s)&&n.push(o)}return n},di=(e,t,n)=>(Tp(e,(e,s)=>{n=t(n,e,s)}),n),je=(e,t,n)=>(o(e,(e,s)=>{n=t(n,e,s)}),n),Fp=(t,n,s)=>{for(let o=0,a=t.length;o<a;o++){const i=t[o];if(n(i,o))return e.some(i);if(s(i,o))break}return e.none()},I=(e,t)=>Fp(e,t,S),To=(t,n)=>{for(let s=0,o=t.length;s<o;s++){const i=t[s];if(n(i,s))return e.some(s)}return e.none()},Mp=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!R(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);kH.apply(t,e[n])}return t},ft=(e,t)=>Mp(b(e,t)),qt=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},_o=e=>{const t=Vl.call(e,0);return t.reverse(),t},cl=(e,t)=>m(e,e=>!O(t,e)),rl=(e,t)=>{const n={};for(let s=0,i=e.length;s<i;s++){const o=e[s];n[String(o)]=t(o,s)}return n},Qn=(e,t)=>{const n=Vl.call(e,0);return n.sort(t),n},Hi=(t,n)=>n>=0&&n<t.length?e.some(t[n]):e.none(),ue=e=>Hi(e,0),on=e=>Hi(e,e.length-1),be=_(Array.from)?Array.from:e=>Vl.call(e),ts=(t,n)=>{for(let e=0;e<t.length;e++){const s=n(t[e],e);if(s.isSome())return s}return e.none()},CH=(e,t)=>{const n=[],s=_(t)?e=>T(n,n=>t(n,e)):e=>O(n,e);for(let t=0,i=e.length;t<i;t++){const o=e[t];s(o)||n.push(o)}return n},fe=Object.keys,wH=Object.hasOwnProperty,x=(e,t)=>{const n=fe(e);for(let s=0,i=n.length;s<i;s++){const o=n[s],a=e[o];t(a,o)}},Bi=(e,t)=>jH(e,(e,n)=>({k:n,v:t(e,n)})),jH=(e,t)=>{const n={};return x(e,(e,s)=>{const o=t(e,s);n[o.k]=o.v}),n},Qc=e=>(t,n)=>{e[n]=t},wp=(e,t,n,s)=>{x(e,(e,o)=>{(t(e,o)?n:s)(e,o)})},bH=(e,t)=>{const n={},s={};return wp(e,t,Qc(n),Qc(s)),{t:n,f:s}},co=(e,t)=>{const n={};return wp(e,t,Qc(n),g),n},Kc=(e,t)=>{const n=[];return x(e,(e,s)=>{n.push(t(e,s))}),n},Uc=e=>Kc(e,se),E=(t,n)=>f(t,n)?e.from(t[n]):e.none(),f=(e,t)=>wH.call(e,t),ds=(e,t)=>f(e,t)&&e[t]!==void 0&&e[t]!==null,vH=(e,t,n=qi)=>Rd(n).eq(e,t),yp=e=>{const t={};return o(e,e=>{t[e]={}}),fe(t)},jp=e=>e.length!==void 0,Pc=Array.isArray,gH=e=>{if(Pc(e))return e;const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t},ta=(e,t,n)=>{if(!e)return!1;if(n=n||e,jp(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(f(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Fc=(e,t)=>{const n=[];return ta(e,(s,o)=>{n.push(t(s,o,e))}),n},no=(e,t)=>{const n=[];return ta(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},pH=(e,t)=>{if(e)for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1},aa=(e,t,n,s)=>{let o=ae(n)?e[0]:n;for(let n=0;n<e.length;n++)o=t.call(s,o,e[n],n);return o},vp=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},ln=e=>e[e.length-1],bn=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},fH=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,i=e.isiOS()&&!o,r=e.isiOS()||e.isAndroid(),u=r||s("(pointer:coarse)"),c=o||!i&&r&&s("(min-device-width:768px)"),l=i||r&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,h=!l&&!c&&!d;return{isiPad:a(o),isiPhone:a(i),isTablet:a(c),isPhone:a(l),isTouch:a(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:a(d),isDesktop:a(h)}},mH=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},hH=(e,t)=>{const n=mH(e,t);if(!n)return{major:0,minor:0};const s=e=>Number(t.replace(n,"$"+e));return Qr(s(1),s(2))},uH=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?pp():hH(e,n)},pp=()=>Qr(0,0),Qr=(e,t)=>({major:e,minor:t}),Hs={nu:Qr,detect:uH,unknown:pp},lH=(e,t)=>ts(t.brands,t=>{const n=t.brand.toLowerCase();return I(e,e=>{var t;return n===((t=e.brand)===null||t===void 0?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:Hs.nu(parseInt(t.version,10),0)}))}),mp=(e,t)=>{const n=String(t).toLowerCase();return I(e,e=>e.search(n))},cH=(e,t)=>mp(e,t).map(e=>{const n=Hs.detect(e.versionRegexes,t);return{current:e.name,version:n}}),iH=(e,t)=>mp(e,t).map(e=>{const n=Hs.detect(e.versionRegexes,t);return{current:e.name,version:n}}),nH=(e,t)=>e.substring(t),lp=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,eH=(e,t)=>K(e,t)?nH(e,t.length):e,Z=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1&&(!!ae(s)||o+t.length<=s)},K=(e,t)=>lp(e,t,0),ap=(e,t)=>lp(e,t,e.length-t.length),_r=e=>t=>t.replace(e,""),fs=_r(/^\s+|\s+$/g),JP=_r(/^\s+/g),ip=_r(/\s+$/g),et=e=>e.length>0,Es=e=>!et(e),GP=(e,t)=>t<=0?"":new Array(t+1).join(e),tr=(t,n=10)=>{const s=parseInt(t,n);return isNaN(s)?e.none():e.some(s)},Or=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,jt=e=>t=>Z(t,e),UP=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Z(e,"edge/")&&Z(e,"chrome")&&Z(e,"safari")&&Z(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Or],search:e=>Z(e,"chrome")&&!Z(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Z(e,"msie")||Z(e,"trident")},{name:"Opera",versionRegexes:[Or,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:jt("firefox")},{name:"Safari",versionRegexes:[Or,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Z(e,"safari")||Z(e,"mobile/"))&&Z(e,"applewebkit")}],WP=[{name:"Windows",search:jt("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Z(e,"iphone")||Z(e,"ipad"),versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jt("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:jt("mac os x"),versionRegexes:[/.*?mac os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jt("linux"),versionRegexes:[]},{name:"Solaris",search:jt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:jt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tp={browsers:a(UP),oses:a(WP)},X6="Edge",G6="Chromium",Y6="IE",q6="Opera",K6="Firefox",W6="Safari",$P=()=>N6({current:void 0,version:Hs.unknown()}),N6=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isEdge:t(X6),isChromium:t(G6),isIE:t(Y6),isOpera:t(q6),isFirefox:t(K6),isSafari:t(W6)}},D6={unknown:$P,nu:N6,edge:a(X6),chromium:a(G6),ie:a(Y6),opera:a(q6),firefox:a(K6),safari:a(W6)},T6="Windows",C6="iOS",x6="Android",O6="Linux",p6="macOS",f6="Solaris",m6="FreeBSD",h6="ChromeOS",HP=()=>o6({current:void 0,version:Hs.unknown()}),o6=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isWindows:t(T6),isiOS:t(C6),isAndroid:t(x6),isMacOS:t(p6),isLinux:t(O6),isSolaris:t(f6),isFreeBSD:t(m6),isChromeOS:t(h6)}},s6={unknown:HP,nu:o6,windows:a(T6),ios:a(C6),android:a(x6),linux:a(O6),macos:a(p6),solaris:a(f6),freebsd:a(m6),chromeos:a(h6)},PP=(e,t,n)=>{const s=tp.browsers(),a=tp.oses(),o=t.bind(e=>lH(s,e)).orThunk(()=>cH(s,e)).fold(D6.unknown,D6.nu),i=iH(a,e).fold(s6.unknown,s6.nu),r=fH(i,o,e,n);return{browser:o,os:i,deviceType:r}},RP={detect:PP},NP=e=>window.matchMedia(e).matches;let DP=bn(()=>RP.detect(navigator.userAgent,e.from(navigator.userAgentData),NP));const Ut=()=>DP(),zP=navigator.userAgent,Zc=Ut(),Ye=Zc.browser,at=Zc.os,Zt=Zc.deviceType,TP=zP.indexOf("Windows Phone")!==-1,v={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ye.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ye.isIE(),windowsPhone:TP,browser:{current:Ye.current,version:Ye.version,isChromium:Ye.isChromium,isEdge:Ye.isEdge,isFirefox:Ye.isFirefox,isIE:Ye.isIE,isOpera:Ye.isOpera,isSafari:Ye.isSafari},os:{current:at.current,version:at.version,isAndroid:at.isAndroid,isChromeOS:at.isChromeOS,isFreeBSD:at.isFreeBSD,isiOS:at.isiOS,isLinux:at.isLinux,isMacOS:at.isMacOS,isSolaris:at.isSolaris,isWindows:at.isWindows},deviceType:{isDesktop:Zt.isDesktop,isiPad:Zt.isiPad,isiPhone:Zt.isiPhone,isPhone:Zt.isPhone,isTablet:Zt.isTablet,isTouch:Zt.isTouch,isWebView:Zt.isWebView}},FP=/^\s*|\s*$/g,Jf=e=>D(e)?"":(""+e).replace(FP,""),MP=(e,t)=>t?!!(t==="array"&&Pc(e))||typeof e===t:e!==void 0,_P=(e,t,n={})=>{const s=h(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},yP=f,fP=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const t in s)if(f(s,t)){const n=s[t];n!==void 0&&(e[t]=n)}}return e},Gf=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),ta(e,(e,o)=>t.call(s,e,o,n)!==!1&&(Gf(e,t,n,s),!0)))},mP=(e,t=window)=>{const n=e.split(".");for(let e=0,s=n.length;e<s;e++)if(t=t[n[e]],!t)break;return t},uP=(e,t)=>R(e)?e:e===""?[]:Fc(e.split(t||","),Jf),dP=e=>{const t=v.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e},i={trim:Jf,isArray:Pc,is:MP,toArray:gH,makeMap:_P,each:ta,map:Fc,grep:no,inArray:pH,hasOwn:yP,extend:fP,walk:Gf,resolve:mP,explode:uP,_addCacheSuffix:dP},qn=(e,t,n=IH)=>e.exists(e=>n(e,t)),lP=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},re=(t,n,s)=>t.isSome()&&n.isSome()?e.some(s(t.getOrDie(),n.getOrDie())):e.none(),BR=(t,n,s,o)=>t.isSome()&&n.isSome()&&s.isSome()?e.some(o(t.getOrDie(),n.getOrDie(),s.getOrDie())):e.none(),So=(t,n)=>t?e.some(n):e.none();typeof window!="undefined"?window:Function("return this;")();const Bf=8,If=9,Rf=11,Do=1,Df=3,k=e=>{const t=e.dom.nodeName;return t.toLowerCase()},Ff=e=>e.dom.nodeType,ti=e=>t=>Ff(t)===e,IR=e=>Ff(e)===Bf||k(e)==="#comment",ve=ti(Do),Ae=ti(Df),DR=ti(If),kR=ti(Rf),$l=e=>t=>ve(t)&&k(t)===e,vf=(e,t,n)=>{if(h(n)||sn(n)||$e(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},$=(e,t,n)=>{vf(e.dom,t,n)},Ct=(e,t)=>{const n=e.dom;x(t,(e,t)=>{vf(n,t,e)})},Te=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},mt=(t,n)=>e.from(Te(t,n)),Qo=(e,t)=>{const n=e.dom;return!!(n&&n.hasAttribute)&&n.hasAttribute(t)},G=(e,t)=>{e.dom.removeAttribute(t)},lR=e=>{const t=e.dom.attributes;return t==null||t.length===0},gf=e=>je(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),Kl=(e,t)=>{const n=Te(e,t);return n===void 0||n===""?[]:n.split(" ")},aR=(e,t,n)=>{const s=Kl(e,t),o=s.concat([n]);return $(e,t,o.join(" ")),!0},oR=(e,t,n)=>{const s=m(Kl(e,t),e=>e!==n);return s.length>0?$(e,t,s.join(" ")):G(e,t),!1},Oo=e=>e.dom.classList!==void 0,nf=e=>Kl(e,"class"),ef=(e,t)=>aR(e,"class",t),J8=(e,t)=>oR(e,"class",t),sR=(e,t)=>O(nf(e),t)?J8(e,t):ef(e,t),lo=(e,t)=>{Oo(e)?e.dom.classList.add(t):ef(e,t)},Q8=e=>{const t=Oo(e)?e.dom.classList:nf(e);t.length===0&&G(e,"class")},Ui=(e,t)=>{if(Oo(e)){const n=e.dom.classList;n.remove(t)}else J8(e,t);Q8(e)},YL=(e,t)=>{const n=Oo(e)?e.dom.classList.toggle(t):sR(e,t);return Q8(e),n},Fd=(e,t)=>Oo(e)&&e.dom.classList.contains(t),eo=e=>e.style!==void 0&&_(e.style.getPropertyValue),$L=(e,t)=>{const s=t||document,n=s.createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return Ys(n.childNodes[0])},VL=(e,t)=>{const n=t||document,s=n.createElement(e);return Ys(s)},PL=(e,t)=>{const n=t||document,s=n.createTextNode(e);return Ys(s)},Ys=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},LL=(t,n,s)=>e.from(t.dom.elementFromPoint(n,s)).map(Ys),t={fromHtml:$L,fromTag:VL,fromText:PL,fromDom:Ys,fromPoint:LL},I8=(e,t)=>{const s=[],o=e=>(s.push(e),t(e));let n=t(e);do n=n.bind(o);while(n.isSome())return s},Le=(e,t)=>{const s=e.dom;if(s.nodeType!==Do)return!1;const n=s;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},H8=e=>e.nodeType!==Do&&e.nodeType!==If&&e.nodeType!==Rf||e.childElementCount===0,kL=(e,n)=>{const s=n===void 0?document:n.dom;return H8(s)?[]:b(s.querySelectorAll(e),t.fromDom)},wL=(n,s)=>{const o=s===void 0?document:s.dom;return H8(o)?e.none():e.from(o.querySelector(n)).map(t.fromDom)},j=(e,t)=>e.dom===t.dom,ut=(e,t)=>{const n=e.dom,s=t.dom;return n!==s&&n.contains(s)},N8=e=>t.fromDom(e.dom.ownerDocument),dt=e=>DR(e)?e:N8(e),_L=e=>t.fromDom(dt(e).dom.documentElement),Fs=e=>t.fromDom(dt(e).dom.defaultView),Ue=n=>e.from(n.dom.parentNode).map(t.fromDom),T8=n=>e.from(n.dom.parentElement).map(t.fromDom),M8=(e,n)=>{const i=_(n)?n:S;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const e=s.parentNode,n=t.fromDom(e);if(o.push(n),i(n)===!0)break;s=e}return o},yL=e=>{const t=t=>m(t,t=>!j(e,t));return Ue(e).map(Y).map(t).getOr([])},Sn=n=>e.from(n.dom.previousSibling).map(t.fromDom),ks=n=>e.from(n.dom.nextSibling).map(t.fromDom),E8=e=>_o(I8(e,Sn)),C8=e=>I8(e,ks),Y=e=>b(e.dom.childNodes,t.fromDom),nr=(n,s)=>{const o=n.dom.childNodes;return e.from(o[s]).map(t.fromDom)},x8=e=>nr(e,0),gu=e=>nr(e,e.dom.childNodes.length-1),O8=e=>e.dom.childNodes.length,jL=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return t.fromDom(n)},hu=e=>kR(e)&&r(e.dom.host),w8=_(Element.prototype.attachShadow)&&_(Node.prototype.getRootNode),gL=a(w8),Ft=w8?e=>t.fromDom(e.dom.getRootNode()):dt,Gd=e=>hu(e)?e:jL(dt(e)),fL=e=>hu(e)?e:t.fromDom(dt(e).dom.body),cL=t=>{const n=Ft(t);return hu(n)?e.some(n):e.none()},rL=e=>t.fromDom(e.dom.host),v8=n=>{if(gL()&&r(n.target)){const e=t.fromDom(n.target);if(ve(e)&&aL(e)&&n.composed&&n.composedPath){const e=n.composedPath();if(e)return ue(e)}}return e.from(n.target)},aL=e=>r(e.dom.shadowRoot),cs=e=>{const n=Ae(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const s=n.ownerDocument;return cL(t.fromDom(n)).fold(()=>s.body.contains(n),Hp(cs,rL))},g8=(e,t,n)=>{if(!h(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);eo(e)&&e.style.setProperty(t,n)},sL=(e,t)=>{eo(e)&&e.style.removeProperty(t)},p8=(e,t,n)=>{const s=e.dom;g8(s,t,n)},ya=(e,t)=>{const n=e.dom;x(t,(e,t)=>{g8(n,t,e)})},Xe=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n),s=o.getPropertyValue(t);return s===""&&!cs(e)?m8(n,t):s},m8=(e,t)=>eo(e)?e.style.getPropertyValue(t):"",la=(t,n)=>{const s=t.dom,o=m8(s,n);return e.from(o).filter(e=>e.length>0)},d8=e=>{const n={},t=e.dom;if(eo(t))for(let e=0;e<t.style.length;e++){const s=t.style.item(e);n[s]=t.style[s]}return n},l8=(e,t)=>{const n=e.dom;sL(n,t),qn(mt(e,"style").map(fs),"")&&G(e,"style")},QN=e=>e.dom.offsetWidth,Me=(e,t)=>{const n=Ue(e);n.each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Rt=(e,t)=>{const n=ks(e);n.fold(()=>{const n=Ue(e);n.each(e=>{H(e,t)})},e=>{Me(e,t)})},r8=(e,t)=>{const n=x8(e);n.fold(()=>{H(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},H=(e,t)=>{e.dom.appendChild(t.dom)},YN=(e,t)=>{Me(e,t),H(t,e)},qN=(e,t)=>{o(t,(n,s)=>{const o=s===0?e:t[s-1];Rt(o,n)})},Jt=(e,t)=>{o(t,t=>{H(e,t)})},ro=e=>{e.dom.textContent="",o(Y(e),e=>{A(e)})},A=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Ot=e=>{const t=Y(e);t.length>0&&qN(e,t),A(e)},BN=(e,n)=>{const o=n||document,s=o.createElement("div");return s.innerHTML=e,Y(t.fromDom(s))},Xm=e=>b(e,t.fromDom),qm=e=>e.dom.innerHTML,Ti=(e,n)=>{const i=N8(e),s=i.dom,o=t.fromDom(s.createDocumentFragment()),a=BN(n,s);Jt(o,a),ro(e),H(e,o)},IN=e=>{const n=t.fromTag("div"),s=t.fromDom(e.dom.cloneNode(!0));return H(n,s),qm(n)},RN=(e,t,n,s,o,i,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:i,raw:a}),NN=e=>{const o=t.fromDom(v8(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),i=En(s,n);return RN(o,e.clientX,e.clientY,n,s,i,e)},DN=(e,t)=>n=>{e(n)&&t(NN(n))},zN=(e,t,n,s,o)=>{const i=DN(n,s);return e.dom.addEventListener(t,i,o),{unbind:d(FN,e,t,i,o)}},TN=(e,t,n,s)=>zN(e,t,n,s,!1),FN=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},pm=(e,t)=>{const n=(n,s)=>pm(e+n,t+s);return{left:e,top:t,translate:n}},Wn=pm,CN=e=>{const t=e.getBoundingClientRect();return Wn(t.left,t.top)},xi=(e,t)=>e!==void 0?e:t!==void 0?t:0,xN=e=>{const o=e.dom.ownerDocument,n=o.body,t=o.defaultView,s=o.documentElement;if(n===e.dom)return Wn(n.offsetLeft,n.offsetTop);const i=xi(t?.pageYOffset,s.scrollTop),a=xi(t?.pageXOffset,s.scrollLeft),r=xi(s.clientTop,n.clientTop),c=xi(s.clientLeft,n.clientLeft);return ad(e).translate(a-c,i-r)},ad=e=>{const t=e.dom,s=t.ownerDocument,n=s.body;return n===t?Wn(n.offsetLeft,n.offsetTop):cs(e)?CN(t):Wn(0,0)},sd=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Wn(n,s)},hm=(e,t,n)=>{const o=n!==void 0?n.dom:document,s=o.defaultView;s&&s.scrollTo(e,t)},dm=(e,t)=>{const n=Ut().browser.isSafari();n&&_(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},ON=t=>{const n=t===void 0?window:t;return Ut().browser.isFirefox()?e.none():e.from(n.visualViewport)},sm=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),nm=e=>{const s=e===void 0?window:e,o=s.document,n=sd(t.fromDom(o));return ON(s).fold(()=>{const e=s.document.documentElement,t=e.clientWidth,o=e.clientHeight;return sm(n.left,n.top,t,o)},e=>sm(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},wN=(e,t)=>m(Y(e),t),Zh=(e,t)=>{let n=[];return o(Y(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(Zh(e,t))}),n};ql=(t,n,s,o,i)=>t(s,o)?e.some(s):_(i)&&i(s)?e.none():n(s,o,i);const St=(n,s,o)=>{let i=n.dom;const a=_(o)?o:S;for(;i.parentNode;){i=i.parentNode;const n=t.fromDom(i);if(s(n))return e.some(n);if(a(n))break}return e.none()},On=(e,t,n)=>{const s=(e,t)=>t(e);return ql(s,St,e,t,n)},_N=(n,s)=>{const o=n.dom;return o.parentNode?yN(t.fromDom(o.parentNode),e=>!j(n,e)&&s(e)):e.none()},yN=(e,n)=>{const s=e=>n(t.fromDom(e)),o=I(e.dom.childNodes,s);return o.map(t.fromDom)},bN=(n,s)=>{const o=n=>{for(let i=0;i<n.childNodes.length;i++){const a=t.fromDom(n.childNodes[i]);if(s(a))return e.some(a);const r=o(n.childNodes[i]);if(r.isSome())return r}return e.none()};return o(n.dom)},Vo=(e,t,n)=>St(e,e=>Le(e,t),n),$o=(e,t)=>wL(t,e),kn=(e,t,n)=>{const s=(e,t)=>Le(e,t);return ql(s,Vo,e,t,n)},Yh=(e,t,n)=>Vo(e,t,n).isSome();class P{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,n,s){if(e){if(!s&&e[t])return e[t];if(e!==this.rootNode){let t=e[n];if(t)return t;for(let s=e.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(t=s[n],t)return t}}}findPreviousNode(e,t){if(e){const n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t)for(let e=n.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return n}const s=e.parentNode;if(s&&s!==this.rootNode)return s}}}const Fn=e=>t=>!!t&&t.nodeType===e,Yo=e=>!!e&&!Object.getPrototypeOf(e),c=Fn(1),Hl=e=>{const t=e.toLowerCase();return e=>r(e)&&e.nodeName.toLowerCase()===t},Pe=e=>{const t=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return O(t,n)}return!1}},Zo=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(c(t)){const s=t.ownerDocument.defaultView;if(s)for(let o=0;o<n.length;o++){const i=s.getComputedStyle(t,null),a=i?i.getPropertyValue(e):null;if(a===n[o])return!0}}return!1}},qh=e=>t=>c(t)&&t.hasAttribute(e),vN=(e,t)=>n=>c(n)&&n.getAttribute(e)===t,Cn=e=>c(e)&&e.hasAttribute("data-mce-bogus"),gN=e=>c(e)&&e.getAttribute("data-mce-bogus")==="all",wt=e=>c(e)&&e.tagName==="TABLE",Uh=e=>t=>{if(c(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},Sl=Pe(["textarea","input"]),s=Fn(3),pN=Fn(4),hN=Fn(7),xt=Fn(8),xs=Fn(9),Ol=Fn(11),F=Hl("br"),Ph=Hl("img"),Ne=Uh("true"),C=Uh("false"),Uo=Pe(["td","th"]),Lh=Pe(["td","th","caption"]),nt=Pe(["video","audio","object","embed"]),uN=Hl("li"),Nn="﻿",W="\xA0",Dh=e=>e===Nn,iN=e=>e.replace(/\uFEFF/g,""),J=(e,t)=>kL(t,e),QD=(t,n)=>{const o=e=>{if(!t(e))throw new Error("Can only get "+n+" value of a "+n+" node");return s(e).getOr("")},s=n=>t(n)?e.from(n.dom.nodeValue):e.none(),i=(e,s)=>{if(!t(e))throw new Error("Can only set raw "+n+" value of a "+n+" node");e.dom.nodeValue=s};return{get:o,getOption:s,set:i}},Ah=QD(Ae,"text"),cr=e=>Ah.get(e),Eh=e=>Ah.getOption(e),GD=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],YD=["td","th"],qD=["thead","tbody","tfoot"],KD=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],UD=["h1","h2","h3","h4","h5","h6"],PD=["li","dd","dt"],RD=["ul","ol","dl"],LD=["pre","script","textarea","style"],DD=["pre"].concat(UD),$t=e=>{let t;return n=>(t=t||rl(e,N),f(t,k(n)))},De=$t(GD),kD=e=>k(e)==="table",el=e=>ve(e)&&!De(e),Gt=e=>ve(e)&&k(e)==="br",fh=$t(KD),qc=$t(RD),ao=$t(PD),ED=$t(qD),io=$t(YD),Yi=$t(LD),OD=$t(DD),fD=e=>OD(e)||el(e),dD=e=>{const s=[];let n=e.dom;for(;n;)s.push(t.fromDom(n)),n=n.lastChild;return s},lD=e=>{const n=J(e,"br"),t=m(dD(e).slice(-1),Gt);n.length===t.length&&o(t,A)},Rc=()=>{const e=t.fromTag("br");return $(e,"data-mce-bogus","1"),e},mn=e=>{ro(e),H(e,Rc())},rD=e=>{gu(e).each(t=>{Sn(t).each(n=>{De(e)&&Gt(t)&&De(n)&&A(t)})})},q=Nn,sa=Dh,vt=iN,oD=c,Jn=s,es=e=>(Jn(e)&&(e=e.parentNode),oD(e)&&e.hasAttribute("data-mce-caret")),Nt=e=>Jn(e)&&sa(e.data),ke=e=>es(e)||Nt(e),ah=e=>e.firstChild!==e.lastChild||!F(e.firstChild),Xz=(e,t)=>{var o;const i=(o=e.ownerDocument)!==null&&o!==void 0?o:document,s=i.createTextNode(q),n=e.parentNode;if(t){const t=e.previousSibling;if(Jn(t)){if(ke(t))return t;if(ga(t))return t.splitText(t.data.length-1)}n?.insertBefore(s,e)}else{const t=e.nextSibling;if(Jn(t)){if(ke(t))return t;if(pa(t))return t.splitText(1),t}e.nextSibling?n?.insertBefore(s,e.nextSibling):n?.appendChild(s)}return s},pc=e=>{const t=e.container();return!!s(t)&&(t.data.charAt(e.offset())===q||e.isAtStart()&&Nt(t.previousSibling))},lc=e=>{const t=e.container();return!!s(t)&&(t.data.charAt(e.offset()-1)===q||e.isAtEnd()&&Nt(t.nextSibling))},Wz=(e,t,n)=>{var i;const a=(i=t.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(Rc().dom);const s=t.parentNode;return n?s?.insertBefore(o,t):t.nextSibling?s?.insertBefore(o,t.nextSibling):s?.appendChild(o),o},pa=e=>Jn(e)&&e.data[0]===q,ga=e=>Jn(e)&&e.data[e.data.length-1]===q,Vz=e=>{var t;const s=e.getElementsByTagName("br"),n=s[s.length-1];Cn(n)&&((t=n.parentNode)===null||t===void 0?void 0:t.removeChild(n))},cc=e=>e&&e.hasAttribute("data-mce-caret")?(Vz(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,$3=e=>es(e.startContainer),V3=Ne,Pz=C,Lz=F,Nz=s,Dz=Pe(["script","style","textarea"]),E3=Pe(["img","input","textarea","hr","iframe","video","audio","object","embed"]),kz=Pe(["table"]),xz=ke,Fe=e=>!xz(e)&&(Nz(e)?!Dz(e.parentNode):E3(e)||Lz(e)||kz(e)||tc(e)),gz=e=>c(e)&&e.getAttribute("unselectable")==="true",tc=e=>!gz(e)&&Pz(e),pz=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(tc(n))return!1;if(V3(n))return!0}return!0},fz=e=>!!tc(e)&&!je(be(e.getElementsByTagName("*")),(e,t)=>e||V3(t),!1),mz=e=>E3(e)||fz(e),f3=(e,t)=>Fe(e)&&pz(e,t),hz=/^[ \t\r\n]*$/,Tn=e=>hz.test(e),uz=e=>" 	".indexOf(e)!==-1,l3=e=>e===`
`||e===``,nz=(e,t)=>t<e.length&&t>=0&&l3(e[t]),r3=(e,t=4,n=!0,s=!0)=>{const i=GP(" ",t),o=e.replace(/\t/g,i),a=je(o,(e,t)=>uz(t)||t===W?e.pcIsSpace||e.str===""&&n||e.str.length===o.length-1&&s||nz(o,e.str.length+1)?{pcIsSpace:!1,str:e.str+W}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:l3(t),str:e.str+t},{pcIsSpace:!1,str:""});return a.str},tz=(e,n)=>{const s=t.fromDom(n),o=t.fromDom(e);return Yh(o,"pre,code",d(j,s))},QT=(e,t)=>s(e)&&Tn(e.data)&&!tz(e,t),qT=e=>c(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Wa=(e,t)=>Fe(e)&&!QT(e,t)||qT(e)||UT(e),UT=qh("data-mce-bookmark"),$T=qh("data-mce-bogus"),IT=vN("data-mce-bogus","all"),RT=(e,t)=>{let o=0;if(Wa(e,e))return!1;let n=e.firstChild;if(!n)return!0;const s=new P(n,e);do{if(t){if(IT(n)){n=s.next(!0);continue}if($T(n)){n=s.next();continue}}if(F(n)){o++,n=s.next();continue}if(Wa(n,e))return!1;n=s.next()}while(n)return o<=1},z=(e,t=!0)=>RT(e.dom,t),Ds="data-mce-block",zT=e=>m(fe(e),e=>!/[A-Z]/.test(e)),jr=e=>zT(e).join(","),X2=(e,t)=>r(t.querySelector(e))?(t.setAttribute(Ds,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ds),!1),G2=(e,t)=>{const n=jr(e.getTransparentElements()),s=jr(e.getBlockElements());return m(t.querySelectorAll(n),e=>X2(s,e))},Y2=(e,n)=>{var s;const o=n?"lastChild":"firstChild";for(let n=e[o];n;n=n[o])if(z(t.fromDom(n))){(s=n.parentNode)===null||s===void 0?void 0:s.removeChild(n);return}},MT=(e,n)=>{const s=document.createRange(),o=e.parentNode;if(o){s.setStartBefore(e),s.setEndBefore(n);const i=s.extractContents();Y2(i,!0),s.setStartAfter(n),s.setEndAfter(e);const a=s.extractContents();Y2(a,!1),z(t.fromDom(i))||o.insertBefore(i,e),z(t.fromDom(n))||o.insertBefore(n,e),z(t.fromDom(a))||o.insertBefore(a,e),o.removeChild(e)}},ST=(e,n,s)=>{const r=e.getBlockElements(),c=t.fromDom(n),i=e=>k(e)in r,a=e=>j(e,c);o(Xm(s),t=>{St(t,i,a).each(n=>{const s=wN(t,t=>i(t)&&!e.isValidChild(k(n),k(t)));if(s.length>0){const t=T8(n);o(s,e=>{St(e,i,a).each(t=>{MT(t.dom,e.dom)})}),t.each(t=>G2(e,t.dom))}})})},lr=(e,t)=>{const n=G2(e,t);ST(e,t,n)},AT=(e,t)=>{if($2(e,t)){const n=jr(e.getBlockElements());X2(n,t)}},fT=(e,n,s)=>{const i=e=>j(e,t.fromDom(n)),o=M8(t.fromDom(s),i);Hi(o,o.length-2).filter(ve).fold(()=>lr(e,n),t=>lr(e,t.dom))},W2=e=>e.hasAttribute(Ds),gi=(e,t)=>f(e.getTransparentElements(),t),$2=(e,t)=>c(t)&&gi(e,t.nodeName),As=(e,t)=>$2(e,t)&&W2(t),hT=(e,t)=>t.type===1&&gi(e,t.name)&&h(t.attr(Ds)),I2=(e,t)=>t.type===1&&gi(e,t.name)&&ae(t.attr(Ds)),uT=Ut().browser,L2=e=>I(e,ve),dT=e=>uT.isFirefox()&&k(e)==="table"?L2(Y(e)).filter(e=>k(e)==="caption").bind(e=>L2(C8(e)).map(t=>{const n=t.dom.offsetTop,s=e.dom.offsetTop,o=e.dom.offsetHeight;return n<=s?-o:0})).getOr(0):0,z2=(e,t)=>e.children&&O(e.children,t),nT=(e,n,s)=>{let i=0,o=0;const a=e.ownerDocument;if(s=s||e,n){if(s===e&&n.getBoundingClientRect&&Xe(t.fromDom(e),"position")==="static"){const t=n.getBoundingClientRect();return i=t.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,o=t.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop,{x:i,y:o}}let r=n;for(;r&&r!==s&&r.nodeType&&!z2(r,s);){const e=r;i+=e.offsetLeft||0,o+=e.offsetTop||0,r=e.offsetParent}for(r=n.parentNode;r&&r!==s&&r.nodeType&&!z2(r,s);)i-=r.scrollLeft||0,o-=r.scrollTop||0,r=r.parentNode;o+=dT(t.fromDom(n))}return{x:i,y:o}},F2=(e,n={})=>{let h=0;const s={},r=t.fromDom(e),j=dt(r),g=n.maxLoadTime||5e3,u=e=>{n.referrerPolicy=e},d=e=>{n.contentCssCors=e},m=e=>{H(Gd(r),e)},f=e=>{const t=Gd(r);$o(t,"#"+e).each(A)},p=e=>E(s,e).getOrThunk(()=>({id:"mce-u"+h++,passed:[],failed:[],count:0})),c=a=>new Promise((r,c)=>{let d;const h=i._addCacheSuffix(a),l=p(h);s[h]=l,l.count++;const v=(e,t)=>{o(e,Io),l.status=t,l.passed=[],l.failed=[],d&&(d.onload=null,d.onerror=null,d=null)},b=()=>v(l.passed,2),f=()=>v(l.failed,3),_=(e,t)=>{e()||(Date.now()-w<g?setTimeout(t):f())},y=()=>{_(()=>{const t=e.styleSheets;let n=t.length;for(;n--;){const s=t[n],e=s.ownerNode;if(e&&d&&e.id===d.id)return b(),!0}return!1},y)};if(r&&l.passed.push(r),c&&l.failed.push(c),l.status===1)return;if(l.status===2){b();return}if(l.status===3){f();return}l.status=1;const u=t.fromTag("link",j.dom);Ct(u,{rel:"stylesheet",type:"text/css",id:l.id});const w=Date.now();n.contentCssCors&&$(u,"crossOrigin","anonymous"),n.referrerPolicy&&$(u,"referrerpolicy",n.referrerPolicy),d=u.dom,d.onload=y,d.onerror=f,m(u),$(u,"href",h)}),v=e=>{const t=Promise.allSettled(b(e,e=>c(e).then(a(e))));return t.then(e=>{const t=zo(e,e=>e.status==="fulfilled");return t.fail.length>0?Promise.reject(b(t.fail,e=>e.reason)):b(t.pass,e=>e.value)})},l=e=>{const t=i._addCacheSuffix(e);E(s,t).each(e=>{const n=--e.count;n===0&&(delete s[t],f(e.id))})},y=e=>{o(e,e=>{l(e)})};return{load:c,loadAll:v,unload:l,unloadAll:y,_setReferrerPolicy:u,_setContentCssCors:d}},tT=()=>{const t=new WeakMap,n=(n,s)=>{const i=Ft(n),o=i.dom;return e.from(t.get(o)).getOrThunk(()=>{const e=F2(o,s);return t.set(o,e),e})};return{forElement:n}},M2=tT(),JF=e=>e.nodeName.toLowerCase()==="span",S2=(e,n)=>r(e)&&(Wa(e,n)||el(t.fromDom(e))),QF=(e,t)=>{const n=new P(e,t).prev(!1),s=new P(e,t).next(!1),o=ae(n)||S2(n,t),i=ae(s)||S2(s,t);return o&&i},C2=e=>JF(e)&&e.getAttribute("data-mce-type")==="bookmark",GF=(e,t)=>s(e)&&e.data.length>0&&QF(e,t),qF=e=>!!c(e)&&e.childNodes.length>0,UF=e=>Ol(e)||xs(e),Ar=(e,t,n)=>{var s;const o=n||t;if(c(t)&&C2(t))return t;const i=t.childNodes;for(let t=i.length-1;t>=0;t--)Ar(e,i[t],o);if(c(t)){const e=t.childNodes;e.length===1&&C2(e[0])&&((s=t.parentNode)===null||s===void 0?void 0:s.insertBefore(e[0],t))}return!UF(t)&&!Wa(t,o)&&!qF(t)&&!GF(t,o)&&e.remove(t),t},WF=i.makeMap,$a=/[&<>"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Va=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,VF=/[<>&"']/g,HF=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,PF={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},rn={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},TF={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":`'`},EF=e=>{const n=t.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},r2=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let e=0;e<s.length;e+=2){const o=String.fromCharCode(parseInt(s[e],t));if(!rn[o]){const t="&"+s[e+1]+";";n[o]=t,n[t]=o}}return n}},Hr=r2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a2=(e,t)=>e.replace(t?$a:Va,e=>rn[e]||e),xF=e=>(""+e).replace(VF,e=>rn[e]||e),n2=(e,t)=>e.replace(t?$a:Va,e=>e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":rn[e]||"&#"+e.charCodeAt(0)+";"),$r=(e,t,n)=>{const s=n||Hr;return e.replace(t?$a:Va,e=>rn[e]||s[e]||e)},bF=(e,t)=>{const s=r2(t)||Hr,o=(e,t)=>e.replace(t?$a:Va,e=>rn[e]!==void 0?rn[e]:s[e]!==void 0?s[e]:e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"),i=(e,t)=>$r(e,t,s),n=WF(e.replace(/\+/g,","));return n.named&&n.numeric?o:n.named?t?i:$r:n.numeric?n2:a2},fF=e=>e.replace(HF,(e,t)=>t?(t.charAt(0).toLowerCase()==="x"?t=parseInt(t.substr(1),16):t=parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(t&1023))):PF[t]||String.fromCharCode(t)):TF[e]||Hr[e]||EF(e)),Tt={encodeRaw:a2,encodeAllRaw:xF,encodeNumeric:n2,encodeNamed:$r,getEncodeFunc:bF,decode:fF},Ra={},La={},hF={},_s=i.makeMap,Q=i.each,Zr=i.extend,J0=i.explode,uF=i.inArray,X=(e,t)=>(e=i.trim(e),e?e.split(t||" "):[]),Z0=(e,t={})=>{const n=_s(e," ",_s(e.toUpperCase()," "));return Zr(n,t)},X0=e=>Z0("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),dF=e=>{const r={};let l,c,i,s;const t=(e,t="",n="")=>{const i=X(n),s=X(e);let o=s.length;for(;o--;){const e=X([l,t].join(" "));r[s[o]]={attributes:rl(e,()=>({})),attributesOrder:e,children:rl(i,a(hF))}}},n=(e,t)=>{const s=X(e),n=X(t);let o=s.length;for(;o--;){const e=r[s[o]];for(let t=0,s=n.length;t<s;t++)e.attributes[n[t]]={},e.attributesOrder.push(n[t])}};if(Ra[e])return Ra[e];if(l="id accesskey class dir lang style tabindex title role",c="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const e="a ins del canvas map";l+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",c+=" article aside details dialog figure main header footer hgroup section nav "+e,i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){l+=" xml:lang";const e="acronym applet basefont big font strike tt";i=[i,e].join(" "),Q(X(e),e=>{t(e,"",i)});const n="center dir isindex noframes";c=[c,n].join(" "),s=[c,i].join(" "),Q(X(n),e=>{t(e,"",s)})}return s=s||[c,i].join(" "),t("html","manifest","head body"),t("head","","base command link meta noscript script style title"),t("title hr noscript br"),t("base","href target"),t("link","href rel media hreflang type sizes hreflang"),t("meta","name http-equiv content charset"),t("style","media type scoped"),t("script","src async defer type charset"),t("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),t("address dt dd div caption","",s),t("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),t("blockquote","cite",s),t("ol","reversed start type","li"),t("ul","","li"),t("li","value",s),t("dl","","dt dd"),t("a","href target rel media hreflang type",s),t("q","cite",i),t("ins del","cite datetime",s),t("img","src sizes srcset alt usemap ismap width height"),t("iframe","src name width height",s),t("embed","src type width height"),t("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),t("param","name value"),t("map","name",[s,"area"].join(" ")),t("area","alt coords shape href target rel media hreflang type"),t("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),t("colgroup","span","col"),t("col","span"),t("tbody thead tfoot","","tr"),t("tr","","td th"),t("td","colspan rowspan headers",s),t("th","colspan rowspan headers scope abbr",s),t("form","accept-charset action autocomplete enctype method name novalidate target",s),t("fieldset","disabled form name",[s,"legend"].join(" ")),t("label","form for",i),t("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),t("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:i),t("select","disabled form multiple name required size","option optgroup"),t("optgroup","disabled label","option"),t("option","disabled label selected value"),t("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),t("menu","type label",[s,"li"].join(" ")),t("noscript","",s),e!=="html4"&&(t("wbr"),t("ruby","",[i,"rt rp"].join(" ")),t("figcaption","",s),t("mark rt rp summary bdi","",i),t("canvas","width height",s),t("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),t("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),t("picture","","img source"),t("source","src srcset type media sizes"),t("track","kind src srclang label default"),t("datalist","",[i,"option"].join(" ")),t("article section nav aside main header footer","",s),t("hgroup","","h1 h2 h3 h4 h5 h6"),t("figure","",[s,"figcaption"].join(" ")),t("time","datetime",i),t("dialog","open",s),t("command","type label icon disabled checked radiogroup command"),t("output","for form name",i),t("progress","value max",i),t("meter","value min max low high optimum",i),t("details","open",[s,"summary"].join(" ")),t("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(n("script","language xml:space"),n("style","xml:space"),n("object","declare classid code codebase codetype archive standby align border hspace vspace"),n("embed","align name hspace vspace"),n("param","valuetype type"),n("a","charset name rev shape coords"),n("br","clear"),n("applet","codebase archive code object alt name width height align hspace vspace"),n("img","name longdesc align border hspace vspace"),n("iframe","longdesc frameborder marginwidth marginheight scrolling align"),n("font basefont","size color face"),n("input","usemap align"),n("select"),n("textarea"),n("h1 h2 h3 h4 h5 h6 div p legend caption","align"),n("ul","type compact"),n("li","type"),n("ol dl menu dir","compact"),n("pre","width xml:space"),n("hr","align noshade size width"),n("isindex","prompt"),n("table","summary width frame rules cellspacing cellpadding align bgcolor"),n("col","width align char charoff valign"),n("colgroup","width align char charoff valign"),n("thead","align char charoff valign"),n("tr","align char charoff valign bgcolor"),n("th","axis align char charoff valign nowrap bgcolor width height"),n("form","accept"),n("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),n("tfoot","align char charoff valign"),n("tbody","align char charoff valign"),n("area","nohref"),n("body","background bgcolor text link vlink alink")),e!=="html4"&&(n("input button select textarea","autofocus"),n("input textarea","placeholder"),n("a","download"),n("link script img","crossorigin"),n("img","loading"),n("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&o([r.video,r.audio],e=>{delete e.children.audio,delete e.children.video}),Q(X("a form meter progress dfn"),e=>{r[e]&&delete r[e].children[e]}),delete r.caption.children.table,delete r.script,Ra[e]=r,r},ic=(e,t)=>{if(e){const n={};return h(e)&&(e={"*":e}),Q(e,(e,s)=>{n[s]=n[s.toUpperCase()]=t==="map"?_s(e,/[, ]/):J0(e,/[, ]/)}),n}},Dt=(e={})=>{var l;const t={},n={};let r=[];const O={},p={},s=(t,n,s)=>{const i=e[t];if(i)return _s(i,/[, ]/,_s(i.toUpperCase(),/[, ]/));let o=La[t];return o||(o=Z0(n,s),La[t]=o),o},d=(l=e.schema)!==null&&l!==void 0?l:"html5",y=dF(d);e.verify_html===!1&&(e.valid_elements="*[*]");const T=ic(e.valid_styles),F=ic(e.invalid_styles,"map"),M=ic(e.valid_classes,"map"),S=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),A=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),k=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),j="td th iframe video audio object script code",u=s("non_empty_elements",j+" pre",f),P=s("move_caret_before_on_enter_elements",j+" table",f),w=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),c=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),_=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),C=s("transparent_elements","a ins del canvas map");Q("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{p[e]=new RegExp("</"+e+"[^>]*>","gi")});const b=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),i=e=>{const s=/^([#+-])?([^[!/]+)(?:\/([^[!]+))?(?:(!?)\[([^\]]+)])?$/,o=/^([!-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,n=/[*?+]/;if(e){const c=X(e,",");let i,a;t["@"]&&(i=t["@"].attributes,a=t["@"].attributesOrder);for(let l=0,d=c.length;l<d;l++){let e=s.exec(c[l]);if(e){const u=e[1],d=e[2],h=e[3],m=e[5],c={},l=[],s={attributes:c,attributesOrder:l};if(u==="#"&&(s.paddEmpty=!0),u==="-"&&(s.removeEmpty=!0),e[4]==="!"&&(s.removeEmptyAttrs=!0),i&&(x(i,(e,t)=>{c[t]=e}),a&&l.push(...a)),m){const t=X(m,"|");for(let i=0,a=t.length;i<a;i++)if(e=o.exec(t[i]),e){const o={},r=e[1],t=e[2].replace(/[\\:]:/g,":"),a=e[3],i=e[4];if(r==="!"&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(t),o.required=!0),r==="-"){delete c[t],l.splice(uF(l,t),1);continue}if(a&&(a==="="&&(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:t,value:i}),o.defaultValue=i),a==="~"&&(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:t,value:i}),o.forcedValue=i),a==="<"&&(o.validValues=_s(i,"?"))),n.test(t)){const e=o;s.attributePatterns=s.attributePatterns||[],e.pattern=b(t),s.attributePatterns.push(e)}else c[t]||l.push(t),c[t]=o}}if(!i&&d==="@"&&(i=c,a=l),h&&(s.outputName=d,t[h]=s),n.test(d)){const e=s;e.pattern=b(d),r.push(e)}else t[d]=s}}}},g=e=>{r=[],o(fe(t),e=>{delete t[e]}),i(e),Q(y,(e,t)=>{n[t]=e.children})},v=e=>{const s=/^(~)?(.+)$/;e&&(delete La.text_block_elements,delete La.block_elements,Q(X(e,","),e=>{const o=s.exec(e);if(o){const i=o[1]==="~",s=i?"span":"div",e=o[2];if(n[e]=n[s],O[e]=s,u[e.toUpperCase()]={},u[e]={},i||(c[e.toUpperCase()]={},c[e]={}),!t[e]){let n=t[s];n=Zr({},n),delete n.removeEmptyAttrs,delete n.removeEmpty,t[e]=n}Q(n,(t,o)=>{t[s]&&(n[o]=t=Zr({},n[o]),t[e]=t[s])})}}))},m=e=>{const t=/^([+-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Ra[d],e&&Q(X(e,","),e=>{const s=t.exec(e);if(s){const t=s[1];let e;t?e=n[s[2]]:e=n[s[2]]={"#comment":{}},e=n[s[2]],Q(X(s[3],"|"),n=>{t==="-"?delete e[n]:e[n]={}})}})},h=e=>{const n=t[e];if(n)return n;let s=r.length;for(;s--;){const t=r[s];if(t.pattern.test(e))return t}};e.valid_elements?g(e.valid_elements):(Q(y,(e,s)=>{t[s]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[s]=e.children}),Q(X("strong/b em/i"),e=>{const n=X(e,"/");t[n[1]].outputName=n[0]}),Q(_,(n,s)=>{t[s]&&(e.padd_empty_block_inline_children&&(t[s].paddInEmptyBlock=!0),t[s].removeEmpty=!0)}),Q(X("ol ul blockquote a table tbody"),e=>{t[e]&&(t[e].removeEmpty=!0)}),Q(X("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),e=>{t[e].paddEmpty=!0}),Q(X("span"),e=>{t[e].removeEmptyAttrs=!0})),v(e.custom_elements),m(e.valid_children),i(e.extended_valid_elements),m("+ol[ul|ol],+ul[ul|ol]"),Q({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,n)=>{t[n]&&(t[n].parentsRequired=X(e))}),e.invalid_elements&&Q(J0(e.invalid_elements),e=>{t[e]&&delete t[e]}),h("span")||i("span[!data-mce-type|*]");const z=a(T),D=a(F),N=a(M),L=a(k),R=a(c),E=a(w),H=a(_),I=a(Object.seal(f)),B=a(A),V=a(u),$=a(P),W=a(S),U=a(C),K=a(Object.seal(p)),q=(e,t)=>{const s=n[e.toLowerCase()];return!!(s&&s[t.toLowerCase()])},Y=(e,t)=>{const n=h(e);if(n)if(t){{if(n.attributes[t])return!0;const e=n.attributePatterns;if(e){let n=e.length;for(;n--;)if(e[n].pattern.test(t))return!0}}}else return!0;return!1},G=a(O);return{type:d,children:n,elements:t,getValidStyles:z,getValidClasses:N,getBlockElements:R,getInvalidStyles:D,getVoidElements:I,getTextBlockElements:E,getTextInlineElements:H,getBoolAttrs:L,getElementRule:h,getSelfClosingElements:B,getNonEmptyElements:V,getMoveCaretBeforeOnEnterElements:$,getWhitespaceElements:W,getTransparentElements:U,getSpecialElements:K,isValidChild:q,isValid:Y,getCustomElements:G,addValidElements:i,setValidElements:g,addCustomElements:v,addValidChildren:m}},rc=(e={},t)=>{const d=/(?:url(?:(?:\(\s*"([^"]+)"\s*\))|(?:\(\s*'([^']+)'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:'([^']+)')|(?:"([^"]+)")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,n={};let s,o;const i=Nn;t&&(s=t.getValidStyles(),o=t.getInvalidStyles());const a=(`\\" \\' \\; \\: ; : `+i).split(" ");for(let e=0;e<a.length;e++)n[a[e]]=i+e,n[i+e]=a[e];const l={parse:t=>{const s={};let a=!1;const m=e.url_converter,g=e.url_converter_scope||l,o=(e,t,n)=>{const a=s[e+"-top"+t];if(!a)return;const r=s[e+"-right"+t];if(!r)return;const c=s[e+"-bottom"+t];if(!c)return;const l=s[e+"-left"+t];if(!l)return;const o=[a,r,c,l];let i=o.length-1;for(;i--;)if(o[i]!==o[i+1])break;if(i>-1&&n)return;s[e+t]=i===-1?o[0]:o.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t]},u=e=>{const n=s[e];if(!n)return;const t=n.split(" ");let o=t.length;for(;o--;)if(t[o]!==t[0])return!1;return s[e]=t[0],!0},v=(e,t,n,o)=>{if(!u(t))return;if(!u(n))return;if(!u(o))return;s[e]=s[t]+" "+s[n]+" "+s[o],delete s[t],delete s[n],delete s[o]},f=e=>(a=!0,n[e]),h=(e,t)=>(a&&(e=e.replace(/\uFEFF[0-9]/g,e=>n[e])),t||(e=e.replace(/\\(['";:])/g,"$1")),e),b=e=>String.fromCharCode(parseInt(e.slice(1),16)),p=e=>e.replace(/\\[0-9a-f]+/gi,b),j=(t,n,s,o,i,a)=>{if(i=i||a,i)return i=h(i),`'`+i.replace(/'/g,`\\'`)+`'`;if(n=h(n||s||o||""),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return m&&(n=m.call(g,n,"style")),`url('`+n.replace(/'/g,`\\'`)+`')`};if(t){t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\["';:\uFEFF]/g,f).replace(/"[^"]+"|'[^']+'/g,e=>e.replace(/[;:]/g,f));let n;for(;n=r.exec(t);){r.lastIndex=n.index+n[0].length;let o=n[1].replace(c,"").toLowerCase(),t=n[2].replace(c,"");if(o&&t){if(o=p(o),t=p(t),o.indexOf(i)!==-1||o.indexOf('"')!==-1)continue;if(!e.allow_script_urls&&(o==="behavior"||/expression\s*\(|\/\*|\*\//.test(t)))continue;o==="font-weight"&&t==="700"?t="bold":(o==="color"||o==="background-color")&&(t=t.toLowerCase()),t=t.replace(d,j),s[o]=a?h(t,!0):t}}o("border","",!0),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),v("border","border-width","border-style","border-color"),s.border==="medium none"&&delete s.border,s["border-image"]==="none"&&delete s["border-image"]}return s},serialize:(e,t)=>{let n="";const i=(t,s)=>{const o=s[t];if(o)for(let t=0,a=o.length;t<a;t++){const s=o[t],i=e[s];i&&(n+=(n.length>0?" ":"")+s+": "+i+";")}},a=(e,t)=>{if(!o||!t)return!0;let n=o["*"];return!(n&&n[e])&&(n=o[t],!n||!n[e])};return t&&s?(i("*",s),i(t,s)):x(e,(e,s)=>{e&&a(s,t)&&(n+=(n.length>0?" ":"")+s+": "+e+";")}),n}};return l},iF={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},oF=e=>e instanceof Event||_(e.initEvent),tF=e=>e.isDefaultPrevented===N||e.isDefaultPrevented===S,eF=e=>D(e.preventDefault)||oF(e),W0=(e,t)=>{const n=t??{};for(const t in e)f(iF,t)||(n[t]=e[t]);return r(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},mc=(e,t,n,s)=>{var i;const o=W0(t,s);return o.type=e,D(o.target)&&(o.target=(i=o.srcElement)!==null&&i!==void 0?i:n),eF(t)&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=N,_(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=N,_(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=N,o.stopPropagation()},tF(o)||(o.isDefaultPrevented=o.defaultPrevented===!0?N:S,o.isPropagationStopped=o.cancelBubble===!0?N:S,o.isImmediatePropagationStopped=S)),o},GM="mce-data-",YM=/^(?:mouse|contextmenu)|click/,gc=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},ua=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},qM=e=>r(e)&&YM.test(e.type),Xs=(e,t)=>{const n=mc(e.type,e,document,t);if(qM(e)&&ae(e.pageX)&&!ae(e.clientX)){const o=n.target.ownerDocument||document,t=o.documentElement,s=o.body,i=n;i.pageX=e.clientX+(t&&t.scrollLeft||s&&s.scrollLeft||0)-(t&&t.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(t&&t.scrollTop||s&&s.scrollTop||0)-(t&&t.clientTop||s&&s.clientTop||0)}return n},VM=(e,t,n)=>{const o=e.document,i={type:"ready"};if(n.domLoaded){t(i);return}const a=()=>o.readyState==="complete"||o.readyState==="interactive"&&o.body,s=()=>{ua(e,"DOMContentLoaded",s),ua(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(i)),e=null};a()?s():gc(e,"DOMContentLoaded",s),n.domLoaded||gc(e,"load",s)};class Qt{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=GM+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,o){const i=this;let a;const c=window,u=e=>{i.executeHandlers(Xs(e||c.event),r)};if(!e||s(e)||xt(e))return n;let r;e[i.expando]?r=e[i.expando]:(r=i.count++,e[i.expando]=r,i.events[r]={}),o=o||e;const l=t.split(" ");let d=l.length;for(;d--;){let t=l[d],s=u,h=!1,m=!1;if(t==="DOMContentLoaded"&&(t="ready"),i.domLoaded&&t==="ready"&&e.readyState==="complete"){n.call(o,Xs({type:t}));continue}!i.hasFocusIn&&(t==="focusin"||t==="focusout")&&(h=!0,m=t==="focusin"?"focus":"blur",s=e=>{const t=Xs(e||c.event);t.type=t.type==="focus"?"focusin":"focusout",i.executeHandlers(t,r)}),a=i.events[r][t],a?t==="ready"&&i.domLoaded?n(Xs({type:t})):a.push({func:n,scope:o}):(i.events[r][t]=a=[{func:n,scope:o}],a.fakeName=m,a.capture=h,a.nativeHandler=s,t==="ready"?VM(e,s,i):gc(e,m||t,s,h))}return e=a=null,n}unbind(e,t,n){if(!e||s(e)||xt(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(t){{const o=t.split(" ");let i=o.length;for(;i--;){const a=o[i],t=s[a];if(t){if(n){let e=t.length;for(;e--;)if(t[e].func===n){const o=t.nativeHandler,i=t.fakeName,r=t.capture,n=t.slice(0,e).concat(t.slice(e+1));n.nativeHandler=o,n.fakeName=i,n.capture=r,s[a]=n}}(!n||t.length===0)&&(delete s[a],ua(e,t.fakeName||a,t.nativeHandler,t.capture))}}}}else x(s,(t,n)=>{ua(e,t.fakeName||n,t.nativeHandler,t.capture)}),s={};for(const e in s)if(f(s,e))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||s(e)||xt(e))return this;const o=Xs({type:t,target:e},n);do{const t=e[this.expando];t&&this.executeHandlers(o,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped())return this}clean(e){if(!e||s(e)||xt(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const t=e.getElementsByTagName("*");let n=t.length;for(;n--;)e=t[n],e[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const s=this.events[t],n=s&&s[e.type];if(n)for(let t=0,o=n.length;t<o;t++){const s=n[t];if(s&&s.func.call(s.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Qt.Event=new Qt;const wc=i.each,BM=i.grep,xc="data-mce-style",IM=i.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Qs=(e,t,n)=>{D(n)||n===""?G(e,t):$(e,t,n)},H0=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),bs=(e,t)=>{let n=0;if(e)for(let i=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const a=o.nodeType;if(t&&s(o)&&(a===i||!o.data.length))continue;n++,i=a}return n},P0=(e,t)=>{const n=Te(t,"style"),s=e.serialize(e.parse(n),k(t));Qs(t,xc,s)},MM=(e,t)=>$e(e)?f(IM,t)?e+"":e+"px":e,N0=(e,t,n)=>{const s=H0(t);D(n)||n===""?l8(e,s):p8(e,s,MM(n,s))},SM=(e,n,s)=>{const i=n.keep_values,a={set:(e,o,i)=>{const a=t.fromDom(e);_(n.url_converter)&&r(o)&&(o=n.url_converter.call(n.url_converter_scope||s(),String(o),i,e));const c="data-mce-"+i;Qs(a,c,o),Qs(a,i,o)},get:(e,n)=>{const s=t.fromDom(e);return Te(s,"data-mce-"+n)||Te(s,n)}},o={style:{set:(n,s)=>{const o=t.fromDom(n);i&&Qs(o,xc,s),G(o,"style"),h(s)&&ya(o,e.parse(s))},get:n=>{const s=t.fromDom(n),o=Te(s,xc)||Te(s,"style");return e.serialize(e.parse(o),k(s))}}};return i&&(o.href=o.src=a),o},w=(e,n={})=>{const N={},k=window,j={};let Qe=0;const Ge=!0,We=!0,S=M2.forElement(t.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),d=[],u=n.schema?n.schema:Dt({}),b=rc({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),m=n.ownEvents?new Qt:Qt.Event,te=u.getBlockElements(),Be=e=>h(e)?f(te,e):c(e)&&(f(te,e.nodeName)||As(u,e)),l=t=>t&&e&&h(t)?e.getElementById(t):t,O=e=>{const n=l(e);return r(n)?t.fromDom(n):null},v=(e,t,n="")=>{let s;const o=O(e);if(r(o)&&ve(o)){const e=K[t];e&&e.get?s=e.get(o.dom,t):s=Te(o,t)}return r(s)?s:n},$=e=>{const t=l(e);return D(t)?[]:t.attributes},z=(e,s,o)=>{i(e,e=>{if(c(e)){const i=t.fromDom(e),a=o===""?null:o,c=Te(i,s),r=K[s];r&&r.set?r.set(i.dom,a,s):Qs(i,s,a),c!==a&&n.onSetAttrib&&n.onSetAttrib({attrElm:i.dom,attrName:s,attrValue:a})}})},se=(e,t)=>e.cloneNode(t),y=()=>n.root_element||e.body,Ie=e=>{const t=nm(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},I=(t,n)=>nT(e.body,l(t),n),Pe=(e,s,o)=>{i(e,e=>{const i=t.fromDom(e);N0(i,s,o),n.update_styles&&P0(b,i)})},Ne=(e,s)=>{i(e,e=>{const o=t.fromDom(e);x(s,(e,t)=>{N0(o,t,e)}),n.update_styles&&P0(b,o)})},F=(e,n,s)=>{const o=l(e);return D(o)||!c(o)?void 0:s?Xe(t.fromDom(o),H0(n)):(n=n.replace(/-(\D)/g,(e,t)=>t.toUpperCase()),n==="float"&&(n="cssFloat"),o.style?o.style[n]:void 0)},W=e=>{const t=l(e);if(!t)return{w:0,h:0};let n=F(t,"width"),s=F(t,"height");return(!n||n.indexOf("px")===-1)&&(n="0"),(!s||s.indexOf("px")===-1)&&(s="0"),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(s,10)||t.offsetHeight||t.clientHeight}},Fe=e=>{const t=l(e),n=I(t),s=W(t);return{x:n.x,y:n.y,w:s.w,h:s.h}},C=(e,n)=>{if(!e)return!1;const s=R(e)?e:[e];return T(s,e=>Le(t.fromDom(e),n))},q=(e,t,n,s)=>{const i=[];let o=l(e);s=s===void 0;const a=n||(y().nodeName!=="BODY"?y().parentNode:null);if(h(t))if(t==="*")t=c;else{const e=t;t=t=>C(t,e)}for(;o;){if(o===a||D(o.nodeType)||xs(o)||Ol(o))break;if(!t||t(o))if(s)i.push(o);else return[o];o=o.parentNode}return s?i:null},ge=(e,t,n)=>{const s=q(e,t,n,!1);return s&&s.length>0?s[0]:null},X=(e,t,n)=>{let s=t;if(e){h(t)&&(s=e=>C(e,t));for(let t=e[n];t;t=t[n])if(_(s)&&s(t))return t}return null},de=(e,t)=>X(e,t,"nextSibling"),re=(e,t)=>X(e,t,"previousSibling"),ie=e=>_(e.querySelectorAll),Ee=(t,s)=>{var o,i;const a=(i=(o=l(s))!==null&&o!==void 0?o:n.root_element)!==null&&i!==void 0?i:e;return ie(a)?be(a.querySelectorAll(t)):[]},i=function(e,t,n){const s=n??this;if(R(e)){const n=[];return wc(e,(e,o)=>{const i=l(e);i&&n.push(t.call(s,i,o))}),n}const o=l(e);return!!o&&t.call(s,o)},ne=(e,t)=>{i(e,e=>{x(t,(t,n)=>{z(e,n,t)})})},L=(e,n)=>{i(e,e=>{const s=t.fromDom(e);Ti(s,n)})},ee=(t,n,s,o,a)=>i(t,t=>{const i=h(n)?e.createElement(n):n;return r(s)&&ne(i,s),o&&(!h(o)&&o.nodeType?i.appendChild(o):h(o)&&L(i,o)),a?i:t.appendChild(i)}),J=(t,n,s)=>ee(e.createElement(t),t,n,s,!0),ae=Tt.decode,Z=Tt.encodeAllRaw,ce=(e,t,n="")=>{let s="<"+e;for(const e in t)ds(t,e)&&(s+=" "+e+'="'+Z(t[e])+'"');return Es(n)&&f(u.getVoidElements(),e)?s+" />":s+">"+n+"</"+e+">"},le=t=>{const n=e.createElement("div"),s=e.createDocumentFragment();s.appendChild(n),t&&(n.innerHTML=t);let o;for(;o=n.firstChild;)s.appendChild(o);return s.removeChild(n),s},Q=(e,n)=>i(e,e=>{const s=t.fromDom(e);return n&&o(Y(s),e=>{Ae(e)&&e.dom.length===0?A(e):Me(s,e)}),A(s),s.dom}),ue=e=>i(e,e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))}),he=e=>b.parse(e),me=(e,t)=>b.serialize(e,t),fe=t=>{if(p!==w.DOM&&e===document){if(N[t])return;N[t]=!0}let n=e.getElementById("mceDefaultStyles");if(!n){n=e.createElement("style"),n.id="mceDefaultStyles",n.type="text/css";const t=e.head;t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(e.createTextNode(t))},pe=e=>{e||(e=""),o(e.split(","),e=>{j[e]=!0,S.load(e).catch(g)})},M=(e,n,s)=>{i(e,e=>{if(c(e)){const i=t.fromDom(e),a=n.split(" ");o(a,e=>{if(r(s)){const t=s?lo:Ui;t(i,e)}else YL(i,e)})}})},je=(e,t)=>{M(e,t,!0)},ye=(e,t)=>{M(e,t,!1)},_e=(e,t)=>{const n=O(e),s=t.split(" ");return r(n)&&qt(s,e=>Fd(n,e))},we=e=>{i(e,e=>l8(t.fromDom(e),"display"))},Oe=e=>{i(e,e=>p8(t.fromDom(e),"display","none"))},xe=e=>{const t=O(e);return r(t)&&qn(la(t,"display"),"none")},Ce=e=>(e||"mce_")+Qe++,oe=e=>{const t=O(e);return r(t)?c(t.dom)?t.dom.outerHTML:IN(t):""},ke=(e,t)=>{i(e,e=>{c(e)&&(e.outerHTML=t)})},Se=(e,t)=>{const n=l(t);return i(e,e=>{const t=n?.parentNode,s=n?.nextSibling;return t&&(s?t.insertBefore(e,s):t.appendChild(e)),e})},U=(e,t,n)=>i(t,s=>{var o;const i=R(t)?e.cloneNode(!0):e;return n&&wc(BM(s.childNodes),e=>{i.appendChild(e)}),(o=s.parentNode)===null||o===void 0?void 0:o.replaceChild(i,s),s}),ze=(e,t)=>{if(e.nodeName!==t.toUpperCase()){const n=J(t);return wc($(e),t=>{z(n,t.nodeName,v(e,t.nodeName))}),U(n,e,!0),n}return e},De=(e,t)=>{let n=e;for(;n;){let e=t;for(;e&&n!==e;)e=e.parentNode;if(n===e)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},V=e=>{if(c(e)){const t=e.nodeName.toLowerCase()==="a"&&!v(e,"href")&&v(e,"id");if(v(e,"name")||v(e,"data-mce-bookmark")||t)return!0}return!1},Re=(e,t)=>{let o=0;if(V(e))return!1;const n=e.firstChild;if(n){const a=new P(n,e),l=u?u.getWhitespaceElements():{},r=t||(u?u.getNonEmptyElements():null);let i=n;do{if(c(i)){const e=i.getAttribute("data-mce-bogus");if(e){i=a.next(e==="all");continue}const t=i.nodeName.toLowerCase();if(r&&r[t]){if(t==="br"){o++,i=a.next();continue}return!1}if(V(i))return!1}if(xt(i))return!1;if(s(i)&&!Tn(i.data))return!1;if(s(i)&&i.parentNode&&l[i.parentNode.nodeName]&&Tn(i.data))return!1;i=a.next()}while(i)}return o<=1},E=()=>e.createRange(),He=(e,t,n)=>{let s=E(),o,i;if(e&&t&&e.parentNode&&t.parentNode){const a=e.parentNode;return s.setStart(a,bs(e)),s.setEnd(t.parentNode,bs(t)),o=s.extractContents(),s=E(),s.setStart(t.parentNode,bs(t)+1),s.setEnd(a,bs(e)+1),i=s.extractContents(),a.insertBefore(Ar(p,o),e),n?a.insertBefore(n,e):a.insertBefore(t,e),a.insertBefore(Ar(p,i),e),Q(e),n||t}},H=(t,s,o,i)=>{if(R(t)){let e=t.length;const n=[];for(;e--;)n[e]=H(t[e],s,o,i);return n}return n.collect&&(t===e||t===k)&&d.push([t,s,o,i]),m.bind(t,s,o,i||p)},B=(t,n,s)=>{if(R(t)){let e=t.length;const o=[];for(;e--;)o[e]=B(t[e],n,s);return o}if(d.length>0&&(t===e||t===k)){let e=d.length;for(;e--;){const[o,i,a]=d[e];t===o&&(!n||n===i)&&(!s||s===a)&&m.unbind(o,i,a)}}return m.unbind(t,n,s)},Ve=(e,t,n)=>m.dispatch(e,t,n),$e=(e,t,n)=>m.dispatch(e,t,n),G=e=>{if(e&&c(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&t!=="inherit"?t:e.contentEditable!=="inherit"?e.contentEditable:null}return null},Ue=e=>{const n=y();let t=null;for(let s=e;s&&s!==n;s=s.parentNode)if(t=G(s),t!==null)break;return t},Ke=()=>{if(d.length>0){let e=d.length;for(;e--;){const[t,n,s]=d[e];m.unbind(t,n,s)}}x(j,(e,t)=>{S.unload(t),delete j[t]})},qe=(e,t)=>e===t||t.contains(e),Ye=e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset,p={doc:e,settings:n,win:k,files:j,stdMode:Ge,boxModel:We,styleSheetLoader:S,boundEvents:d,styles:b,schema:u,events:m,isBlock:Be,root:null,clone:se,getRoot:y,getViewPort:Ie,getRect:Fe,getSize:W,getParent:ge,getParents:q,get:l,getNext:de,getPrev:re,select:Ee,is:C,add:ee,create:J,createHTML:ce,createFragment:le,remove:Q,setStyle:Pe,getStyle:F,setStyles:Ne,removeAllAttribs:ue,setAttrib:z,setAttribs:ne,getAttrib:v,getPos:I,parseStyle:he,serializeStyle:me,addStyle:fe,loadCSS:pe,addClass:je,removeClass:ye,hasClass:_e,toggleClass:M,show:we,hide:Oe,isHidden:xe,uniqueId:Ce,setHTML:L,getOuterHTML:oe,setOuterHTML:ke,decode:ae,encode:Z,insertAfter:Se,replace:U,rename:ze,findCommonAncestor:De,run:i,getAttribs:$,isEmpty:Re,createRng:E,nodeIndex:bs,split:He,bind:H,unbind:B,fire:$e,dispatch:Ve,getContentEditable:G,getContentEditableParent:Ue,destroy:Ke,isChildOf:qe,dumpRng:Ye},K=SM(b,n,a(p));return p};w.DOM=w(document),w.nodeIndex=bs;const EM=w.DOM,xM=0,gM=1,Ji=2,z0=3;class bt{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,n)=>{const o=EM;let s;const a=()=>{o.remove(r),s&&(s.onerror=s.onload=s=null)},c=()=>{a(),t()},l=()=>{a(),n("Failed to load script: "+e)},r=o.uniqueId();s=document.createElement("script"),s.id=r,s.type="text/javascript",s.src=i._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=c,s.onerror=l,(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return this.states[e]===Ji}markDone(e){this.states[e]=Ji}add(e){const t=this;t.queue.push(e);const n=t.states[e];return n===void 0&&(t.states[e]=xM),new Promise((n,s)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:s})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(t){const n=this,s=(e,t)=>{E(n.scriptLoadedCallbacks,t).each(n=>{o(n,n=>n[e](t))}),delete n.scriptLoadedCallbacks[t]},i=e=>{const t=m(e,e=>e.status==="rejected");return t.length>0?Promise.reject(ft(t,({reason:e})=>R(e)?e:[e])):Promise.resolve()},a=e=>Promise.allSettled(b(e,e=>n.states[e]===Ji?(s("resolve",e),Promise.resolve()):n.states[e]===z0?(s("reject",e),Promise.reject(e)):(n.states[e]=gM,n.loadScript(e).then(()=>{n.states[e]=Ji,s("resolve",e);const t=n.queue;return t.length>0?(n.queue=[],a(t).then(i)):Promise.resolve()},()=>(n.states[e]=z0,s("reject",e),Promise.reject(e)))))),r=t=>(n.loading=!0,a(t).then(t=>{n.loading=!1;const s=n.queueLoadedCallbacks.shift();return e.from(s).each(Io),i(t)})),c=yp(t);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>r(c).then(e,t))}):r(c)}}bt.ScriptLoader=new bt;const V=e=>{let t=e;const n=()=>t,s=e=>{t=e};return{get:n,set:s}},hM=e=>ie(e)&&f(e,"raw"),uM=e=>R(e)&&e.length>1,oo={},Wc=V("en"),T0=()=>E(oo,Wc.get()),dM=()=>Bi(oo,e=>({...e})),cM=e=>{e&&Wc.set(e)},rM=()=>Wc.get(),oM=(e,t)=>{let n=oo[e];n||(oo[e]=n={}),x(t,(e,t)=>{n[t.toLowerCase()]=e})},sM=e=>{const i=T0().getOr({}),t=e=>_(e)?Object.prototype.toString.call(e):n(e)?"":""+e,n=e=>e===""||e===null||e===void 0,s=e=>{const n=t(e);return E(i,n.toLowerCase()).map(t).getOr(n)},o=e=>e.replace(/{context:\w+}$/,"");if(n(e))return"";if(hM(e))return t(e.raw);if(uM(e)){const n=e.slice(1),i=s(e[0]).replace(/\{([0-9]+)\}/g,(e,s)=>f(n,s)?t(n[s]):e);return o(i)}return o(s(e))},tM=()=>T0().bind(e=>E(e,"_dir")).exists(e=>e==="rtl"),eM=e=>f(oo,e),We={getData:dM,setCode:cM,getCode:rM,add:oM,translate:sM,isRtl:tM,hasCode:eM},te=()=>{const r=[],t={},e={},s=[],i=(e,t)=>{const n=m(s,n=>n.name===e&&n.state===t);o(n,e=>e.resolve())},a=e=>f(t,e),l=t=>f(e,t),b=t=>e[t]?e[t].instance:void 0,n=(e,n)=>{const s=We.getCode(),o=","+(n||"")+",";if(!s||n&&o.indexOf(","+s+",")===-1)return;bt.ScriptLoader.add(t[e]+"/langs/"+s+".js")},d=(e,t)=>{te.languageLoad!==!1&&(a(e)?n(e,t):c(e,"loaded").then(()=>n(e,t)))},u=(t,n)=>(r.push(n),e[t]={instance:n},i(t,"added"),n),p=n=>{delete t[n],delete e[n]},g=(e,t)=>h(t)?h(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,v=(n,s)=>{if(t[n])return Promise.resolve();let o=h(s)?s:s.prefix+s.resource+s.suffix;o.indexOf("/")!==0&&o.indexOf("://")===-1&&(o=te.baseURL+"/"+o),t[n]=o.substring(0,o.lastIndexOf("/"));const a=()=>(i(n,"loaded"),Promise.resolve());return e[n]?a():bt.ScriptLoader.add(o).then(a)},c=(e,t="added")=>t==="added"&&l(e)?Promise.resolve():t==="loaded"&&a(e)?Promise.resolve():new Promise(n=>{s.push({name:e,state:t,resolve:n})});return{items:r,urls:t,lookup:e,get:b,requireLangPack:d,add:u,remove:p,createUrl:g,load:v,waitFor:c}};te.languageLoad=!0,te.baseURL="",te.PluginManager=te(),te.ThemeManager=te(),te.ModelManager=te();const JS=t=>{const n=V(e.none()),s=()=>n.get().each(t),o=()=>{s(),n.set(e.none())},i=()=>n.get().isSome(),a=()=>n.get(),r=t=>{s(),n.set(e.some(t))};return{clear:o,isSet:i,get:a,set:r}},QS=t=>{const n=V(e.none()),s=()=>n.get().each(e=>clearInterval(e)),o=()=>{s(),n.set(e.none())},i=()=>n.get().isSome(),a=()=>n.get(),r=o=>{s(),n.set(e.some(setInterval(o,t)))};return{clear:o,isSet:i,get:a,set:r}},It=()=>{const e=JS(g),t=t=>e.get().each(t);return{...e,on:t}},Di=(e,t)=>{let n=null;const s=()=>{Yt(n)||(clearTimeout(n),n=null)},o=(...s)=>{Yt(n)&&(n=setTimeout(()=>{n=null,e.apply(null,s)},t))};return{cancel:s,throttle:o}},il=(e,t)=>{let n=null;const s=()=>{Yt(n)||(clearTimeout(n),n=null)},o=(...o)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)};return{cancel:s,throttle:o}},fo=a("mce-annotation"),un=a("data-mce-annotation"),Xn=a("data-mce-annotation-uid"),go=a("data-mce-annotation-active"),vo=a("data-mce-annotation-classes"),yo=a("data-mce-annotation-attrs"),b0=e=>t=>j(t,e),v0=(e,n)=>{const s=e.selection.getRng(),o=t.fromDom(s.startContainer),i=t.fromDom(e.getBody()),a=n.fold(()=>"."+fo(),e=>`[${un()}="${e}"]`),r=nr(o,s.startOffset).getOr(o),c=kn(r,a,b0(i));return c.bind(t=>mt(t,`${Xn()}`).bind(n=>mt(t,`${un()}`).map(t=>{const s=m0(e,n);return{uid:n,name:t,elements:s}})))},XS=e=>ve(e)&&Fd(e,fo()),g0=(e,t)=>Qo(e,"data-mce-bogus")||Yh(e,'[data-mce-bogus="all"]',b0(t)),m0=(e,n)=>{const s=t.fromDom(e.getBody()),o=J(s,`[${Xn()}="${n}"]`);return m(o,e=>!g0(e,s))},h0=(e,n)=>{const i=t.fromDom(e.getBody()),a=J(i,`[${un()}="${n}"]`),s={};return o(a,e=>{if(!g0(e,i)){const t=Te(e,Xn()),n=E(s,t).getOr([]);s[t]=n.concat([e])}}),s},GS=(t,n)=>{const a=V({}),l=()=>({listeners:[],previous:It()}),r=(e,t)=>{s(e,e=>(t(e),e))},s=(e,t)=>{const n=a.get(),s=E(n,e).getOrThunk(l),o=t(s);n[e]=o,a.set(n)},d=(e,t,n)=>{r(e,s=>{o(s.listeners,s=>s(!0,e,{uid:t,nodes:b(n,e=>e.dom)}))})},u=e=>{r(e,t=>{o(t.listeners,t=>t(!1,e))})},i=(e,n)=>{o(m0(t,e),e=>{n?$(e,go(),"true"):G(e,go())})},c=il(()=>{const a=Qn(n.getNames());o(a,n=>{s(n,s=>{const o=s.previous.get();return v0(t,e.some(n)).fold(()=>{o.each(e=>{u(n),s.previous.clear(),i(e,!1)})},({uid:e,name:t,elements:n})=>{qn(o,e)||(o.each(e=>i(e,!1)),d(t,e,n),s.previous.set(e),i(e,!0))}),{previous:s.previous,listeners:s.listeners}})})},30);t.on("remove",()=>{c.cancel()}),t.on("NodeChange",()=>{c.throttle()});const h=(e,t)=>{s(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))};return{addListener:h}},qS=(t,n)=>{const s=un(),i=t=>e.from(t.attr(s)).bind(n.lookup),a=t=>{var n,s;t.attr(Xn(),null),t.attr(un(),null),t.attr(go(),null);const a=e.from(t.attr(yo())).map(e=>e.split(",")).getOr([]),r=e.from(t.attr(vo())).map(e=>e.split(",")).getOr([]);o(a,e=>t.attr(e,null));const c=(s=(n=t.attr("class"))===null||n===void 0?void 0:n.split(" "))!==null&&s!==void 0?s:[],i=cl(c,[fo()].concat(r));t.attr("class",i.length>0?i.join(" "):null),t.attr(vo(),null),t.attr(yo(),null)};t.serializer.addTempAttr(go()),t.serializer.addAttributeFilter(s,e=>{for(const t of e)i(t).each(e=>{e.persistent===!1&&(t.name==="span"?t.unwrap():a(t))})})},US=()=>{const e={},t=(t,n)=>{e[t]={name:t,settings:n}},n=t=>E(e,t).map(e=>e.settings),s=()=>fe(e);return{register:t,lookup:n,getNames:s}};let d0=0;const l0=e=>{const t=new Date,n=t.getTime(),s=Math.floor(Math.random()*1e9);return d0++,e+"_"+s+d0+String(n)},$S=(e,t)=>{o(t,t=>{lo(e,t)})},PS=(e,t)=>{o(t,t=>{Ui(e,t)})},o0=(e,n)=>t.fromDom(e.dom.cloneNode(n)),Vn=e=>o0(e,!1),s0=e=>o0(e,!0),RS=(e,n)=>{const s=t.fromTag(n),o=gf(e);return Ct(s,o),s},TS=(e,t)=>{const n=RS(e,t);Rt(e,n);const s=Y(e);return Jt(n,s),A(e),n},e0=(t,n,o=S)=>{const a=new P(t,n),i=t=>{let n;do n=a[t]();while(n&&!s(n)&&!o(n))return e.from(n).filter(s)};return{current:()=>e.from(a.current()).filter(s),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},_n=(t,n)=>{const i=n?n:e=>t.isBlock(e)||F(e)||C(e),o=(t,n,i,a)=>{if(s(t)){const s=a(t,n,t.data);if(s!==-1)return e.some({container:t,offset:s})}return i().bind(e=>o(e.container,e.offset,i,a))},a=(e,n,s,a)=>{const r=e0(e,a??t.getRoot(),i);return o(e,n,()=>r.prev().map(e=>({container:e,offset:e.length})),s).getOrNull()},r=(e,n,s,a)=>{const r=e0(e,a??t.getRoot(),i);return o(e,n,()=>r.next().map(e=>({container:e,offset:0})),s).getOrNull()};return{backwards:a,forwards:r}},Rn=Math.round,An=e=>e?{left:Rn(e.left),top:Rn(e.top),bottom:Rn(e.bottom),right:Rn(e.right),width:Rn(e.width),height:Rn(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Z4=(e,t)=>(e=An(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e),SS=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Q4=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Ho=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Q4(t.top-e.bottom,e,t)},Bo=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Q4(t.bottom-e.top,e,t),AS=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,wS=t=>je(t,(t,n)=>t.fold(()=>e.some(n),t=>{const s=Math.min(n.left,t.left),o=Math.min(n.top,t.top),i=Math.max(n.right,t.right),a=Math.max(n.bottom,t.bottom);return e.some({top:o,right:i,bottom:a,left:s,width:i-s,height:a-o})}),e.none()),U4=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},jS=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),vS=(e,t,n)=>Math.min(Math.max(e,t),n),Jo=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Et=(e,t)=>{if(c(e)&&e.hasChildNodes()){const n=e.childNodes,s=vS(t,0,n.length-1);return n[s]}return e},pS=(e,t)=>t<0&&c(e)&&e.hasChildNodes()?void 0:Et(e,t),fS=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),B4=e=>h(e)&&e.charCodeAt(0)>=768&&fS.test(e),iS=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},sS=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},I4=c,nS=Fe,H4=Zo("display","block table"),JA=Zo("float","left right"),Mo=sS(I4,nS,ci(JA)),ZA=ci(Zo("white-space","pre pre-line pre-wrap")),Ao=s,od=F,M4=w.nodeIndex,bi=pS,rd=e=>e?e.createRange():w.DOM.createRng(),cd=e=>h(e)&&/[\r\n\t ]/.test(e),S4=e=>!!e.setStart&&!!e.setEnd,dd=e=>{const t=e.startContainer,n=e.startOffset;if(cd(e.toString())&&ZA(t.parentNode)&&s(t)){const e=t.data;if(cd(e[n-1])||cd(e[n+1]))return!0}return!1},KA=e=>{const s=e.ownerDocument,n=rd(s),t=s.createTextNode(W),o=e.parentNode;o.insertBefore(t,e),n.setStart(t,0),n.setEnd(t,1);const i=An(n.getBoundingClientRect());return o.removeChild(t),i},UA=e=>{const n=e.startContainer,t=e.endContainer,o=e.startOffset,i=e.endOffset;if(n===t&&s(t)&&o===0&&i===1){const n=e.cloneRange();return n.setEndAfter(t),Lt(n)}return null},A4=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Lt=e=>{var n;let t;const s=e.getClientRects();return s.length>0?t=An(s[0]):t=An(e.getBoundingClientRect()),!S4(e)&&od(e)&&A4(t)?KA(e):A4(t)&&S4(e)&&(n=UA(e))!==null&&n!==void 0?n:t},cn=(e,t)=>{const n=Z4(e,t);return n.width=1,n.right=n.left+1,n},WA=e=>{const t=[],n=e=>{if(e.height===0)return;if(t.length>0&&SS(e,t[t.length-1]))return;t.push(e)},o=(e,t)=>{const s=rd(e.ownerDocument);if(t<e.data.length){if(B4(e.data[t]))return;if(B4(e.data[t-1])&&(s.setStart(e,t),s.setEnd(e,t+1),!dd(s))){n(cn(Lt(s),!1));return}}t>0&&(s.setStart(e,t-1),s.setEnd(e,t),dd(s)||n(cn(Lt(s),!1))),t<e.data.length&&(s.setStart(e,t),s.setEnd(e,t+1),dd(s)||n(cn(Lt(s),!0)))},s=e.container(),i=e.offset();if(Ao(s))return o(s,i),t;if(I4(s))if(e.isAtEnd()){const e=bi(s,i);Ao(e)&&o(e,e.data.length),Mo(e)&&!od(e)&&n(cn(Lt(e),!1))}else{const a=bi(s,i);if(Ao(a)&&o(a,0),Mo(a)&&e.isAtEnd())return n(cn(Lt(a),!1)),t;const r=bi(e.container(),e.offset()-1);Mo(r)&&!od(r)&&(H4(r)||H4(a)||!Mo(a))&&n(cn(Lt(r),!1)),Mo(a)&&n(cn(Lt(a),!0))}return t},n=(e,t,s)=>{const i=()=>Ao(e)?t===0:t===0,r=()=>Ao(e)?t>=e.data.length:t>=e.childNodes.length,c=()=>{const n=rd(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},o=()=>(s||(s=WA(n(e,t))),s),l=()=>o().length>0,d=n=>n&&e===n.container()&&t===n.offset(),u=n=>bi(e,n?t-1:t);return{container:a(e),offset:a(t),toRange:c,getClientRects:o,isVisible:l,isAtStart:i,isAtEnd:r,isEqual:d,getNode:u}};n.fromRangeStart=e=>n(e.startContainer,e.startOffset),n.fromRangeEnd=e=>n(e.endContainer,e.endOffset),n.after=e=>n(e.parentNode,M4(e)+1),n.before=e=>n(e.parentNode,M4(e)),n.isAbove=(e,t)=>re(ue(t.getClientRects()),on(e.getClientRects()),Ho).getOr(!1),n.isBelow=(e,t)=>re(on(t.getClientRects()),ue(e.getClientRects()),Bo).getOr(!1),n.isAtStart=e=>!!e&&e.isAtStart(),n.isAtEnd=e=>!!e&&e.isAtEnd(),n.isTextPosition=e=>!!e&&s(e.container()),n.isElementPosition=e=>!n.isTextPosition(e);const Pi=(e,t)=>{s(t)&&t.data.length===0&&e.remove(t)},HA=(e,t,n)=>{t.insertNode(n),Pi(e,n.previousSibling),Pi(e,n.nextSibling)},PA=(t,n,s)=>{const o=e.from(s.firstChild),i=e.from(s.lastChild);n.insertNode(s),o.each(e=>Pi(t,e.previousSibling)),i.each(e=>Pi(t,e.nextSibling))},_d=(e,t,n)=>{Ol(n)?PA(e,t,n):HA(e,t,n)},Re=s,b4=Cn,v4=w.nodeIndex,p4=e=>{const t=e.parentNode;return b4(t)?p4(t):t},Ed=e=>e?aa(e.childNodes,(e,t)=>(b4(t)&&t.nodeName!=="BR"?e=e.concat(Ed(t)):e.push(t),e),[]):[],NA=(e,t)=>{let n=e;for(;n=n.previousSibling;){if(!Re(n))break;t+=n.data.length}return t},i4=e=>t=>e===t,TA=e=>{let t,n;t=Ed(p4(e)),n=vp(t,i4(e),e),t=t.slice(0,n+1);const s=aa(t,(e,n,s)=>(Re(n)&&Re(t[s-1])&&e++,e),0);return t=no(t,Pe([e.nodeName])),n=vp(t,i4(e),e),n-s},o4=e=>{const t=Re(e)?"text()":e.nodeName.toLowerCase();return t+"["+TA(e)+"]"},FA=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e;o=o.parentNode){if(n&&n(o))break;s.push(o)}return s},n4=(e,t)=>{let s=[],n=t.container(),o=t.offset(),i;if(Re(n))i=NA(n,o);else{const e=n.childNodes;o>=e.length?(i="after",o=e.length-1):i="before",n=e[o]}s.push(o4(n));let a=FA(e,n);return a=no(a,ci(Cn)),s=s.concat(Fc(a,e=>o4(e))),s.reverse().join("/")+","+i},MA=(e,t,n)=>{let s=Ed(e);return s=no(s,(e,t)=>!Re(e)||!Re(s[t-1])),s=no(s,Pe([t])),s[n]},AA=(e,t)=>{let s=e,o=0;for(;Re(s);){const n=s.data.length;if(t>=o&&t<=o+n){e=s,t=t-o;break}if(!Re(s.nextSibling)){e=s,t=n;break}o+=n,s=s.nextSibling}return Re(e)&&t>e.data.length&&(t=e.data.length),n(e,t)},W1=(e,t)=>{if(!t)return null;const o=t.split(","),a=o[0].split("/"),i=o.length>1?o[1]:"before",s=aa(a,(e,t)=>{const n=/([\w\-()]+)\[([0-9]+)\]/.exec(t);return n?(n[1]==="text()"&&(n[1]="#text"),MA(e,n[1],parseInt(n[2],10))):null},e);if(!s)return null;if(!Re(s)&&s.parentNode){let e;return i==="after"?e=v4(s)+1:e=v4(s),n(s.parentNode,e)}return AA(s,parseInt(i,10))},ra=C,kA=(e,t,n)=>{let o=e(t.data.slice(0,n)).length;for(let n=t.previousSibling;n&&s(n);n=n.previousSibling)o+=e(n.data).length;return o},V1=(e,t,n,o,i)=>{const r=i?o.startContainer:o.endContainer;let a=i?o.startOffset:o.endOffset;const c=[],l=e.getRoot();if(s(r))c.push(n?kA(t,r,a):a);else{let s=0;const t=r.childNodes;a>=t.length&&t.length&&(s=1,a=Math.max(0,t.length-1)),c.push(e.nodeIndex(t[a],n)+s)}for(let t=r;t&&t!==l;t=t.parentNode)c.push(e.nodeIndex(t,n));return c},EA=(e,t,n,s)=>{const o=t.dom,i=V1(o,e,n,s,!0),a=t.isForward(),r=$3(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:i,forward:a,...r};const c=V1(o,e,n,s,!1);return{start:i,end:c,forward:a,...r}},Id=(e,t,n)=>{let s=0;return i.each(e.select(t),e=>{if(e.getAttribute("data-mce-bogus")==="all")return;if(e===n)return!1;s++}),s},I1=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(c(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},P1=e=>(I1(e,!0),I1(e,!1),e),L1=(e,t)=>{if(c(e)&&(e=Et(e,t),ra(e)))return e;if(ke(e)){s(e)&&es(e)&&(e=e.parentNode);let t=e.previousSibling;if(ra(t))return t;if(t=e.nextSibling,ra(t))return t}},xA=e=>L1(e.startContainer,e.startOffset)||L1(e.endContainer,e.endOffset),M1=(e,t,n)=>{const s=n.getNode(),i=n.getRng();if(s.nodeName==="IMG"||ra(s)){const e=s.nodeName;return{name:e,index:Id(n.dom,e,s)}}const o=xA(i);if(o){const e=o.tagName;return{name:e,index:Id(n.dom,e,o)}}return EA(e,n,t,i)},wA=e=>{const t=e.getRng();return{start:n4(e.dom.getRoot(),n.fromRangeStart(t)),end:n4(e.dom.getRoot(),n.fromRangeEnd(t)),forward:e.isForward()}},_A=e=>({rng:e.getRng(),forward:e.isForward()}),k1=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},E1=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),l=e.isCollapsed(),a=e.getNode(),i=a.nodeName,r=e.isForward();if(i==="IMG")return{name:i,index:Id(n,i,a)};const c=P1(s.cloneRange());if(!l){c.collapse(!1);const e=k1(n,o+"_end",t);_d(n,c,e)}s=P1(s),s.collapse(!0);const d=k1(n,o+"_start",t);return _d(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:r}),{id:o,forward:r}},yA=(e,t,n=!1)=>t===2?M1(vt,n,e):t===3?wA(e):t?_A(e):E1(e,!1),Qd=d(M1,se,!0),O1=t=>{const n=e=>e(t),s=a(t),o=()=>i,i={tag:!0,inner:t,fold:(e,n)=>n(t),isValue:N,isError:S,map:e=>ce.value(e(t)),mapError:o,bind:n,exists:n,forall:n,getOr:s,or:o,getOrThunk:s,orThunk:o,getOrDie:s,each:e=>{e(t)},toOptional:()=>e.some(t)};return i},w1=t=>{const n=()=>s,s={tag:!1,inner:t,fold:(e)=>e(t),isValue:S,isError:N,map:n,mapError:e=>ce.error(e(t)),bind:n,exists:S,forall:N,getOr:se,or:se,getOrThunk:Ql,orThunk:Ql,getOrDie:zH(String(t)),each:g,toOptional:e.none};return s},vA=(e,t)=>e.fold(()=>w1(t),O1),ce={value:O1,error:w1,fromOption:vA},pA=e=>{if(!R(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return o(e,(s,o)=>{const r=fe(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!R(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...n)=>{const s=n.length;if(s!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+s);const r=e=>{const s=fe(e);if(t.length!==s.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+s.join(","));const o=qt(t,e=>O(s,e));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+s.join(", ")+`
Required: `+t.join(", "));return e[i].apply(null,n)};return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);const s=t[o];return s.apply(null,n)},match:r,log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}}),n},ot={generate:pA};ot.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const fA=e=>{const t=[],n=[];return o(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}},hA=e=>e.type==="inline-command"||e.type==="inline-format",uA=e=>e.type==="block-command"||e.type==="block-format",dA=e=>{const t=t=>ce.error({message:t,pattern:e}),n=(n,s,o)=>{if(e.format!==void 0){let o;if(R(e.format)){if(!qt(e.format,h))return t(n+" pattern has non-string items in the `format` array");o=e.format}else if(h(e.format))o=[e.format];else return t(n+" pattern has non-string `format` parameter");return ce.value(s(o))}return e.cmd!==void 0?h(e.cmd)?ce.value(o(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!ie(e))return t("Raw pattern is not an object");if(!h(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!h(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",e=>({type:"inline-format",start:s,end:o,format:e}),(e,t)=>({type:"inline-command",start:s,end:o,cmd:e,value:t}))}return e.replacement!==void 0?h(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):ce.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",t=>({type:"block-format",start:e.start,format:t[0]}),(t,n)=>({type:"block-command",start:e.start,cmd:t,value:n}))},o1=e=>m(e,uA),Ku=e=>m(e,hA),cA=(e,t)=>({inlinePatterns:Ku(e),blockPatterns:o1(e),dynamicPatternsLookup:t}),Pu=e=>{const t=fA(b(e,dA));return o(t.errors,e=>console.error(e.message,e.pattern)),t.values},aA=e=>t=>{const n=e(t);return Pu(n)},mu=Ut().deviceType,Jk=mu.isTouch(),Bk=w.DOM,Lk=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return je(t,(e,t)=>{const n=t.split("="),s=n[0],o=n.length>1?n[1]:s;return e[fs(s)]=fs(o),e},{})},wu=e=>Si(e,RegExp),l=e=>t=>t.options.get(e),xl=e=>h(e)||ie(e),yu=(e,t="")=>n=>{const s=h(n);if(s){if(n.indexOf("=")!==-1){const o=Lk(n);return{value:E(o,e.id).getOr(t),valid:s}}return{value:n,valid:s}}else return{valid:!1,message:"Must be a string."}},Tk=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:yu(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:yu(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=h(e)&&et(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{const t=O(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>sn(e)?{valid:!0,value:e}:h(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=e===!1||h(e)||Yn(e,h);return t?h(e)?{value:b(e.split(","),fs),valid:t}:R(e)?{value:e,valid:t}:e===!1?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ou(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=h(e)||Yn(e,h);if(t){const n=R(e)?e:b(e.split(","),fs);return{value:n,valid:t}}return{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{const t=sn(e)||h(e);return t?e===!1||mu.isiPhone()||mu.isiPad()?{value:"",valid:t}:{value:e===!0?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Jk}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>e===!1||h(e)||_(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{const t=e===!1||h(e);return t?{value:e===!1?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:xl}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:xl}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:xl}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>h(e)||e===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>{if(Yn(e,ie)||e===!1){const t=e===!1?[]:e;return{value:Pu(t),valid:!0}}return{valid:!1,message:"Must be an array of objects or false."}},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>_(e)?{value:aA(e),valid:!0}:{valid:!1,message:"Must be a single function"},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>Yn(e,wu)?{value:e,valid:!0}:wu(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:We.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Bk.getAttrib(e.getElement(),"placeholder")})})},Fk=l("iframe_attrs"),Mk=l("doctype"),xu=l("document_base_url"),Ek=l("body_id"),xk=l("body_class"),ku=l("content_security_policy"),wk=l("br_in_pre"),ge=l("forced_root_block"),Ts=l("forced_root_block_attrs"),_k=l("newline_behavior"),yk=l("br_newline_selector"),jk=l("no_newline_selector"),bk=l("keep_styles"),vk=l("end_container_on_empty_block"),Lu=l("automatic_uploads"),Ru=l("images_reuse_filename"),gk=l("images_replace_blob_uris"),Hu=l("icons"),mk=l("icons_url"),dk=l("images_upload_url"),lk=l("images_upload_base_path"),ok=l("images_upload_credentials"),sk=l("images_upload_handler"),nk=l("content_css_cors"),lu=l("referrer_policy"),qu=l("language"),tk=l("language_url"),Gu=l("indent_use_margin"),ZE=l("indentation"),YE=l("content_css"),UE=l("content_style"),Ju=l("font_css"),IE=l("directionality"),PE=l("inline_boundaries_selector"),n1=l("object_resizing"),LE=l("resize_img_proportional"),TE=l("placeholder"),i1=l("event_root"),SE=l("service_message"),ys=l("theme"),lg=l("theme_url"),au=l("model"),OE=l("model_url"),Ls=l("inline_boundaries"),wE=l("formats"),_E=l("preview_styles"),jE=l("format_empty_lines"),bE=l("format_noneditable_selector"),gE=l("custom_ui_selector"),ou=l("inline"),pE=l("hidden_input"),hE=l("submit_patch"),uE=l("add_form_submit_trigger"),lE=l("add_unload_trigger"),aE=l("custom_undo_redo_levels"),iE=l("disable_nodechange"),x1=l("readonly"),C1=l("content_css_cors"),Ua=l("plugins"),eE=l("external_plugins"),QC=l("block_unsupported_drop"),XC=l("visual"),qC=l("visual_table_class"),F1=l("visual_anchor_class"),$C=l("iframe_aria_text"),VC=l("setup"),LC=l("init_instance_callback"),NC=l("urlconverter_callback"),DC=l("auto_focus"),zC=l("browser_spellcheck"),TC=l("protect"),FC=l("paste_block_drop"),_a=l("paste_data_images"),MC=l("paste_preprocess"),SC=l("paste_postprocess"),AC=l("paste_webkit_styles"),kC=l("paste_remove_styles_if_webkit"),EC=l("paste_merge_formats"),xC=l("smart_paste"),jC=l("paste_as_text"),vC=l("paste_tab_spaces"),gC=l("allow_html_data_urls"),fC=l("text_patterns"),hC=l("text_patterns_lookup"),Z1=l("noneditable_class"),uC=l("editable_class"),sC=l("noneditable_regexp"),nC=l("preserve_cdata"),tC=e=>e.options.isSet("text_patterns_lookup"),eC=e=>i.explode(e.options.get("font_size_style_values")),Jx=e=>i.explode(e.options.get("font_size_classes")),Zx=e=>e.options.get("encoding")==="xml",a4=e=>i.explode(e.options.get("images_file_types")),Qx=l("table_tab_navigation"),Xx=c,l4=s,d4=e=>{const t=e.parentNode;t&&t.removeChild(e)},u4=e=>{const t=vt(e);return{count:e.length-t.length,text:t}},h4=e=>{let t;for(;(t=e.data.lastIndexOf(q))!==-1;)e.deleteData(t,1)},m4=(e,t)=>(Dn(e),t),qx=(e,t)=>{const s=u4(e.data.substr(0,t.offset())),o=u4(e.data.substr(t.offset())),i=s.text+o.text;return i.length>0?(h4(e),n(e,t.offset()-s.count)):t},Kx=(e,t)=>{const s=t.container(),o=EH(be(s.childNodes),e).map(e=>e<t.offset()?n(s,t.offset()-1):t).getOr(t);return Dn(e),o},Wx=(e,t)=>l4(e)&&t.container()===e?qx(e,t):m4(e,t),Lx=(e,t)=>t.container()===e.parentNode?Kx(e,t):m4(e,t),Nx=(e,t)=>n.isTextPosition(t)?Wx(e,t):Lx(e,t),Dn=e=>{Xx(e)&&ke(e)&&(ah(e)?e.removeAttribute("data-mce-caret"):d4(e)),l4(e)&&(h4(e),e.data.length===0&&d4(e))},Dx=C,zx=nt,Tx=Uo,Fx="*[contentEditable=false],video,audio,embed,object",x4=(e,t,n)=>{const s=Z4(t.getBoundingClientRect(),n);let o,i;if(e.tagName==="BODY"){const t=e.ownerDocument.documentElement;o=e.scrollLeft||t.scrollLeft,i=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();o=e.scrollLeft-t.left,i=e.scrollTop-t.top}s.left+=o,s.right+=o,s.top+=i,s.bottom+=i,s.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},kx=e=>{var n,s;const o=J(t.fromDom(e),Fx);for(let t=0;t<o.length;t++){const i=o[t].dom;let e=i.previousSibling;if(ga(e)){const t=e.data;t.length===1?(n=e.parentNode)===null||n===void 0?void 0:n.removeChild(e):e.deleteData(t.length-1,1)}if(e=i.nextSibling,pa(e)){const t=e.data;t.length===1?(s=e.parentNode)===null||s===void 0?void 0:s.removeChild(e):e.deleteData(0,1)}}},xx=(e,t,n,s)=>{const a=It();let r,o;const l=ge(e),i=e.dom,d=(e,s)=>{let r;if(c(),Tx(s))return null;if(n(s)){const n=Wz(l,s,e),d=x4(t,s,e);i.setStyle(n,"top",d.top),o=n;const c=i.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});i.setStyles(c,{...d}),i.add(t,c),a.set({caret:c,element:s,before:e}),e&&i.addClass(c,"mce-visual-caret-before"),u(),r=s.ownerDocument.createRange(),r.setStart(n,0),r.setEnd(n,0)}else return o=Xz(s,e),r=s.ownerDocument.createRange(),bo(o.nextSibling)?(r.setStart(o,0),r.setEnd(o,0)):(r.setStart(o,1),r.setEnd(o,1)),r;return r},c=()=>{kx(t),o&&(Dn(o),o=null),a.on(e=>{i.remove(e.caret),a.clear()}),r&&(clearInterval(r),r=void 0)},u=()=>{r=setInterval(()=>{a.on(e=>{s()?i.toggleClass(e.caret,"mce-visual-caret-hidden"):i.addClass(e.caret,"mce-visual-caret-hidden")})},500)},h=()=>{a.on(e=>{const n=x4(t,e.element,e.before);i.setStyles(e.caret,{...n})})},m=()=>clearInterval(r),f=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{show:d,hide:c,getCss:f,reposition:h,destroy:m}},k4=()=>v.browser.isFirefox(),bo=e=>Dx(e)||zx(e),wo=e=>bo(e)||wt(e)&&k4(),Ox=Ne,nd=C,wx=nt,z4=Zo("display","block table table-cell table-caption list-item"),D4=ke,N4=es,_x=c,yx=s,jx=Fe,Pn=e=>e>0,zn=e=>e<0,oi=(e,t)=>{let n;for(;n=e(t);)if(!N4(n))return n;return null},Lo=(e,t,n,s,o)=>{const a=new P(e,s),r=nd(e)||N4(e);let i;if(zn(t)){if(r&&(i=oi(a.prev.bind(a),!0),n(i)))return i;for(;i=oi(a.prev.bind(a),o);)if(n(i))return i}if(Pn(t)){if(r&&(i=oi(a.next.bind(a),!0),n(i)))return i;for(;i=oi(a.next.bind(a),o);)if(n(i))return i}return null},gx=(e,n)=>{const s=e=>Ox(e.dom),o=e=>e.dom===n;return St(t.fromDom(e),s,o).map(e=>e.dom).getOr(n)},kt=(e,t)=>{for(;e&&e!==t;){if(z4(e))return e;e=e.parentNode}return null},Ge=(e,t,n)=>kt(e.container(),n)===kt(t.container(),n),Il=(t,n)=>{if(!n)return e.none();const s=n.container(),o=n.offset();return _x(s)?e.from(s.childNodes[o+t]):e.none()},q4=(e,t)=>{var s;const o=(s=t.ownerDocument)!==null&&s!==void 0?s:document,n=o.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},mx=(e,t,n)=>kt(t,e)===kt(n,e),G4=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let s=n;for(;s&&s!==t;){let e=s[o];if(e&&D4(e)&&(e=e[o]),nd(e)||wx(e)){if(mx(t,e,s))return e;break}if(jx(e))break;s=s.parentNode}return null},Cs=d(q4,!0),Po=d(q4,!1),Dl=(e,t,n)=>{let o;const a=d(G4,!0,t),r=d(G4,!1,t),i=n.startContainer,c=n.startOffset;if(es(i)){const e=yx(i)?i.parentNode:i,t=e.getAttribute("data-mce-caret");if(t==="before"&&(o=e.nextSibling,wo(o)))return Cs(o);if(t==="after"&&(o=e.previousSibling,wo(o)))return Po(o)}if(!n.collapsed)return n;if(s(i)){if(D4(i)){if(e===1){if(o=r(i),o)return Cs(o);if(o=a(i),o)return Po(o)}if(e===-1){if(o=a(i),o)return Po(o);if(o=r(i),o)return Cs(o)}return n}if(ga(i)&&c>=i.data.length-1)return e===1&&(o=r(i),o)?Cs(o):n;if(pa(i)&&c<=1)return e===-1&&(o=a(i),o)?Po(o):n;if(c===i.data.length)return o=r(i),o?Cs(o):n;if(c===0)return o=a(i),o?Po(o):n}return n},J4=(e,t)=>Il(e?0:-1,t).filter(nd),No=(e,t,s)=>{const o=Dl(e,t,s);return e===-1?n.fromRangeStart(o):n.fromRangeEnd(o)},ii=n=>e.from(n.getNode()).map(t.fromDom),hx=n=>e.from(n.getNode(!0)).map(t.fromDom),kl=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},li=(e,t)=>{const n=Ge(e,t);return!!(!n&&F(e.getNode()))||n};(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(B||(B={}));const ux=C,qe=s,c0=c,wl=F,Un=Fe,u0=mz,wi=f3,dx=(e,t)=>{const s=[];let n=e;for(;n&&n!==t;)s.push(n),n=n.parentNode;return s},f0=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,p0=(e,t)=>{if(Pn(e)){if(Un(t.previousSibling)&&!qe(t.previousSibling))return n.before(t);if(qe(t))return n(t,0)}if(zn(e)){if(Un(t.nextSibling)&&!qe(t.nextSibling))return n.after(t);if(qe(t))return n(t,t.data.length)}return zn(e)?wl(t)?n.before(t):n.after(t):n.before(t)},lx=(e,t)=>{const s=t.nextSibling;return s&&Un(s)?qe(s)?n(s,0):n.before(s):ml(B.Forwards,n.after(t),e)},ml=(e,t,s)=>{let r,o,i,a;if(!c0(s)||!t)return null;if(t.isEqual(n.after(s))&&s.lastChild){if(a=n.after(s.lastChild),zn(e)&&Un(s.lastChild)&&c0(s.lastChild))return wl(s.lastChild)?n.before(s.lastChild):a}else a=t;const c=a.container();let l=a.offset();if(qe(c)){if(zn(e)&&l>0)return n(c,--l);if(Pn(e)&&l<c.length)return n(c,++l);r=c}else{if(zn(e)&&l>0&&(o=f0(c,l-1),Un(o)))return!u0(o)&&(i=Lo(o,e,wi,o),i)?qe(i)?n(i,i.data.length):n.after(i):qe(o)?n(o,o.data.length):n.before(o);if(Pn(e)&&l<c.childNodes.length&&(o=f0(c,l),Un(o)))return wl(o)?lx(s,o):!u0(o)&&(i=Lo(o,e,wi,o),i)?qe(i)?n(i,0):n.before(i):qe(o)?n(o,0):n.after(o);r=o||a.getNode()}if(r&&(Pn(e)&&a.isAtEnd()||zn(e)&&a.isAtStart())&&(r=Lo(r,e,N,s,!0),wi(r,s)))return p0(e,r);o=r&&Lo(r,e,wi,s);const d=ln(m(dx(c,s),ux));return d&&(!o||!d.contains(o))?(Pn(e)?a=n.after(d):a=n.before(d),a):o?p0(e,o):null},it=e=>({next:t=>ml(B.Forwards,t,e),prev:t=>ml(B.Backwards,t,e)}),rx=(e,t,s)=>{const o=e?n.before(s):n.after(s);return Se(e,t,o)},ax=e=>F(e)?n.before(e):n.after(e),_0=e=>n.isTextPosition(e)?e.offset()===0:Fe(e.getNode()),w0=e=>{if(n.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Fe(e.getNode(!0))},O0=(e,t)=>!n.isTextPosition(e)&&!n.isTextPosition(t)&&e.getNode()===t.getNode(!0),nx=e=>!n.isTextPosition(e)&&F(e.getNode()),YO=(e,t,n)=>e?!O0(t,n)&&!nx(t)&&w0(t)&&_0(n):!O0(n,t)&&_0(t)&&w0(n),Se=(t,n,s)=>{const o=it(n);return e.from(t?o.next(s):o.prev(s))},Vi=(t,n,s)=>Se(t,n,s).bind(o=>Ge(s,o,n)&&YO(t,s,o)?Se(t,n,o):e.some(o)),A0=(t,n,s,o)=>Vi(t,n,s).bind(s=>o(s)?A0(t,n,s,o):e.some(s)),os=(t,o)=>{const i=t?o.firstChild:o.lastChild;return s(i)?e.some(n(i,t?0:i.data.length)):i?Fe(i)?e.some(t?n.before(i):ax(i)):rx(t,o,i):e.none()},de=d(Se,!0),ye=d(Se,!1),oe=d(os,!0),lt=d(os,!1),Nc="_mce_caret",Ie=e=>c(e)&&e.id===Nc,Xt=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ie(n))return n;n=n.parentNode}return null},qO=e=>h(e.start),WO=e=>f(e,"rng"),VO=e=>f(e,"id"),I0=e=>f(e,"name"),B0=e=>i.isArray(e.start),ca=e=>!!I0(e)||!sn(e.forward)||e.forward,$0=(e,t)=>(c(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),BO=(t,n)=>{const s=e.from(W1(t.getRoot(),n.start)),o=e.from(W1(t.getRoot(),n.end));return re(s,o,(e,s)=>{const o=t.createRng();return o.setStart(e.container(),e.offset()),o.setEnd(s.container(),s.offset()),{range:o,forward:ca(n)}})},IO=(e,t)=>{var n;const o=(n=e.ownerDocument)!==null&&n!==void 0?n:document,s=o.createTextNode(q);e.appendChild(s),t.setStart(s,0),t.setEnd(s,0)},PO=e=>!e.hasChildNodes(),DO=(e,t)=>lt(e).fold(S,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),Y0=(e,t,n)=>!!(PO(t)&&Xt(e,t))&&(IO(t,n),!0),G0=(e,t,n,o)=>{const i=n[t?"start":"end"],a=e.getRoot();if(i){let e=a,n=i[0];for(let t=i.length-1;e&&t>=1;t--){const n=e.childNodes;if(Y0(a,e,o))return!0;if(i[t]>n.length-1)return!!Y0(a,e,o)||DO(e,o);e=n[i[t]]}s(e)&&(n=Math.min(i[0],e.data.length)),c(e)&&(n=Math.min(i[0],e.childNodes.length)),t?o.setStart(e,n):o.setEnd(e,n)}return!0},sc=e=>s(e)&&e.data.length>0,Q0=(t,o,a)=>{const r=t.get(a.id+"_"+o),c=r?.parentNode,l=a.keep;if(r&&c){let d,u;if(o==="start"?l?r.hasChildNodes()?(d=r.firstChild,u=1):sc(r.nextSibling)?(d=r.nextSibling,u=0):sc(r.previousSibling)?(d=r.previousSibling,u=r.previousSibling.data.length):(d=c,u=t.nodeIndex(r)+1):(d=c,u=t.nodeIndex(r)):l?r.hasChildNodes()?(d=r.firstChild,u=1):sc(r.previousSibling)?(d=r.previousSibling,u=r.previousSibling.data.length):(d=c,u=t.nodeIndex(r)):(d=c,u=t.nodeIndex(r)),!l){const e=r.previousSibling,n=r.nextSibling;i.each(i.grep(r.childNodes),e=>{s(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});let c;for(;c=t.get(a.id+"_"+o);)t.remove(c,!0);if(s(n)&&s(e)&&!v.browser.isOpera()){const s=e.data.length;e.appendData(n.data),t.remove(n),d=e,u=s}}return e.some(n(d,u))}return e.none()},TO=(t,n)=>{const s=t.createRng();return G0(t,!0,n,s)&&G0(t,!1,n,s)?e.some({range:s,forward:ca(n)}):e.none()},MO=(e,t)=>{const n=Q0(e,"start",t),s=Q0(e,"end",t);return re(n,s.or(n),(n,s)=>{const o=e.createRng();return o.setStart($0(e,n.container()),n.offset()),o.setEnd($0(e,s.container()),s.offset()),{range:o,forward:ca(t)}})},SO=(t,n)=>e.from(t.select(n.name)[n.index]).map(e=>{const n=t.createRng();return n.selectNode(e),{range:n,forward:!0}}),xO=(t,n)=>{const s=t.dom;if(n){if(B0(n))return TO(s,n);if(qO(n))return BO(s,n);if(VO(n))return MO(s,n);if(I0(n))return SO(s,n);if(WO(n))return e.some({range:n.rng,forward:ca(n)})}return e.none()},wO=(e,t,n)=>yA(e,t,n),_O=(e,t)=>{xO(e,t).each(({range:t,forward:n})=>{e.setRng(t,n)})},we=e=>c(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",yO=e=>t=>e===t,Ia=yO(W),js=e=>e!==""&&` 
	`.indexOf(e)!==-1,Rr=e=>!js(e)&&!Ia(e)&&!Dh(e),jO=e=>({value:e}),Lr=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},mO=e=>{const t=Lr(e.red)+Lr(e.green)+Lr(e.blue);return jO(t)},hO=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,oO=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,f2=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),p2=(e,t,n,s)=>{const o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),r=parseFloat(s);return f2(o,i,a,r)},nO=t=>{if(t==="transparent")return e.some(f2(0,0,0,0));const s=hO.exec(t);if(s!==null)return e.some(p2(s[1],s[2],s[3],"1"));const n=oO.exec(t);return n!==null?e.some(p2(n[1],n[2],n[3],n[4])):e.none()},Ba=e=>nO(e).map(mO).map(e=>"#"+e.value).getOr(e),Sr=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Gw=e=>ft(e,e=>{const n=Jo(e);return n?[t.fromDom(n)]:[]}),Yw=e=>Sr(e).length>1,qw=e=>m(Gw(e),io),Uw=e=>J(e,"td[data-mce-selected],th[data-mce-selected]"),O2=(e,t)=>{const n=Uw(t);return n.length>0?n:qw(e)},gs=e=>O2(Sr(e.selection.getSel()),t.fromDom(e.getBody())),Ns=(e,t)=>Vo(e,"table",t),Vw=n=>{const o=n.startContainer,i=n.startOffset;return s(o)?i===0?e.some(t.fromDom(o)):e.none():e.from(o.childNodes[i]).map(t.fromDom)},Bw=n=>{const o=n.endContainer,i=n.endOffset;return s(o)?i===o.data.length?e.some(t.fromDom(o)):e.none():e.from(o.childNodes[i-1]).map(t.fromDom)},A2=e=>x8(e).fold(a([e]),t=>[e].concat(A2(t))),wr=e=>gu(e).fold(a([e]),t=>k(t)==="br"?Sn(t).map(t=>[e].concat(wr(t))).getOr([]):[e].concat(wr(t))),yr=(e,t)=>re(Vw(t),Bw(t),(t,n)=>{const s=I(A2(e),d(j,t)),o=I(wr(e),d(j,n));return s.isSome()&&o.isSome()}).getOr(!1),br=(e,t,n,o)=>{const r=n,c=new P(n,r),l=co(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!O(["td","th","table"],t.toLowerCase()));let a=n;do{if(s(a)&&i.trim(a.data).length!==0){o?t.setStart(a,0):t.setEnd(a,a.data.length);return}if(l[a.nodeName]){o?t.setStartBefore(a):a.nodeName==="BR"?t.setEndBefore(a):t.setEndAfter(a);return}}while(a=o?c.next():c.prev())r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Ja=e=>{const t=e.selection.getSel();return r(t)&&t.rangeCount>0},gr=(e,t)=>{const n=gs(e);n.length>0?o(n,n=>{const o=n.dom,s=e.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),t(s,!0)}):t(e.selection.getRng(),!1)},D2=(e,t,n)=>{const s=E1(e,t);n(s),e.moveToBookmark(s)},er=e=>$e(e?.nodeType),fr=e=>c(e)&&!we(e)&&!Ie(e)&&!Cn(e),Lw=(e,t)=>{if(fr(t)&&!/^(TD|TH)$/.test(t.nodeName)){const s=e.getAttrib(t,"data-mce-selected"),n=parseInt(s,10);return!isNaN(n)&&n>0}return!1},hn=e=>e.isContentEditable===!0,H2=(e,t,n)=>{const{selection:s,dom:i}=e,o=s.getNode(),a=C(o);D2(s,!0,()=>{t()});const r=a&&C(o);r&&i.isChildOf(o,e.getBody())?e.selection.select(o):n(s.getStart())&&Nw(i,s)},Nw=(e,t)=>{var n,o;const i=t.getRng(),{startContainer:a,startOffset:r}=i,l=t.getNode();if(Lw(e,l))return;if(c(a)){const l=a.childNodes,d=e.getRoot();let c;if(r<l.length){const t=l[r];c=new P(t,(n=e.getParent(t,e.isBlock))!==null&&n!==void 0?n:d)}else{const t=l[l.length-1];c=new P(t,(o=e.getParent(t,e.isBlock))!==null&&o!==void 0?o:d),c.next(!0)}for(let n=c.current();n;n=c.next()){if(e.getContentEditable(n)==="false")return;if(s(n)&&!hl(n)){i.setStart(n,0),t.setRng(i);return}}}},B2=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(c(e)||!hl(e))return e}},ur=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||As(e,t),ms=(e,t,n)=>e.schema.isValidChild(t,n),hl=(e,t=!1)=>{if(r(e)&&s(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return Tn(n)}return!1},Dw=e=>r(e)&&s(e)&&e.length===0,zw=(e,n)=>{const s="[data-mce-cef-wrappable]",o=bE(e),i=Es(o)?s:`${s},${o}`;return Le(t.fromDom(n),i)},q2=(e,t)=>{const n=e.dom;return fr(t)&&n.getContentEditable(t)==="false"&&zw(e,t)&&n.select('[contenteditable="true"]',t).length===0},Pt=(e,t)=>_(e)?e(t):(r(t)&&(e=e.replace(/%(\w+)/g,(e,n)=>t[n]||e)),e),pr=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),vr=(e,t)=>{if(D(e))return null;let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=Ba(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/['"]/g,"").replace(/,\s+/g,",")),n},Qa=(e,t,n)=>{const s=e.getStyle(t,n);return vr(s,n)},Z2=(e,t)=>{let n;return e.getParent(t,t=>!!c(t)&&(n=e.getStyle(t,"text-decoration"),!!n&&n!=="none")),n},Ya=(e,t,n)=>e.getParents(t,n,e.getRoot()),Cr=(e,t,n)=>{const s=e.formatter.get(t);return r(s)&&T(s,n)},Sw=(e,t)=>{const n=e=>{const t=e=>_(e)||e.length>1&&e.charAt(0)==="%";return T(["styles","attributes"],n=>E(e,n).exists(e=>{const n=R(e)?e:Uc(e);return T(n,t)}))};return Cr(e,t,n)},Aw=(e,t,n)=>{const o=["inline","block","selector","attributes","styles","classes"],s=e=>co(e,(e,t)=>T(o,e=>e===t));return Cr(e,t,t=>{const o=s(t);return Cr(e,n,e=>{const t=s(e);return vH(o,t)})})},Qe=e=>ds(e,"block"),xw=e=>Qe(e)&&e.wrapper===!0,Ow=e=>Qe(e)&&e.wrapper!==!0,_e=e=>ds(e,"selector"),L=e=>ds(e,"inline"),vw=e=>_e(e)&&L(e)&&qn(E(e,"mixed"),!0),Kr=e=>_e(e)&&e.expand!==!1&&!L(e),rs=we,u3=Ya,h3=hl,uw=ur,rw=e=>F(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,p3=(e,t)=>{let n=t;for(;n;){if(c(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},g3=(e,t,n,s)=>{const o=t.data;if(e){for(let e=n;e>0;e--)if(s(o.charAt(e-1)))return e}else for(let e=n;e<o.length;e++)if(s(o.charAt(e)))return e;return-1},ew=(e,t,n)=>g3(e,t,n,e=>Ia(e)||js(e)),J_=(e,t,n)=>g3(e,t,n,Rr),j3=(t,n,s,o,i,a)=>{let r;const l=t.getParent(s,t.isBlock)||n,c=(n,s,o)=>{const a=_n(t),c=i?a.backwards:a.forwards;return e.from(c(n,s,(e,t)=>rs(e.parentNode)?-1:(r=e,o(i,e,t)),l))},d=c(s,o,ew);return d.bind(t=>a?c(t.container,t.offset+(i?-1:0),J_):e.some(t)).orThunk(()=>r?e.some({container:r,offset:i?0:r.length}):e.none())},y3=(e,t,n,o,i)=>{const c=o[i];s(o)&&Es(o.data)&&c&&(o=c);const a=u3(e,o);for(let s=0;s<a.length;s++)for(let i=0;i<t.length;i++){const o=t[i];if(r(o.collapsed)&&o.collapsed!==n.collapsed)continue;if(_e(o)&&e.is(a[s],o.selector))return a[s]}return o},_3=(e,t,n,o)=>{let i=n;const c=e.getRoot(),a=t[0];if(Qe(a)&&(i=a.wrapper?null:e.getParent(n,a.block,c)),!i){const t=(r=e.getParent(n,"LI,TD,TH"))!==null&&r!==void 0?r:c;i=e.getParent(s(n)?n.parentNode:n,t=>t!==c&&uw(e.schema,t),t)}if(i&&Qe(a)&&a.wrapper&&(i=u3(e,i,"ul,ol").reverse()[0]||i),!i){i=n;for(var r;i&&i[o]&&!e.isBlock(i[o]);)if(i=i[o],pr(i,"br"))break}return i||n},w3=(e,t,n,s)=>{const o=n.parentNode;return!r(n[s])&&(!!(o===t||D(o)||e.isBlock(o))||w3(e,t,o,s))},ka=(e,t,n,o,i)=>{let a=n;const r=i?"previousSibling":"nextSibling",c=e.getRoot();if(s(n)&&!h3(n)&&(i?o>0:o<n.data.length))return n;for(;a;){if(!t[0].block_expand&&e.isBlock(a))return a;for(let t=a[r];t;t=t[r]){const n=s(t)&&!w3(e,c,t,r);if(!rs(t)&&!rw(t)&&!h3(t,n))return a}if(a===c||a.parentNode===c){n=a;break}a=a.parentNode}return n},x3=e=>rs(e.parentNode)||rs(e),jn=(e,t,n,o=!1)=>{let{startContainer:a,startOffset:l,endContainer:i,endOffset:r}=t;const d=n[0];if(c(a)&&a.hasChildNodes()&&(a=Et(a,l),s(a)&&(l=0)),c(i)&&i.hasChildNodes()&&(i=Et(i,t.collapsed?r:r-1),s(i)&&(r=i.data.length)),a=p3(e,a),i=p3(e,i),x3(a)&&(a=rs(a)?a:a.parentNode,t.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,s(a)&&(l=t.collapsed?a.length:0)),x3(i)&&(i=rs(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,s(i)&&(r=t.collapsed?0:i.length)),t.collapsed){const t=j3(e,e.getRoot(),a,l,!0,o);t.each(({container:e,offset:t})=>{a=e,l=t});const n=j3(e,e.getRoot(),i,r,!1,o);n.each(({container:e,offset:t})=>{i=e,r=t})}return(L(d)||d.block_expand)&&((!L(d)||!s(a)||l===0)&&(a=ka(e,n,a,l,!0)),(!L(d)||!s(i)||r===i.data.length)&&(i=ka(e,n,i,r,!1))),Kr(d)&&(a=y3(e,n,t,a,"previousSibling"),i=y3(e,n,t,i,"nextSibling")),(Qe(d)||_e(d))&&(a=_3(e,n,a,"previousSibling"),i=_3(e,n,i,"nextSibling"),Qe(d)&&(e.isBlock(a)||(a=ka(e,n,a,l,!0)),e.isBlock(i)||(i=ka(e,n,i,r,!1)))),c(a)&&a.parentNode&&(l=e.nodeIndex(a),a=a.parentNode),c(i)&&i.parentNode&&(r=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:l,endContainer:i,endOffset:r}},Ws=(e,t,n)=>{var d;const p=t.startOffset,o=Et(t.startContainer,p),h=t.endOffset,i=Et(t.endContainer,h-1),u=e=>{const t=e[0];s(t)&&t===o&&p>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return h===0&&e.length>0&&n===i&&s(n)&&e.splice(e.length-1,1),e},f=(e,t,n)=>{const s=[];for(;e&&e!==n;e=e[t])s.push(e);return s},m=(t,n)=>e.getParent(t,e=>e.parentNode===n,n),a=(e,t,s)=>{const o=s?"nextSibling":"previousSibling";for(let i=e,r=i.parentNode;i&&i!==t;i=r){r=i.parentNode;const a=f(i===e?i:i[o],o);a.length&&(s||a.reverse(),n(u(a)))}};if(o===i)return n(u([o]));const l=(d=e.findCommonAncestor(o,i))!==null&&d!==void 0?d:e.getRoot();if(e.isChildOf(o,i))return a(o,l,!0);if(e.isChildOf(i,o))return a(i,l);const c=m(o,l)||o,r=m(i,l)||i;a(o,c,!0);const g=f(c===o?c:c.nextSibling,"nextSibling",r===i?r.nextSibling:r);g.length&&n(u(g)),a(i,r)},Q_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],X_=e=>Ae(e)&&cr(e)===q,G_=(e,t,n,s)=>Ue(t).fold(()=>"skipping",o=>s==="br"||X_(t)?"valid":XS(t)?"existing":Ie(t.dom)?"caret":T(Q_,e=>Le(t,e))?"valid-block":!ms(e,n,s)||!ms(e,k(o),n)?"invalid-child":"valid"),Y_=(e,t)=>{const n=jn(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},F3=(e,t,n,s,o,i)=>{const{uid:r=t,...l}=n;lo(e,fo()),$(e,`${Xn()}`,r),$(e,`${un()}`,s);const{attributes:c={},classes:a=[]}=o(r,l);if(Ct(e,c),$S(e,a),i){a.length>0&&$(e,`${vo()}`,a.join(","));const t=fe(c);t.length>0&&$(e,`${yo()}`,t.join(","))}},q_=e=>{Ui(e,fo()),G(e,`${Xn()}`),G(e,`${un()}`),G(e,`${go()}`);const t=mt(e,`${yo()}`).map(e=>e.split(",")).getOr([]),n=mt(e,`${vo()}`).map(e=>e.split(",")).getOr([]);o(t,t=>G(e,t)),PS(e,n),G(e,`${vo()}`),G(e,`${yo()}`)},z3=(e,n,s,o,i)=>{const a=t.fromTag("span",e);return F3(a,n,s,o,i,!1),a},K_=(e,n,s,i,a,r)=>{const d=[],h=z3(e.getDoc(),s,r,i,a),l=It(),c=()=>{l.clear()},m=()=>l.get().getOrThunk(()=>{const e=Vn(h);return d.push(e),l.set(e),e}),u=e=>{o(e,f)},f=t=>{const n=G_(e,t,"span",k(t));switch(n){case"invalid-child":{c();const e=Y(t);u(e),c();break}case"valid-block":{c(),F3(t,s,r,i,a,!0);break}case"valid":{const e=m();YN(t,e);break}}},p=e=>{const n=b(e,t.fromDom);u(n)};return Ws(e.dom,n,e=>{c(),p(e)}),d},U_=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,i=o.getRng(),a=gs(e).length>0,r=l0("mce-annotation");if(i.collapsed&&!a&&Y_(e,i),o.getRng().collapsed&&!a){const i=z3(e.getDoc(),r,s,t,n.decorate);Ti(i,W),o.getRng().insertNode(i.dom),o.select(i.dom)}else D2(o,!1,()=>{gr(e,o=>{K_(e,o,r,t,n.decorate,s)})})})},L3=t=>{const n=US();qS(t,n);const i=GS(t,n),a=$l("span"),s=e=>{o(e,e=>{a(e)?Ot(e):q_(e)})};return{register:(e,t)=>{n.register(e,t)},annotate:(e,s)=>{n.lookup(e).each(n=>{U_(t,e,n,s)})},annotationChanged:(e,t)=>{i.addListener(e,t)},remove:n=>{const o=t.selection.getBookmark();v0(t,e.some(n)).each(({elements:e})=>{s(e)}),t.selection.moveToBookmark(o)},removeAll:e=>{const n=t.selection.getBookmark();x(h0(t,e),(e)=>{s(e)}),t.selection.moveToBookmark(n)},getAll:e=>{const n=h0(t,e);return Bi(n,e=>b(e,e=>e.dom))}}},Ks=e=>({getBookmark:d(wO,e),moveToBookmark:d(_O,e)});Ks.isBookmarkNode=we;const P3=(e,t,n)=>!n.collapsed&&T(n.getClientRects(),n=>AS(n,e,t)),W_=(e,t)=>e.dispatch("PreProcess",t),z_=(e,t)=>e.dispatch("PostProcess",t),T_=e=>{e.dispatch("remove")},F_=e=>{e.dispatch("detach")},M_=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},x_=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},w_=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},p_=e=>{e.dispatch("PreInit")},l_=e=>{e.dispatch("PostRender")},Xy=e=>{e.dispatch("Init")},Yy=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},X3=(e,t,n)=>{e.dispatch(t,n)},Q3=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},Z3=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},qy=(e,t)=>e.dispatch("BeforeSetContent",t),eh=(e,t)=>e.dispatch("SetContent",t),Ky=(e,t)=>e.dispatch("BeforeGetContent",t),nh=(e,t)=>e.dispatch("GetContent",t),By=(e,t)=>{e.dispatch("AutocompleterStart",t)},Ry=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},zy=e=>{e.dispatch("AutocompleterEnd")},ry=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),ay=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),ch=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),u={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||u.metaKeyPressed(e),metaKeyPressed:e=>v.os.isMacOS()||v.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},nn="data-mce-selected",sy="table,img,figure.image,hr,video,span.mce-preview-object",hh=Math.abs,Ki=Math.round,Gc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ey=e=>e.type==="longpress"||e.type.indexOf("touch")===0,gh=(e,n)=>{const s=n.dom,f=n.getDoc(),p=document,h=n.getBody();let i,a,b,d,O,P,z,W,$,m,g,j,_,l,c,H,B;const F=e=>r(e)&&(Ph(e)||s.is(e,"figure.image")),D=e=>nt(e)||s.hasClass(e,"mce-preview-object"),V=(e,t)=>{if(ey(e)){const n=e.touches[0];return F(e.target)&&!P3(n.clientX,n.clientY,t)}return F(e.target)&&!P3(e.clientX,e.clientY,t)},U=e=>{const t=e.target;V(e,n.selection.getRng())&&!e.isDefaultPrevented()&&n.selection.select(t)},L=e=>s.hasClass(e,"mce-preview-object")&&r(e.firstElementChild)?[e,e.firstElementChild]:s.is(e,"figure.image")?[e.querySelector("img")]:[e],I=e=>{const o=n1(n);return!!o&&e.getAttribute("data-mce-resize")!=="false"&&e!==n.getBody()&&(s.hasClass(e,"mce-preview-object")&&r(e.firstElementChild)?Le(t.fromDom(e.firstElementChild),o):Le(t.fromDom(e),o))},K=e=>D(e)?s.create("img",{src:v.transparentSrc}):e.cloneNode(!0),w=(e,t,i)=>{if(r(i)){const a=L(e);o(a,e=>{e.style[t]||!n.schema.isValid(e.nodeName.toLowerCase(),t)?s.setStyle(e,t,i):s.setAttrib(e,t,""+i)})}},R=(e,t,n)=>{w(e,"width",t),w(e,"height",n)},E=e=>{let t,o,p,r,f;t=e.screenX-P,o=e.screenY-z,l=t*d[2]+m,c=o*d[3]+g,l=l<5?5:l,c=c<5?5:c,(F(i)||D(i))&&LE(n)!==!1?p=!u.modifierPressed(e):p=u.modifierPressed(e),p&&(hh(t)>hh(o)?(c=Ki(l*j),l=Ki(c/j)):(l=Ki(c/j),c=Ki(l*j))),R(a,l,c),r=d.startPos.x+t,f=d.startPos.y+o,r=r>0?r:0,f=f>0?f:0,s.setStyles(b,{left:r,top:f,display:"block"}),b.innerHTML=l+" &times; "+c,d[2]<0&&a.clientWidth<=l&&s.setStyle(a,"left",W+(m-l)),d[3]<0&&a.clientHeight<=c&&s.setStyle(a,"top",$+(g-c)),t=h.scrollWidth-H,o=h.scrollHeight-B,t+o!==0&&s.setStyles(b,{left:r-t,top:f-o}),_||(x_(n,i,m,g,"corner-"+d.name),_=!0)},C=()=>{const e=_;_=!1,e&&(w(i,"width",l),w(i,"height",c)),s.unbind(f,"mousemove",E),s.unbind(f,"mouseup",C),p!==f&&(s.unbind(p,"mousemove",E),s.unbind(p,"mouseup",C)),s.remove(a),s.remove(b),s.remove(O),T(i),e&&(w_(n,i,l,c,"corner-"+d.name),s.setAttrib(i,"style",s.getAttrib(i,"style"))),n.nodeChanged()},T=e=>{k();const _=s.getPos(e,h),o=_.x,r=_.y,t=e.getBoundingClientRect(),u=t.width||t.right-t.left,v=t.height||t.bottom-t.top;i!==e&&(y(),i=e,l=c=0);const w=n.dispatch("ObjectSelected",{target:e});I(e)&&!w.isDefaultPrevented()?x(Gc,(e,t)=>{const c=n=>{const c=L(i)[0];P=n.screenX,z=n.screenY,m=c.clientWidth,g=c.clientHeight,j=g/m,d=e,d.name=t,d.startPos={x:u*e[0]+o,y:v*e[1]+r},H=h.scrollWidth,B=h.scrollHeight,O=s.add(h,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=K(i),s.addClass(a,"mce-clonedresizable"),s.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",s.setStyles(a,{left:o,top:r,margin:0}),R(a,u,v),a.removeAttribute(nn),h.appendChild(a),s.bind(f,"mousemove",E),s.bind(f,"mouseup",C),p!==f&&(s.bind(p,"mousemove",E),s.bind(p,"mouseup",C)),b=s.add(h,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},m+" &times; "+g)};let n=s.get("mceResizeHandle"+t);n&&s.remove(n),n=s.add(h,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),s.bind(n,"mousedown",e=>{e.stopImmediatePropagation(),e.preventDefault(),c(e)}),e.elm=n,s.setStyles(n,{left:u*e[0]+o-n.offsetWidth/2,top:v*e[1]+r-n.offsetHeight/2})}):y(!1)},M=Di(T,0),y=(e=!0)=>{M.cancel(),k(),i&&e&&i.removeAttribute(nn),x(Gc,(e,t)=>{const n=s.get("mceResizeHandle"+t);n&&(s.unbind(n),s.remove(n))})},A=(e,t)=>s.isChildOf(e,t),S=i=>{if(_||n.removed||n.composing)return;const c=i.type==="mousedown"?i.target:e.getNode(),a=kn(t.fromDom(c),sy).map(e=>e.dom).getOrUndefined(),l=r(a)?s.getAttrib(a,nn,"1"):"1";if(o(s.select(`img[${nn}],hr[${nn}]`),e=>{e.removeAttribute(nn)}),r(a)&&A(a,h)){N();const t=e.getStart(!0);if(A(t,a)&&A(e.getEnd(!0),a)){s.setAttrib(a,nn,l),M.throttle(a);return}}y()},k=()=>{x(Gc,e=>{e.elm&&(s.unbind(e.elm),delete e.elm)})},N=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};n.on("init",()=>{N(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",S),n.on("keyup compositionend",e=>{i&&i.nodeName==="TABLE"&&S(e)}),n.on("hide blur",y),n.on("contextmenu longpress",U,!0)}),n.on("remove",k);const q=()=>{M.cancel(),i=a=O=null};return{isResizable:I,showResizeRect:T,hideResizeRect:y,updateResizeRect:S,destroy:q}},Ij=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,n)=>{e.setStart(t.dom,n)},t=>{e.setStartAfter(t.dom)})},Hj=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})},jh=(e,t,n)=>{const s=e.document.createRange();return Ij(s,t),Hj(s,n),s},al=(e,t,n,s,o)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(s.dom,o),i},po=ot.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),wh=(e,n,s)=>n(t.fromDom(s.startContainer),s.startOffset,t.fromDom(s.endContainer),s.endOffset),Pj=(t,n)=>n.match({domRange:t=>({ltr:a(t),rtl:e.none}),relative:(n,s)=>({ltr:bn(()=>jh(t,n,s)),rtl:bn(()=>e.some(jh(t,s,n)))}),exact:(n,s,o,i)=>({ltr:bn(()=>al(t,n,s,o,i)),rtl:bn(()=>e.some(al(t,o,i,n,s)))})}),Rj=(e,n)=>{const s=n.ltr();if(s.collapsed){const o=n.rtl().filter(e=>e.collapsed===!1);return o.map(e=>po.rtl(t.fromDom(e.endContainer),e.endOffset,t.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>wh(e,po.ltr,s))}return wh(e,po.ltr,s)},Dj=(e,t)=>{const n=Pj(e,t);return Rj(e,n)};po.ltr,po.rtl;const zj=(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s}),kh={create:zj},Tj=(t,n,s)=>{var o,i;return e.from((o=(i=t.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(i,n,s)).bind(n=>{if(n.offsetNode===null)return e.none();const s=t.dom.createRange();return s.setStart(n.offsetNode,n.offset),s.collapse(),e.some(s)})},Fj=(t,n,s)=>{var o,i;return e.from((o=(i=t.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(i,n,s))},yj=(()=>document.caretPositionFromPoint?Tj:document.caretRangeFromPoint?Fj:e.none)(),bj=(e,n,s)=>{const o=t.fromDom(e.document);return yj(o,n,s).map(e=>kh.create(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset))},rr=ot.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vj=(e,t,n,s)=>e.fold(t,n,s),gj=e=>e.fold(se,se,se),lj=rr.before,cj=rr.on,nj=rr.after,yt={before:lj,on:cj,after:nj,cata:vj,getStart:gj},ri=ot.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Wb=e=>ri.exact(e.start,e.soffset,e.finish,e.foffset),$b=e=>e.match({domRange:e=>t.fromDom(e.startContainer),relative:(e)=>yt.getStart(e),exact:(e)=>e}),Vb=ri.domRange,Pb=ri.relative,Lb=ri.exact,Nb=e=>{const t=$b(e);return Fs(t)},Db=kh.create,In={domRange:Vb,relative:Pb,exact:Lb,exactFromRange:Wb,getWin:Nb,range:Db},Xo=(e,t)=>{const n=k(e);return"input"===n?yt.after(e):O(["br","img"],n)?t===0?yt.before(e):yt.after(e):yt.on(e,t)},zb=(e,t)=>{const n=e.fold(yt.before,Xo,yt.after),s=t.fold(yt.before,Xo,yt.after);return In.relative(n,s)},Xh=(e,t,n,s)=>{const o=Xo(e,t),i=Xo(n,s);return In.relative(o,i)},Tb=e=>e.match({domRange:e=>{const n=t.fromDom(e.startContainer),s=t.fromDom(e.endContainer);return Xh(n,e.startOffset,s,e.endOffset)},relative:zb,exact:Xh}),Yl=(e,n)=>{const i=n||document,s=i.createDocumentFragment();return o(e,e=>{s.appendChild(e.dom)}),t.fromDom(s)},Fb=e=>{const t=In.getWin(e).dom,n=(e,n,s,o)=>al(t,e,n,s,o),s=Tb(e);return Dj(t,s).match({ltr:n,rtl:n})},Mb=(e,t,n)=>bj(e,t,n),tm=(e,n,s)=>{const o=Fs(t.fromDom(s));return Mb(o.dom,e,n).map(e=>{const t=s.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},Zl=(e,t)=>r(e)&&r(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Ab=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},om=(e,t,n)=>Ab(e,t,n)!==null,xb=(e,t,n)=>om(e,t,e=>e.nodeName===n),_b=(e,t)=>ke(e)&&!om(e,t,Ie),rm=(e,t,n)=>{const s=t.parentNode;if(s){const i=new P(t,e.getParent(s,e.isBlock)||e.getRoot());let o;for(;o=i[n?"prev":"next"]();)if(F(o))return!0}return!1},bb=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},vb=(e,t)=>{let n=t;for(;n&&n!==e;){if(C(n))return!0;n=n.parentNode}return!1},td=(t,o,i,a,r)=>{const d=t.getRoot(),m=t.schema.getNonEmptyElements(),u=r.parentNode;let l,c;if(!u)return e.none();const h=t.getParent(u,t.isBlock)||d;if(a&&F(r)&&o&&t.isEmpty(h))return e.some(n(u,t.nodeIndex(r)));const f=new P(r,h);for(;c=f[a?"prev":"next"]();){if(t.getContentEditableParent(c)==="false"||_b(c,d))return e.none();if(s(c)&&c.data.length>0)return xb(c,d,"A")?e.none():e.some(n(c,a?c.data.length:0));if(t.isBlock(c)||m[c.nodeName.toLowerCase()])return e.none();l=c}return xt(l)?e.none():i&&l?e.some(n(l,0)):e.none()},um=(t,o,i,a)=>{const m=t.getRoot();let l,u=!1,r=i?a.startContainer:a.endContainer,d=i?a.startOffset:a.endOffset;const f=c(r)&&d===r.childNodes.length,p=t.schema.getNonEmptyElements();let h=i;if(ke(r))return e.none();if(c(r)&&d>r.childNodes.length-1&&(h=!1),xs(r)&&(r=m,d=0),r===m){if(h&&(l=r.childNodes[d>0?d-1:0],l)){if(ke(l))return e.none();if(p[l.nodeName]||wt(l))return e.none()}if(r.hasChildNodes()){if(d=Math.min(!h&&d>0?d-1:d,r.childNodes.length-1),r=r.childNodes[d],d=s(r)&&f?r.data.length:0,!o&&r===m.lastChild&&wt(r))return e.none();if(vb(m,r)||ke(r))return e.none();if(r.hasChildNodes()&&!wt(r)){l=r;const e=new P(r,m);do{if(C(l)||ke(l)){u=!1;break}if(s(l)&&l.data.length>0){d=h?0:l.data.length,r=l,u=!0;break}if(p[l.nodeName.toLowerCase()]&&!Lh(l)){d=t.nodeIndex(l),r=l.parentNode,h||d++,u=!0;break}}while(l=h?e.next():e.prev())}}}return o&&(s(r)&&d===0&&td(t,f,o,!0,r).each(e=>{r=e.container(),d=e.offset(),u=!0}),c(r)&&(l=r.childNodes[d],l||(l=r.childNodes[d-1]),l&&F(l)&&!bb(l,"A")&&!rm(t,l,!1)&&!rm(t,l,!0)&&td(t,f,o,!0,l).each(e=>{r=e.container(),d=e.offset(),u=!0}))),h&&!o&&s(r)&&d===r.data.length&&td(t,f,o,!1,r).each(e=>{r=e.container(),d=e.offset(),u=!0}),u&&r?e.some(n(r,d)):e.none()},fi=(t,s)=>{const i=s.collapsed,o=s.cloneRange(),a=n.fromRangeStart(s);return um(t,i,!0,o).each(e=>{(!i||!n.isAbove(a,e))&&o.setStart(e.container(),e.offset())}),i||um(t,i,!1,o).each(e=>{o.setEnd(e.container(),e.offset())}),i&&o.collapse(!0),Zl(s,o)?e.none():e.some(o)},yi=(e,t)=>e.splitText(t),Ei=e=>{let t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset;if(t===i&&s(t)){if(n>0&&n<t.data.length)if(i=yi(t,n),t=i.previousSibling,o>n){o=o-n;const e=yi(i,o).previousSibling;t=i=e,o=e.data.length,n=0}else o=0}else if(s(t)&&n>0&&n<t.data.length&&(t=yi(t,n),n=0),s(i)&&o>0&&o<i.data.length){const e=yi(i,o).previousSibling;i=e,o=e.data.length}return{startContainer:t,startOffset:n,endContainer:i,endOffset:o}},pn=e=>{const t=(t,n)=>Ws(e,t,n),n=Ei,s=t=>fi(e,t).fold(S,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)),o=(t,n={type:"word"})=>{if(n.type==="word"){const n=jn(e,t,[{inline:"span"}]),s=e.createRng();return s.setStart(n.startContainer,n.startOffset),s.setEnd(n.endContainer,n.endOffset),s}return t};return{walk:t,split:n,expand:o,normalize:s}};pn.compareRanges=Zl,pn.getCaretRangeFromPoint=tm,pn.getSelectedNode=Jo,pn.getNode=Et;const gb=(e,t)=>{const o=(t,n)=>{if(!$e(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const s=t.dom;eo(s)&&(s.style[e]=n+"px")},n=n=>{const s=t(n);if(s<=0||s===null){const t=Xe(n,e);return parseFloat(t)||0}return s},i=n,s=(e,t)=>je(t,(t,n)=>{const s=Xe(e,n),o=s===void 0?0:parseInt(s,10);return isNaN(o)?t:t+o},0),a=(e,t,n)=>{const o=s(e,n),i=t>o?t-o:0;return i};return{set:o,get:n,getOuter:i,aggregate:s,max:a}},pb=gb("height",e=>{const t=e.dom;return cs(e)?t.getBoundingClientRect().height:t.offsetHeight}),cb=e=>pb.get(e),jm=()=>t.fromDom(document),ym=(e,t)=>{const n=e.view(t);return n.fold(a([]),t=>{const n=e.owner(t),s=ym(e,n);return[t].concat(s)})},nb=(e,t)=>{const n=t.owner(e);return ym(t,n)},tb=n=>{var s;const o=n.dom===document?e.none():e.from((s=n.dom.defaultView)===null||s===void 0?void 0:s.frameElement);return o.map(t.fromDom)},eb=e=>dt(e);xm=Object.freeze({__proto__:null,view:tb,owner:eb});const Q9=e=>{const o=jm(),t=sd(o),i=nb(e,xm),n=ad(e),s=di(i,(e,t)=>{const n=ad(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return Wn(s.left+n.left+t.left,s.top+n.top+t.top)},hd=e=>k(e)==="textarea",Y9=(e,t)=>{const n=e.dispatch("ScrollIntoView",t);return n.isDefaultPrevented()},q9=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},H9=(e,t)=>{const s=Y(e);if(s.length===0||hd(e))return{element:e,offset:t};if(t<s.length&&!hd(s[t]))return{element:s[t],offset:0};const n=s[s.length-1];return hd(n)?{element:e,offset:t}:k(n)==="img"?{element:n,offset:1}:Ae(n)?{element:n,offset:cr(n).length}:{element:n,offset:Y(n).length}},Mm=(e,t)=>{const n=xN(e),s=cb(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},P9=(e,n)=>{const o=H9(e,n),s=t.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+q+"</span>");return Me(o.element,s),Mm(s,()=>A(s))},R9=e=>Mm(t.fromDom(e),g),zm=(e,t,n,s)=>{N9(e,()=>L9(e,t,n,s),n)},Dm=(e,t,n,s,o)=>{const i={elm:s.element.dom,alignToTop:o};if(Y9(e,i))return;const a=sd(t).top;n(t,a,s,o),q9(e,i)},L9=(e,n,s,o)=>{const a=t.fromDom(e.getBody()),r=t.fromDom(e.getDoc());QN(a);const i=P9(t.fromDom(s.startContainer),s.startOffset);Dm(e,r,n,i,o),i.cleanup()},Lm=(e,n,s,o)=>{const i=t.fromDom(e.getDoc());Dm(e,i,s,R9(n),o)},N9=(e,n,s)=>{const o=s.startContainer,r=s.startOffset,i=s.endContainer,c=s.endOffset;n(t.fromDom(o),t.fromDom(i));const a=e.dom.createRng();a.setStart(o,r),a.setEnd(i,c),e.selection.setRng(s)},pd=(e,t,n,s)=>{const o=e.pos;if(n)hm(o.left,o.top,s);else{const n=o.top-t+e.height;hm(o.left,n,s)}},Hm=(e,t,n,s,o)=>{const a=n+t,i=s.pos.top,r=s.bottom,c=r-i>=n;if(i<t)pd(s,n,o!==!1,e);else if(i>a){const t=c?o!==!1:o===!0;pd(s,n,t,e)}else r>a&&!c&&pd(s,n,o===!0,e)},Im=(e,t,n,s)=>{const o=Fs(e).dom.innerHeight;Hm(e,t,o,n,s)},Bm=(e,t,n,s)=>{const a=Fs(e).dom.innerHeight;Hm(e,t,a,n,s);const o=Q9(n.element),i=nm(window);o.top<i.y?dm(n.element,s!==!1):o.top>i.bottom&&dm(n.element,s===!0)},D9=(e,t,n)=>zm(e,Im,t,n),z9=(e,t,n)=>Lm(e,t,Im,n),T9=(e,t,n)=>zm(e,Bm,t,n),F9=(e,t,n)=>Lm(e,t,Bm,n),M9=(e,t,n)=>{const s=e.inline?z9:F9;s(e,t,n)},mo=(e,t,n)=>{const s=e.inline?D9:T9;s(e,t,n)},Ym=e=>e.dom.focus(),Gm=e=>{const t=Ft(e).dom;return e.dom===t.activeElement},bd=(n=jm())=>e.from(n.dom.activeElement).map(t.fromDom),S9=e=>bd(Ft(e)).filter(t=>e.dom.contains(t.dom)),Zm=(e,t)=>{const n=Ae(t)?cr(t).length:Y(t).length+1;return e>n?n:e<0?0:e},A9=e=>In.range(e.start,Zm(e.soffset,e.start),e.finish,Zm(e.foffset,e.finish)),e8=(e,t)=>!Yo(t.dom)&&(ut(e,t)||j(e,t)),t8=e=>t=>e8(e,t.start)&&e8(e,t.finish),k9=e=>e.inline||v.browser.isFirefox(),E9=e=>In.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset),C9=t=>{const n=t.getSelection(),s=!n||n.rangeCount===0?e.none():e.from(n.getRangeAt(0));return s.map(E9)},x9=e=>{const t=Fs(e);return C9(t.dom).filter(t8(e))},O9=(t,n)=>e.from(n).filter(t8(t)).map(A9),w9=t=>{const n=document.createRange();try{return n.setStart(t.start.dom,t.soffset),n.setEnd(t.finish.dom,t.foffset),e.some(n)}catch{return e.none()}},Td=n=>{const s=k9(n)?x9(t.fromDom(n.getBody())):e.none();n.bookmark=s.isSome()?s:n.bookmark},zd=n=>{const s=n.bookmark?n.bookmark:e.none();return s.bind(e=>O9(t.fromDom(n.getBody()),e)).bind(w9)},_9=e=>{zd(e).each(t=>e.selection.setRng(t))},y9=e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1},h8={isEditorUIElement:y9},j9=(e,t)=>($e(t)||(t=0),setTimeout(e,t)),b9=(e,t)=>($e(t)||(t=0),setInterval(e,t)),Oe={setEditorTimeout:(e,t,n)=>j9(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=b9(()=>{e.removed?clearInterval(s):t()},n);return s}},v9=e=>e.type==="nodechange"&&e.selectionChange,g9=(e,t)=>{const n=()=>{t.throttle()};w.DOM.bind(document,"mouseup",n),e.on("remove",()=>{w.DOM.unbind(document,"mouseup",n)})},p9=(e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})},f9=(e,t)=>{p9(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{v9(t)||Td(e)})},m9=e=>{const t=Di(()=>{Td(e)},0);e.on("init",()=>{e.inline&&g9(e,t),f9(e,t)}),e.on("remove",()=>{t.cancel()})};let vs;const du=w.DOM,h9=e=>c(e)&&h8.isEditorUIElement(e),d9=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},ar=(e,t)=>{const n=gE(e),s=du.getParent(t,t=>h9(t)||!!n&&e.dom.is(t,n));return s!==null},l9=e=>{try{const n=Ft(t.fromDom(e.getElement()));return bd(n).fold(()=>document.body,e=>e.dom)}catch{return document.body}},c9=(e,t)=>{const n=t.editor;m9(n),n.on("focusin",()=>{const t=e.focusedEditor;t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))}),n.on("focusout",()=>{Oe.setEditorTimeout(n,()=>{const t=e.focusedEditor;!ar(n,l9(n))&&t===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),vs||(vs=t=>{const n=e.activeEditor;n&&v8(t).each(t=>{const s=t;s.ownerDocument===document&&s!==document.body&&!ar(n,s)&&e.focusedEditor===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},du.bind(document,"focusin",vs))},r9=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&vs&&(du.unbind(document,"focusin",vs),vs=null)},a9=e=>{e.on("AddEditor",d(c9,e)),e.on("RemoveEditor",d(r9,e))},i9=(e,t)=>e.dom.getParent(t,t=>e.dom.getContentEditable(t)==="true"),o9=n=>n.collapsed?e.from(Et(n.startContainer,n.startOffset)).map(t.fromDom):e.none(),s9=(t,n)=>o9(n).bind(n=>ED(n)?e.some(n):ut(t,n)?e.none():e.some(t)),z8=(e,n)=>{s9(t.fromDom(e.getBody()),n).bind(e=>oe(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},ru=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},n9=e=>Gm(e)||S9(e).isSome(),t9=e=>r(e.iframeElement)&&Gm(t.fromDom(e.iframeElement)),e9=e=>{const n=e.getBody();return n&&n9(t.fromDom(n))},Jv=e=>{const n=Ft(t.fromDom(e.getElement()));return bd(n).filter(t=>!d9(t.dom)&&ar(e,t.dom)).isSome()},Mn=e=>e.inline?e9(e):t9(e),Zv=e=>Mn(e)||Jv(e),Qv=e=>{const o=e.selection,t=e.getBody();let n=o.getRng();e.quirks.refreshContentEditable(),r(e.bookmark)&&!Mn(e)&&zd(e).each(t=>{e.selection.setRng(t),n=t});const s=i9(e,o.getNode());if(s&&e.dom.isChildOf(s,t)){ru(s),z8(e,n),Bd(e);return}e.inline||(v.browser.isOpera()||ru(t),e.getWin().focus()),(v.browser.isFirefox()||e.inline)&&(ru(t),z8(e,n)),Bd(e)},Bd=e=>e.editorManager.setActive(e),Gv=(e,t)=>{if(e.removed)return;t?Bd(e):Qv(e)},W8=(n,s,o,i,a)=>{const r=o?s.startContainer:s.endContainer,c=o?s.startOffset:s.endOffset;return e.from(r).map(t.fromDom).map(e=>!i||!s.collapsed?nr(e,a(e,c)).getOr(e):e).bind(t=>ve(t)?e.some(t):Ue(t).filter(ve)).map(e=>e.dom).getOr(n)},U8=(e,t,n=!1)=>W8(e,t,!0,n,(e,t)=>Math.min(O8(e),t)),K8=(e,t,n=!1)=>W8(e,t,!1,n,(e,t)=>t>0?t-1:t),q8=(e,t)=>{const n=e;for(;e&&s(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},Yv=(e,t)=>{if(!t)return e;let n=t.startContainer,o=t.endContainer;const a=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===o&&r-a<2&&n.hasChildNodes()&&(i=n.childNodes[a]),s(n)&&s(o)&&(n.length===a?n=q8(n.nextSibling,!0):n=n.parentNode,r===0?o=q8(o.previousSibling,!1):o=o.parentNode,n&&n===o&&(i=n)));const l=s(i)?i.parentNode:i;return c(l)?l:e},Wv=(e,t,n,s)=>{const r=[],a=e.getRoot(),o=e.getParent(n||U8(a,t,t.collapsed),e.isBlock),i=e.getParent(s||K8(a,t,t.collapsed),e.isBlock);if(o&&o!==a&&r.push(o),o&&i&&o!==i){let t=o;const n=new P(o,a);for(;(t=n.next())&&t!==i;)e.isBlock(t)&&r.push(t)}return i&&o!==i&&i!==a&&r.push(i),r},Bv=(t,n,s)=>e.from(n).bind(n=>e.from(n.parentNode).map(e=>{const i=t.nodeIndex(n),o=t.createRng();return o.setStart(e,i),o.setEnd(e,i+1),s&&(br(t,o,n,!0),br(t,o,n,!1)),o})),Od=(e,t)=>b(t,t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t}),Rv=e=>k(e)==="img"?1:Eh(e).fold(()=>Y(e).length,e=>e.length),Lv=e=>Eh(e).filter(e=>e.trim().length!==0||e.indexOf(W)>-1).isSome(),Dv=["img","br"],tf=e=>{const t=Lv(e);return t||O(Dv,k(e))},zv=e=>bN(e,tf),Av=e=>kv(e,tf),kv=(t,n)=>{const s=t=>{const o=Y(t);for(let t=o.length-1;t>=0;t--){const i=o[t];if(n(i))return e.some(i);const a=s(i);if(a.isSome())return a}return e.none()};return s(t)},rf="[data-mce-autocompleter]",Ev=(e,n)=>{if(df(t.fromDom(e.getBody())).isNone()){const s=t.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());H(s,t.fromDom(n.extractContents())),n.insertNode(s.dom),Ue(s).each(e=>e.dom.normalize()),Av(s).map(t=>{e.selection.setCursorLocation(t.dom,Rv(t))})}},Cv=e=>kn(e,rf),df=e=>$o(e,rf),Ov=(e,t)=>df(t).each(t=>{const n=e.selection.getBookmark();Ot(t),e.selection.moveToBookmark(n)}),wv={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},hi=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let n=e[o];if(n)return n;for(let s=e.parent;s&&s!==t;s=s.parent)if(n=s[o],n)return n}},_v=e=>{var t;const s=(t=e.value)!==null&&t!==void 0?t:"";if(!Tn(s))return!1;const n=e.parent;return!(n&&(n.name!=="span"||n.attr("style"))&&/^[ ]+$/.test(s))},pf=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class he{constructor(e,t){this.name=e,this.type=t,t===1&&(this.attributes=[],this.attributes.map={})}static create(e,t){const n=new he(e,wv[e]||1);return t&&x(t,(e,t)=>{n.attr(t,e)}),n}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const s=this;if(!h(e))return r(e)&&x(e,(e,t)=>{s.attr(t,e)}),s;const n=s.attributes;if(n){if(t!==void 0){if(t===null){if(e in n.map){delete n.map[e];let t=n.length;for(;t--;)if(n[t].name===e)return n.splice(t,1),s}return s}if(e in n.map){{let s=n.length;for(;s--;)if(n[s].name===e){n[s].value=t;break}}}else n.push({name:e,value:t});return n.map[e]=t,s}return n.map[e]}}clone(){const e=this,t=new he(e.name,e.type),n=e.attributes;if(n){const e=[];e.map={};for(let s=0,o=n.length;s<o;s++){const t=n[s];t.name!=="id"&&(e[e.length]={name:t.name,value:t.value},e.map[t.name]=t.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,s=e.parent,t=e.next,n=e.prev;return s&&(s.firstChild===e?(s.firstChild=t,t&&(t.prev=null)):n&&(n.next=t),s.lastChild===e?(s.lastChild=n,n&&(n.next=null)):t&&(t.prev=n),e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const s=t.parent||this;return n?(t===s.firstChild?s.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===s.lastChild?s.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=s,e}getAll(e){const t=this,n=[];for(let s=t.firstChild;s;s=hi(s,t))s.name===e&&n.push(s);return n}children(){const t=this,e=[];for(let n=t.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let n=e.firstChild;n;n=hi(n,e))t.push(n);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){var o;const i=this;let s=i.firstChild;if(pf(i))return!1;if(s)do{if(s.type===1){if(s.attr("data-mce-bogus"))continue;if(e[s.name])return!1;if(pf(s))return!1}if(s.type===8)return!1;if(s.type===3&&!_v(s))return!1;if(s.type===3&&s.parent&&t[s.parent.name]&&Tn((o=s.value)!==null&&o!==void 0?o:""))return!1;if(n&&n(s))return!1}while(s=hi(s,i))return!0}walk(e){return hi(this,null,e)}}const jv=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),bf=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&jv(s,n)){const e=s.indexOf("[endif]",n);return s.indexOf(">",e)}if(t){const e=s.indexOf(">",n);return e!==-1?e:s.length}const endCommentRegexp=/--!?>/g;endCommentRegexp.lastIndex=n;const match=endCommentRegexp.exec(e);return match?match.index+match[0].length:s.length},mv=(e,t,n)=>{const o=/<([!?/])?([A-Za-z0-9-_:.]+)/g,a=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,s=n;for(;i!==0;)for(o.lastIndex=s;!0;){const e=o.exec(t);if(e===null)return s;if(e[1]==="!"){K(e[2],"--")?s=bf(t,!1,e.index+"!--".length):s=bf(t,!0,e.index+1);break}a.lastIndex=o.lastIndex;const n=a.exec(t);if(Yt(n)||n.index!==o.lastIndex)continue;e[1]==="/"?i-=1:f(r,e[2])||(i+=1),s=o.lastIndex+n[0].length;break}return s},hv=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},_f=(e,t)=>{const s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=e.schema;let n=hv(e.getTempAttrs(),t);const a=i.getVoidElements();let o;for(;o=s.exec(n);){const e=s.lastIndex,r=o[0].length;let t;a[o[1]]?t=e:t=mv(i,n,e),n=n.substring(0,e-r)+n.substring(t),s.lastIndex=e-r}return vt(n)},cv=_f,Of=e=>{const n=J(e,"[data-mce-bogus]");o(n,e=>{const n=Te(e,"data-mce-bogus");n==="all"?A(e):Gt(e)?(Me(e,t.fromText(Nn)),A(e)):Ot(e)})},xf=e=>{const t=J(e,"input");o(t,e=>{G(e,"name")})},rv=(e,t)=>{const n=ge(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[
]*|<br \\/>[
]*)$`);return t.replace(s,"")},iv=(e,n)=>{const o=e.getDoc(),i=Ft(t.fromDom(e.getBody())),s=t.fromTag("div",o);$(s,"data-mce-bogus","all"),ya(s,{position:"fixed",left:"-9999999px",top:"0"}),Ti(s,n.innerHTML),Of(s),xf(s);const a=fL(i);H(a,s);const r=vt(s.dom.innerText);return A(s),r},ov=(e,n,s)=>{let o;n.format==="raw"?o=i.trim(cv(e.serializer,s.innerHTML)):n.format==="text"?o=iv(e,s):n.format==="tree"?o=e.serializer.serialize(s,n):o=rv(e,e.serializer.serialize(s,n));const a=n.format!=="text"&&!Yi(t.fromDom(s));return a&&h(o)?i.trim(o):o},sv=(t,n)=>e.from(t.getBody()).fold(a(n.format==="tree"?new he("body",11):""),e=>ov(t,n,e)),Sf=i.makeMap,Mf=e=>{const t=[];e=e||{};const n=e.indent,i=Sf(e.indent_before||""),o=Sf(e.indent_after||""),s=Tt.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(e,r,c)=>{if(n&&i[e]&&t.length>0){const e=t[t.length-1];e.length>0&&e!==`
`&&t.push(`
`)}if(t.push("<",e),r)for(let e=0,o=r.length;e<o;e++){const n=r[e];t.push(" ",n.name,'="',s(n.value,!0),'"')}if(!c||a?t[t.length]=">":t[t.length]=" />",c&&n&&o[e]&&t.length>0){const e=t[t.length-1];e.length>0&&e!==`
`&&t.push(`
`)}},end:e=>{let s;t.push("</",e,">"),n&&o[e]&&t.length>0&&(s=t[t.length-1],s.length>0&&s!==`
`&&t.push(`
`))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:s(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("<!--",e,"-->")},pi:(e,o)=>{o?t.push("<?",e," ",s(o),"?>"):t.push("<?",e,"?>"),n&&t.push(`
`)},doctype:e=>{t.push("<!DOCTYPE",e,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},At=(e={},t=Dt())=>{const n=Mf(e);e.validate=!("validate"in e)||e.validate;const s=s=>{const a=e.validate,o={3:e=>{var t;n.text((t=e.value)!==null&&t!==void 0?t:"",e.raw)},8:e=>{var t;n.comment((t=e.value)!==null&&t!==void 0?t:"")},7:e=>{n.pi(e.name,e.value)},10:e=>{var t;n.doctype((t=e.value)!==null&&t!==void 0?t:"")},4:e=>{var t;n.cdata((t=e.value)!==null&&t!==void 0?t:"")},11:e=>{let t=e;if(t=t.firstChild)do i(t);while(t=t.next)}};n.reset();const i=e=>{var s;const r=o[e.type];if(r)r(e);else{const r=e.name,c=r in t.getVoidElements();let o=e.attributes;if(a&&o&&o.length>1){const n=[];n.map={};const s=t.getElementRule(e.name);if(s){for(let t=0,i=s.attributesOrder.length;t<i;t++){const e=s.attributesOrder[t];if(e in o.map){const t=o.map[e];n.map[e]=t,n.push({name:e,value:t})}}for(let t=0,s=o.length;t<s;t++){const e=o[t].name;if(!(e in n.map)){const t=o.map[e];n.map[e]=t,n.push({name:e,value:t})}}o=n}}if(n.start(r,o,c),!c){let t=e.firstChild;if(t){(r==="pre"||r==="textarea")&&t.type===3&&((s=t.value)===null||s===void 0?void 0:s[0])===`
`&&n.text(`
`,!0);do i(t);while(t=t.next)}n.end(r)}}};return s.type===1&&!e.inner?i(s):s.type===3?o[3](s):o[11](s),n.getContent()};return{serialize:s}},Tf=new Set;(()=>{const e=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];o(e,e=>{Tf.add(e)})})();const zf=["font","text-decoration","text-emphasis"],zl=(e,t)=>fe(e.parseStyle(e.getAttrib(t,"style"))),nv=e=>Tf.has(e),ev=(e,t)=>qt(zl(e,t),e=>!nv(e)),J7=e=>m(e,e=>T(zf,t=>K(e,t))),Z7=(e,t,n)=>{const i=zl(e,t),s=zl(e,n),o=s=>{var o,i;const a=(o=e.getStyle(t,s))!==null&&o!==void 0?o:"",r=(i=e.getStyle(n,s))!==null&&i!==void 0?i:"";return et(a)&&et(r)&&a!==r};return T(i,e=>{const t=t=>T(t,t=>t===e);if(!t(s)&&t(zf)){const e=J7(s);return T(e,o)}return o(e)})},Hf=(t,n,o)=>e.from(o.container()).filter(s).exists(e=>{const s=t?0:-1;return n(e.data.charAt(o.offset()+s))}),_l=d(Hf,!0,js),yl=d(Hf,!1,js),Q7=e=>{const t=e.container();return s(t)&&(t.data.length===0||sa(t.data)&&Ks.isBookmarkNode(t.parentNode))},Mt=(e,t)=>n=>Il(e?0:-1,n).filter(t).isSome(),Wf=e=>Ph(e)&&Xe(t.fromDom(e),"display")==="block",Uf=e=>C(e)&&!gN(e),X7=Mt(!0,Wf),Y7=Mt(!1,Wf),ko=Mt(!0,nt),Eo=Mt(!1,nt),Xf=Mt(!0,wt),Qf=Mt(!1,wt),Ht=Mt(!0,Uf),Bt=Mt(!1,Uf),q7=e=>e.slice(0,-1),U7=(e,t,n)=>ut(t,e)?q7(M8(e,e=>n(e)||j(e,t))):[],n6=(e,t)=>U7(e,t,S),pt=(e,t)=>[e].concat(n6(e,t)),Dc=(e,t,n)=>A0(e,t,n,Q7),i6=(e,n)=>I(pt(t.fromDom(n.container()),e),De),a6=(e,n,s)=>Dc(e,n.dom,s).forall(e=>i6(n,s).fold(()=>!Ge(e,s,n.dom),o=>!Ge(e,s,n.dom)&&ut(o,t.fromDom(e.container())))),r6=(e,t,n)=>i6(t,n).fold(()=>Dc(e,t.dom,n).forall(e=>!Ge(e,n,t.dom)),t=>Dc(e,t.dom,n).isNone()),zc=d(r6,!1),l6=d(r6,!0),W7=d(a6,!1),$7=d(a6,!0),B7=e=>ii(e).exists(Gt),oa=(e,n,s)=>{const o=m(pt(t.fromDom(s.container()),n),De),i=ue(o).getOr(n);return Se(e,i.dom,s).filter(B7)},Ac=(e,t)=>ii(t).exists(Gt)||oa(!0,e,t).isSome(),Ec=(e,t)=>hx(t).exists(Gt)||oa(!1,e,t).isSome(),H7=d(oa,!1),P7=d(oa,!0),b6=e=>n.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),j6=(e,n)=>{const s=m(pt(t.fromDom(n.container()),e),De);return ue(s).getOr(e)},y6=(e,t)=>b6(t)?yl(t):yl(t)||ye(j6(e,t).dom,t).exists(yl),_6=(e,t)=>b6(t)?_l(t):_l(t)||de(j6(e,t).dom,t).exists(_l),R7=e=>O(["pre","pre-wrap"],e),Cc=e=>ii(e).bind(e=>On(e,ve)).exists(e=>R7(Xe(e,"white-space"))),L7=(e,t)=>ye(e.dom,t).isNone(),N7=(e,t)=>de(e.dom,t).isNone(),D7=(e,t)=>L7(e,t)||N7(e,t)||zc(e,t)||l6(e,t)||Ec(e,t)||Ac(e,t),F7=e=>r(e)&&C(e)&&z4(e),A6=(e,t)=>n=>F7(new P(n,e)[t]()),M7=(e,t)=>{const s=de(e.dom,t).getOr(t),n=A6(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(s.container()))},S7=(e,t)=>{const s=ye(e.dom,t).getOr(t),n=A6(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(s.container()))},A7=(e,t)=>!Cc(t)&&(D7(e,t)||y6(e,t)||_6(e,t)),qs=(e,t)=>!Cc(t)&&(zc(e,t)||W7(e,t)||Ec(e,t)||y6(e,t)||S7(e,t)),C7=e=>{const t=e.container(),o=e.offset();return s(t)&&o<t.data.length?n(t,o+1):e},Us=(e,t)=>!Cc(t)&&(l6(e,t)||$7(e,t)||Ac(e,t)||_6(e,t)||M7(e,t)),ac=(e,t)=>qs(e,t)||Us(e,C7(t)),L6=(e,t)=>Ia(e.charAt(t)),R6=(e,t)=>js(e.charAt(t)),w7=e=>{const t=e.container();return s(t)&&Z(t.data,W)},_7=e=>{const t=e.split("");return b(t,(e,n)=>Ia(e)&&n>0&&n<t.length-1&&Rr(t[n-1])&&Rr(t[n+1])?" ":e).join("")},I6=(e,t,s)=>{const o=t.data,i=n(t,0);return!s&&L6(o,0)&&!ac(e,i)?(t.data=" "+o.slice(1),!0):!!(s&&R6(o,0)&&qs(e,i))&&(t.data=W+o.slice(1),!0)},h7=e=>{const t=e.data,n=_7(t);return n!==t&&(e.data=n,!0)},V6=(e,t,s)=>{const o=t.data,i=n(t,o.length-1);return!s&&L6(o,o.length-1)&&!ac(e,i)?(t.data=o.slice(0,-1)+" ",!0):!!(s&&R6(o,o.length-1)&&Us(e,i))&&(t.data=o.slice(0,-1)+W,!0)},u7=(t,n)=>{const o=n.container();if(!s(o))return e.none();if(w7(n)){const e=I6(t,o,!1)||h7(o)||V6(t,o,!1);return So(e,n)}if(ac(t,n)){const e=I6(t,o,!0)||V6(t,o,!0);return So(e,n)}return e.none()},l7=e=>{const s=t.fromDom(e.getBody());e.selection.isCollapsed()&&u7(s,n.fromRangeStart(e.selection.getRng())).each(t=>{e.selection.setRng(t.toRange())})},U6=(e,s,o)=>{if(o===0)return;const i=t.fromDom(e),a=St(i,De).getOr(i),r=e.data.slice(s,s+o),c=s+o>=e.data.length&&Us(a,n(e,e.data.length)),l=s===0&&qs(a,n(e,0));e.replaceData(s,o,r3(r,4,l,c))},Fa=(e,t)=>{const n=e.data.slice(t),s=n.length-JP(n).length;U6(e,t,s)},Yr=(e,t)=>{const n=e.data.slice(0,t),s=n.length-ip(n).length;U6(e,t-s,s)},qr=(e,n,s,o=!0)=>{const r=ip(e.data).length,i=o?e:n,a=o?n:e;return o?i.appendData(a.data):i.insertData(0,a.data),A(t.fromDom(a)),s&&Fa(i,r),i},c7=(e,t)=>{const s=e.container(),o=e.offset();return!n.isTextPosition(e)&&s===t.parentNode&&o>n.before(t).offset()},a7=(e,t)=>c7(t,e)?n(t.container(),t.offset()-1):t,i7=e=>s(e)?n(e,0):n.before(e),o7=e=>s(e)?n(e,e.data.length):n.after(e),J6=t=>Fe(t.previousSibling)?e.some(o7(t.previousSibling)):t.previousSibling?lt(t.previousSibling):e.none(),ep=t=>Fe(t.nextSibling)?e.some(i7(t.nextSibling)):t.nextSibling?oe(t.nextSibling):e.none(),t7=(t,s)=>e.from(s.previousSibling?s.previousSibling:s.parentNode).bind(e=>ye(t,n.before(e))).orThunk(()=>de(t,n.after(s))),X5=(e,t)=>de(e,n.after(t)).orThunk(()=>ye(e,n.before(t))),G5=(e,t)=>J6(t).orThunk(()=>ep(t)).orThunk(()=>t7(e,t)),Y5=(e,t)=>ep(t).orThunk(()=>J6(t)).orThunk(()=>X5(e,t)),q5=(e,t,n)=>e?Y5(t,n):G5(t,n),K5=(e,t,n)=>q5(e,t,n).map(d(a7,n)),rp=(e,t,n)=>{n.fold(()=>{e.focus()},n=>{e.selection.setRng(n.toRange(),t)})},U5=e=>t=>t.dom===e,W5=(e,t)=>t&&f(e.schema.getBlockElements(),k(t)),$5=s=>{if(z(s)){const o=t.fromHtml('<br data-mce-bogus="1">');return ro(s),H(s,o),e.some(n.before(o.dom))}return e.none()},B5=(e,t,s)=>{const o=Sn(e).filter(Ae),i=ks(e).filter(Ae);return A(e),BR(o,i,t,(e,t,o)=>{const i=e.dom,a=t.dom,r=i.data.length;return qr(i,a,s),o.container()===a?n(i,r):o}).orThunk(()=>(s&&(o.each(e=>Yr(e.dom,e.dom.length)),i.each(e=>Fa(e.dom,0))),t))},L5=(e,t)=>f(e.schema.getTextInlineElements(),k(t)),Wt=(t,n,s,o=!0)=>{const i=K5(n,t.getBody(),s.dom),a=St(s,d(W5,t),U5(t.getBody())),r=B5(s,i,L5(t,s));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind($5).fold(()=>{o&&rp(t,n,r)},s=>{o&&rp(t,n,e.some(s))})},D5=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,C5=e=>D5.test(e),wn=(e,n)=>Le(t.fromDom(n),PE(e))&&!As(e.schema,n),w5=e=>{var t;return w.DOM.getStyle(e,"direction",!0)==="rtl"||C5((t=e.textContent)!==null&&t!==void 0?t:"")},p5=(e,t,n)=>m(w.DOM.getParents(n.container(),"*",t),e),Vt=(t,n,s)=>{const o=p5(t,n,s);return e.from(o[o.length-1])},u5=(e,t,n)=>{const s=kt(t,e),o=kt(n,e);return r(s)&&s===o},Zg=e=>pc(e)||lc(e),Ee=(e,t)=>{const o=t.container(),i=t.offset();return e?Nt(o)?s(o.nextSibling)?n(o.nextSibling,0):n.after(o):pc(t)?n(o,i+1):t:Nt(o)?s(o.previousSibling)?n(o.previousSibling,o.previousSibling.data.length):n.before(o):lc(t)?n(o,i-1):t},Op=d(Ee,!0),xp=d(Ee,!1),Cp=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Gg=e=>{e.execCommand("delete")},kp=e=>Cp(e,"Delete"),qg=e=>Cp(e,"ForwardDelete"),Kg=e=>t=>qn(Ue(t),e,j),Wg=e=>fh(e)||ao(e),ui=(t,n)=>ut(t,n)?On(n,Wg,Kg(t)):e.none(),Fl=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Vg=(e,t,n)=>re(oe(n),lt(n),(s,o)=>{const i=Ee(!0,s),a=Ee(!1,o),r=Ee(!1,t);return e?de(n,r).exists(e=>e.isEqual(a)&&t.isEqual(i)):ye(n,r).exists(e=>e.isEqual(i)&&t.isEqual(a))}).getOr(!0),Dp=t=>{const n=IR(t)?Sn(t):gu(t);return n.bind(Dp).orThunk(()=>e.some(t))},Np=(e,n,s,i=!0)=>{var r;n.deleteContents();const c=Dp(s).getOr(s),a=t.fromDom((r=e.dom.getParent(c.dom,e.dom.isBlock))!==null&&r!==void 0?r:s.dom);if(a.dom===e.getBody()?Fl(e,i):z(a)&&(mn(a),i&&e.selection.setCursorLocation(a.dom,0)),!j(s,a)){const e=qn(Ue(a),s)?[]:yL(a);o(e.concat(Y(s)),e=>{!j(e,a)&&!ut(e,a)&&z(e)&&A(e)})}},Ig=e=>t=>j(e,t),Bl=e=>J(e,"td,th"),Hg=(e,n)=>{const i=e=>Ns(t.fromDom(e),n),s=i(e.startContainer),o=i(e.endContainer),a=s.isSome(),r=o.isSome(),c=re(s,o,j).getOr(!1),l=!c&&a&&r;return{startTable:s,endTable:o,isStartInTable:a,isEndInTable:r,isSameTable:c,isMultiTable:l}},id=(e,t)=>({start:e,end:t}),Pg=(e,t,n)=>({rng:e,table:t,cells:n}),jo=ot.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Mi=(e,n)=>kn(t.fromDom(e),"td,th",n),$p=e=>!j(e.start,e.end),Wp=(e,t)=>Ns(e.start,t).bind(n=>Ns(e.end,t).bind(e=>So(j(n,e),n))),Lg=(e,t)=>!$p(e)&&Wp(e,t).exists(e=>{const t=e.dom.rows;return t.length===1&&t[0].cells.length===1}),Dg=(e,t)=>{const n=Mi(e.startContainer,t),s=Mi(e.endContainer,t);return re(n,s,id)},Fg=e=>t=>Ns(t,e).bind(e=>on(Bl(e)).map(e=>id(t,e))),Mg=e=>t=>Ns(t,e).bind(e=>ue(Bl(e)).map(e=>id(e,t))),Xd=e=>t=>Wp(t,e).map(e=>Pg(t,e,Bl(e))),Xp=(t,n,s,o)=>{if(s.collapsed||!t.forall($p))return e.none();if(n.isSameTable){const n=t.bind(Xd(o));return e.some({start:n,end:n})}const i=Mi(s.startContainer,o),a=Mi(s.endContainer,o),r=i.bind(Fg(o)).bind(Xd(o)),c=a.bind(Mg(o)).bind(Xd(o));return e.some({start:r,end:c})},Qp=(e,t)=>To(e,e=>j(e,t)),su=e=>re(Qp(e.cells,e.rng.start),Qp(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),kg=(e,t,n)=>e.exists(e=>Lg(e,n)&&yr(e.start,t)),eg=(e,t)=>{const{startTable:s,endTable:o}=t,n=e.cloneRange();return s.each(e=>n.setStartAfter(e.dom)),o.each(e=>n.setEndBefore(e.dom)),n},yg=(t,n,s,o)=>Xp(t,n,s,o).bind(({start:e,end:t})=>e.or(t)).bind(t=>{const{isSameTable:i}=n,o=su(t).getOr([]);if(i&&t.cells.length===o.length)return e.some(jo.fullTable(t.table));if(o.length>0){if(i)return e.some(jo.partialTable(o,e.none()));const t=eg(s,n);return e.some(jo.partialTable(o,e.some({...n,rng:t})))}else return e.none()}),bg=(t,n,s,o)=>Xp(t,n,s,o).bind(({start:t,end:o})=>{const i=t.bind(su).getOr([]),a=o.bind(su).getOr([]);if(i.length>0&&a.length>0){const t=eg(s,n);return e.some(jo.multiTable(i,a,t))}return e.none()}),vg=(e,t)=>{const n=Ig(e),s=Dg(t,n),o=Hg(t,n);return kg(s,t,n)?s.map(e=>jo.singleCellTable(t,e.start)):o.isMultiTable?bg(s,o,t,n):yg(s,o,t,n)},og=e=>o(e,e=>{G(e,"contenteditable"),mn(e)}),ug=(n,s)=>e.from(n.dom.getParent(s,n.dom.isBlock)).map(t.fromDom),kE=(e,t,n)=>{n.each(n=>{t?A(n):(mn(n),e.selection.setCursorLocation(n.dom,0))})},bu=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),pu(e,o,t,!1).each(e=>e())},y1=e=>{const s=gs(e),n=t.fromDom(e.selection.getNode());Uo(n.dom)&&z(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),s.length>1&&T(s,e=>j(e,n))&&$(n,"data-mce-selected","1")},ag=(t,n,s)=>e.some(()=>{const o=t.selection.getRng(),i=s.bind(({rng:s,isStartInTable:i})=>{const r=ug(t,i?s.endContainer:s.startContainer);s.deleteContents(),kE(t,i,r.filter(z));const a=i?n[0]:n[n.length-1];return bu(t,a,o,i),z(a)?e.none():e.some(i?n.slice(1):n.slice(0,-1))}).getOr(n);og(i),y1(t)}),dg=(t,n,s,o)=>e.some(()=>{const e=t.selection.getRng(),i=n[0],a=s[s.length-1];bu(t,i,e,!0),bu(t,a,e,!1);const r=z(i)?n:n.slice(1),c=z(a)?s:s.slice(0,-1);og(r.concat(c)),o.deleteContents(),y1(t)}),pu=(t,n,s,o=!0)=>e.some(()=>{Np(t,n,s,o)}),hg=(t,n)=>e.some(()=>Wt(t,!1,n)),mg=(e,t,n)=>vg(t,n).bind(t=>t.fold(d(pu,e),d(hg,e),d(ag,e),d(dg,e))),fg=(e,t)=>qa(e,t),pg=(e,t,n,s)=>uu(t,s).fold(()=>mg(e,t,n),t=>fg(e,t)),gg=(n,s,o)=>{const i=t.fromDom(n.getBody()),a=n.selection.getRng();return o.length!==0?ag(n,o,e.none()):pg(n,i,a,s)},sg=(e,t)=>I(pt(t,e),io),uu=(e,t)=>I(pt(t,e),$l("caption")),jg=(n,s,o,i,a)=>Vi(o,n.getBody(),a).bind(n=>sg(s,t.fromDom(n.getNode())).bind(t=>j(t,i)?e.none():e.some(g))),qa=(t,n)=>e.some(()=>{mn(n),t.selection.setCursorLocation(n.dom,0)}),_g=(e,t,n,s)=>oe(e.dom).bind(o=>lt(e.dom).map(e=>t?n.isEqual(o)&&s.isEqual(e):n.isEqual(e)&&s.isEqual(o))).getOr(!0),wg=(e,t)=>qa(e,t),Og=(n,s,o)=>uu(n,t.fromDom(o.getNode())).fold(()=>e.some(g),e=>So(!j(e,s),g)),xg=(t,n,s,o,i)=>Vi(s,t.getBody(),i).fold(()=>e.some(g),e=>_g(o,s,i,e)?wg(t,o):Og(n,o,e)),Cg=(e,t,s,o)=>{const i=n.fromRangeStart(e.selection.getRng());return sg(s,o).bind(n=>z(n)?qa(e,n):jg(e,s,t,n,i))},Eg=(e,t,s,o)=>{const i=n.fromRangeStart(e.selection.getRng());return z(o)?qa(e,o):xg(e,s,t,o,i)},Jp=(e,t)=>e?Xf(t):Qf(t),Ag=(e,t)=>{const s=n.fromRangeStart(e.selection.getRng());return Jp(t,s)||Se(t,e.getBody(),s).exists(e=>Jp(t,e))},Sg=(e,n,s)=>{const o=t.fromDom(e.getBody());return uu(o,s).fold(()=>Cg(e,n,o,s).orThunk(()=>So(Ag(e,n),g)),t=>Eg(e,n,o,t))},wd=(e,n)=>{const s=t.fromDom(e.selection.getStart(!0)),o=gs(e);return e.selection.isCollapsed()&&o.length===0?Sg(e,n,s):gg(e,s,o)},yn=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ne(n)||C(n))return n;n=n.parentNode}return null},Tg=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],zg=i.each,yd=e=>{const t=e.dom,s=new Set(e.serializer.getTempAttrs()),o=(e,s)=>{if(e.nodeName!==s.nodeName||e.nodeType!==s.nodeType)return!1;const o=e=>{const s={};return zg(t.getAttribs(e),o=>{const i=o.nodeName.toLowerCase();i!=="style"&&!n(i)&&(s[i]=t.getAttrib(e,i))}),s},i=(e,t)=>{for(const n in e)if(f(e,n)){const s=t[n];if(ae(s))return!1;if(e[n]!==s)return!1;delete t[n]}for(const e in t)if(f(t,e))return!1;return!0};if(c(e)&&c(s)){if(!i(o(e),o(s)))return!1;if(!i(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(s,"style"))))return!1}return!we(e)&&!we(s)},n=e=>T(Tg,t=>K(e,t))||s.has(e);return{compare:o,isAttributeInternal:n}},Ng=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},Up=(e,t,n,s)=>{const o=n.name;for(let t=0,a=e.length;t<a;t++){const i=e[t];if(i.name===o){const e=s.nodes[o];e?e.nodes.push(n):s.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let e=0,a=t.length;e<a;e++){const i=t[e],o=i.name;if(o in n.attributes.map){const e=s.attributes[o];e?e.nodes.push(n):s.attributes[o]={filter:i,nodes:[n]}}}},Rg=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&Ng(n,n=>{Up(e,t,n,s)}),s},Ip=(e,t)=>{const n=(e,n)=>{x(e,e=>{const s=be(e.nodes);o(e.filter.callbacks,o=>{for(let t=s.length-1;t>=0;t--){const o=s[t],i=n?o.attr(e.filter.name)!==void 0:o.name===e.filter.name;(!i||D(o.parent))&&s.splice(t,1)}s.length>0&&o(s,e.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},Pp=(e,t,n,s={})=>{const o=Rg(e,t,n);Ip(o,s)},Tl=(e,t,n)=>{if(e.insert&&t(n)){const e=new he("br",1);e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new he("#text",3)).value=W},Bg=e=>{var t;return zp(e,"#text")&&((t=e?.firstChild)===null||t===void 0?void 0:t.value)===W},zp=(e,t)=>{const n=e?.firstChild;return r(n)&&n===e.lastChild&&n.name===t},$g=(e,t)=>{const n=e.getElementRule(t.name);return n?.paddEmpty===!0},Co=(e,t,n,s)=>s.isEmpty(t,n,t=>$g(e,t)),Ug=(e,t)=>r(e)&&(t(e)||e.name==="br"),tl=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const e of s)n&&!t.isValidChild(n.name,e.name)&&tl(e,t,n);e.unwrap()}},Jc=(e,t,n=g)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),a=t.getWhitespaceElements(),c=i.makeMap("tr,td,th,tbody,thead,tfoot,table"),r=new Set;for(let m=0;m<e.length;m++){const i=e[m];let l,u,h;if(!i.parent||r.has(i))continue;if(s[i.name]&&i.parent.name==="li"){let e=i.next;for(;e;){if(s[e.name])e.name="li",r.add(e),i.parent.insert(e,i.parent);else break;e=e.next}i.unwrap();continue}const d=[i];for(l=i.parent;l&&!t.isValidChild(l.name,i.name)&&!c[l.name];l=l.parent)d.push(l);if(l&&d.length>1)if(t.isValidChild(l.name,i.name)){d.reverse(),u=d[0].clone(),n(u);let e=u;for(let s=0;s<d.length-1;s++){t.isValidChild(e.name,d[s].name)?(h=d[s].clone(),n(h),e.append(h)):h=e;for(let e=d[s].firstChild;e&&e!==d[s+1];){const t=e.next;h.append(e),e=t}e=h}Co(t,o,a,u)?l.insert(i,d[0],!0):(l.insert(u,d[0],!0),l.insert(i,u)),l=d[0],(Co(t,o,a,l)||zp(l,"br"))&&l.empty().remove()}else tl(i,t);else if(i.parent){if(i.name==="li"){let e=i.prev;if(e&&(e.name==="ul"||e.name==="ol")){e.append(i);continue}if(e=i.next,e&&(e.name==="ul"||e.name==="ol")&&e.firstChild){e.insert(i,e.firstChild,!0);continue}const t=new he("ul",1);n(t),i.wrap(t);continue}if(t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)){const e=new he("div",1);n(e),i.wrap(e)}else tl(i,t)}}},Yg=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},Ep=(e,t,n=t.parent)=>!!(n&&e.children[t.name]&&!e.isValidChild(n.name,t.name))||!!(n&&t.name==="a"&&Yg(n,"a")),Xg=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},Qg=e=>{const t=n.fromRangeStart(e),o=n.fromRangeEnd(e),s=e.commonAncestorContainer;return Se(!1,s,o).map(n=>!Ge(t,o,s)&&Ge(t,n,s)?Xg(t.container(),t.offset(),n.container(),n.offset()):e).getOr(e)},Yc=e=>e.collapsed?e:Qg(e),Jg=e=>r(e.firstChild)&&e.firstChild===e.lastChild,e5=e=>e.name==="br"||e.value===W,t5=(e,t)=>{const n=e.getBlockElements();return n[t.name]&&Jg(t)&&e5(t.firstChild)},n5=(e,t)=>{const n=e.getNonEmptyElements();return r(t)&&(t.isEmpty(n)||t5(e,t))},s5=(e,t)=>{let s=t.firstChild,n=t.lastChild;return s&&s.name==="meta"&&(s=s.next),n&&n.attr("id")==="mce_marker"&&(n=n.prev),n5(e,n)&&(n=n?.prev),!!s&&s===n&&(s.name==="ul"||s.name==="ol")},o5=e=>{var s,o;const t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&((s=t.parentNode)===null||s===void 0?void 0:s.removeChild(t)),n&&n.id==="mce_marker"&&((o=n.parentNode)===null||o===void 0?void 0:o.removeChild(n)),e},i5=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return o5(o)},a5=e=>{var t;return m((t=e?.childNodes)!==null&&t!==void 0?t:[],e=>e.nodeName==="LI")},r5=e=>e.data===W||F(e),c5=e=>r(e?.firstChild)&&e.firstChild===e.lastChild&&r5(e.firstChild),l5=e=>!e.firstChild||c5(e),d5=e=>e.length>0&&l5(e[e.length-1])?e.slice(0,-1):e,Hc=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},h5=(e,t)=>!!Hc(e,t),m5=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},f5=(e,t)=>{const o=n.before(e),i=it(t),s=i.next(o);return s?s.toRange():null},bp=(e,t)=>{const o=n.after(e),i=it(t),s=i.prev(o);return s?s.toRange():null},g5=(e,t,n,s)=>{const a=m5(e,s),o=e.parentNode;return o&&(o.insertBefore(a[0],e),i.each(t,t=>{o.insertBefore(t,e)}),o.insertBefore(a[1],e),o.removeChild(e)),bp(t[t.length-1],n)},v5=(e,t,n)=>{const s=e.parentNode;return s&&i.each(t,t=>{s.insertBefore(t,e)}),f5(e,n)},b5=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),bp(t[0],n)),j5=(e,t,s,o)=>{const d=i5(t,e,o),i=Hc(t,s.startContainer),a=d5(a5(d.firstChild)),c=1,u=2,r=t.getRoot(),l=e=>{const a=n.fromRangeStart(s),r=it(t.getRoot()),o=e===c?r.prev(a):r.next(a),l=o?.getNode();return!l||Hc(t,l)!==i};return i?l(c)?v5(i,a,r):l(u)?b5(i,a,r,t):g5(i,a,r,s):null},y5=["pre"],_5=(t,n,s,o)=>{var a;const i=n.firstChild,r=n.lastChild,c=r.attr("data-mce-type")==="bookmark"?r.prev:r,l=i===c,d=O(y5,i.name);if(l&&d){const n=i.attr("contenteditable")!=="false",r=((a=t.getParent(s,t.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===i.name,c=e.from(yn(o,s)).forall(Ne);return n&&r&&c}return!1},_c=Uo,O5=(e,n,s)=>{if(r(s)){const o=e.getParent(n.endContainer,_c);return s===o&&yr(t.fromDom(s),n)}return!1},x5=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0?void 0:s.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&s.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},cg=(n,s)=>{e.from(n.getParent(s,"td,th")).map(t.fromDom).each(rD)},E5=(e,t)=>{const s=e.schema.getTextInlineElements(),n=e.dom;if(t){const t=e.getBody(),o=yd(e);i.each(n.select("*[data-mce-fragment]"),e=>{const i=r(s[e.nodeName.toLowerCase()]);if(i&&ev(n,e))for(let s=e.parentElement;r(s)&&s!==t;s=s.parentElement){const i=Z7(n,e,s);if(i)break;if(o.compare(s,e)){n.remove(e,!0);break}}})}},k5=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},A5=e=>{i.each(e.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")})},S5=e=>!!e.getAttribute("data-mce-fragment"),M5=(e,t)=>r(t)&&!e.schema.getVoidElements()[t.nodeName],F5=(e,o)=>{var l,d,u;let f;const i=e.dom,h=e.selection;if(!o)return;h.scrollIntoView(o);const m=yn(e.getBody(),o);if(m&&i.getContentEditable(m)==="false"){i.remove(o),h.select(m);return}let r=i.createRng();const c=o.previousSibling;if(s(c)){r.setStart(c,(d=(l=c.nodeValue)===null||l===void 0?void 0:l.length)!==null&&d!==void 0?d:0);const e=o.nextSibling;s(e)&&(c.appendData(e.data),(u=e.parentNode)===null||u===void 0?void 0:u.removeChild(e))}else r.setStartBefore(o),r.setEndBefore(o);const p=t=>{let s=n.fromRangeStart(t);const o=it(e.getBody());return s=o.next(s),s?.toRange()},a=i.getParent(o,i.isBlock);i.remove(o),a&&i.isEmpty(a)&&(ro(t.fromDom(a)),r.setStart(a,0),r.setEnd(a,0),!_c(a)&&!S5(a)&&(f=p(r))?(r=f,i.remove(a)):i.add(a,i.create("br",{"data-mce-bogus":"1"}))),h.setRng(r)},T5=e=>{const o=e.dom,n=Yc(e.selection.getRng());e.selection.setRng(n);const i=o.getParent(n.startContainer,_c);O5(o,n,i)?pu(e,n,t.fromDom(i)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&s(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},z5=(e,t,n)=>{const a=e.selection,o=e.dom,d=e.parser,b=n.merge,u=At({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p);let r=a.getRng();const v=r.startContainer,c=e.getBody();v===c&&a.isCollapsed()&&o.isBlock(c.firstChild)&&M5(e,c.firstChild)&&o.isEmpty(c.firstChild)&&(r=o.createRng(),r.setStart(c.firstChild,0),r.setEnd(c.firstChild,0),a.setRng(r)),a.isCollapsed()||T5(e);const l=a.getNode(),g={context:l.nodeName.toLowerCase(),data:n.data,insert:!0},i=d.parse(t,g);if(n.paste===!0&&s5(e.schema,i)&&h5(o,l))return r=j5(u,o,a.getRng(),i),r&&a.setRng(r),t;n.paste===!0&&_5(o,i,l,e.getBody())&&((h=i.firstChild)===null||h===void 0?void 0:h.unwrap()),k5(i);let s=i.lastChild;if(s&&s.attr("id")==="mce_marker"){const t=s;for(s=s.prev;s;s=s.walk(!0))if(s.type===3||!o.isBlock(s.name)){s.parent&&e.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(t,s,s.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(l),g.invalid){e.selection.setContent(p);let n=a.getNode(),s;const r=e.getBody();xs(n)?n=s=r:s=n;for(var h,f;s&&s!==r;)n=s,s=s.parentNode;t=n===r?r.innerHTML:o.getOuterHTML(n);const c=d.parse(t);for(let e=c;e;e=e.walk())if(e.attr("id")==="mce_marker"){e.replace(i);break}const l=i.children(),g=(f=i.parent)!==null&&f!==void 0?f:c;i.unwrap();const v=m(l,t=>Ep(e.schema,t,g));Jc(v,e.schema),Pp(d.getNodeFilters(),d.getAttributeFilters(),c),t=u.serialize(c),n===r?o.setHTML(r,t):o.setOuterHTML(n,t)}else t=u.serialize(i),x5(e,t,l);return E5(e,b),F5(e,o.get("mce_marker")),A5(e.getBody()),cg(o,a.getStart()),fT(e.schema,e.getBody(),a.getStart()),t},Pa=e=>e instanceof he,N5=e=>{Mn(e)&&oe(e.getBody()).each(t=>{const n=t.getNode(),s=wt(n)?oe(n).getOr(t):t;e.selection.setRng(s.toRange())})},Br=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&N5(e)},R5=(e,n,s,o)=>{if(s.length===0||/^\s+$/.test(s)){const t='<br data-mce-bogus="1">';n.nodeName==="TABLE"?s="<tr><td>"+t+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(s="<li>"+t+"</li>");const i=ge(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),i.toLowerCase())?(s=t,s=e.dom.createHTML(i,Ts(e),s)):s||(s=t),Br(e,s,o.no_selection),{content:s,html:s}}o.format!=="raw"&&(s=At({validate:!1},e.schema).serialize(e.parser.parse(s,{isRootContent:!0,insert:!0})));const a=Yi(t.fromDom(n))?s:i.trim(s);return Br(e,a,o.no_selection),{content:a,html:a}},P5=(e,n,s,o)=>{Pp(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),s);const a=At({validate:!1},e.schema).serialize(s),r=Yi(t.fromDom(n))?a:i.trim(a);return Br(e,r,o.no_selection),{content:s,html:r}},H5=(t,n,s)=>e.from(t.getBody()).map(e=>Pa(n)?P5(t,e,n,s):R5(t,e,n,s)).getOr({content:n,html:Pa(s.content)?"":s.content}),I5=(e,t)=>_N(e,t).isSome(),up=e=>_(e)?e:S,V5=(n,s,o)=>{let i=n.dom;const a=up(o);for(;i.parentNode;){i=i.parentNode;const e=t.fromDom(i),n=s(e);if(n.isSome())return n;if(a(e))break}return e.none()},Pr=(t,n,s)=>{const i=n(t),o=up(s);return i.orThunk(()=>o(t)?e.none():V5(t,n,o))},Nr=pr,cp=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let n=0;n<s.length;n++){const o=s[n];if(_e(o)&&o.inherit===!1&&e.dom.is(t,o.selector))return!0}return!1},kr=(e,t,n,s,o)=>{const i=e.dom.getRoot();if(t===i)return!1;const a=e.dom.getParent(t,t=>!!cp(e,t,n)||t.parentNode===i||!!Je(e,t,n,s,!0));return!!Je(e,a,n,s,o)},or=(e,t,n)=>!!(L(n)&&Nr(t,n.inline))||!!(Qe(n)&&Nr(t,n.block))||!!_e(n)&&c(t)&&e.is(t,n.selector),op=(e,t,n,s,o,i)=>{const a=n[s],r=s==="attributes";if(_(n.onmatch))return n.onmatch(t,n,s);if(a)if(jp(a)){for(let n=0;n<a.length;n++)if(r?e.getAttrib(t,a[n]):Qa(e,t,a[n]))return!0}else for(const s in a)if(f(a,s)){const c=r?e.getAttrib(t,s):Qa(e,t,s),l=Pt(a[s],i),d=D(c)||Es(c);if(d&&D(l))continue;if(o&&d&&!n.exact)return!1;if((!o||n.exact)&&!Nr(c,vr(l,s)))return!1}return!0},Je=(e,t,n,s,o)=>{const i=e.formatter.get(n),a=e.dom;if(i&&c(t))for(let r=0;r<i.length;r++){const n=i[r];if(or(e.dom,t,n)&&op(a,t,n,"attributes",o,s)&&op(a,t,n,"styles",o,s)){const o=n.classes;if(o)for(let n=0;n<o.length;n++)if(!e.dom.hasClass(t,Pt(o[n],s)))return;return n}}},Mr=(e,t,n,s,o)=>{if(s)return kr(e,s,t,n,o);if(s=e.selection.getNode(),kr(e,s,t,n,o))return!0;const i=e.selection.getStart();return!!(i!==s&&kr(e,i,t,n,o))},Q5=(e,t,n)=>{const s=[],o={},i=e.selection.getStart();return e.dom.getParent(i,i=>{for(let r=0;r<t.length;r++){const a=t[r];!o[a]&&Je(e,i,a,n)&&(o[a]=!0,s.push(a))}},e.dom.getRoot()),s},Z5=(n,s)=>{const o=e=>j(e,t.fromDom(n.getBody())),i=(t,s)=>Je(n,t.dom,s)?e.some(s):e.none();return e.from(n.selection.getStart(!0)).bind(e=>Pr(t.fromDom(e),e=>ts(s,t=>i(e,t)),o)).getOrNull()},J5=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),t=Ya(s,o);for(let e=n.length-1;e>=0;e--){const o=n[e];if(!_e(o))return!0;for(let e=t.length-1;e>=0;e--)if(s.is(t[e],o.selector))return!0}}return!1},e7=(e,t,n)=>je(n,(n,s)=>{const o=Sw(e,s);return e.formatter.matchNode(t,s,{},o)?n.concat([s]):n},[]),us=q,n7=(e,t)=>e.importNode(t,!0),s7=e=>{const n=[];let t=e;for(;t;){if(s(t)&&t.data!==us||t.childNodes.length>1)return[];c(t)&&n.push(t),t=t.firstChild}return n},Z6=e=>s7(e).length>0,Q6=e=>{if(e){const t=new P(e,e);for(let e=t.current();e;e=t.next())if(s(e))return e}return null},Fr=e=>{const n=t.fromTag("span");return Ct(n,{id:Nc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&H(n,t.fromText(us)),n},r7=e=>{const t=Q6(e);return t&&t.data.charAt(0)===us&&t.deleteData(0,1),t},Ir=(e,n,s=!0)=>{const o=e.dom,i=e.selection;if(Z6(n))Wt(e,!1,t.fromDom(n),s);else{const e=i.getRng(),a=o.getParent(n,o.isBlock),l=e.startContainer,r=e.startOffset,d=e.endContainer,c=e.endOffset,s=r7(n);o.remove(n,!0),l===s&&r>0&&e.setStart(s,r-1),d===s&&c>0&&e.setEnd(s,c-1),a&&o.isEmpty(a)&&mn(t.fromDom(a)),i.setRng(e)}},nc=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)Ir(e,t,n);else if(t=Xt(e.getBody(),o.getStart()),!t)for(;t=s.get(Nc);)Ir(e,t,!1)},d7=(e,n,s)=>{var i,a;const o=e.dom,r=o.getParent(s,d(ur,e.schema));r&&o.isEmpty(r)?(i=s.parentNode)===null||i===void 0?void 0:i.replaceChild(n,s):(lD(t.fromDom(s)),o.isEmpty(s)?(a=s.parentNode)===null||a===void 0?void 0:a.replaceChild(n,s):o.insertAfter(n,s))},$6=(e,t)=>(e.appendChild(t),t),B6=(e,t)=>{var n;const s=di(e,(e,t)=>$6(e,t.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return $6(s,o.createTextNode(us))},m7=(t,n,s,o,i,a)=>{const r=t.formatter,c=t.dom,l=m(fe(r.get()),e=>e!==o&&!Z(e,"removeformat")),d=e7(t,s,l),u=m(d,e=>!Aw(t,e,o));if(u.length>0){const t=s.cloneNode(!1);return c.add(n,t),r.remove(o,i,t,a),c.remove(t),e.some(t)}return e.none()},f7=(e,t,n)=>{let s;const i=e.selection,c=e.formatter.get(t);if(!c)return;const a=i.getRng();let o=a.startOffset;const d=a.startContainer,r=d.nodeValue;s=Xt(e.getBody(),i.getStart());const l=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(r&&o>0&&o<r.length&&l.test(r.charAt(o))&&l.test(r.charAt(o-1))){const o=i.getBookmark();a.collapse(!0);let s=jn(e.dom,a,c);s=Ei(s),e.formatter.apply(t,n,s),i.moveToBookmark(o)}else{let r=s?Q6(s):null;!s||r?.data!==us?(s=n7(e.getDoc(),Fr(!0).dom),r=s.firstChild,a.insertNode(s),o=1,e.formatter.apply(t,n,s)):e.formatter.apply(t,n,s),i.setCursorLocation(r,o)}},p7=(e,t,n,o)=>{const l=e.dom,r=e.selection;let d=!1;const h=e.formatter.get(t);if(!h)return;const c=r.getRng(),u=c.startContainer,f=c.startOffset;let i=u;s(u)&&(f!==u.data.length&&(d=!0),i=i.parentNode);const m=[];let a;for(;i;){if(Je(e,i,t,n,o)){a=i;break}i.nextSibling&&(d=!0),m.push(i),i=i.parentNode}if(!a)return;if(d){const i=r.getBookmark();c.collapse(!0);let s=jn(l,c,h,!0);s=Ei(s),e.formatter.remove(t,n,s,o),r.moveToBookmark(i)}else{const s=Xt(e.getBody(),a),i=Fr(!1).dom;d7(e,i,s??a);const c=m7(e,i,a,t,n,o),d=B6(m.concat(c.toArray()),i);s&&Ir(e,s,!1),r.setCursorLocation(d,1),l.isEmpty(a)&&l.remove(a)}},g7=(e,t)=>{const n=e.selection,s=e.getBody();nc(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===us&&nc(e,Xt(s,n.getStart())),(t===37||t===39)&&nc(e,Xt(s,n.getStart()))},v7=e=>{e.on("mouseup keydown",t=>{g7(e,t.keyCode)})},b7=(e,s)=>{const o=Fr(!1),i=B6(s,o.dom);return Me(t.fromDom(e),o),A(t.fromDom(e)),n(i,0)},j7=(e,t)=>{const n=e.schema.getTextInlineElements();return f(n,k(t))&&!Ie(t.dom)&&!Cn(t.dom)},y7=e=>Ie(e.dom)&&Z6(e.dom),$s={},P6=Pe(["pre"]),O7=(e,t)=>{const n=$s[e];n||($s[e]=[]),$s[e].push(t)},x7=(e,t)=>{f($s,e)&&o($s[e],e=>{e(t)})};O7("pre",e=>{const n=e.selection.getRng(),s=e=>t=>{const n=t.previousSibling;return P6(n)&&O(e,n)},i=(e,n)=>{const s=t.fromDom(n),o=dt(s).dom;A(s),Jt(t.fromDom(e),[t.fromTag("br",o),t.fromTag("br",o),...Y(s)])};if(!n.collapsed){const t=e.selection.getSelectedBlocks(),n=m(m(t,P6),s(t));o(n,e=>{i(e.previousSibling,e)})}});const z6=["fontWeight","fontStyle","color","fontSize","fontFamily"],E7=e=>ie(e.styles)&&T(fe(e.styles),e=>O(z6,e)),k7=e=>I(e,e=>L(e)&&e.inline==="span"&&E7(e)),F6=(t,n)=>{const s=t.get(n);return R(s)?k7(s):e.none()},M6=(e,t)=>ye(t,n.fromRangeStart(e)).isNone(),S6=(e,t)=>de(t,n.fromRangeEnd(e)).exists(e=>!F(e.getNode())||de(t,e).isSome())===!1,k6=e=>t=>uN(t)&&e.getContentEditableParent(t)!=="false",T7=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return M6(n,t[0])&&S6(n,t[0])?t:[];const s=ue(t).filter(e=>M6(n,e)).toArray(),o=on(t).filter(e=>S6(n,e)).toArray(),i=t.slice(1,-1);return s.concat(i).concat(o)},z7=e=>m(T7(e),k6(e.dom)),E6=e=>m(e.getSelectedBlocks(),k6(e.dom)),bc=i.each,jc=e=>c(e)&&!we(e)&&!Ie(e)&&!Cn(e),w6=(e,t)=>{for(let n=e;n;n=n[t]){if(s(n)&&et(n.data))return e;if(c(n)&&!we(n))return n}return e},v6=(e,t,n)=>{const s=yd(e),o=c(t)&&hn(t),a=c(n)&&hn(n);if(o&&a){const o=w6(t,"previousSibling"),a=w6(n,"nextSibling");if(s.compare(o,a)){for(let e=o.nextSibling;e&&e!==a;){const t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(a),i.each(i.grep(a.childNodes),e=>{o.appendChild(e)}),o}}return n},g6=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const t=(o=v6(e,B2(s),s))!==null&&o!==void 0?o:s;v6(e,t,B2(t,!0))}},I7=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";bc(e.select(s,n),n=>{jc(n)&&hn(n)&&bc(t.styles,(t,s)=>{e.setStyle(n,s,"")})})}},Mc=(e,t,n)=>{bc(e.childNodes,e=>{jc(e)&&(t(e)&&n(e),e.hasChildNodes()&&Mc(e,t,n))})},V7=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},u6=(e,t)=>n=>!!(n&&Qa(e,n,t)),d6=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),V7(e,s)},tn=ot.generate([{keep:[]},{rename:["name"]},{removed:[]}]),K7=/^(src|href|style)$/,Ic=i.each,pi=pr,G7=e=>/^(TR|TH|TD)$/.test(e.nodeName),Kf=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Vf=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];if(c(o)){const e=o.childNodes.length-1;!n&&i&&i--,o=o.childNodes[i>e?e:i]}return s(o)&&n&&i>=o.data.length&&(o=new P(o,e.getBody()).next()||o),s(o)&&!n&&i===0&&(o=new P(o,e.getBody()).prev()||o),o},Pf=(e,t)=>{const s=t?"firstChild":"lastChild",n=e[s];return G7(e)&&n?e.nodeName==="TR"?n[s]||n:n:e},Cl=(e,t,n,s)=>{var o;const i=e.create(n,s);return(o=t.parentNode)===null||o===void 0?void 0:o.insertBefore(i,t),i.appendChild(t),i},Lf=(e,n,s,o,i)=>{const a=t.fromDom(n),r=t.fromDom(e.create(o,i)),c=s?C8(a):E8(a);return Jt(r,c),s?(Me(a,r),r8(r,a)):(Rt(a,r),H(r,a)),r.dom},tv=(e,t)=>t.links&&e.nodeName==="A",Nf=(e,t,n)=>{const r=t.parentNode;let s;const i=e.dom,a=ge(e);if(Qe(n)&&r===i.getRoot()&&(!n.list_block||!pi(t,n.list_block))&&o(be(t.childNodes),t=>{ms(e,a,t.nodeName.toLowerCase())?s?s.appendChild(t):(s=Cl(i,t,a),i.setAttribs(s,Ts(e))):s=null}),vw(n)&&!pi(n.inline,t))return;i.remove(t,!0)},Af=(e,t,n)=>$e(e)?{name:t,value:null}:{name:e,value:Pt(t,n)},kf=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Ef=(e,t,n,s,o)=>{let i=!1;Ic(n.styles,(a,r)=>{const{name:l,value:d}=Af(r,a,s),u=vr(d,l);(n.remove_similar||Yt(d)||!c(o)||pi(Qa(e,o,l),u))&&e.setStyle(t,l,""),i=!0}),i&&kf(e,t)},av=(e,t,n)=>{t==="removeformat"?o(E6(e.selection),t=>{o(z6,n=>e.dom.setStyle(t,n,"")),kf(e.dom,t)}):F6(e.formatter,t).each(t=>{o(E6(e.selection),s=>Ef(e.dom,s,t,n,null))})},Cf=(e,t,n,s,i)=>{const r=e.dom,u=yd(e),l=e.schema;if(L(t)&&gi(l,t.inline)&&As(l,s)&&s.parentElement===e.getBody())return Nf(e,s,t),tn.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false")return tn.keep();if(s&&!or(r,s,t)&&!tv(s,t))return tn.keep();const a=s,d=t.preserve_attributes;if(L(t)&&t.remove==="all"&&R(d)){const e=m(r.getAttribs(a),e=>O(d,e.name.toLowerCase()));if(r.removeAllAttribs(a),o(e,e=>r.setAttrib(a,e.name,e.value)),e.length>0)return tn.rename("span")}if(t.remove!=="all"){Ef(r,a,t,n,i),Ic(t.attributes,(e,s)=>{const{name:l,value:d}=Af(s,e,n);if(t.remove_similar||Yt(d)||!c(i)||pi(r.getAttrib(i,l),d)){if(l==="class"){const e=r.getAttrib(a,l);if(e){let t="";if(o(e.split(/\s+/),e=>{/mce-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t){r.setAttrib(a,l,t);return}}}if(K7.test(l)&&a.removeAttribute("data-mce-"+l),l==="style"&&Pe(["li"])(a)&&r.getStyle(a,"list-style-type")==="none"){a.removeAttribute(l),r.setStyle(a,"list-style-type","none");return}l==="class"&&a.removeAttribute("className"),a.removeAttribute(l)}}),Ic(t.classes,e=>{e=Pt(e,n),(!c(i)||r.hasClass(i,e))&&r.removeClass(a,e)});const e=r.getAttribs(a);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(!u.isAttributeInternal(n))return tn.keep()}}return t.remove!=="none"?(Nf(e,a,t),tn.removed()):tn.keep()},Wo=(e,t,n,s,o)=>Cf(e,t,n,s,o).fold(S,t=>(e.dom.rename(s,t),!0),N),lv=(e,t,n,s,i)=>{let a;return t.parentNode&&o(Ya(e.dom,t.parentNode).reverse(),t=>{if(!a&&c(t)&&t.id!=="_start"&&t.id!=="_end"){const o=Je(e,t,n,s,i);o&&o.split!==!1&&(a=t)}}),a},dv=(e,t,n,s)=>Cf(e,t,n,s,s).fold(a(s),t=>{const n=e.dom.createFragment();return n.appendChild(s),e.dom.rename(s,t)},a(null)),uv=(e,t,n,s,o,i,a,r)=>{var d,u;let c,l;const h=e.dom;if(n){const m=n.parentNode;for(let o=s.parentNode;o&&o!==m;o=o.parentNode){let n=h.clone(o,!1);for(let s=0;s<t.length;s++)if(n=dv(e,t[s],r,n),n===null)break;n&&(c&&n.appendChild(c),l||(l=n),c=n)}i&&(!a.mixed||!h.isBlock(n))&&(s=(d=h.split(n,s))!==null&&d!==void 0?d:s),c&&l&&((u=o.parentNode)===null||u===void 0?void 0:u.insertBefore(c,o),l.appendChild(o),L(a)&&g6(e,a,r,c))}return s},yf=(t,n,i,a,l)=>{const m=t.formatter.get(n),u=m[0],d=t.dom,b=t.selection,h=e=>{const s=lv(t,e,n,i,l);return uv(t,m,s,e,e,!0,u,i)},j=e=>we(e)&&c(e)&&(e.id==="_start"||e.id==="_end"),g=e=>T(m,n=>Wo(t,n,i,e,e)),v=e=>{const n=be(e.childNodes),i=g(e),a=i||T(m,t=>or(d,e,t)),s=e.parentNode;if(!a&&r(s)&&Kr(u)&&g(s),u.deep&&n.length)for(let e=0;e<n.length;e++)v(n[e]);const l=["underline","line-through","overline"];o(l,n=>{c(e)&&t.dom.getStyle(e,"text-decoration")===n&&e.parentNode&&Z2(d,e.parentNode)===n&&Wo(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,e)})},f=e=>{const t=d.get(e?"_start":"_end");if(t){let n=t[e?"firstChild":"lastChild"];return j(n)&&(n=n[e?"firstChild":"lastChild"]),s(n)&&n.data.length===0&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),d.remove(t,!0),n}return null},p=n=>{let s,i,a=jn(d,n,m,n.collapsed);if(u.split){if(a=Ei(a),s=Vf(t,a,!0),i=Vf(t,a),s!==i){if(s=Pf(s,!0),i=Pf(i,!1),Kf(d,s,i)){const t=e.from(s.firstChild).getOr(s);h(Lf(d,t,!0,"span",{id:"_start","data-mce-type":"bookmark"})),f(!0);return}if(Kf(d,i,s)){const t=e.from(i.lastChild).getOr(i);h(Lf(d,t,!1,"span",{id:"_end","data-mce-type":"bookmark"})),f(!1);return}s=Cl(d,s,"span",{id:"_start","data-mce-type":"bookmark"}),i=Cl(d,i,"span",{id:"_end","data-mce-type":"bookmark"});const t=d.createRng();t.setStartAfter(s),t.setEndBefore(i),Ws(d,t,e=>{o(e,e=>{!we(e)&&!we(e.parentNode)&&h(e)})}),h(s),h(i),s=f(!0),i=f()}else s=i=h(s);a.startContainer=s.parentNode?s.parentNode:s,a.startOffset=d.nodeIndex(s),a.endContainer=i.parentNode?i.parentNode:i,a.endOffset=d.nodeIndex(i)+1}Ws(d,a,e=>{o(e,v)})};if(a){if(er(a)){const e=d.createRng();e.setStartBefore(a),e.setEndAfter(a),p(e)}else p(a);Z3(t,n,a,i);return}!b.isCollapsed()||!L(u)||gs(t).length?(H2(t,()=>gr(t,p),e=>L(u)&&Mr(t,n,i,e)),t.nodeChanged()):p7(t,n,i,l),av(t,n,i),Z3(t,n,a,i)},jf=i.each,fv=(e,t,n,s)=>{const o=t=>{if(c(t)&&c(t.parentNode)&&hn(t)){const n=Z2(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(i.walk(s,o,"childNodes"),o(s))},pv=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=u6(e,"fontSize");Mc(s,e=>o(e)&&hn(e),d6(e,"backgroundColor",Pt(t.styles.backgroundColor,n)))}},gv=(e,t,n,s)=>{if(L(t)&&(t.inline==="sub"||t.inline==="sup")){const n=u6(e,"fontSize");Mc(s,e=>n(e)&&hn(e),d6(e,"fontSize",""));const o=m(e.select(t.inline==="sup"?"sub":"sup",s),hn);e.remove(o,!0)}},vv=(e,t,n,s)=>{jf(t,t=>{L(t)&&jf(e.dom.select(t.inline,s),s=>{jc(s)&&Wo(e,t,n,s,t.exact?s:null)}),I7(e.dom,t,s)})},bv=(e,t,n,s,o)=>{const i=o.parentNode;if(Je(e,i,n,s)&&Wo(e,t,s,o))return;t.merge_with_parents&&i&&e.dom.getParent(i,i=>!!Je(e,i,n,s)&&(Wo(e,t,s,o),!0))},Zi=i.each,yv=(e,n,s,o)=>{if(jE(e)&&L(n)&&s.parentNode){const n=X0(e.schema),i=I5(t.fromDom(s),e=>Ie(e.dom));return ds(n,o)&&z(t.fromDom(s.parentNode),!1)&&!i}return!1},ff=(e,t,n,s)=>{if(Zi(n.styles,(n,o)=>{e.setStyle(t,o,Pt(n,s))}),n.styles){const n=e.getAttrib(t,"style");n&&e.setAttrib(t,"data-mce-style",n)}},hf=(e,t,n,i)=>{const l=e.formatter.get(t),a=l[0],g=!i&&e.selection.isCollapsed(),c=e.dom,m=e.selection,d=(e,t=a)=>{_(t.onformat)&&t.onformat(e,t,n,i),ff(c,e,t,n),Zi(t.attributes,(t,s)=>{c.setAttrib(e,s,Pt(t,n))}),Zi(t.classes,t=>{const s=Pt(t,n);c.hasClass(e,s)||c.addClass(e,s)})},u=(e,t)=>{let n=!1;return Zi(e,e=>!!_e(e)&&(c.getContentEditable(t)==="false"&&!e.ceFalseOverride||!!(r(e.collapsed)&&e.collapsed!==g)||!c.is(t,e.selector)||!!Ie(t)||(d(t,e),n=!0,!1))),n},v=e=>{if(h(e)){const t=c.create(e);return d(t),t}return null},f=(i,c,h)=>{const f=[];let m=!0;const p=a.inline||a.block,g=v(p),b=s=>xw(a)&&Je(e,s,t,n),j=(t,n,s)=>{const o=Ow(a)&&ur(e.schema,t)&&ms(e,n,p);return s&&o},y=(t,n,o,r)=>{const c=t.nodeName.toLowerCase(),l=ms(e,p,c)&&ms(e,n,p),d=!h&&s(t)&&sa(t.data),u=Ie(t),m=!L(a)||!i.isBlock(t);return(o||r)&&l&&!d&&!u&&m};Ws(i,c,t=>{let n;const s=t=>{let c=!1,v=m,_=!1;const h=t.parentNode,w=h.nodeName.toLowerCase(),O=i.getContentEditable(t);r(O)&&(v=m,m=O==="true",c=!0,_=q2(e,t));const x=m&&!c;if(F(t)&&!yv(e,a,t,w)){n=null,Qe(a)&&i.remove(t);return}if(b(t)){n=null;return}if(j(t,w,x)){const e=i.rename(t,p);d(e),f.push(e),n=null;return}if(_e(a)){let e=u(l,t);if(!e&&r(h)&&Kr(a)&&(e=u(l,h)),!L(a)||e){n=null;return}}r(g)&&y(t,w,x,_)?(n||(n=i.clone(g,!1),h.insertBefore(n,t),f.push(n)),_&&c&&(m=v),n.appendChild(t)):(n=null,o(be(t.childNodes),s),c&&(m=v),n=null)};o(t,s)}),a.links===!0&&o(f,e=>{const t=e=>{e.nodeName==="A"&&d(e,a),o(be(e.childNodes),t)};t(e)}),o(f,s=>{const c=e=>{let t=0;return o(e.childNodes,e=>{!Dw(e)&&!we(e)&&t++}),t},u=e=>{const t=I(e.childNodes,fr).filter(e=>i.getContentEditable(e)!=="false"&&or(i,e,a));return t.map(t=>{const n=i.clone(t,!1);return d(n),i.replace(n,e,!0),i.remove(t,!0),n}).getOr(e)},r=c(s);if((f.length>1||!i.isBlock(s))&&r===0){i.remove(s,!0);return}(L(a)||Qe(a)&&a.wrapper)&&(!a.exact&&r===1&&(s=u(s)),vv(e,l,n,s),bv(e,a,t,n,s),pv(i,a,n,s),fv(i,a,n,s),gv(i,a,n,s),g6(e,a,n,s))})},p=er(i)?i:m.getNode();if(c.getContentEditable(p)==="false"&&!q2(e,p)){i=p,u(l,i),Q3(e,t,i,n);return}if(a){if(i)if(er(i)){if(!u(l,i)){const e=c.createRng();e.setStartBefore(i),e.setEndAfter(i),f(c,jn(c,e,l),!0)}}else f(c,i,!0);else!g||!L(a)||gs(e).length?(m.setRng(Yc(m.getRng())),H2(e,()=>{gr(e,(e,t)=>{const n=t?e:jn(c,e,l);f(c,n,!1)})},N),e.nodeChanged()):f7(e,t,n),F6(e.formatter,t).each(t=>{o(z7(e.selection),e=>ff(c,e,t,n))});x7(t,e)}Q3(e,t,i,n)},uf=e=>f(e,"vars"),xv=(t,n)=>{t.set({}),n.on("NodeChange",e=>{sf(n,e.element,t.get())}),n.on("FormatApply FormatRemove",s=>{const o=e.from(s.node).map(e=>er(e)?e:e.startContainer).bind(t=>c(t)?e.some(t):e.from(t.parentElement)).getOrThunk(()=>lf(n));sf(n,o,t.get())})},lf=e=>e.selection.getStart(),cf=(e,t,n,s,o)=>{const i=t=>{const i=e.formatter.matchNode(t,n,o??{},s);return!ae(i)},a=t=>!!cp(e,t,n)||!s&&r(e.formatter.matchNode(t,n,o,!0));return Fp(t,i,a)},af=(e,t)=>{const n=t??lf(e);return m(Ya(e.dom,n),e=>c(e)&&!Cn(e))},sf=(e,t,n)=>{const s=af(e,t);x(n,(n,i)=>{const a=n=>{const r=cf(e,s,i,n.similar,uf(n)?n.vars:void 0),a=r.isSome();if(n.state.get()!==a){n.state.set(a);const e=r.getOr(t);uf(n)?n.callback(a,{node:e,format:i,parents:s}):o(n.callbacks,t=>t(a,{node:e,format:i,parents:s}))}};o([n.withSimilar,n.withoutSimilar],a),o(n.withVars,a)})},Sv=(e,t,n,s,i,a)=>{const r=t.get();o(n.split(","),t=>{const n=E(r,t).getOrThunk(()=>{const e={withSimilar:{state:V(!1),similar:!0,callbacks:[]},withoutSimilar:{state:V(!1),similar:!1,callbacks:[]},withVars:[]};return r[t]=e,e}),o=()=>{const n=af(e);return cf(e,n,t,i,a).isSome()};if(ae(a)){const e=i?n.withSimilar:n.withoutSimilar;e.callbacks.push(s),e.callbacks.length===1&&e.state.set(o())}else n.withVars.push({state:V(o()),similar:i,vars:a,callback:s})}),t.set(r)},Mv=(e,t,n)=>{const s=e.get();o(t.split(","),e=>E(s,e).each(t=>{s[e]={withSimilar:{...t.withSimilar,callbacks:m(t.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...t.withoutSimilar,callbacks:m(t.withoutSimilar.callbacks,e=>e!==n)},withVars:m(t.withVars,e=>e.callback!==n)}})),e.set(s)},Fv=(e,t,n,s,o,i)=>(Sv(e,t,n,s,o,i),{unbind:()=>Mv(t,n,s)}),Tv=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(Mr(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?yf(e,t,n,s):hf(e,t,n,s))};function vn(e){return"@babel/helpers - typeof",vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function ld(e,t){return ld=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},ld(e,t)}function Nv(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ki(){return Nv()?ki=Reflect.construct:ki=function(t,n,s){var i,a,o=[null];return o.push.apply(o,n),a=Function.bind.apply(t,o),i=new a,s&&ld(i,s.prototype),i},ki.apply(null,arguments)}function Ke(e){return Pv(e)||Hv(e)||Iv(e)||Vv()}function Pv(e){if(Array.isArray(e))return kd(e)}function Hv(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iv(e,t){if(!e)return;if(typeof e=="string")return kd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kd(e,t)}function kd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Vv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,Jr,rg,ig,ng,ws,tg,Zp,tu,Gp,Rd,qi,ql,xm,$v=Object.hasOwnProperty,G8=Object.setPrototypeOf,Uv=Object.isFrozen,Kv=Object.getPrototypeOf,qv=Object.getOwnPropertyDescriptor,R8,L8,ps,Ss,F8,gt,S8,A8,ne,Oi,Kd,Sa,Ca,f8,da,u8,Ld,Md,Gi,Cd,uo,s8,n8,Jm,Qm,Km,Um,Wm,$m,Vm,Rm,Tm,J3,H3,M3,st,Zs,Be,Zn,Kp,me=Object.freeze,Ze=Object.seal,Xv=Object.create,B8=typeof Reflect!="undefined"&&Reflect,Ea=B8.apply,qd=B8.construct;Ea||(Ea=function(t,n,s){return t.apply(n,s)}),me||(me=function(t){return t}),Ze||(Ze=function(t){return t}),qd||(qd=function(t,n){return ki(t,Ke(n))}),R8=He(Array.prototype.forEach),L8=He(Array.prototype.pop),ps=He(Array.prototype.push),Ss=He(String.prototype.toLowerCase),F8=He(String.prototype.match),gt=He(String.prototype.replace),S8=He(String.prototype.indexOf),A8=He(String.prototype.trim),ne=He(RegExp.prototype.test),Oi=u9(TypeError);function He(e){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];return Ea(e,t,o)}}function u9(e){return function(){for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];return qd(e,s)}}function y(e,t){G8&&G8(e,null);for(var n,s,o=t.length;o--;)n=t[o],typeof n=="string"&&(s=Ss(n),s!==n&&(Uv(t)||(t[o]=s),n=s)),e[n]=!0;return e}function xn(e){var t,n=Xv(null);for(t in e)Ea($v,e,[t])&&(n[t]=e[t]);return n}function za(e,t){for(;e!==null;){var n=qv(e,t);if(n){if(n.get)return He(n.get);if(typeof n.value=="function")return He(n.value)}e=Kv(e)}function s(e){return console.warn("fallback value for",e),null}return s}Kd=me(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Sa=me(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ca=me(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),f8=me(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),da=me(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),u8=me(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ld=me(["#text"]),Md=me(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Gi=me(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Cd=me(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uo=me(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),s8=Ze(/\{\{[\w\W]*|[\w\W]*\}\}/gm),n8=Ze(/<%[\w\W]*|[\w\W]*%>/gm),Jm=Ze(/^data-[-\w.\u00B7-\uFFFF]/),Qm=Ze(/^aria-[-\w]+$/),Km=Ze(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i),Um=Ze(/^(?:\w+script|data):/i),Wm=Ze(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$m=Ze(/^html$/i),Vm=function(){return typeof window=="undefined"?null:window},Rm=function(t,n){if(vn(t)!=="object"||typeof t.createPolicy!="function")return null;var o,s=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(s=n.currentScript.getAttribute(i)),o="dompurify"+(s?"#"+s:"");try{return t.createPolicy(o,{createHTML:function(t){return t}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Nm(){if(t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vm(),e=function(t){return Nm(t)},e.version="2.3.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var e,t,i,a,r,h,f,j,O,k,F,D,N,L,H,V,$,B=t.document,d=t.document,ge=t.DocumentFragment,ze=t.HTMLTemplateElement,U=t.Node,_e=t.Element,K=t.NodeFilter,we=t.NamedNodeMap,Me=we===void 0?t.NamedNodeMap||t.MozNamedAttrMap:we,Ne=t.HTMLFormElement,Re=t.DOMParser,Pe=t.trustedTypes,ye,ve,ie,x=_e.prototype,Ie=za(x,"cloneNode"),$e=za(x,"nextSibling"),He=za(x,"childNodes"),ee=za(x,"parentNode");typeof ze=="function"&&(k=d.createElement("template"),k.content&&k.content.ownerDocument&&(d=k.content.ownerDocument));var l=Rm(Pe,B),he=l?l.createHTML(""):"",C=d,Z=C.implementation,Ce=C.createNodeIterator,Le=C.createDocumentFragment,Se=C.getElementsByTagName,De=B.importNode,be={};try{be=xn(d).documentMode?d.documentMode:{}}catch{}i={},e.isSupported=typeof ee=="function"&&Z&&typeof Z.createHTMLDocument!="undefined"&&be!==9;var I=s8,P=n8,Ee=Jm,Ve=Qm,Be=Um,ae=Wm,R=Km,s=null,fe=y({},[].concat(Ke(Kd),Ke(Sa),Ke(Ca),Ke(da),Ke(Ld))),o=null,oe=y({},[].concat(Ke(Md),Ke(Gi),Ke(Cd),Ke(uo))),n=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),w=null,W=null,je=!0,T=!0,pe=!1,b=!1,u=!1,X=!1,Q=!1,p=!1,E=!1,A=!1,de=!0,z=!0,_=!1,g={},m=null,re=y({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ce=null,le=y({},["audio","video","img","source","image","track"]),te=null,ue=y({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),J="http://www.w3.org/1998/Math/MathML",G="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xhtml",S=c,Y=!1,Te=["application/xhtml+xml","text/html"],Fe="text/html",v=null,ke=d.createElement("form"),xe=function(t){return t instanceof RegExp||t instanceof Function},q=function(t){if(v&&v===t)return;(!t||vn(t)!=="object")&&(t={}),t=xn(t),s="ALLOWED_TAGS"in t?y({},t.ALLOWED_TAGS):fe,o="ALLOWED_ATTR"in t?y({},t.ALLOWED_ATTR):oe,te="ADD_URI_SAFE_ATTR"in t?y(xn(ue),t.ADD_URI_SAFE_ATTR):ue,ce="ADD_DATA_URI_TAGS"in t?y(xn(le),t.ADD_DATA_URI_TAGS):le,m="FORBID_CONTENTS"in t?y({},t.FORBID_CONTENTS):re,w="FORBID_TAGS"in t?y({},t.FORBID_TAGS):{},W="FORBID_ATTR"in t?y({},t.FORBID_ATTR):{},g="USE_PROFILES"in t&&t.USE_PROFILES,je=t.ALLOW_ARIA_ATTR!==!1,T=t.ALLOW_DATA_ATTR!==!1,pe=t.ALLOW_UNKNOWN_PROTOCOLS||!1,b=t.SAFE_FOR_TEMPLATES||!1,u=t.WHOLE_DOCUMENT||!1,p=t.RETURN_DOM||!1,E=t.RETURN_DOM_FRAGMENT||!1,A=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,de=t.SANITIZE_DOM!==!1,z=t.KEEP_CONTENT!==!1,_=t.IN_PLACE||!1,R=t.ALLOWED_URI_REGEXP||R,S=t.NAMESPACE||c,t.CUSTOM_ELEMENT_HANDLING&&xe(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(n.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&xe(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(n.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(n.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),f=Te.indexOf(t.PARSER_MEDIA_TYPE)===-1?f=Fe:f=t.PARSER_MEDIA_TYPE,h=f==="application/xhtml+xml"?function(e){return e}:Ss,b&&(T=!1),E&&(p=!0),g&&(s=y({},Ke(Ld)),o=[],g.html===!0&&(y(s,Kd),y(o,Md)),g.svg===!0&&(y(s,Sa),y(o,Gi),y(o,uo)),g.svgFilters===!0&&(y(s,Ca),y(o,Gi),y(o,uo)),g.mathMl===!0&&(y(s,da),y(o,Cd),y(o,uo))),t.ADD_TAGS&&(s===fe&&(s=xn(s)),y(s,t.ADD_TAGS)),t.ADD_ATTR&&(o===oe&&(o=xn(o)),y(o,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&y(te,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(m===re&&(m=xn(m)),y(m,t.FORBID_CONTENTS)),z&&(s["#text"]=!0),u&&y(s,["html","head","body"]),s.table&&(y(s,["tbody"]),delete w.tbody),me&&me(t),v=t},se=y({},["mi","mo","mn","ms","mtext"]),Oe=y({},["foreignobject","desc","title","annotation-xml"]),Ae=y({},["title","style","font","a","script"]),M=y({},Sa);return y(M,Ca),y(M,f8),F=y({},da),y(F,u8),ye=function(t){var s,o,n=ee(t);return(!n||!n.tagName)&&(n={namespaceURI:c,tagName:"template"}),s=Ss(t.tagName),o=Ss(n.tagName),t.namespaceURI===G?n.namespaceURI===c?s==="svg":n.namespaceURI===J?s==="svg"&&(o==="annotation-xml"||se[o]):Boolean(M[s]):t.namespaceURI===J?n.namespaceURI===c?s==="math":n.namespaceURI===G?s==="math"&&Oe[o]:Boolean(F[s]):t.namespaceURI===c&&!(n.namespaceURI===G&&!Oe[o])&&!(n.namespaceURI===J&&!se[o])&&!F[s]&&(Ae[s]||!M[s])},a=function(n){ps(e.removed,{element:n});try{n.parentNode.removeChild(n)}catch{try{n.outerHTML=he}catch{n.remove()}}},O=function(n,s){try{ps(e.removed,{attribute:s.getAttributeNode(n),from:s})}catch{ps(e.removed,{attribute:null,from:s})}if(s.removeAttribute(n),n==="is"&&!o[n])if(p||E)try{a(s)}catch{}else try{s.setAttribute(n,"")}catch{}},$=function(t){if(Q)t="<remove></remove>"+t;else{var n,s,o,i,a=F8(t,/^[\r\n\t ]+/);o=a&&a[0]}if(f==="application/xhtml+xml"&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>"),i=l?l.createHTML(t):t,S===c)try{n=(new Re).parseFromString(i,f)}catch{}if(!n||!n.documentElement){n=Z.createDocument(S,"template",null);try{n.documentElement.innerHTML=Y?"":i}catch{}}return s=n.body||n.documentElement,t&&o&&s.insertBefore(d.createTextNode(o),s.childNodes[0]||null),S===c?Se.call(n,u?"html":"body")[0]:u?n.documentElement:s},V=function(t){return Ce.call(t.ownerDocument||t,t,K.SHOW_ELEMENT|K.SHOW_COMMENT|K.SHOW_TEXT,null,!1)},ve=function(t){return t instanceof Ne&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof Me)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function")},j=function(t){return vn(U)==="object"?t instanceof U:t&&vn(t)==="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},r=function(n,s,o){if(!i[n])return;R8(i[n],function(t){t.call(e,s,o,v)})},H=function(o){if(r("beforeSanitizeElements",o,null),ve(o))return a(o),!0;if(ne(/[\u0080-\uFFFF]/,o.nodeName))return a(o),!0;var c,l,d,u,f,i=h(o.nodeName);if(r("uponSanitizeElement",o,{tagName:i,allowedTags:s}),o.hasChildNodes()&&!j(o.firstElementChild)&&(!j(o.content)||!j(o.content.firstElementChild))&&ne(/<[/\w]/g,o.innerHTML)&&ne(/<[/\w]/g,o.textContent))return a(o),!0;if(i==="select"&&ne(/<template/i,o.innerHTML))return a(o),!0;if(!s[i]||w[i]){if(!w[i]&&N(i)){if(n.tagNameCheck instanceof RegExp&&ne(n.tagNameCheck,i))return!1;if(n.tagNameCheck instanceof Function&&n.tagNameCheck(i))return!1}if(z&&!m[i]&&(u=ee(o)||o.parentNode,l=He(o)||o.childNodes,l&&u)){f=l.length;for(d=f-1;d>=0;--d)u.insertBefore(Ie(l[d],!0),$e(o))}return a(o),!0}return o instanceof _e&&!ye(o)?(a(o),!0):(i==="noscript"||i==="noembed")&&ne(/<\/no(script|embed)/i,o.innerHTML)?(a(o),!0):(b&&o.nodeType===3&&(c=o.textContent,c=gt(c,I," "),c=gt(c,P," "),o.textContent!==c&&(ps(e.removed,{element:o.cloneNode()}),o.textContent=c)),r("afterSanitizeElements",o,null),!1)},L=function(t,s,i){if(de&&(s==="id"||s==="name")&&(i in d||i in ke))return!1;if(T&&!W[s]&&ne(Ee,s));else if(je&&ne(Ve,s));else if(!o[s]||W[s])if(N(t)&&(n.tagNameCheck instanceof RegExp&&ne(n.tagNameCheck,t)||n.tagNameCheck instanceof Function&&n.tagNameCheck(t))&&(n.attributeNameCheck instanceof RegExp&&ne(n.attributeNameCheck,s)||n.attributeNameCheck instanceof Function&&n.attributeNameCheck(s))||s==="is"&&n.allowCustomizedBuiltInElements&&(n.tagNameCheck instanceof RegExp&&ne(n.tagNameCheck,i)||n.tagNameCheck instanceof Function&&n.tagNameCheck(i)));else return!1;else if(te[s]);else if(ne(R,gt(i,ae,"")));else if((s==="src"||s==="xlink:href"||s==="href")&&t!=="script"&&S8(i,"data:")===0&&ce[t]);else if(pe&&!ne(Be,gt(i,ae,"")));else if(i)return!1;return!0},N=function(t){return t.indexOf("-")>0},D=function(t){if(r("beforeSanitizeAttributes",t,null),c=t.attributes,!c)return;for(s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:o},d=c.length;d--;){a=c[d];var n,s,a,c,l,d,f,p,u=a,i=u.name,m=u.namespaceURI;if(n=i==="value"?a.value:A8(a.value),l=h(i),f=n,s.attrName=l,s.attrValue=n,s.keepAttr=!0,s.forceKeepAttr=void 0,r("uponSanitizeAttribute",t,s),n=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){O(i,t);continue}if(ne(/\/>/i,n)){O(i,t);continue}if(b&&(n=gt(n,I," "),n=gt(n,P," ")),p=h(t.nodeName),!L(p,l,n)){O(i,t);continue}if(n!==f)try{m?t.setAttributeNS(m,i,n):t.setAttribute(i,n)}catch{O(i,t)}}r("afterSanitizeAttributes",t,null)},ie=function e(t){var n,s=V(t);for(r("beforeSanitizeShadowDOM",t,null);n=s.nextNode();){if(r("uponSanitizeShadowNode",n,null),H(n))continue;n.content instanceof ge&&e(n.content),D(n)}r("afterSanitizeShadowDOM",t,null)},e.sanitize=function(n,i){if(Y=!n,Y&&(n="<!-->"),typeof n!="string"&&!j(n)){if(typeof n.toString!="function")throw Oi("toString is not a function");if(n=n.toString(),typeof n!="string")throw Oi("dirty is not a string, aborting")}if(!e.isSupported){if(vn(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof n=="string")return t.toStaticHTML(n);if(j(n))return t.toStaticHTML(n.outerHTML)}return n}if(X||q(i),e.removed=[],typeof n=="string"&&(_=!1),_){if(n.nodeName){var r,c,d,m,f,g,y,v=h(n.nodeName);if(!s[v]||w[v])throw Oi("root node is forbidden and cannot be sanitized in-place")}}else if(n instanceof U)r=$("<!---->"),m=r.ownerDocument.importNode(n,!0),m.nodeType===1&&m.nodeName==="BODY"?r=m:m.nodeName==="HTML"?r=m:r.appendChild(m);else{if(!p&&!b&&!u&&n.indexOf("<")===-1)return l&&A?l.createHTML(n):n;if(r=$(n),!r)return p?null:A?he:""}for(r&&Q&&a(r.firstChild),y=V(_?n:r);d=y.nextNode();){if(d.nodeType===3&&d===g)continue;if(H(d))continue;d.content instanceof ge&&ie(d.content),D(d),g=d}if(g=null,_)return n;if(p){if(E)for(f=Le.call(r.ownerDocument);r.firstChild;)f.appendChild(r.firstChild);else f=r;return o.shadowroot&&(f=De.call(B,f,!0)),f}return c=u?r.outerHTML:r.innerHTML,u&&s["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&ne($m,r.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+r.ownerDocument.doctype.name+`>
`+c),b&&(c=gt(c,I," "),c=gt(c,P," ")),l&&A?l.createHTML(c):c},e.setConfig=function(e){q(e),X=!0},e.clearConfig=function(){v=null,X=!1},e.isValidAttribute=function(e,t,n){v||q({});var s=h(e),o=h(t);return L(s,o,n)},e.addHook=function(e,t){if(typeof t!="function")return;i[e]=i[e]||[],ps(i[e],t)},e.removeHook=function(e){if(i[e])return L8(i[e])},e.removeHooks=function(e){i[e]&&(i[e]=[])},e.removeAllHooks=function(){i={}},e}Tm=Nm();const Fm=i.explode,Sm=()=>{const e={},t=(t,n)=>{o(Fm(t),t=>{f(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)})},n=()=>Uc(e),s=(t,n)=>{o(Fm(t),t=>{if(f(e,t))if(r(n)){const s=e[t],o=m(s.callbacks,e=>e!==n);o.length>0?s.callbacks=o:delete e[t]}else delete e[t]})};return{addFilter:t,getFilters:n,removeFilter:s}},I9=(e,t)=>{o(t,t=>{e.attr(t,null)})},B9=(e,t,n)=>{e.addNodeFilter("font",e=>{o(e,e=>{const s=t.parse(e.attr("style")),o=e.attr("color"),i=e.attr("face"),a=e.attr("size");o&&(s.color=o),i&&(s["font-family"]=i),a&&tr(a).each(e=>{s["font-size"]=n[e-1]}),e.name="span",e.attr("style",t.serialize(s)),I9(e,["color","face","size"])})})},V9=(e,t,n)=>{e.addNodeFilter("strike",e=>{const s=t.type!=="html4";o(e,e=>{if(s)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}})})},$9=(e,t,n)=>{var s;const o=rc();t.convert_fonts_to_spans&&B9(e,o,i.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),V9(e,n,o)},W9=(e,t,n)=>{t.inline_styles&&$9(e,t,n)},U9=e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),K9=e=>{const t=/([a-z0-9+/=\s]+)/i.exec(e);return t?t[1]:""},md=t=>{const[o,...i]=t.split(","),s=i.join(","),n=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(n){const t=n[2]===";base64",o=t?K9(s):decodeURIComponent(s);return e.some({type:n[1],data:o,base64Encoded:t})}return e.none()},km=(t,n,s=!0)=>{let o=n;if(s)try{o=atob(n)}catch{return e.none()}const i=new Uint8Array(o.length);for(let e=0;e<i.length;e++)i[e]=o.charCodeAt(e);return e.some(new Blob([i],{type:t}))},G9=e=>new Promise((t,n)=>{md(e).bind(({type:e,data:t,base64Encoded:n})=>km(e,t,n)).fold(()=>n("Invalid data URI"),t)}),X9=e=>K(e,"blob:")?U9(e):K(e,"data:")?G9(e):Promise.reject("Unknown URI format"),Cm=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var e;n((e=s.error)===null||e===void 0?void 0:e.message)},s.readAsDataURL(e)});let Z9=0;const J9=e=>(e||"blobid")+Z9++,Om=(t,n,s)=>md(t).bind(({data:t,type:o,base64Encoded:i})=>{if(n&&!i)return e.none();const a=i?t:btoa(t);return s(a,o)}),wm=(e,t,n)=>{const s=e.create(J9(),t,n);return e.add(s),s},_m=(t,n,s=!1)=>Om(n,s,(n,s)=>e.from(t.getByData(n,s)).orThunk(()=>km(s,n).map(e=>wm(t,e,n)))),sb=(t,n)=>{const s=()=>Promise.reject("Invalid data URI");if(K(n,"blob:")){const o=t.getByUri(n);return r(o)?Promise.resolve(o):X9(n).then(n=>Cm(n).then(o=>Om(o,!1,s=>e.some(wm(t,n,s))).getOrThunk(s)))}else return K(n,"data:")?_m(t,n).fold(s,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")},ob=e=>r(e.attr("data-mce-bogus")),ib=e=>e.attr("src")===v.transparentSrc||r(e.attr("data-mce-placeholder")),ab=(e,t)=>{const{blob_cache:n}=t;if(n){const t=e=>{const t=e.attr("src");if(ib(e)||ob(e)||D(t))return;_m(n,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>o(e,t))}},rb=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(e,t,s)=>{const o=i.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),r=n.getWhitespaceElements();o.body=1;const c=e=>e.name in o&&I2(n,e);for(let l=0,d=e.length;l<d;l++){let i=e[l],t=i.parent;if(t&&o[t.name]&&i===t.lastChild){{let e=i.prev;for(;e;){const t=e.name;if(t!=="span"||e.attr("data-mce-type")!=="bookmark"){t==="br"&&(i=null);break}e=e.prev}if(i&&(i.remove(),Co(n,a,r,t))){const e=n.getElementRule(t.name);e&&(e.removeEmpty?t.remove():e.paddEmpty&&Tl(s,c,t))}}}else{let e=i;for(;t&&t.firstChild===e&&t.lastChild===e;){if(e=t,o[t.name])break;t=t.parent}if(e===t){const e=new he("#text",3);e.value=W,i.replace(e)}}}}),e.addAttributeFilter("href",e=>{let n=e.length;const s=e=>{const t=e.split(" ").filter(e=>e.length>0);return t.concat(["noopener"]).sort().join(" ")},o=e=>{const t=e?i.trim(e):"";return/\b(noopener)\b/g.test(t)?t:s(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];t.name==="a"&&t.attr("target")==="_blank"&&t.attr("rel",o(t.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let o=e.length,n,i,s,t;for(;o--;)if(t=e[o],t.name==="a"&&t.firstChild&&!t.attr("href"))for(s=t.parent,n=t.lastChild;n&&s;)i=n.prev,s.insert(n,t),n=i}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let s=e.length,t,n;for(;s--;)if(t=e[s],n=t.parent,n&&(n.name==="ul"||n.name==="ol"))if(t.prev&&t.prev.name==="li")t.prev.append(t);else{const e=new he("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",e=>{let n=e.length;for(var t;n--;){const a=e[n],c=(t=a.attr("class"))!==null&&t!==void 0?t:"",r=i.explode(c," ");let o="";for(let n=0;n<r.length;n++){const i=r[n];let t=!1,e=s["*"];e&&e[i]&&(t=!0),e=s[a.name],!t&&e&&e[i]&&(t=!0),t&&(o&&(o+=" "),o+=i)}o.length||(o=null),a.attr("class",o)}}),ab(e,t)},bm=i.each,lb=i.trim,db=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ub={ftp:21,http:80,https:443,mailto:25},hb=["img","video"],mb=(e,t)=>r(e)?!e:!r(t)||!O(hb,t),fb=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},vm=(e,t,n)=>{const s=fb(t);return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(s)||!e.allow_html_data_urls&&(/^data:image\//i.test(s)?mb(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)))};class tt{constructor(e,t={}){this.path="",this.directory="",e=lb(e),this.settings=t;const s=t.base_uri,n=this;if(/^([\w-]+):([^/]{2})/i.test(e)||/^\s*#/.test(e)){n.source=e;return}const o=e.indexOf("//")===0;if(e.indexOf("/")===0&&!o&&(e=(s?s.protocol||"http":"http")+"://mce_host"+e),!/^[\w-]*:?\/\//.test(e)){const t=s?s.path:new tt(document.location.href).directory;if(s?.protocol==="")e="//mce_host"+n.toAbsPath(t,e);else{const o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(s&&s.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@/]*):?([^:@/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&bm(db,(e,t)=>{let s=i[t];s&&(s=s.replace(/\(mce_at\)/g,"@@")),n[e]=s}),s&&(n.protocol||(n.protocol=s.protocol),n.userInfo||(n.userInfo=s.userInfo),!n.port&&n.host==="mce_host"&&(n.port=s.port),(!n.host||n.host==="mce_host")&&(n.host=s.host),n.source=""),o&&(n.protocol="")}static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),s=/data:([^;]+)/.exec(n[0]);return s&&(t=s[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;const s=Tt.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!vm(n,s,t)}static getDocumentBaseUrl(e){var n;let t;return e.protocol.indexOf("http")!==0&&e.protocol!=="file:"?t=(n=e.href)!==null&&n!==void 0?n:"":t=e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^/]+\//.test(t)&&(t=t.replace(/[?#].*$/,"").replace(/[/\\][^/]+$/,""),/[/\\]$/.test(t)||(t+="/")),t}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if(e==="./")return e;const t=new tt(e,{base_uri:this});if(t.host!=="mce_host"&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&t.protocol!=="")return t.getURI();const n=this.getURI(),o=t.getURI();if(n===o||n.charAt(n.length-1)==="/"&&n.substr(0,n.length-1)===o)return n;let s=this.toRelPath(this.path,t.path);return t.query&&(s+="?"+t.query),t.anchor&&(s+="#"+t.anchor),s}toAbsolute(e,t){const n=new tt(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=this.protocol?ub[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let a=0,r="",n,o;const i=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(i.length>=s.length)for(n=0,o=i.length;n<o;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}if(i.length<s.length)for(n=0,o=s.length;n<o;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}if(a===1)return t;for(n=0,o=i.length-(a-1);n<o;n++)r+="../";for(n=a-1,o=s.length;n<o;n++)n!==a-1?r+="/"+s[n]:r+=s[n];return r}toAbsPath(e,t){let o=0;const r=/\/$/.test(t)?"/":"",l=e.split("/"),s=t.split("/"),i=[];bm(l,e=>{e&&i.push(e)});const a=[];for(let e=s.length-1;e>=0;e--){if(s[e].length===0||s[e]===".")continue;if(s[e]===".."){o++;continue}if(o>0){o--;continue}a.push(s[e])}const c=i.length-o;let n;return c<=0?n=_o(a).join("/"):n=i.slice(0,c).join("/")+"/"+_o(a).join("/"),n.indexOf("/")!==0&&(n="/"+n),r&&n.lastIndexOf("/")!==n.length-1&&(n+=r),n}getURI(e=!1){let t;return(!this.source||e)&&(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const lm=i.makeMap,cm=i.extend,jb={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},yb=i.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Jl="data-mce-type",wb=(e,t)=>{const n={...jb};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},Ob=(e,n)=>{const s=Tm(),r=n.getSpecialElements(),i=e.validate;let a=0;return s.addHook("uponSanitizeElement",(s,c)=>{var u,m,p;s.nodeType===Bf&&!e.allow_conditional_comments&&/^\[if/i.test((u=s.nodeValue)!==null&&u!==void 0?u:"")&&(s.nodeValue=" "+s.nodeValue);const g=c.tagName;if(s.nodeType!==Do||g==="body")return;const l=t.fromDom(s),v=g.toLowerCase(),b=Qo(l,Jl),j=Te(l,"data-mce-bogus");if(!b&&h(j)){j==="all"?A(l):Ot(l);return}const d=n.getElementRule(v);if(i&&!d){f(r,v)?A(l):Ot(l);return}if(c.allowedTags[g]=!0,i&&d&&!b){if(o((m=d.attributesForced)!==null&&m!==void 0?m:[],e=>{$(l,e.name,e.value==="{$uid}"?`mce_${a++}`:e.value)}),o((p=d.attributesDefault)!==null&&p!==void 0?p:[],e=>{Qo(l,e.name)||$(l,e.name,e.value==="{$uid}"?`mce_${a++}`:e.value)}),d.attributesRequired&&!T(d.attributesRequired,e=>Qo(l,e))){Ot(l);return}if(d.removeEmptyAttrs&&lR(l)){Ot(l);return}d.outputName&&d.outputName!==v&&TS(l,d.outputName)}}),s.addHook("uponSanitizeAttribute",(t,s)=>{const a=t.tagName.toLowerCase(),{attrName:o,attrValue:r}=s;s.keepAttr=!i||n.isValid(a,o)||K(o,"data-")||K(o,"aria-"),o in yb&&vm(e,r,a)&&(s.keepAttr=!1),s.keepAttr?(s.allowedAttributes[o]=!0,o in n.getBoolAttrs()&&(s.attrValue=o),e.allow_svg_data_urls&&K(r,"data:image/svg+xml")&&(s.forceKeepAttr=!0)):t.hasAttribute(Jl)&&(o==="id"||o==="class"||o==="style")&&(s.forceKeepAttr=!0)}),s},im=(e,t,n)=>{const o=e.name,a=o in n&&o!=="title"&&o!=="textarea",i=t.childNodes;for(let r=0,l=i.length;r<l;r++){const t=i[r],o=new he(t.nodeName.toLowerCase(),t.nodeType);if(c(t)){const e=t.attributes;for(let t=0,s=e.length;t<s;t++){const n=e[t];o.attr(n.name,n.value)}}else s(t)?(o.value=t.data,a&&(o.raw=!0)):(xt(t)||pN(t)||hN(t))&&(o.value=t.data);im(o,t,n),e.append(o)}},Cb=(e,t,n)=>{const s=[];for(let n=e,a=n;n;a=n,n=n.walk()){const i=n;o(t,e=>e(i)),D(i.parent)&&i!==e?n=a:s.push(i)}for(let e=s.length-1;e>=0;e--){const t=s[e];o(n,e=>e(t))}},Eb=(e,t,n,s)=>{const u=n.validate,c=t.getNonEmptyElements(),i=t.getWhitespaceElements(),g=cm(lm("script,style,head,html,body,title,meta,param"),t.getBlockElements()),p=X0(t),m=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,h=/[ \t\r\n]+$/,a=e=>{let t=e.parent;for(;r(t);){if(t.name in i)return!0;t=t.parent}return!1},f=e=>{let n=e;for(;r(n);){if(n.name in p)return Co(t,c,i,n);n=n.parent}return!1},o=e=>e.name in g&&!I2(t,e),l=(t,n)=>{const i=n?t.prev:t.next;return!r(i)&&!D(t.parent)&&o(t.parent)&&(t.parent!==e||s.isRootContent===!0)},v=e=>{var t;if(e.type===3&&!a(e)){let n=(t=e.value)!==null&&t!==void 0?t:"";n=n.replace(m," "),(Ug(e.prev,o)||l(e,!0))&&(n=n.replace(d,"")),n.length===0?e.remove():e.value=n}},b=e=>{var n;if(e.type===1){{const n=t.getElementRule(e.name);if(u&&n){const a=Co(t,c,i,e);n.paddInEmptyBlock&&a&&f(e)?Tl(s,o,e):n.removeEmpty&&a?o(e)?e.remove():e.unwrap():n.paddEmpty&&(a||Bg(e))&&Tl(s,o,e)}}}else if(e.type===3&&!a(e)){let t=(n=e.value)!==null&&n!==void 0?n:"";(e.next&&o(e.next)||l(e,!1))&&(t=t.replace(h,"")),t.length===0?e.remove():e.value=t}};return[v,b]},kb=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},$n=(e={},t=Dt())=>{const i=Sm(),s=Sm(),n={validate:!0,root_name:"body",...e},_=new DOMParser,r=Ob(n,t),m=(e,s,o="html")=>{const a=o==="xhtml"?"application/xhtml+xml":"text/html",c=f(t.getSpecialElements(),s.toLowerCase()),l=c?`<${s}>${e}</${s}>`:e,d=o==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${l}</body></html>`:`<body>${l}</body>`,i=_.parseFromString(d,a).body;return r.sanitize(i,wb(n,a)),r.removed=[],c?i.firstChild:i},d=i.addFilter,a=i.getFilters,l=i.removeFilter,u=s.addFilter,c=s.getFilters,p=s.removeFilter,v=(e,n)=>{Ep(t,e)&&n.push(e)},b=(e,n)=>{const s=h(n.attr(Jl)),o=n.type===1&&!f(e,n.name)&&!hT(t,n);return n.type===3||o&&!s},j=(e,s)=>{const r=cm(lm("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=/^[ \t\r\n]+/,l=/[ \t\r\n]+$/;let o=e.firstChild,i=null;const a=e=>{var t,n;e&&(o=e.firstChild,o&&o.type===3&&(o.value=(t=o.value)===null||t===void 0?void 0:t.replace(c,"")),o=e.lastChild,o&&o.type===3&&(o.value=(n=o.value)===null||n===void 0?void 0:n.replace(l,"")))};if(!t.isValidChild(e.name,s.toLowerCase()))return;for(;o;){const t=o.next;b(r,o)?i?i.append(o):(i=new he(s,1),i.attr(n.forced_root_block_attrs),e.insert(i,o),i.append(o)):(a(i),i=null),o=t}a(i)},y=(e,s={})=>{var r;const u=n.validate,h=(r=s.context)!==null&&r!==void 0?r:n.root_name,l=m(e,h,s.format);lr(t,l);const o=new he(h,11);im(o,l,t.getSpecialElements()),l.innerHTML="";const[b,y]=Eb(o,t,n,s),i=[],_=u?e=>v(e,i):g,f={nodes:{},attributes:{}},d=e=>Up(a(),c(),e,f);if(Cb(o,[b,d],[y,_]),i.reverse(),u&&i.length>0)if(s.context){const{pass:e,fail:n}=zo(i,e=>e.parent===o);Jc(n,t,d),s.invalid=e.length>0}else Jc(i,t,d);const p=kb(n,s);return p&&(o.name==="body"||s.isRootContent)&&j(o,p),s.invalid||Ip(f,s),o},o={schema:t,addAttributeFilter:u,getAttributeFilters:c,removeAttributeFilter:p,addNodeFilter:d,getNodeFilters:a,removeNodeFilter:l,parse:y};return rb(o,n),W9(o,n,t),o},Sb=e=>Pa(e)?At({validate:!1}).serialize(e):e,em=(e,t)=>{const s=Sb(e),n=t(s);if(n.isDefaultPrevented())return n;if(Pa(e)){if(n.content!==s){const t=$n({validate:!1,forced_root_block:!1}).parse(n.content,{context:e.name});return{...n,content:t}}return{...n,content:e}}else return n},Jh=(e,t)=>{if(t.no_events)return ce.value(t);const n=Ky(e,t);return n.isDefaultPrevented()?ce.error(nh(e,{content:"",...n}).content):ce.value(n)},Qh=(e,t,n)=>{if(n.no_events)return t;const s=em(t,t=>nh(e,{...n,content:t}));return s.content},Wl=(e,t)=>{if(t.no_events)return ce.value(t);const n=em(t.content,n=>qy(e,{...t,content:n}));return n.isDefaultPrevented()?(eh(e,n),ce.error(void 0)):ce.value(n)},Rl=(e,t,n)=>{n.no_events||eh(e,{...n,content:t})},Ml=(e,t,n)=>({element:e,width:t,rows:n}),Wh=(e,t)=>({element:e,cells:t}),Rb=(e,t)=>({x:e,y:t}),$h=(e,t)=>mt(e,t).bind(tr).getOr(1),Hb=(e,t,n,s,o)=>{const a=$h(o,"rowspan"),r=$h(o,"colspan"),i=e.rows;for(let e=n;e<n+a;e++){i[e]||(i[e]=Wh(s0(s),[]));for(let s=t;s<t+r;s++){const a=i[e].cells;a[s]=e===n&&s===t?o:Vn(o)}}},Ib=(e,t,n)=>{const s=e.rows,o=s[n]?s[n].cells:[];return!!o[t]},Bb=(e,t,n)=>{for(;Ib(e,t,n);)t++;return t},Vh=e=>je(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),Bh=(t,n)=>{const s=t.rows;for(let t=0;t<s.length;t++){const o=s[t].cells;for(let s=0;s<o.length;s++)if(j(o[s],n))return e.some(Rb(s,t))}return e.none()},Ih=(e,t,n,s,o)=>{const i=[],a=e.rows;for(let e=n;e<=o;e++){const r=a[e].cells,c=t<s?r.slice(t,s+1):r.slice(s,t+1);i.push(Wh(a[e].element,c))}return i},Ub=(e,t,n)=>{const i=t.x,s=t.y,a=n.x,o=n.y,r=s<o?Ih(e,i,s,a,o):Ih(e,i,o,a,s);return Ml(e.element,Vh(r),r)},Kb=(e,n)=>{const s=Vn(e.element),o=t.fromTag("tbody");return Jt(o,n),H(s,o),s},qb=e=>b(e.rows,e=>{const n=b(e.cells,e=>{const t=s0(e);return G(t,"colspan"),G(t,"rowspan"),t}),t=Vn(e.element);return Jt(t,n),t}),Yb=e=>{const t=Ml(Vn(e),0,[]);return o(J(e,"tr"),(e,n)=>{o(J(e,"td,th"),(s,o)=>{Hb(t,Bb(t,o,n),n,e,s)})}),Ml(t.element,Vh(t.rows),t.rows)},Gb=e=>Kb(e,qb(e)),Xb=(e,t,n)=>Bh(e,t).bind(t=>Bh(e,n).map(n=>Ub(e,t,n))),Qb=e=>I(e,e=>k(e)==="ul"||k(e)==="ol"),Zb=(e,n)=>I(e,e=>k(e)==="li"&&yr(e,n)).fold(a([]),n=>Qb(e).map(e=>{const n=t.fromTag(k(e)),s=co(d8(e),(e,t)=>K(t,"list-style"));return ya(n,s),[t.fromTag("li"),n]}).getOr([])),Jb=(e,t)=>{const n=je(t,(e,t)=>(H(t,e),t),e);return t.length>0?Yl([n]):n},ej=e=>ao(e)?Ue(e).filter(qc).fold(a([]),t=>[e,t]):qc(e)?[e]:[],tj=(e,n)=>{const s=t.fromDom(n.commonAncestorContainer),o=pt(s,e),a=m(o,fD),i=Zb(o,n),r=a.concat(i.length?i:ej(s));return b(r,Vn)},Rh=()=>Yl([]),sj=(e,n)=>Jb(t.fromDom(n.cloneContents()),tj(e,n)),oj=(e,t)=>Vo(t,"table",d(j,e)),ij=(e,t)=>oj(e,t[0]).bind(e=>{const n=t[0],s=t[t.length-1],o=Yb(e);return Xb(o,n,s).map(e=>Yl([Gb(e)]))}).getOrThunk(Rh),aj=(e,t)=>t.length>0&&t[0].collapsed?Rh():sj(e,t[0]),rj=(e,t)=>{const n=O2(t,e);return n.length>0?ij(e,n):aj(e,t)},vi=(e,t)=>t>=0&&t<e.length&&js(e.charAt(t)),Nh=e=>vt(e.innerText),dj=e=>e.map(e=>e.nodeName).getOr("div").toLowerCase(),uj=n=>e.from(n.selection.getRng()).map(s=>{var i;const l=e.from(n.dom.getParent(s.commonAncestorContainer,n.dom.isBlock)),d=n.getBody(),u=dj(l),a=t.fromDom(s.cloneContents());Of(a),xf(a);const r=n.dom.add(d,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),o=Nh(r),c=vt((i=r.textContent)!==null&&i!==void 0?i:"");if(n.dom.remove(r),vi(c,0)||vi(c,c.length-1)){const n=l.getOr(d),e=Nh(n),t=e.indexOf(o);if(t===-1)return o;const s=vi(e,t-1),i=vi(e,t+o.length);return(s?" ":"")+o+(i?" ":"")}else return o}).getOr(""),hj=(e,n)=>{const i=e.selection.getRng(),s=e.dom.create("body"),a=e.selection.getSel(),r=Od(e,Sr(a)),o=n.contextual?rj(t.fromDom(e.getBody()),r).dom:i.cloneContents();return o&&s.appendChild(o),e.selection.serializer.serialize(s,n)},mj=(e,t)=>{if(t.format==="text")return uj(e);const n=hj(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n},fj=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),pj=(e,t,n={})=>{const s=fj(n,t);return Jh(e,s).fold(se,t=>{const n=mj(e,t);return Qh(e,n,t)})},vl=0,zh=1,Fh=2,jj=(e,t)=>{const i=e.length+t.length+2,s=new Array(i),n=new Array(i),c=(e,t,n)=>({start:e,end:t,diag:n}),o=(n,s,i,a,r)=>{const c=l(n,s,i,a);if(c===null||c.start===s&&c.diag===s-a||c.end===n&&c.diag===n-i){let o=n,c=i;for(;o<s||c<a;)o<s&&c<a&&e[o]===t[c]?(r.push([vl,e[o]]),++o,++c):s-n>a-i?(r.push([Fh,e[o]]),++o):(r.push([zh,t[c]]),++c)}else{o(n,c.start,i,c.start-c.diag,r);for(let t=c.start;t<c.end;++t)r.push([vl,e[t]]);o(c.end,s,c.end-c.diag,a,r)}},a=(n,s,o,i)=>{let a=n;for(;a-s<i&&a<o&&e[a]===t[a-s];)++a;return c(n,a,s)},l=(o,i,r,c)=>{const g=i-o,v=c-r;if(g===0||v===0)return null;const h=g-v,b=v+g,p=(b%2===0?b:b+1)/2;s[1+p]=o,n[1+p]=i+1;let u,d,l,m,f;for(u=0;u<=p;++u){for(d=-u;d<=u;d+=2){for(l=d+p,d===-u||d!==u&&s[l-1]<s[l+1]?s[l]=s[l+1]:s[l]=s[l-1]+1,m=s[l],f=m-o+r-d;m<i&&f<c&&e[m]===t[f];)s[l]=++m,++f;if(h%2!==0&&h-u<=d&&d<=h+u&&n[l-h]<=s[l])return a(n[l-h],d+o-r,i,c)}for(d=h-u;d<=h+u;d+=2){for(l=d+p-h,d===h-u||d!==h+u&&n[l+1]<=n[l-1]?n[l]=n[l+1]-1:n[l]=n[l-1],m=n[l]-1,f=m-o+r-d;m>=o&&f>=r&&e[m]===t[f];)n[l]=m--,f--;if(h%2===0&&-u<=d&&d<=u&&n[l]<=s[l+h])return a(n[l],d+o-r,i,c)}}return null},r=[];return o(0,e.length,0,t.length,r),r},Mh=e=>c(e)?e.outerHTML:s(e)?Tt.encodeRaw(e.data,!1):xt(e)?"<!--"+e.data+"-->":"",_j=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},wj=(e,t,n)=>{const s=_j(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];e.insertBefore(s,t)}else e.appendChild(s)},Oj=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},xj=(e,t)=>{let n=0;o(e,e=>{e[0]===vl?n++:e[0]===zh?(wj(t,e[1],n),n++):e[0]===Fh&&Oj(t,n)})},Cj=e=>m(b(be(e.childNodes),Mh),e=>e.length>0),Ej=(e,t)=>{const n=b(be(t.childNodes),Mh);return xj(jj(n,e),t),t},kj=bn(()=>document.implementation.createHTMLDocument("undo")),Aj=e=>e.indexOf("</iframe>")!==-1,Sj=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Mj=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Ci=e=>{const s=Cj(e.getBody()),t=ft(s,t=>{const n=_f(e.serializer,t);return n.length>0?[n]:[]}),n=t.join("");return Aj(n)?Sj(t):Mj(n)},fl=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?Ej(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!r(s)||!B0(s)||!s.isFakeCaret}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},ul=e=>e.type==="fragmented"?e.fragments.join(""):e.content,Ch=e=>{const n=t.fromTag("body",kj());return Ti(n,ul(e)),o(J(n,"*[data-mce-bogus]"),Ot),qm(n)},Nj=(e,t)=>ul(e)===ul(t),Lj=(e,t)=>Ch(e)===Ch(t),dl=(e,t)=>!!e&&!!t&&(!!Nj(e,t)||Lj(e,t)),ll=e=>e.get()===0,Ii=(e,t,n)=>{ll(n)&&(e.typing=t)},vh=(e,t)=>{e.typing&&(Ii(e,!1,t),e.add())},Bj=e=>{e.typing&&(e.typing=!1,e.add())},Vj=(e,t,n)=>{ll(t)&&n.set(Qd(e.selection))},$j=(e,t,n,s,o,a,r)=>{const h=Ci(e),c=i.extend(a||{},h);if(!ll(s)||e.removed)return null;const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:l,originalEvent:r}).isDefaultPrevented())return null;if(l&&dl(l,c))return null;t.data[n.get()]&&o.get().each(e=>{t.data[n.get()].beforeBookmark=e});const u=aE(e);if(u&&t.data.length>u){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}c.bookmark=Qd(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const d={level:c,lastLevel:l,originalEvent:r};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),c},Wj=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},Uj=(e,t,n,s,o)=>{if(t.transact(s)){const s=t.data[n.get()].bookmark,i=t.data[n.get()-1];fl(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=s)}},Kj=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],fl(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},qj=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,Ii(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],fl(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},Yj=e=>{e.clear(),e.add()},Gj=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!dl(Ci(e),t.data[0]),Xj=(e,t)=>t.get()<e.data.length-1&&!e.typing,Qj=(e,t,n)=>(vh(e,t),e.beforeChange(),e.ignore(n),e.add()),Zj=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},Jj=(e,t)=>{const n=e.dom,s=r(t)?t:e.getBody();o(n.select("table,a",s),t=>{switch(t.nodeName){case"TABLE":const s=qC(e),o=n.getAttrib(t,"border");(!o||o==="0")&&e.hasVisual?n.addClass(t,s):n.removeClass(t,s);break;case"A":if(!n.getAttrib(t,"href")){const o=n.getAttrib(t,"name")||t.id,s=F1(e);o&&e.hasVisual?n.addClass(t,s):n.removeClass(t,s)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},ph=n=>({init:{bindEvents:g},undoManager:{beforeChange:(e,t)=>Vj(n,e,t),add:(e,t,s,o,i,a)=>$j(n,e,t,s,o,i,a),undo:(e,t,s)=>qj(n,e,t,s),redo:(e,t)=>Kj(n,e,t),clear:(e,t)=>Wj(n,e,t),reset:e=>Yj(e),hasUndo:(e,t)=>Gj(n,e,t),hasRedo:(e,t)=>Xj(e,t),transact:(e,t,n)=>Qj(e,t,n),ignore:(e,t)=>Zj(e,t),extra:(e,t,s,o)=>Uj(n,e,t,s,o)},formatter:{match:(e,t,s,o)=>Mr(n,e,t,s,o),matchAll:(e,t)=>Q5(n,e,t),matchNode:(e,t,s,o)=>Je(n,e,t,s,o),canApply:e=>J5(n,e),closest:e=>Z5(n,e),apply:(e,t,s)=>hf(n,e,t,s),remove:(e,t,s,o)=>yf(n,e,t,s,o),toggle:(e,t,s)=>Tv(n,e,t,s),formatChanged:(e,t,s,o,i)=>Fv(n,e,t,s,o,i)},editor:{getContent:e=>sv(n,e),setContent:(e,t)=>H5(n,e,t),insertContent:(e,t)=>z5(n,e,t),addVisual:e=>Jj(n,e)},selection:{getContent:(e,t)=>pj(n,e,t)},autocompleter:{addDecoration:e=>Ev(n,e),removeDecoration:()=>Ov(n,t.fromDom(n.getBody()))},raw:{getModel:()=>e.none()}}),ty=t=>{const o=e=>ie(e)?e:{},{init:r,undoManager:n,formatter:s,editor:i,selection:c,autocompleter:a,raw:l}=t;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,s)=>n.transact(s),ignore:(e,t)=>n.ignore(t),extra:(e,t,s,o)=>n.extra(s,o)},formatter:{match:(e,t,n,i)=>s.match(e,o(t),i),matchAll:s.matchAll,matchNode:s.matchNode,canApply:e=>s.canApply(e),closest:e=>s.closest(e),apply:(e,t)=>s.apply(e,o(t)),remove:(e,t)=>s.remove(e,o(t)),toggle:(e,t)=>s.toggle(e,o(t)),formatChanged:(e,t,n,o,i)=>s.formatChanged(t,n,o,i)},editor:{getContent:e=>i.getContent(e),setContent:(e,t)=>({content:i.setContent(e,t),html:""}),insertContent:(e)=>(i.insertContent(e),""),addVisual:i.addVisual},selection:{getContent:(e,t)=>c.getContent(t)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>e.some(l.getRawModel())}}},ny=()=>{const t=a(null),n=a("");return{init:{bindEvents:g},undoManager:{beforeChange:g,add:t,undo:t,redo:t,clear:g,reset:g,hasUndo:S,hasRedo:S,transact:t,ignore:g,extra:g},formatter:{match:S,matchAll:a([]),matchNode:a(void 0),canApply:S,closest:n,apply:g,remove:g,toggle:g,formatChanged:a({unbind:g})},editor:{getContent:n,setContent:a({content:"",html:""}),insertContent:a(""),addVisual:g},selection:{getContent:n},autocompleter:{addDecoration:g,removeDecoration:g},raw:{getModel:a(e.none())}}},rt=e=>f(e.plugins,"rtc"),oy=t=>E(t.plugins,"rtc").bind(t=>e.from(t.setup)),iy=t=>{const n=t;return oy(t).fold(()=>(n.rtcInstance=ph(t),e.none()),t=>(n.rtcInstance=ny(),e.some(()=>t().then(e=>(n.rtcInstance=ty(e),e.rtc.isRemote)))))},Sc=e=>e.rtcInstance?e.rtcInstance:ph(e),M=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},cy=(e,t,n)=>{M(e).undoManager.beforeChange(t,n)},ly=(e,t,n,s,o,i,a)=>M(e).undoManager.add(t,n,s,o,i,a),dy=(e,t,n,s)=>M(e).undoManager.undo(t,n,s),uy=(e,t,n)=>M(e).undoManager.redo(t,n),hy=(e,t,n)=>{M(e).undoManager.clear(t,n)},my=(e,t)=>{M(e).undoManager.reset(t)},fy=(e,t,n)=>M(e).undoManager.hasUndo(t,n),py=(e,t,n)=>M(e).undoManager.hasRedo(t,n),gy=(e,t,n,s)=>M(e).undoManager.transact(t,n,s),vy=(e,t,n)=>{M(e).undoManager.ignore(t,n)},by=(e,t,n,s,o)=>{M(e).undoManager.extra(t,n,s,o)},jy=(e,t,n,s,o)=>M(e).formatter.match(t,n,s,o),yy=(e,t,n)=>M(e).formatter.matchAll(t,n),_y=(e,t,n,s,o)=>M(e).formatter.matchNode(t,n,s,o),wy=(e,t)=>M(e).formatter.canApply(t),Oy=(e,t)=>M(e).formatter.closest(t),xy=(e,t,n,s)=>{M(e).formatter.apply(t,n,s)},Cy=(e,t,n,s,o)=>{M(e).formatter.remove(t,n,s,o)},Ey=(e,t,n,s)=>{M(e).formatter.toggle(t,n,s)},ky=(e,t,n,s,o,i)=>M(e).formatter.formatChanged(t,n,s,o,i),Ay=(e,t)=>Sc(e).editor.getContent(t),Sy=(e,t,n)=>Sc(e).editor.setContent(t,n),My=(e,t,n)=>Sc(e).editor.insertContent(t,n),Fy=(e,t,n)=>M(e).selection.getContent(t,n),Ty=(e,t)=>M(e).editor.addVisual(t),ih=e=>M(e).init.bindEvents(),Dy=(e,t)=>M(e).autocompleter.addDecoration(t),Ny=e=>M(e).autocompleter.removeDecoration(),Ly=(e,t={})=>{const n=t.format?t.format:"html";return Fy(e,n,t)},oh=t=>t.dom.length===0?(A(t),e.none()):e.some(t),Py=(e,t)=>e.filter(e=>Ks.isBookmarkNode(e.dom)).bind(t?ks:Sn),Hy=(e,t,n,s)=>{const i=e.dom,o=t.dom,a=s?i.length:o.length;s?(qr(i,o,!1,!s),n.setStart(o,a)):(qr(o,i,!1,!s),n.setEnd(o,a))},Iy=(e,t)=>{Ue(e).each(s=>{const o=e.dom;t&&qs(s,n(o,0))?Fa(o,0):!t&&Us(s,n(o,o.length))&&Yr(o,o.length)})},sh=(e,t,n,s)=>{e.bind(e=>{const o=s?Yr:Fa;return o(e.dom,s?e.dom.length:0),t.filter(Ae).map(t=>Hy(e,t,n,s))}).orThunk(()=>{const e=Py(t,s).or(t).filter(Ae);return e.map(e=>Iy(e,s))})},Vy=(n,s)=>{const o=e.from(s.firstChild).map(t.fromDom),i=e.from(s.lastChild).map(t.fromDom);n.deleteContents(),n.insertNode(s);const a=o.bind(Sn).filter(Ae).bind(oh),r=i.bind(ks).filter(Ae).bind(oh);sh(a,o,n,!0),sh(r,i,n,!1),n.collapse(!1)},$y=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),Wy=(e,t)=>{if(t.format!=="raw"){const s=e.selection.getRng(),n=e.dom.getParent(s.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},i=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return At({validate:!1},e.schema).serialize(i)}return t.content},Uy=(e,t,n={})=>{const s=$y(n,t);Wl(e,s).each(t=>{const s=Wy(e,t),n=e.selection.getRng();Vy(n,n.createContextualFragment(s)),e.selection.setRng(n),mo(e,n),Rl(e,s,t)})},th=(e,t,n)=>{if(f(e,t)){const s=m(e[t],e=>e!==n);s.length===0?delete e[t]:e[t]=s}};J3=(e,t)=>{let n,s;const i=(t,n)=>I(n,n=>e.is(n,t)),a=t=>e.getParents(t,void 0,e.getRoot()),r=()=>{n={},s={},t.on("NodeChange",e=>{const r=e.element,t=a(r),c={};x(n,(e,n)=>{i(n,t).each(i=>{s[n]||(o(e,e=>{e(!0,{node:i,selector:n,parents:t})}),s[n]=e),c[n]=e})}),x(s,(e,n)=>{c[n]||(delete s[n],o(e,e=>{e(!1,{node:r,selector:n,parents:t})}))})})};return{selectorChangedWithUnbind:(e,o)=>(n||r(),n[e]||(n[e]=[]),n[e].push(o),i(e,a(t.selection.getStart())).each(()=>{s[e]=n[e]}),{unbind:()=>{th(n,e,o),th(s,e,o)}})}};const G3=e=>!!(e&&e.ownerDocument)&&ut(t.fromDom(e.ownerDocument),t.fromDom(e)),Gy=e=>!!e&&G3(e.startContainer)&&G3(e.endContainer),Y3=(e,t,s,o)=>{let l,u;const{selectorChangedWithUnbind:f}=J3(e,o),L=(t,n)=>{const s=e.createRng();r(t)&&r(n)?(s.setStart(t,n),s.setEnd(t,n),a(s),m(!1)):(br(e,s,o.getBody(),!0),a(s))},N=e=>Ly(o,e),g=(e,t)=>Uy(o,e,t),D=e=>U8(o.getBody(),i(),e),b=e=>K8(o.getBody(),i(),e),C=(e,t)=>h.getBookmark(e,t),_=e=>h.moveToBookmark(e),y=(t,n)=>(Bv(e,t,n).each(a),t),k=()=>{const e=i(),t=d();return!!e&&!e.item&&(e.compareEndPoints?e.compareEndPoints("StartToEnd",e)===0:!t||e.collapsed)},m=e=>{const t=i();t.collapse(!!e),a(t)},d=()=>t.getSelection?t.getSelection():t.document.selection,i=()=>{let n;const i=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch{return-1}},s=t.document;if(r(o.bookmark)&&!Mn(o)){const e=zd(o);if(e.isSome())return e.map(e=>Od(o,[e])[0]).getOr(s.createRange())}try{const e=d();e&&!Yo(e.anchorNode)&&(e.rangeCount>0?n=e.getRangeAt(0):n=s.createRange(),n=Od(o,[n])[0])}catch{}if(n||(n=s.createRange()),xs(n.startContainer)&&n.collapsed){const t=e.getRoot();n.setStart(t,0),n.setEnd(t,0)}return l&&u&&(i(n.START_TO_START,n,l)===0&&i(n.END_TO_END,n,l)===0?n=u:(l=null,u=null)),n},a=(e,t)=>{if(!Gy(e))return;const n=d(),s=o.dispatch("SetSelectionRange",{range:e,forward:t});if(e=s.range,n){u=e;try{n.removeAllRanges(),n.addRange(e)}catch{}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),l=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&n?.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&t.nodeName==="IMG"&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),(n.anchorNode!==e.startContainer||n.focusNode!==e.endContainer)&&n.setBaseAndExtent(t,0,t,1))}o.dispatch("AfterSetSelectionRange",{range:e,forward:t})},w=t=>(g(e.getOuterHTML(t)),t),O=()=>Yv(o.getBody(),i()),x=(t,n)=>Wv(e,i(),t,n),v=()=>{const t=d(),s=t?.anchorNode,o=t?.focusNode;if(!t||!s||!o||Yo(s)||Yo(o))return!0;const n=e.createRng(),i=e.createRng();try{n.setStart(s,t.anchorOffset),n.collapse(!0),i.setStart(o,t.focusOffset),i.collapse(!0)}catch{return!0}return n.compareBoundaryPoints(n.START_TO_START,i)<=0},E=()=>{const t=i(),n=d();if(!Yw(n)&&Ja(o)){const n=fi(e,t);return n.each(e=>{a(e,v())}),n.getOr(t)}return t},j=(e,t)=>(f(e,t),c),A=()=>{let n,t=e.getRoot();for(;t&&t.nodeName!=="BODY";){if(t.scrollHeight>t.clientHeight){n=t;break}t=t.parentNode}return n},S=(e,t)=>{r(e)?M9(o,e,t):mo(o,i(),t)},M=(e,t)=>a(tm(e,t,o.getDoc())),F=()=>{const e=i();return e.collapsed?n.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},T=()=>{t=l=u=null,p.destroy()},z=(t={type:"word"})=>a(pn(e).expand(i(),t)),c={dom:e,win:t,serializer:s,editor:o,expand:z,collapse:m,setCursorLocation:L,getContent:N,setContent:g,getBookmark:C,moveToBookmark:_,select:y,isCollapsed:k,isForward:v,setNode:w,getNode:O,getSel:d,setRng:a,getRng:i,getStart:D,getEnd:b,getSelectedBlocks:x,normalize:E,selectorChanged:j,selectorChangedWithUnbind:f,getScrollContainer:A,scrollIntoView:S,placeCaretAt:M,getBoundingClientRect:F,destroy:T},h=Ks(c),p=gh(c,o);return c.bookmarkManager=h,c.controlSelection=p,c},Qy=(t,n,s)=>{t.addAttributeFilter("data-mce-tabindex",(e,t)=>{let n=e.length;for(;n--;){const s=e[n];s.attr("tabindex",s.attr("data-mce-tabindex")),s.attr(t,null)}}),t.addAttributeFilter("src,href,style",(e,t)=>{const o="data-mce-"+t,i=n.url_converter,r=n.url_converter_scope;let a=e.length;for(;a--;){const c=e[a];let n=c.attr(o);n!==void 0?(c.attr(t,n.length>0?n:null),c.attr(o,null)):(n=c.attr(t),t==="style"?n=s.serializeStyle(s.parseStyle(n),c.name):i&&(n=i.call(r,n,t,c.name)),c.attr(t,n.length>0?n:null))}}),t.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){const s=e[t];let n=s.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),s.attr("class",n.length>0?n:null))}}),t.addAttributeFilter("data-mce-type",(t,n,s)=>{let o=t.length;for(;o--;){const n=t[o];if(n.attr("data-mce-type")==="bookmark"&&!s.cleanup){const t=e.from(n.firstChild).exists(e=>{var t;return!sa((t=e.value)!==null&&t!==void 0?t:"")});t?n.unwrap():n.remove()}}}),t.addNodeFilter("noscript",e=>{let n=e.length;for(var t;n--;){const s=e[n].firstChild;s&&(s.value=Tt.decode((t=s.value)!==null&&t!==void 0?t:""))}}),t.addNodeFilter("script,style",(e,t)=>{const o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=e.length;for(var s;i--;){const c=e[i],a=c.firstChild,r=(s=a?.value)!==null&&s!==void 0?s:"";if(t==="script"){const e=c.attr("type");e&&c.attr("type",e==="mce-no/type"?null:e.replace(/^mce-/,"")),n.element_format==="xhtml"&&a&&r.length>0&&(a.value=`// <![CDATA[
`+o(r)+`
// ]]>`)}else n.element_format==="xhtml"&&a&&r.length>0&&(a.value=`<!--
`+o(r)+`
-->`)}}),t.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){const o=e[t],i=o.value;n.preserve_cdata&&i?.indexOf("[CDATA[")===0?(o.name="#cdata",o.type=4,o.value=s.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):i?.indexOf("mce:protected ")===0&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(i).substr(14))}}),t.addNodeFilter("xml:namespace,input",(e,t)=>{let n=e.length;for(;n--;){const s=e[n];s.type===7?s.remove():s.type===1&&t==="input"&&!s.attr("type")&&s.attr("type","text")}}),t.addAttributeFilter("data-mce-type",e=>{o(e,e=>{e.attr("data-mce-type")==="format-caret"&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)})},Zy=e=>{const n=e=>e?.name==="br",t=e.lastChild;if(n(t)){const e=t.prev;n(e)&&(t.remove(),e.remove())}},Jy=(e,t,n)=>{let o;const a=e.dom;let s=t.cloneNode(!0);const r=document.implementation;if(r.createHTMLDocument){const e=r.createHTMLDocument("");i.each(s.nodeName==="BODY"?s.childNodes:[s],t=>{e.body.appendChild(e.importNode(t,!0))}),s.nodeName!=="BODY"?s=e.body.firstChild:s=e.body,o=a.doc,a.doc=e}return W_(e,{...n,node:s}),o&&(a.doc=o),s},e_=(e,t)=>r(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,t_=(e,t,n)=>e_(e,n)?Jy(e,t,n):t,n_=(e,t,n)=>{i.inArray(t,n)===-1&&(e.addAttributeFilter(n,(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.push(n))},s_=(e,t,n)=>{if(!t.no_events&&e){const s=z_(e,{...t,content:n});return s.content}return n},o_=(e,n,s)=>{const o=vt(s.getInner?n.innerHTML:e.getOuterHTML(n));return s.selection||Yi(t.fromDom(n))?o:i.trim(o)},i_=(e,t,n)=>{const o=n.selection?{forced_root_block:!1,...n}:n,s=e.parse(t,o);return Zy(s),s},a_=(e,t,n)=>{const s=At(e,t);return s.serialize(n)},r_=(e,t,n,s,o)=>{const i=a_(t,n,s);return s_(e,o,i)},c_=(e,t)=>{const o=["data-mce-selected"],i=t&&t.dom?t.dom:w.DOM,s=t&&t.schema?t.schema:Dt(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;const n=$n(e,s);Qy(n,e,i);const r=(o,a={})=>{const r={format:"html",...a},l=t_(t,o,r),d=o_(i,l,r),c=i_(n,d,r);return r.format==="tree"?c:r_(t,e,s,c,r)};return{schema:s,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:r,addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:d(n_,n,o),getTempAttrs:a(o),getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},q3=(e,t)=>{const n=c_(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},d_="html",u_=(e,t)=>({...e,format:t,get:!0,getInner:!0}),h_=(e,t={})=>{const n=t.format?t.format:d_,s=u_(t,n);return Jh(e,s).fold(se,t=>{const n=Ay(e,t);return Qh(e,n,t)})},m_="html",f_=(e,t)=>({format:m_,...e,set:!0,content:t}),vc=(e,t,n={})=>{const s=f_(n,t);return Wl(e,s).map(t=>{const n=Sy(e,t.content,t);return Rl(e,n.html,t),n.content}).getOr(t)},g_=("autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists").split(","),v_="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),b_=e=>{const t=m(g_,t=>f(e,t)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Qn(t)},j_=e=>{const t=i.makeMap(e.plugins," "),n=e=>f(t,e),s=m(v_,n);return Qn(s)},y_=(e,t)=>{const n=b_(e),s=j_(t),o=s.length>0,i=n.length>0,a=t.theme==="mobile";if(o||i||a){const e=`
- `,t=a?`

Themes:${e}mobile`:"",r=o?`

Plugins:${e}${s.join(e)}`:"",c=i?`

Options:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+r+c)}},__=(e,t)=>{y_(e,t)},fa=w.DOM,O_=e=>{fa.setStyle(e.id,"display",e.orgDisplay)},va=t=>e.from(t).each(e=>e.destroy()),C_=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const e=n.dom;t.selection=n.win=n.dom=e.doc=null}},E_=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),fa.unbind(t,"submit reset",e.formEventDelegate))},k_=e=>{if(!e.removed){const{_selectionOverrides:s,editorUpload:o}=e,n=e.getBody(),t=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&r(t?.nextSibling)&&fa.remove(t.nextSibling),T_(e),e.editorManager.remove(e),!e.inline&&n&&O_(e),F_(e),fa.remove(e.getContainer()),va(s),va(o),e.destroy()}},A_=(e,t)=>{const{selection:n,dom:s}=e;if(e.destroyed)return;if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),va(n),va(s)),E_(e),C_(e),e.destroyed=!0},S_=()=>{const e={},t=(t,n)=>{e[t]=n},n=t=>e[t]?e[t]:{icons:{}},s=t=>f(e,t);return{add:t,get:n,has:s}},ja=S_(),ns=te.ModelManager,B3=(e,t)=>{const n=t.dom;return n[e]},I3=(e,t)=>parseInt(Xe(t,e),10),D_=d(B3,"clientWidth"),N_=d(B3,"clientHeight"),L_=d(I3,"margin-top"),R_=d(I3,"margin-left"),P_=e=>e.dom.getBoundingClientRect(),H_=(e,t,n)=>{const s=D_(e),o=N_(e);return t>=0&&n>=0&&t<=s&&n<=o},I_=(e,t,n,s)=>{const o=P_(t),i=e?o.left+t.dom.clientLeft+R_(t):0,a=e?o.top+t.dom.clientTop+L_(t):0,r=n-i,c=s-a;return{x:r,y:c}},B_=(e,n,s)=>{const o=t.fromDom(e.getBody()),i=e.inline?o:_L(o),a=I_(e.inline,i,n,s);return H_(i,a.x,a.y)},V_=n=>e.from(n).map(t.fromDom),$_=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return V_(t).map(cs).getOr(!1)};H3=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const N3=n=>{const s=[],r=()=>{const e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():H3()},c=()=>e.from(s[0]),u=(e,t)=>e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout,i=()=>{o(s,e=>{e.reposition()})},h=e=>{s.push(e)},l=e=>{To(s,t=>t===e).each(e=>{s.splice(e,1)})},d=(e,o=!0)=>n.removed||!$_(n)?{}:(o&&n.dispatch("BeforeOpenNotification",{notification:e}),I(s,t=>u(r().getArgs(t),e)).getOrThunk(()=>{n.editorManager.setActive(n);const s=r().open(e,()=>{l(s),i(),c().fold(()=>n.focus(),e=>Ym(t.fromDom(e.getEl())))});return h(s),i(),n.dispatch("OpenNotification",{notification:{...s}}),s})),m=()=>{c().each(e=>{r().close(e),l(e),i()})},f=a(s),p=e=>{e.on("SkinLoaded",()=>{const t=SE(e);t&&d({text:t,type:"warning",timeout:0},!1),i()}),e.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(i)}),e.on("remove",()=>{o(s.slice(),e=>{r().close(e)})})};return p(n),{open:d,close:m,getNotifications:f}},ss=te.PluginManager,gn=te.ThemeManager;M3=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const S3=t=>{let n=[];const s=()=>{const e=t.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():M3()},a=(e,t)=>(...n)=>t?t.apply(e,n):void 0,c=e=>{t.dispatch("OpenWindow",{dialog:e})},u=e=>{t.dispatch("CloseWindow",{dialog:e})},l=e=>{n.push(e),c(e)},i=e=>{u(e),n=m(n,t=>t!==e),n.length===0&&t.focus()},d=()=>e.from(n[n.length-1]),r=e=>{t.editorManager.setActive(t),Td(t),t.ui.show();const n=e();return l(n),n},h=(e,t)=>r(()=>s().open(e,t,i)),f=e=>r(()=>s().openUrl(e,i)),p=(e,t,n)=>{const o=s();o.alert(e,a(n||o,t))},g=(e,t,n)=>{const o=s();o.confirm(e,a(n||o,t))},v=()=>{d().each(e=>{s().close(e),i(e)})};return t.on("remove",()=>{o(n,e=>{s().close(e)})}),{open:h,openUrl:f,alert:p,confirm:g,close:v}},A3=(e,t)=>{e.notificationManager.open({type:"error",text:t})},xa=(e,t)=>{e._skinLoaded?A3(e,t):e.on("SkinLoaded",()=>{A3(e,t)})},Z_=(e,t)=>{xa(e,We.translate(["Failed to upload image: {0}",t]))},Bs=(e,t,n)=>{X3(e,t,{message:n}),console.error(n)},Is=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,tw=(e,t,n)=>{Bs(e,"PluginLoadError",Is("plugin",t,n))},nw=(e,t,n)=>{Bs(e,"IconsLoadError",Is("icons",t,n))},sw=(e,t,n)=>{Bs(e,"LanguageLoadError",Is("language",t,n))},ow=(e,t,n)=>{Bs(e,"ThemeLoadError",Is("theme",t,n))},iw=(e,t,n)=>{Bs(e,"ModelLoadError",Is("model",t,n))},aw=(e,t,n)=>{const s=We.translate(["Failed to initialize plugin: {0}",t]);X3(e,"PluginLoadError",{message:s}),Da(s,n),xa(e,s)},Da=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},cw=e=>/^[a-z0-9-]+$/i.test(e),lw=e=>m3(e,YE(e)),dw=e=>m3(e,Ju(e)),m3=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",s=e.editorManager.suffix,o=`content${s}.css`;return b(t,t=>cw(t)&&!e.inline?`${n}/${t}/${o}`:e.documentBaseURI.toAbsolute(t))},hw=e=>{e.contentCSS=e.contentCSS.concat(lw(e),dw(e))},mw=N,fw=(e,t,n)=>TN(e,t,mw,n),pw=e=>e?be(e.getElementsByTagName("img")):[],gw=(e,t)=>{const n={},s=(s,o=N)=>{const i=m(pw(s),t=>{const n=t.src;return!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!!n&&n!==v.transparentSrc&&(K(n,"blob:")?!e.isUploaded(n)&&o(t):!!K(n,"data:")&&o(t))}),a=b(i,e=>{const s=e.src;if(f(n,s))return n[s].then(t=>h(t)?t:{image:e,blobInfo:t.blobInfo});const o=sb(t,s).then(t=>(delete n[s],{image:e,blobInfo:t})).catch(e=>(delete n[s],e));return n[s]=o,o});return Promise.all(a)};return{findAll:s}},c3=()=>{const n=1,s=2;let e={};const o=(e,t)=>({status:e,resultUri:t}),t=t=>t in e,i=t=>{const n=e[t];return n?n.resultUri:null},a=s=>!!t(s)&&e[s].status===n,r=n=>!!t(n)&&e[n].status===s,c=t=>{e[t]=o(n,null)},l=(t,n)=>{e[t]=o(s,n)},d=t=>{delete e[t]},u=()=>{e={}};return{hasBlobUri:t,getResultUri:i,isPending:a,isUploaded:r,markPending:c,markUploaded:l,removeFailed:d,destroy:u}};let bw=0;const jw=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()},yw=e=>e+bw+++jw(),_w=()=>{let e=[];const i=e=>{const t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return t[e.toLowerCase()]||"dat"},r=(e,t,s,o,i)=>{if(h(e)){const a=e;return n({id:a,name:o,filename:i,blob:t,base64:s})}if(ie(e))return n(e);throw new Error("Unknown input type")},n=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const n=e.id||yw("blobid"),s=e.name||n,t=e.blob;return{id:a(n),name:a(s),filename:a(e.filename||s+"."+i(t.type)),blob:a(t),base64:a(e.base64),blobUri:a(e.blobUri||URL.createObjectURL(t)),uri:a(e.uri)}},c=t=>{s(t.id())||e.push(t)},t=t=>I(e,t).getOrUndefined(),s=e=>t(t=>t.id()===e),l=e=>t(t=>t.blobUri()===e),d=(e,n)=>t(t=>t.base64()===e&&t.blob().type===n),u=t=>{e=m(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},f=()=>{o(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]};return{create:r,add:c,get:s,getByUri:l,getByData:d,findFirst:t,removeByUri:u,destroy:f}},ww=(t,n)=>{const s={},u=(e,t)=>e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t,r=(e,t)=>new Promise((s,o)=>{const i=new XMLHttpRequest;i.open("POST",n.url),i.withCredentials=n.credentials,i.upload.onprogress=e=>{t(e.loaded/e.total*100)},i.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=()=>{if(i.status<200||i.status>=300){o("HTTP Error: "+i.status);return}const e=JSON.parse(i.responseText);if(!e||!h(e.location)){o("Invalid JSON: "+i.responseText);return}s(u(n.basePath,e.location))};const a=new FormData;a.append("file",e.blob(),e.filename()),i.send(a)}),a=_(n.handler)?n.handler:r,d=()=>new Promise(e=>{e([])}),c=(e,t)=>({url:t,blobInfo:e,status:!0}),o=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),l=(e,t)=>{i.each(s[e],e=>{e(t)}),delete s[e]},m=(n,s,i)=>(t.markPending(n.blobUri()),new Promise(a=>{let r,d;try{const u=()=>{r&&(r.close(),d=g)},m=e=>{u(),t.markUploaded(n.blobUri(),e),l(n.blobUri(),c(n,e)),a(c(n,e))},f=e=>{u(),t.removeFailed(n.blobUri()),l(n.blobUri(),o(n,e)),a(o(n,e))};d=t=>{if(t<0||t>100)return;e.from(r).orThunk(()=>e.from(i).map(Ql)).each(e=>{r=e,e.progressBar.value(t)})},s(n,d).then(m,e=>{f(h(e)?{message:e}:e)})}catch(e){a(o(n,e))}})),f=e=>e===r,p=e=>{const t=e.blobUri();return new Promise(e=>{s[t]=s[t]||[],s[t].push(e)})},v=(e,n)=>(e=i.grep(e,e=>!t.isUploaded(e.blobUri())),Promise.all(i.map(e,e=>t.isPending(e.blobUri())?p(e):m(e,a,n)))),b=(e,t)=>!n.url&&f(a)?d():v(e,t);return{upload:b}},i3=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),o3=(e,t)=>ww(t,{url:dk(e),basePath:lk(e),credentials:ok(e),handler:sk(e)}),Cw=e=>{const t=c3(),n=o3(e,t);return{upload:(t,s=!0)=>n.upload(t,s?i3(e):void 0)}},Ew=e=>{const n=_w();let i,a;const s=c3(),g=[],c=t=>n=>e.selection?t(n):[],y=e=>e+(e.indexOf("?")===-1?"?":"&")+(new Date).getTime(),u=(e,t,n)=>{let s=0;do s=e.indexOf(t,s),s!==-1&&(e=e.substring(0,s)+n+e.substr(s+t.length),s+=n.length-t.length+1);while(s!==-1)return e},d=(e,t,n)=>{const s=`src="${n}"${n===v.transparentSrc?' data-mce-placeholder="1"':""}`;return e=u(e,`src="${t}"`,s),e=u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"'),e},l=(t,n)=>{o(e.undoManager.data,e=>{e.type==="fragmented"?e.fragments=b(e.fragments,e=>d(e,t,n)):e.content=d(e.content,t,n)})},_=(n,s)=>{const o=e.convertURL(s,"src");l(n.src,s),Ct(t.fromDom(n),{src:Ru(e)?y(s):s,"data-mce-src":o})},f=()=>(i||(i=o3(e,s)),r().then(c(t=>{const s=b(t,e=>e.blobInfo);return i.upload(s,i3(e)).then(c(s=>{const i=[];let a=!1;const r=b(s,(s,o)=>{const{blobInfo:d,image:r}=t[o];let c=!1;return s.status&&gk(e)?(s.url&&!Z(r.src,s.url)&&(a=!0),n.removeByUri(r.src),rt(e)||_(r,s.url)):s.error&&(s.error.remove&&(l(r.src,v.transparentSrc),i.push(r),c=!0),Z_(e,s.error.message)),{element:r,status:s.status,uploadUri:s.url,blobInfo:d,removed:c}});return i.length>0&&!rt(e)?e.undoManager.transact(()=>{o(i,t=>{e.dom.remove(t),n.removeByUri(t.src)})}):a&&e.undoManager.dispatchChange(),r}))}))),p=()=>Lu(e)?f():Promise.resolve([]),w=e=>qt(g,t=>t(e)),O=e=>{g.push(e)},r=()=>(a||(a=gw(s,n)),a.findAll(e.getBody(),w).then(c(t=>{const n=m(t,t=>!h(t)||(xa(e,t),!1));return rt(e)||o(n,e=>{l(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),n}))),x=()=>{n.destroy(),s.destroy(),a=i=null},j=t=>t.replace(/src="(blob:[^"]+)"/g,(t,o)=>{const a=s.getResultUri(o);if(a)return'src="'+a+'"';let i=n.getByUri(o);if(i||(i=je(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(o),void 0)),i){const e=i.blob();return'src="data:'+e.type+";base64,"+i.base64()+'"'}return t});return e.on("SetContent",()=>{Lu(e)?p():r()}),e.on("RawSaveContent",e=>{e.content=j(e.content)}),e.on("GetContent",e=>{if(e.source_view||e.format==="raw"||e.format==="tree")return;e.content=j(e.content)}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{o(e,e=>{const t=e.attr("src");if(!t||n.getByUri(t))return;const o=s.getResultUri(t);o&&e.attr("src",o)})})}),{blobCache:n,addFilter:O,uploadImages:f,uploadImagesAuto:p,scanForImages:r,destroy:x}},kw=e=>{const t=e.dom,s=e.schema.type,n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]};return s!=="html4"?[n,e,t]:[e,n,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e)=>c(e)&&e.hasAttribute("href"),onformat:(e,n,s)=>{i.each(s,(n,s)=>{t.setAttrib(e,s,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return(t=e?.customValue)!==null&&t!==void 0?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return i.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{n[e]={block:e,remove:"all"}}),n},n3={remove_similar:!0,inherit:!1},hs={selector:"td,th",...n3},Mw={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...hs},tablecellverticalalign:{styles:{"vertical-align":"%value"},...hs},tablecellbordercolor:{styles:{borderColor:"%value"},...hs},tablecellclass:{classes:["%value"],...hs},tableclass:{selector:"table",classes:["%value"],...n3},tablecellborderstyle:{styles:{borderStyle:"%value"},...hs},tablecellborderwidth:{styles:{borderWidth:"%value"},...hs}},Fw=a(Mw),Tw=e=>{const t={},s=e=>r(e)?t[e]:t,i=e=>f(t,e),n=(e,s)=>{e&&(h(e)?(R(s)||(s=[s]),o(s,e=>{ae(e.deep)&&(e.deep=!_e(e)),ae(e.split)&&(e.split=!_e(e)||L(e)),ae(e.remove)&&_e(e)&&!L(e)&&(e.remove="none"),_e(e)&&L(e)&&(e.mixed=!0,e.block_expand=!0),h(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=s):x(e,(e,t)=>{n(t,e)}))},a=e=>(e&&t[e]&&delete t[e],t);return n(kw(e)),n(Fw()),n(wE(e)),{get:s,has:i,register:n,unregister:a}},ir=i.each,Ce=w.DOM,hr=e=>r(e)&&ie(e),R2=(e,t)=>{const a=t&&t.schema||Dt({}),r=(e,t)=>{t.classes.length>0&&Ce.addClass(e,t.classes.join(" ")),Ce.setAttribs(e,t.attrs)},n=e=>{const t=h(e)?{name:e,classes:[],attrs:{}}:e,n=Ce.create(t.name);return r(n,t),n},c=(e,t)=>{const s=a.getElementRule(e.nodeName.toLowerCase()),n=s?.parentsRequired;return!!(n&&n.length)&&(t&&O(n,t)?t:n[0])},s=(e,t,o)=>{let a;const r=t[0],u=hr(r)?r.name:void 0,l=c(e,u);if(l)u===l?(a=r,t=t.slice(1)):a=l;else if(r)a=r,t=t.slice(1);else if(!o)return e;const d=a?n(a):Ce.create("div");d.appendChild(e),o&&i.each(o,t=>{const s=n(t);d.insertBefore(s,e)});const h=hr(a)?a.siblings:void 0;return s(d,t,h)},o=Ce.create("div");if(e.length>0){const t=e[0],i=n(t),a=hr(t)?t.siblings:void 0;o.appendChild(s(i,e.slice(1),a))}return o},Rw=e=>{e=i.trim(e);let n="div";const t={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#.]|::?)([\w-]+)|(\[)([^\]]+)\]?)/g,(e,n,s,o,a)=>{switch(n){case"#":t.attrs.id=s;break;case".":t.classes.push(s);break;case":":i.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(t.attrs[s]=s);break}if(o==="["){const e=a.match(/([\w-]+)(?:="([^"]+))?/);e&&(t.attrs[e[1]]=e[2])}return""})),t.name=n||"div",t},Pw=e=>h(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),i.map(e.split(/(?:>|\s+(?![^[\]]+\]))/),e=>{const t=i.map(e.split(/(?:~\+|~|\+)/),Rw),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[],Hw=(e,t)=>{let r="",o=_E(e);if(o==="")return"";const c=e=>h(e)?e.replace(/%(\w+)/g,""):"",l=(t,n)=>Ce.getStyle(n??e.getBody(),t,!0);if(h(t)){const n=e.formatter.get(t);if(!n)return"";t=n[0]}if("preview"in t){const e=t.preview;if(e===!1)return"";o=e||o}let i=t.block||t.inline||"span",n;const a=Pw(t.selector);a.length>0?(a[0].name||(a[0].name=i),i=t.selector,n=R2(a,e)):n=R2([i],e);const s=Ce.select(i,n)[0]||n.firstChild;ir(t.styles,(e,t)=>{const n=c(e);n&&Ce.setStyle(s,t,n)}),ir(t.attributes,(e,t)=>{const n=c(e);n&&Ce.setAttrib(s,t,n)}),ir(t.classes,e=>{const t=c(e);Ce.hasClass(s,t)||Ce.addClass(s,t)}),e.dispatch("PreviewFormats"),Ce.setStyles(n,{position:"absolute",left:-65535}),e.getBody().appendChild(n);const d=l("fontSize"),u=/px$/.test(d)?parseInt(d,10):0;return ir(o.split(" "),e=>{let t=l(e,s);if(e==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=l(e),Ba(t).toLowerCase()==="#ffffff"))return;if(e==="color"&&Ba(t).toLowerCase()==="#000000")return;if(e==="font-size"&&/em|%$/.test(t)){if(u===0)return;const e=parseFloat(t)/(/%$/.test(t)?100:1);t=e*u+"px"}e==="border"&&t&&(r+="padding:0 2px;"),r+=e+":"+t+";"}),e.dispatch("AfterPreviewFormats"),Ce.remove(n),r},Iw=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},k2=e=>{const t=Tw(e),n=V({});return Iw(e),v7(e),rt(e)||xv(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,s)=>{xy(e,t,n,s)},remove:(t,n,s,o)=>{Cy(e,t,n,s,o)},toggle:(t,n,s)=>{Ey(e,t,n,s)},match:(t,n,s,o)=>jy(e,t,n,s,o),closest:t=>Oy(e,t),matchAll:(t,n)=>yy(e,t,n),matchNode:(t,n,s,o)=>_y(e,t,n,s,o),canApply:t=>wy(e,t),formatChanged:(t,s,o,i)=>ky(e,n,t,s,o,i),getCssText:d(Hw,e)}},E2=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},$w=(e,t,n)=>{const o=V(!1),s=e=>{Ii(t,!1,n),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{const s=e.command;E2(s)||(vh(t,n),t.beforeChange())}),e.on("ExecCommand",e=>{const t=e.command;E2(t)||s(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",s),e.on("dragend",s),e.on("keyup",n=>{const i=n.keyCode;if(n.isDefaultPrevented())return;(i>=33&&i<=36||i>=37&&i<=40||i===45||n.ctrlKey)&&(s(),e.nodeChanged()),(i===46||i===8)&&e.nodeChanged(),o.get()&&t.typing&&!dl(Ci(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),o.set(!1),e.nodeChanged())}),e.on("keydown",e=>{const i=e.keyCode;if(e.isDefaultPrevented())return;if(i>=33&&i<=36||i>=37&&i<=40||i===45){t.typing&&s(e);return}const a=e.ctrlKey&&!e.altKey||e.metaKey;(i<16||i>20)&&i!==224&&i!==91&&!t.typing&&!a&&(t.beforeChange(),Ii(t,!0,n),t.add({},e),o.set(!0))}),e.on("mousedown",e=>{t.typing&&s(e)});const i=e=>e.inputType==="insertReplacementText",a=e=>e.inputType==="insertText"&&e.data===null,r=e=>e.inputType==="insertFromPaste"||e.inputType==="insertFromDrop";e.on("input",e=>{e.inputType&&(i(e)||a(e)||r(e))&&s(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})},Ww=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},w2=e=>{const o=It(),s=V(0),n=V(0),t={data:[],typing:!1,beforeChange:()=>{cy(e,s,o)},add:(i,a)=>ly(e,t,n,s,o,i,a),dispatchChange:()=>{e.setDirty(!0);const s=Ci(e);s.bookmark=Qd(e.selection),e.dispatch("change",{level:s,lastLevel:Hi(t.data,n.get()).getOrUndefined()})},undo:()=>dy(e,t,s,n),redo:()=>uy(e,n,t.data),clear:()=>{hy(e,t,n)},reset:()=>{my(e,t)},hasUndo:()=>fy(e,t,n),hasRedo:()=>py(e,t,n),transact:n=>gy(e,t,s,n),ignore:t=>{vy(e,s,t)},extra:(s,o)=>{by(e,t,n,s,o)}};return rt(e)||$w(e,t,s),Ww(e),t},Kw=[9,27,u.HOME,u.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,u.DOWN,u.UP,u.LEFT,u.RIGHT].concat(v.browser.isFirefox()?[224]:[]),_2="data-mce-placeholder",y2=e=>e.type==="keydown"||e.type==="keyup",j2=e=>{const t=e.keyCode;return t===u.BACKSPACE||t===u.DELETE},Xw=e=>{if(y2(e)){const t=e.keyCode;return!j2(e)&&(u.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||O(Kw,t))}return!1},Qw=e=>y2(e)&&!(j2(e)||e.type==="keyup"&&e.keyCode===229),Zw=(e,n,s)=>{if(z(t.fromDom(n),!1)){const t=n.firstElementChild;return!t||!e.getStyle(n.firstElementChild,"padding-left")&&!e.getStyle(n.firstElementChild,"padding-right")&&s===t.nodeName.toLowerCase()}else return!1},Jw=e=>{var s;const n=e.dom,i=ge(e),o=(s=TE(e))!==null&&s!==void 0?s:"",t=(s,a)=>{if(Xw(s))return;const c=e.getBody(),r=!Qw(s)&&Zw(n,c,i),l=n.getAttrib(c,_2)!=="";(l!==r||a)&&(n.setAttrib(c,_2,r?o:null),n.setAttrib(c,"aria-placeholder",r?o:null),Yy(e,r),e.on(r?"keydown":"keyup",t),e.off(r?"keyup":"keydown",t))};et(o)&&e.on("init",n=>{t(n,!0),e.on("change SetContent ExecCommand",t),e.on("paste",n=>Oe.setEditorTimeout(e,()=>t(n)))})},eO=(e,t)=>({block:e,position:t}),tO=(e,t)=>({from:e,to:t}),Dr=(e,n)=>{const s=t.fromDom(e),o=t.fromDom(n.container());return ui(s,o).map(e=>eO(e,n))},sO=e=>!j(e.from.block,e.to.block),m2=(e,t)=>{const n=t=>j(t,e),s=e=>io(e)||Ne(e.dom);return On(t,s,n).filter(ve).getOr(e)},iO=(e,n)=>{const s=t.fromDom(e);return j(m2(s,n.from.block),m2(s,n.to.block))},aO=e=>C(e.from.block.dom)===!1&&C(e.to.block.dom)===!1,rO=e=>{const t=e=>fh(e)||W2(e.dom);return t(e.from.block)&&t(e.to.block)},cO=(t,n,s)=>F(s.position.getNode())&&!z(s.block)?os(!1,s.block.dom).bind(o=>o.isEqual(s.position)?Se(n,t,o).bind(e=>Dr(t,e)):e.some(s)).getOr(s):s,lO=(e,t,s)=>{const o=Dr(e,n.fromRangeStart(s)),i=o.bind(n=>Se(t,e,n.position).bind(n=>Dr(e,n).map(n=>cO(e,t,n))));return re(o,i,tO).filter(t=>sO(t)&&iO(e,t)&&aO(t)&&rO(t))},dO=(t,n,s)=>s.collapsed?lO(t,n,s):e.none(),uO=e=>{const t=Y(e);return To(t,De).fold(a(t),e=>t.slice(0,e))},h2=e=>{const t=uO(e);return o(t,A),t},u2=(e,t)=>{const n=pt(t,e);return I(n.reverse(),e=>z(e)).each(A)},fO=e=>m(E8(e),e=>!z(e)).length===0,pO=(e,s,i,a)=>{if(z(i))return mn(i),oe(i.dom);fO(a)&&z(s)&&Me(a,t.fromTag("br"));const r=ye(i.dom,n.before(a.dom));return o(h2(s),e=>{Me(a,e)}),u2(e,s),r},gO=(e,t,n)=>{if(z(n))return A(n),z(t)&&mn(t),oe(t.dom);const s=lt(n.dom);return o(h2(t),e=>{H(n,e)}),u2(e,t),s},vO=(t,n)=>{const s=pt(n,t);return e.from(s[s.length-1])},bO=(t,n)=>ut(n,t)?vO(n,t):e.none(),l2=(n,s)=>{os(n,s.dom).bind(t=>e.from(t.getNode())).map(t.fromDom).filter(Gt).each(A)},i2=(e,t,n)=>(l2(!0,t),l2(!1,n),bO(t,n).fold(d(gO,e,t,n),d(pO,e,t,n))),s2=(e,t,n,s)=>t?i2(e,s,n):i2(e,n,s),Vr=(e,n)=>{const s=t.fromDom(e.getBody()),o=dO(s.dom,n,e.selection.getRng()).map(t=>()=>{s2(s,n,t.from.block,t.to.block).each(t=>{e.selection.setRng(t.toRange())})});return o},OO=(n,s)=>{const o=s.getRng();return re(ui(n,t.fromDom(o.startContainer)),ui(n,t.fromDom(o.endContainer)),(t,i)=>j(t,i)?e.none():e.some(()=>{o.deleteContents(),s2(n,!0,t,i).each(e=>{s.setRng(e.toRange())})})).getOr(e.none())},t2=(e,n)=>{const s=t.fromDom(n),o=d(j,e);return St(s,io,o).isSome()},CO=(e,t)=>t2(e,t.startContainer)||t2(e,t.endContainer),EO=(e,t)=>{const s=ye(e.dom,n.fromRangeStart(t)).isNone(),o=de(e.dom,n.fromRangeEnd(t)).isNone();return!CO(e,t)&&s&&o},kO=t=>e.some(()=>{t.setContent(""),t.selection.setCursorLocation()}),AO=e=>{const n=t.fromDom(e.getBody()),s=e.selection.getRng();return EO(n,s)?kO(e):OO(n,e.selection)},Gr=(t)=>t.selection.isCollapsed()?e.none():AO(t),_t=(t,n,s,o,i)=>e.from(n._selectionOverrides.showCaret(t,s,o,i)),FO=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Vs=(t,n)=>{const s=t.dispatch("BeforeObjectSelected",{target:n});return s.isDefaultPrevented()?e.none():e.some(FO(n))},zO=(t,s,o)=>{const l=Dl(1,t.getBody(),s),i=n.fromRangeStart(l),a=i.getNode();if(bo(a))return _t(1,t,a,!i.isAtEnd(),!1);const r=i.getNode(!0);if(bo(r))return _t(1,t,r,!1,!1);const c=yn(t.dom.getRoot(),i.getNode());return bo(c)?_t(1,t,c,!1,o):e.none()},dc=(e,t,n)=>t.collapsed?zO(e,t,n).getOr(t):t,NO=e=>Ht(e)||ko(e),LO=e=>Bt(e)||Eo(e),RO=(e,t)=>{s(t)&&t.data.length===0&&e.remove(t)},K0=(e,t,n,s,o,i)=>{_t(s,e,i.getNode(!o),o,!0).each(n=>{if(t.collapsed){const e=t.cloneRange();o?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)}),RO(e.dom,n)},HO=(t,n)=>{const i=t.selection.getRng();if(!s(i.commonAncestorContainer))return e.none();const c=n?B.Forwards:B.Backwards,u=it(t.getBody()),h=d(kl,n?u.next:u.prev),m=n?NO:LO,a=No(c,t.getBody(),i),l=h(a),o=l&&Ee(n,l);if(!o||!li(a,o))return e.none();if(m(o))return e.some(()=>K0(t,i,a.getNode(),c,n,o));const r=h(o);return r&&m(r)&&li(o,r)?e.some(()=>K0(t,i,a.getNode(),c,n,r)):e.none()},uc=(e,t)=>HO(e,t),hc=(e,t)=>{const n=e.getBody();return t?oe(n).filter(Ht):lt(n).filter(Bt)},kc=e=>{const t=e.selection.getRng();return!t.collapsed&&(hc(e,!0).exists(e=>e.isEqual(n.fromRangeStart(t)))||hc(e,!1).exists(e=>e.isEqual(n.fromRangeEnd(t))))},$O=e=>r(e)&&(io(t.fromDom(e))||ao(t.fromDom(e))),pe=ot.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),UO=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return c(n)&&n.getAttribute("data-mce-caret")===s},KO=(e,n,s,o)=>{const i=n=>el(t.fromDom(n))&&!Ge(s,o,e);return J4(!n,s).fold(()=>J4(n,o).fold(S,i),i)},R0=(n,s,o,i)=>{const a=i.getNode(!s);return ui(t.fromDom(n),t.fromDom(o.getNode())).map(e=>z(e)?pe.remove(e.dom):pe.moveToElement(a)).orThunk(()=>e.some(pe.moveToElement(a)))},C0=(t,n,s)=>Se(n,t,s).bind(o=>$O(o.getNode())?e.none():KO(t,n,s,o)?e.none():n&&C(o.getNode())?R0(t,n,s,o):!n&&C(o.getNode(!0))?R0(t,n,s,o):n&&Bt(s)?e.some(pe.moveToPosition(o)):!n&&Ht(s)?e.some(pe.moveToPosition(o)):e.none()),GO=(t,n)=>D(n)?e.none():t&&C(n.nextSibling)?e.some(pe.moveToElement(n.nextSibling)):!t&&C(n.previousSibling)?e.some(pe.moveToElement(n.previousSibling)):e.none(),XO=(t,n,s)=>s.fold(t=>e.some(pe.remove(t)),t=>e.some(pe.moveToElement(t)),s=>Ge(n,s,t)?e.none():e.some(pe.moveToPosition(s))),QO=(e,t,n)=>UO(t,n)?GO(t,n.getNode(!t)).orThunk(()=>C0(e,t,n)):C0(e,t,n).bind(t=>XO(e,n,t)),ZO=(s,o,i)=>{const c=Dl(o?1:-1,s,i),a=n.fromRangeStart(c),r=t.fromDom(s);return!o&&Bt(a)?e.some(pe.remove(a.getNode(!0))):o&&Ht(a)?e.some(pe.remove(a.getNode())):!o&&Ht(a)&&Ec(r,a)?H7(r,a).map(e=>pe.remove(e.getNode())):o&&Bt(a)&&Ac(r,a)?P7(r,a).map(e=>pe.remove(e.getNode())):QO(s,o,a)},JO=(e,n)=>s=>(e._selectionOverrides.hideFakeCaret(),Wt(e,n,t.fromDom(s)),!0),ex=(e,t)=>s=>{const o=t?n.before(s):n.after(s);return e.selection.setRng(o.toRange()),!0},tx=e=>t=>(e.selection.setRng(t.toRange()),!0),x0=(t,n)=>e.from(yn(t.getBody(),n)),sx=(t,n)=>{const s=t.selection.getNode();return x0(t,s).filter(C).fold(()=>ZO(t.getBody(),n,t.selection.getRng()).map(e=>()=>e.fold(JO(t,n),ex(t,n),tx(t))),()=>e.some(g))},ox=e=>{o(J(e,".mce-offscreen-selection"),A)},ix=(n,s)=>{const o=n.selection.getNode();if(C(o)&&!Uo(o)){const i=x0(n,o.parentNode).filter(C);return i.fold(()=>e.some(()=>{ox(t.fromDom(n.getBody())),Wt(n,s,t.fromDom(n.selection.getNode())),Fl(n)}),()=>e.some(g))}return kc(n)?e.some(()=>{Np(n,n.selection.getRng(),t.fromDom(n.getBody()))}):e.none()},y0=e=>{const s=e.dom,o=e.selection,t=yn(e.getBody(),o.getNode());if(Ne(t)&&s.isBlock(t)&&s.isEmpty(t)){const e=s.create("br",{"data-mce-bogus":"1"});s.setHTML(t,""),t.appendChild(e),o.setRng(n.before(e).toRange())}return!0},nl=(e,t)=>e.selection.isCollapsed()?sx(e,t):ix(e,t),cx=(e,t)=>{const s=n.fromRangeStart(e.selection.getRng());return Se(t,e.getBody(),s).filter(e=>t?X7(e):Y7(e)).bind(e=>Il(t?0:-1,e)).map(t=>()=>e.selection.select(t))},pl=(t,n)=>t.selection.isCollapsed()?cx(t,n):e.none(),Kn=s,a0=e=>Kn(e)&&e.data[0]===q,n0=e=>Kn(e)&&e.data[e.data.length-1]===q,Y4=e=>{var t;const n=(t=e.ownerDocument)!==null&&t!==void 0?t:document;return n.createTextNode(q)},fx=e=>{var t;if(Kn(e.previousSibling))return n0(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(q),e.previousSibling);else if(Kn(e))return a0(e)?e:(e.insertData(0,q),e);else{const n=Y4(e);return(t=e.parentNode)===null||t===void 0?void 0:t.insertBefore(n,e),n}},px=e=>{var t,n;if(Kn(e.nextSibling))return a0(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,q),e.nextSibling);else if(Kn(e))return n0(e)?e:(e.appendData(q),e);else{const s=Y4(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0?void 0:t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0?void 0:n.appendChild(s),s}},qo=(e,t)=>e?fx(t):px(t),vx=d(qo,!0),bx=d(qo,!1),P4=(e,t)=>s(e.container())?qo(t,e.container()):qo(t,e.getNode()),R4=(e,t)=>{const n=t.get();return n&&e.container()===n&&Nt(n)},ed=(t,s)=>s.fold(s=>{Dn(t.get());const o=vx(s);return t.set(o),e.some(n(o,o.length-1))},e=>oe(e).map(e=>{if(R4(e,t)){const e=t.get();return n(e,1)}Dn(t.get());const s=P4(e,!0);return t.set(s),n(s,1)}),e=>lt(e).map(e=>{if(R4(e,t)){const e=t.get();return n(e,e.length-1)}Dn(t.get());const s=P4(e,!1);return t.set(s),n(s,s.length-1)}),s=>{Dn(t.get());const o=bx(s);return t.set(o),e.some(n(o,1))}),T4=(t,n)=>{for(let e=0;e<t.length;e++){const s=t[e].apply(null,n);if(s.isSome())return s}return e.none()},ee=ot.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),E4=(e,t)=>{const n=kt(t,e);return n||e},Cx=(t,n,s)=>{const o=Op(s),i=E4(n,o.container());return Vt(t,i,o).fold(()=>de(i,o).bind(d(Vt,t,i)).map(e=>ee.before(e)),e.none)},Ex=(e,t)=>Xt(e,t)===null,C4=(e,t,n)=>Vt(e,t,n).filter(d(Ex,t)),Ax=(t,n,s)=>{const o=xp(s);return C4(t,n,o).bind(t=>{const n=ye(t,o);return n.isNone()?e.some(ee.start(t)):e.none()})},Sx=(t,n,s)=>{const o=Op(s);return C4(t,n,o).bind(t=>{const n=de(t,o);return n.isNone()?e.some(ee.end(t)):e.none()})},Mx=(t,n,s)=>{const o=xp(s),i=E4(n,o.container());return Vt(t,i,o).fold(()=>ye(i,o).bind(d(Vt,t,i)).map(e=>ee.after(e)),e.none)},O4=e=>!w5(jd(e)),ct=(e,t,n)=>{const s=T4([Cx,Ax,Sx,Mx],[e,t,n]);return s.filter(O4)},jd=e=>e.fold(se,se,se,se),y4=e=>e.fold(a("before"),a("start"),a("end"),a("after")),Wi=e=>e.fold(ee.before,ee.before,ee.after,ee.after),xd=e=>e.fold(ee.start,ee.start,ee.end,ee.end),Rx=(e,t)=>y4(e)===y4(t)&&jd(e)===jd(t),Px=(e,t,n,s,o,i)=>re(Vt(t,n,s),Vt(t,n,o),(t,s)=>t!==s&&u5(n,t,s)?ee.after(e?t:s):i).getOr(i),Hx=(e,t)=>e.fold(N,e=>!Rx(e,t)),Ix=(e,t,n,s,o)=>{const i=Ee(e,o),a=Se(e,n,i).map(d(Ee,e)),r=a.fold(()=>s.map(Wi),o=>ct(t,n,o).map(d(Px,e,t,n,i,o)).filter(d(Hx,s)));return r.filter(O4)},Bx=(t,n)=>t?n.fold(En(e.some,ee.start),e.none,En(e.some,ee.after),e.none):n.fold(e.none,En(e.some,ee.before),e.none,En(e.some,ee.end)),Vx=(e,t,n,s)=>{const o=Ee(e,s),i=ct(t,n,o);return ct(t,n,o).bind(d(Bx,e)).orThunk(()=>Ix(e,t,n,i,s))},$x=e=>_(e.selection.getSel().modify),g4=(e,t,s)=>{const o=e?1:-1;return t.setRng(n(s.container(),s.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Ux=(e,t)=>{const o=t.selection.getRng(),s=e?n.fromRangeEnd(o):n.fromRangeStart(o);return!!$x(t)&&(e&&pc(s)?g4(!0,t.selection,s):!!(!e&&lc(s))&&g4(!1,t.selection,s))};(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(st||(st={}));const ea=(e,t)=>e===B.Backwards?_o(t):t,Yx=(e,t,n)=>e===B.Forwards?t.next(n):t.prev(n),Gx=(e,t,n,s)=>F(s.getNode(t===B.Forwards))?st.Br:Ge(n,s)===!1?st.Block:st.Wrap,c4=(t,n,s,o)=>{const r=it(s);let i=o;const a=[];for(;i;){const o=Yx(n,r,i);if(!o)break;if(F(o.getNode(!1)))return n===B.Forwards?{positions:ea(n,a).concat([o]),breakType:st.Br,breakAt:e.some(o)}:{positions:ea(n,a),breakType:st.Br,breakAt:e.some(o)};if(!o.isVisible()){i=o;continue}if(t(i,o)){const t=Gx(s,n,i,o);return{positions:ea(n,a),breakType:t,breakAt:e.some(o)}}a.push(o),i=o}return{positions:ea(n,a),breakType:st.Eol,breakAt:e.none()}},r4=(e,t,n,s)=>t(n,s).breakAt.map(s=>{const o=t(n,s).positions;return e===B.Backwards?o.concat(s):[s].concat(o)}).getOr([]),Ad=(t,n)=>je(t,(t,s)=>t.fold(()=>e.some(s),e=>re(ue(e.getClientRects()),ue(s.getClientRects()),(t,o)=>{const i=Math.abs(n-t.left),a=Math.abs(n-o.left);return a<=i?s:e}).or(t)),e.none()),na=(e,t)=>ue(t.getClientRects()).bind(t=>Ad(e,t.left)),to=d(c4,n.isAbove,-1),Js=d(c4,n.isBelow,1),t4=d(r4,-1,to),e4=d(r4,1,Js),oC=(e,t)=>to(e,t).breakAt.isNone(),iC=(e,t)=>Js(e,t).breakAt.isNone(),aC=e=>oe(e).map(t=>[t].concat(Js(e,t).positions)).getOr([]),rC=e=>lt(e).map(t=>to(e,t).positions.concat(t)).getOr([]),cC=(e,t)=>na(t4(e,t),t),lC=(e,t)=>na(e4(e,t),t),dC=C,J1=(e,t)=>Math.abs(e.left-t),Q1=(e,t)=>Math.abs(e.right-t),mC=e=>ds(e,"node"),X1=(e,t)=>aa(e,(e,n)=>{const s=Math.min(J1(e,t),Q1(e,t)),o=Math.min(J1(n,t),Q1(n,t));return o===s&&mC(n)&&dC(n.node)?n:o<s?n:e}),pC=e=>{const t=t=>b(t,t=>{const n=An(t);return n.node=e,n});if(c(e))return t(e.getClientRects());if(s(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},G1=e=>ft(e,pC);(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Zs||(Zs={}));const bC=(e,t,n,s)=>{let o=s;for(;o=Lo(o,e,f3,t);)if(n(o))return},q1=(e,t,n,s,o,i)=>{let c=0;const a=[],l=s=>{let i=G1([s]);e===-1&&(i=i.reverse());for(let s=0;s<i.length;s++){const e=i[s];if(n(e,d))continue;if(a.length>0&&t(e,ln(a))&&c++,e.line=c,o(e))return!0;a.push(e)}return!1},d=ln(i.getClientRects());if(!d)return a;const r=i.getNode();return r&&(l(r),bC(e,s,l,r)),a},yC=(e,t)=>t.line>e,_C=(e,t)=>t.line===e,wC=d(q1,Zs.Up,Ho,Bo),OC=d(q1,Zs.Down,Bo,Ho),K1=e=>ln(e.getClientRects()),CC=(e,t,s,o)=>{const d=it(t);let r,c,l,i;const a=[];let u=0;e===1?(r=d.next,c=Bo,l=Ho,i=n.after(o)):(r=d.prev,c=Ho,l=Bo,i=n.before(o));const h=K1(i);do{if(!i.isVisible())continue;const t=K1(i);if(l(t,h))continue;a.length>0&&c(t,ln(a))&&u++;const e=An(t);if(e.position=i,e.line=u,s(e))return a;a.push(e)}while(i=r(i))return a},U1=e=>t=>yC(e,t),Nd=e=>t=>_C(e,t),ht=(e,t)=>{e.selection.setRng(t),mo(e,e.selection.getRng())},Pd=(t,n,s)=>e.some(dc(t,n,s)),B1=(t,n,s,o,i,a)=>{const r=n===B.Forwards,m=it(t.getBody()),f=d(kl,r?m.next:m.prev),u=r?o:i;if(!s.collapsed){const o=Jo(s);if(a(o))return _t(n,t,o,n===B.Backwards,!1);if(kc(t)){const t=s.cloneRange();return t.collapse(n===B.Backwards),e.from(t)}}const h=No(n,t.getBody(),s);if(u(h))return Vs(t,h.getNode(!r));let c=f(h);const p=$3(s);if(!c)return p?e.some(s):e.none();if(c=Ee(r,c),u(c))return _t(n,t,c.getNode(!r),r,!1);const l=f(c);return l&&u(l)&&li(c,l)?_t(n,t,l.getNode(!r),r,!1):p?Pd(t,c.toRange(),!1):e.none()},H1=(t,s,o,i,a,r)=>{const c=No(s,t.getBody(),o),p=ln(c.getClientRects()),l=s===Zs.Down,f=t.getBody();if(!p)return e.none();if(kc(t)){const t=l?n.fromRangeEnd(o):n.fromRangeStart(o),s=l?lC:cC;return s(f,t).orThunk(()=>e.from(t)).map(e=>e.toRange())}const v=l?OC:wC,b=v(f,U1(1),c),g=m(b,Nd(1)),h=p.left,d=X1(g,h);if(d&&r(d.node)){const e=Math.abs(h-d.left),n=Math.abs(h-d.right);return _t(s,t,d.node,e<n,!1)}let u;if(i(c)?u=c.getNode():a(c)?u=c.getNode(!0):u=Jo(o),u){const n=CC(s,f,U1(1),u);let e=X1(m(n,Nd(1)),h);if(e)return Pd(t,e.position.toRange(),!1);if(e=ln(m(n,Nd(0))),e)return Pd(t,e.position.toRange(),!1)}return g.length===0?Vd(t,l).filter(l?a:i).map(e=>dc(t,e.toRange(),!1)):e.none()},Vd=(e,t)=>{const o=e.selection.getRng(),s=t?n.fromRangeEnd(o):n.fromRangeStart(o),i=gx(s.container(),e.getBody());if(t){const e=Js(i,s);return on(e.positions)}const a=to(i,s);return ue(a.positions)},R1=(e,t,n)=>Vd(e,t).filter(n).exists(t=>(e.selection.setRng(t.toRange()),!0)),wa=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},N1=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},D1=(e,t,n)=>ed(t,n).map(t=>(wa(e,t),n)),RC=(e,t,s)=>{const o=n.fromRangeStart(e);if(e.collapsed)return o;const i=n.fromRangeEnd(e);return s?ye(t,i).getOr(i):de(t,o).getOr(o)},PC=(e,t,n)=>{const s=e.getBody(),o=RC(e.selection.getRng(),s,n),i=d(wn,e),a=Vx(n,i,s,o);return a.bind(n=>D1(e,t,n))},HC=(e,n,s)=>{const r=b(J(t.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),i=m(r,e),a=m(s,e);o(cl(i,a),d(N1,!1)),o(cl(a,i),d(N1,!0))},IC=(e,t)=>{const s=t.get();if(e.selection.isCollapsed()&&!e.composing&&s){const o=n.fromRangeStart(e.selection.getRng());n.isTextPosition(o)&&!Zg(o)&&(wa(e,Nx(s,o)),t.set(null))}},BC=(e,t,s,i)=>{if(t.selection.isCollapsed()){const a=m(i,e);o(a,o=>{const i=n.fromRangeStart(t.selection.getRng());ct(e,t.getBody(),i).bind(e=>D1(t,s,e))})}},z1=(e,t,n)=>!!Ls(e)&&PC(e,t,n).isSome(),T1=(e,t)=>!!Ls(t)&&Ux(e,t),WC=e=>{const t=V(null),n=d(wn,e);return e.on("NodeChange",s=>{Ls(e)&&(HC(n,e.dom,s.parents),IC(e,t),BC(n,e,t,s.parents))}),t},UC=d(T1,!0),KC=d(T1,!1),Aa=(e,t,s)=>{if(Ls(e)){const o=Vd(e,t).getOrThunk(()=>{const s=e.selection.getRng();return t?n.fromRangeEnd(s):n.fromRangeStart(s)});return ct(d(wn,e),e.getBody(),o).exists(t=>{const n=Wi(t);return ed(s,n).exists(t=>(wa(e,t),!0))})}return!1},YC=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},GC=e=>re(oe(e),lt(e),(t,n)=>{const s=Ee(!0,t),o=Ee(!1,n);return de(e,s).forall(e=>e.isEqual(o))}).getOr(!0),S1=(e,t)=>n=>ed(t,n).map(t=>()=>wa(e,t)),A1=(e,t,s,o)=>{const i=e.getBody(),a=d(wn,e);e.undoManager.ignore(()=>{e.selection.setRng(YC(s,o)),kp(e),ct(a,i,n.fromRangeStart(e.selection.getRng())).map(xd).bind(S1(e,t)).each(Io)}),e.nodeChanged()},ZC=(e,t)=>{const n=kt(t,e);return n||e},JC=(n,s,o,i)=>{const r=ZC(n.getBody(),i.container()),c=d(wn,n),l=ct(c,r,i),u=l.bind(t=>o?t.fold(a(e.some(xd(t))),e.none,a(e.some(Wi(t))),e.none):t.fold(e.none,a(e.some(Wi(t))),e.none,a(e.some(xd(t)))));return u.map(S1(n,s)).getOrThunk(()=>{const a=Vi(o,r,i),d=a.bind(e=>ct(c,r,e));return re(l,d,()=>Vt(c,r,i).bind(s=>GC(s)?e.some(()=>{Wt(n,o,t.fromDom(s))}):e.none())).getOrThunk(()=>d.bind(()=>a.map(e=>()=>{o?A1(n,s,i,e):A1(n,s,e,i)})))})},Yd=(t,s,o)=>{if(t.selection.isCollapsed()&&Ls(t)){const e=n.fromRangeStart(t.selection.getRng());return JC(t,s,o,e)}return e.none()},tE=(e,t)=>{const n=pt(t,e);return To(n,De).fold(a(n),e=>n.slice(0,e))},nE=e=>O8(e)===1,sE=(e,t,n,s)=>{const i=d(j7,t),o=b(m(s,i),e=>e.dom);if(o.length===0)Wt(t,e,n);else{const e=b7(n.dom,o);t.selection.setRng(e.toRange())}},oE=(s,o)=>{const a=t.fromDom(s.getBody()),r=t.fromDom(s.selection.getStart()),i=m(tE(a,r),nE);return on(i).bind(t=>{const a=n.fromRangeStart(s.selection.getRng());return Vg(o,a,t.dom)&&!y7(t)?e.some(()=>sE(o,s,t,i)):e.none()})},Zd=(t,n)=>t.selection.isCollapsed()?oE(t,n):e.none(),Jd=(n,s,o)=>r(o)?e.some(()=>{n._selectionOverrides.hideFakeCaret(),Wt(n,s,t.fromDom(o))}):e.none(),rE=(t,n)=>{const o=n?ko:Eo,i=n?B.Forwards:B.Backwards,s=No(i,t.getBody(),t.selection.getRng());return o(s)?Jd(t,n,s.getNode(!n)):e.from(Ee(n,s)).filter(e=>o(e)&&li(s,e)).bind(e=>Jd(t,n,e.getNode(!n)))},cE=(t,n)=>{const s=t.selection.getNode();return nt(s)?Jd(t,n,s):e.none()},eu=(e,t)=>e.selection.isCollapsed()?rE(e,t):cE(e,t),dE=e=>On(e,e=>Ne(e.dom)||C(e.dom)).exists(e=>Ne(e.dom)),nu=e=>tr(e??"").getOr(0),j1=(e,t)=>{const n=e||kD(t)?"margin":"padding",s=Xe(t,"direction")==="rtl"?"-right":"-left";return n+s},mE=(e,n,s,o,i,a)=>{const r=j1(s,t.fromDom(a)),c=nu(e.getStyle(a,r));if(n==="outdent"){const t=Math.max(0,c-o);e.setStyle(a,r,t?t+i:"")}else{const t=c+o+i;e.setStyle(a,r,t)}},fE=(e,t)=>qt(t,t=>{const n=j1(Gu(e),t),s=la(t,n).map(nu).getOr(0),o=e.dom.getContentEditable(t.dom);return o!=="false"&&s>0}),b1=e=>{const t=p1(e);return!e.mode.isReadOnly()&&(t.length>1||fE(e,t))},g1=e=>qc(e)||ao(e),vE=e=>Ue(e).exists(g1),p1=e=>m(Xm(e.selection.getSelectedBlocks()),e=>!g1(e)&&!vE(e)&&dE(e)),f1=(e,t)=>{var n,s;const{dom:a}=e,i=ZE(e),r=(s=(n=/[a-z%]+$/i.exec(i))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",c=nu(i),l=Gu(e);o(p1(e),e=>{mE(a,t,l,c,r,e.dom)})},yE=e=>f1(e,"indent"),m1=e=>f1(e,"outdent"),h1=s=>{if(s.selection.isCollapsed()&&b1(s)){const o=s.dom,i=s.selection.getRng(),r=n.fromRangeStart(i),a=o.getParent(i.startContainer,o.isBlock);if(a!==null&&zc(t.fromDom(a),r))return e.some(()=>m1(s))}return e.none()},d1=(e,t,n)=>ts([h1,nl,uc,(e,n)=>Yd(e,t,n),Vr,wd,pl,eu,Gr,Zd],t=>t(e,n)),xE=(e,t)=>{const n=d1(e,t,!1);n.fold(()=>{kp(e),Fl(e)},Io)},CE=(e,t)=>{const n=d1(e,t,!0);n.fold(()=>qg(e),Io)},EE=(e,t)=>{e.addCommand("delete",()=>{xE(e,t)}),e.addCommand("forwardDelete",()=>{CE(e,t)})},c1=5,AE=400,a1=t=>t.touches===void 0||t.touches.length!==1?e.none():e.some(t.touches[0]),ME=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>c1||s>c1},FE=e=>{const t=It(),n=V(!1),s=il(t=>{e.dispatch("longpress",{...t,type:"longpress"}),n.set(!0)},AE);e.on("touchstart",e=>{a1(e).each(o=>{s.cancel();const i={x:o.clientX,y:o.clientY,target:e.target};s.throttle(e),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),a1(o).each(s=>{t.on(o=>{ME(s,o)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{if(s.cancel(),o.type==="touchcancel")return;t.get().filter(e=>e.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},cu=(e,t)=>f(e,t.nodeName),zE=(e,t)=>!!s(t)||!!c(t)&&!cu(e.getBlockElements(),t)&&!we(t)&&!As(e,t),DE=(e,n,s)=>T(n6(t.fromDom(s),t.fromDom(n)),t=>cu(e,t.dom)),NE=(e,t)=>{if(s(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||cu(e,t.nextSibling)))return!0}return!1},s1=e=>e.dom.create(ge(e),Ts(e)),RE=e=>{const f=e.dom,r=e.selection,o=e.schema,u=o.getBlockElements(),l=r.getStart(),i=e.getBody();let n,a,d=!1;const h=ge(e);if(!l||!c(l))return;const m=i.nodeName.toLowerCase();if(!o.isValidChild(m,h.toLowerCase())||DE(u,i,l))return;const s=r.getRng(),{startContainer:p,startOffset:g,endContainer:v,endOffset:b}=s,j=Mn(e);let t=i.firstChild;for(;t;)if(c(t)&&AT(o,t),zE(o,t)){if(NE(u,t)){a=t,t=t.nextSibling,f.remove(a);continue}n||(n=s1(e),i.insertBefore(n,t),d=!0),a=t,t=t.nextSibling,n.appendChild(a)}else n=null,t=t.nextSibling;d&&j&&(s.setStart(p,g),s.setEnd(v,b),r.setRng(s),e.nodeChanged())},t1=(e,n,s)=>{const a=t.fromDom(s1(e)),o=Rc();H(a,o),s(n,a);const i=document.createRange();return i.setStartBefore(o.dom),i.setEndBefore(o.dom),i},HE=e=>{e.on("NodeChange",d(RE,e))},e1=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,BE=(e,t,n)=>function(s){const o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if(a==='"')return s;if(a===">"){const e=t.lastIndexOf("<",i);if(e!==-1){const n=t.substring(e,i);if(n.indexOf('contenteditable="false"')!==-1)return s}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},VE=(e,t,n)=>{let o=t.length,s=n.content;if(n.format==="raw")return;for(;o--;)s=s.replace(t[o],BE(e,s,Z1(e)));n.content=s},$E=e=>{const t="contenteditable",a=" "+i.trim(uC(e))+" ",r=" "+i.trim(Z1(e))+" ",s=e1(a),o=e1(r),n=sC(e);n.length>0&&e.on("BeforeSetContent",t=>{VE(e,n,t)}),e.parser.addAttributeFilter("class",e=>{let n=e.length;for(;n--;){const i=e[n];s(i)?i.attr(t,"true"):o(i)&&i.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let i=e.length;for(;i--;){const a=e[i];if(!s(a)&&!o(a))continue;n.length>0&&a.attr("data-mce-content")?(a.name="#text",a.type=3,a.raw=!0,a.value=a.attr("data-mce-content")):a.attr(t,null)}})},WE=e=>$o(t.fromDom(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull(),Zu=(e,t)=>{t.hasAttribute("data-mce-caret")&&(cc(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},KE=(e,t)=>{const n=WE(e);if(!n)return;if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),Zu(e,n);return}ah(n)&&(Zu(e,n),e.undoManager.add())},qE=e=>{e.on("keyup compositionstart",d(KE,e))},Qu=C,GE=(e,t,n)=>B1(t,e,n,Ht,Bt,Qu),XE=(e,t,n)=>{const s=e=>Ht(e)||Xf(e),o=e=>Bt(e)||Qf(e);return H1(t,e,n,s,o,Qu)},QE=e=>{const t=e.dom.create(ge(e));return t.innerHTML='<br data-mce-bogus="1">',t},Xu=(e,s,o)=>{const i=it(e.getBody()),a=d(kl,s===1?i.next:i.prev);if(o.collapsed){const i=e.dom.getParent(o.startContainer,"PRE");if(!i)return;const r=a(n.fromRangeStart(o));if(!r){const n=t.fromDom(QE(e));s===1?Rt(t.fromDom(i),n):Me(t.fromDom(i),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},JE=(t,n)=>{const s=n?B.Forwards:B.Backwards,o=t.selection.getRng();return GE(s,t,o).orThunk(()=>(Xu(t,s,o),e.none()))},ek=(t,n)=>{const s=n?1:-1,o=t.selection.getRng();return XE(s,t,o).orThunk(()=>(Xu(t,s,o),e.none()))},Yu=(e,t)=>JE(e,t).exists(t=>(ht(e,t),!0)),Uu=(e,t)=>ek(e,t).exists(t=>(ht(e,t),!0)),Wu=(e,t)=>{const n=t?Bt:Ht;return R1(e,t,n)},Xa=(e,t)=>hc(e,!t).map(n=>{const o=n.toRange(),s=e.selection.getRng();return t?o.setStart(s.startContainer,s.startOffset):o.setEnd(s.endContainer,s.endOffset),o}).exists(t=>(ht(e,t),!0)),ik=e=>O(["figcaption"],k(e)),ak=(e,n)=>{const s=d(j,n);return On(t.fromDom(e.container()),De,s).filter(ik)},rk=(e,t,n)=>t?iC(e.dom,n):oC(e.dom,n),ck=(e,s)=>{const o=t.fromDom(e.getBody()),i=n.fromRangeStart(e.selection.getRng());return ak(i,o).exists(()=>{if(rk(o,s,i)){const t=s?H:r8,n=t1(e,o,t);return e.selection.setRng(n),!0}return!1})},Vu=(e,t)=>!!e.selection.isCollapsed()&&ck(e,t),Bu={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},uk=e=>b(e,e=>({...Bu,...e})),hk=e=>b(e,e=>({...Bu,...e})),Iu=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,fk=(e,t)=>ft(uk(e),e=>Iu(e,t)?[e]:[]),pk=(e,t)=>ft(hk(e),e=>Iu(e,t)?[e]:[]),p=(e,...t)=>()=>e.apply(null,t),zs=(e,t)=>I(fk(e,t),e=>e.action()),Du=(e,t)=>ts(pk(e,t),e=>e.action()),zu=(e,t)=>{const n=t?B.Forwards:B.Backwards,s=e.selection.getRng();return B1(e,n,s,ko,Eo,nt).exists(t=>(ht(e,t),!0))},Tu=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return H1(e,n,s,ko,Eo,nt).exists(t=>(ht(e,t),!0))},Fu=(e,t)=>{const n=t?Eo:ko;return R1(e,t,n)},Au=ot.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ok=e=>Au.none(e),Ms={...Au,none:Ok},Ck=(e,t)=>Cu(e,t,N),Cu=(e,t,n)=>ft(Y(e),e=>Le(e,t)?n(e)?[e]:[]:Cu(e,t,n)),kk=(t,n,s=S)=>{if(s(n))return e.none();if(O(t,k(n)))return e.some(n);const o=e=>Le(e,"table")||s(e);return Vo(n,t.join(","),o)},Ak=(e,t)=>kk(["td","th"],e,t),Sk=e=>Ck(e,"th,td"),Ou=(e,t)=>kn(e,"table",t),vu=(e,t,n,s,o=N)=>{const i=s===1;if(!i&&n<=0)return Ms.first(e[0]);if(i&&n>=e.length-1)return Ms.last(e[e.length-1]);const a=n+s,r=e[a];return o(r)?Ms.middle(t,r):vu(e,t,a,s,o)},_u=(e,t)=>Ou(e,t).bind(t=>{const n=Sk(t),s=To(n,t=>j(e,t));return s.map(e=>({index:e,all:n}))}),zk=(e,t,n)=>{const s=_u(e,n);return s.fold(()=>Ms.none(e),n=>vu(n.all,e,n.index,1,t))},Dk=(e,t,n)=>{const s=_u(e,n);return s.fold(()=>Ms.none(),n=>vu(n.all,e,n.index,-1,t))},Nk=e=>kn(e,"[contenteditable]"),Eu=(e,t=!1)=>cs(e)?e.dom.isContentEditable:Nk(e).fold(a(t),e=>Rk(e)==="true"),Rk=e=>e.dom.contentEditable,Pk=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),Hk=(e,t)=>ft(t,t=>{const n=Pk(An(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}),Ik=(t,n,s)=>je(t,(t,o)=>t.fold(()=>e.some(o),t=>{const i=Math.sqrt(Math.abs(t.x-n)+Math.abs(t.y-s)),a=Math.sqrt(Math.abs(o.x-n)+Math.abs(o.y-s));return e.some(a<i?o:t)}),e.none()),Su=(e,n,s,o,i)=>{const a=J(t.fromDom(s),"td,th,caption").map(e=>e.dom),r=m(Hk(e,a),e=>n(e,i));return Ik(r,o,i).map(e=>e.cell)},Vk=e=>e.bottom,$k=e=>e.top,Wk=(e,t)=>e.y<t,Uk=(e,t)=>e.y>t,Kk=d(Su,Vk,Wk),qk=d(Su,$k,Uk),Yk=(e,t)=>ue(t.getClientRects()).bind(t=>Kk(e,t.left,t.top)).bind(e=>na(rC(e),t)),Gk=(e,t)=>on(t.getClientRects()).bind(t=>qk(e,t.left,t.top)).bind(e=>na(aC(e),t)),Xk=(e,t,n)=>n.breakAt.exists(n=>e(t,n).breakAt.isSome()),Qk=e=>e.breakType===st.Wrap&&e.positions.length===0,Zk=e=>e.breakType===st.Br&&e.positions.length===1,Mu=(e,t,n)=>{const s=e(t,n);return Qk(s)||!F(n.getNode())&&Zk(s)?!Xk(e,t,s):s.breakAt.isNone()},eA=d(Mu,to),tA=d(Mu,Js),nA=(e,t,s)=>{const o=n.fromRangeStart(t);return os(!e,s).exists(e=>e.isEqual(o))},sA=(e,t,n)=>{const o=e.selection.getRng(),i=t?1:-1;return!!(k4()&&nA(t,o,n))&&(_t(i,e,n,!t,!1).each(t=>{ht(e,t)}),!0)},oA=(e,t,s)=>Yk(t,s).orThunk(()=>ue(s.getClientRects()).bind(s=>Ad(t4(e,n.before(t)),s.left))).getOr(n.before(t)),iA=(e,t,s)=>Gk(t,s).orThunk(()=>ue(s.getClientRects()).bind(s=>Ad(e4(e,n.after(t)),s.left))).getOr(n.after(t)),Nu=(t,n)=>{const s=n.getNode(t);return wt(s)?e.some(s):e.none()},rA=(e,n,s)=>{n.undoManager.transact(()=>{const o=e?Rt:Me,i=t1(n,t.fromDom(s),o);ht(n,i)})},$u=(e,t,n)=>{const s=t?Nu(!0,n):Nu(!1,n),o=t===!1;s.fold(()=>ht(e,n.toRange()),s=>os(o,e.getBody()).filter(e=>e.isEqual(n)).fold(()=>ht(e,n.toRange()),n=>rA(t,e,s)))},lA=(e,t,s,o)=>{const r=e.selection.getRng(),i=n.fromRangeStart(r),a=e.getBody();if(!t&&eA(o,i)){const n=oA(a,s,i);return $u(e,t,n),!0}if(t&&tA(o,i)){const n=iA(a,s,i);return $u(e,t,n),!0}return!1},r1=(t,n,s)=>e.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>e.from(t.dom.getParent(o,"table")).map(e=>s(t,n,e,o))).getOr(!1),l1=(e,t)=>r1(e,t,sA),u1=(e,t)=>r1(e,t,lA),mA=e=>{const t=In.exact(e,0,e,0);return Fb(t)},v1=(t,n,s)=>s.fold(e.none,e.none,(e,t)=>zv(t).map(e=>mA(e)),e=>(t.execCommand("mceTableInsertRowAfter"),ju(t,n,e))),ju=(e,t,n)=>v1(e,t,zk(n,Eu)),gA=(e,t,n)=>v1(e,t,Dk(n,Eu)),_1=(e,n)=>{const i=["table","li","dl"],a=t.fromDom(e.getBody()),s=e=>{const t=k(e);return j(e,a)||O(i,t)},o=e.selection.getRng(),r=t.fromDom(n?o.endContainer:o.startContainer);return Ak(r,s).map(t=>{Ou(t,s).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!n);const o=n?ju:gA,i=o(e,s,t);return i.each(t=>{e.selection.setRng(t)}),!0}).getOr(!1)},bA=(e,t,n)=>{const s=v.os.isMacOS()||v.os.isiOS();zs([{keyCode:u.RIGHT,action:p(Yu,e,!0)},{keyCode:u.LEFT,action:p(Yu,e,!1)},{keyCode:u.UP,action:p(Uu,e,!1)},{keyCode:u.DOWN,action:p(Uu,e,!0)},...s?[{keyCode:u.UP,action:p(Xa,e,!1),metaKey:!0,shiftKey:!0},{keyCode:u.DOWN,action:p(Xa,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:u.RIGHT,action:p(l1,e,!0)},{keyCode:u.LEFT,action:p(l1,e,!1)},{keyCode:u.UP,action:p(u1,e,!1)},{keyCode:u.DOWN,action:p(u1,e,!0)},{keyCode:u.RIGHT,action:p(zu,e,!0)},{keyCode:u.LEFT,action:p(zu,e,!1)},{keyCode:u.UP,action:p(Tu,e,!1)},{keyCode:u.DOWN,action:p(Tu,e,!0)},{keyCode:u.RIGHT,action:p(z1,e,t,!0)},{keyCode:u.LEFT,action:p(z1,e,t,!1)},{keyCode:u.RIGHT,ctrlKey:!s,altKey:s,action:p(UC,e,t)},{keyCode:u.LEFT,ctrlKey:!s,altKey:s,action:p(KC,e,t)},{keyCode:u.UP,action:p(Vu,e,!1)},{keyCode:u.DOWN,action:p(Vu,e,!0)}],n).each(e=>{n.preventDefault()})},jA=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||bA(e,t,n)})},Ve=(e,t)=>({container:e,offset:t}),Ha=w.DOM,Ta=e=>t=>e===t?-1:0,OA=e=>t=>e.isBlock(t)||O(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",Wd=(t,n,o)=>{if(s(t)&&n>=0)return e.some(Ve(t,n));const i=_n(Ha);return e.from(i.backwards(t,n,Ta(t),o)).map(e=>Ve(e.container,e.container.data.length))},CA=(t,n,o)=>{if(s(t)&&n>=t.length)return e.some(Ve(t,n));const i=_n(Ha);return e.from(i.forwards(t,n,Ta(t),o)).map(e=>Ve(e.container,0))},Hd=(t,n,o)=>{if(!s(t))return e.none();const i=t.data;if(n>=0&&n<=i.length)return e.some(Ve(t,n));const a=_n(Ha);return e.from(a.backwards(t,n,Ta(t),o)).bind(e=>{const t=e.container.data;return Hd(e.container,n+t.length,o)})},$1=(t,n,o)=>{if(!s(t))return e.none();const i=t.data;if(n<=i.length)return e.some(Ve(t,n));const a=_n(Ha);return e.from(a.forwards(t,n,Ta(t),o)).bind(e=>$1(e.container,n-i.length,o))},Dd=(t,n,s,o,i)=>{const a=_n(t,OA(t));return e.from(a.backwards(n,s,o,i))},SA=e=>e.collapsed&&s(e.startContainer),Y1=e=>vt(e.toString().replace(/\u00A0/g," ")),s4=e=>e!==""&&` \xA0
	`.indexOf(e)!==-1,Sd=(e,t)=>e.substring(t.length),zA=(t,n,s)=>{let o;const i=s.charAt(0);for(o=n-1;o>=0;o--){const a=t.charAt(o);if(s4(a))return e.none();if(i===a&&Z(t,s,o,n))break}return e.some(o)},DA=(t,n,s,o=0)=>{if(!SA(n))return e.none();const i={text:"",offset:0},a=(e,t,n)=>(i.text=n+i.text,i.offset+=t,zA(i.text,i.offset,s).getOr(t)),r=t.getParent(n.startContainer,t.isBlock)||t.getRoot();return Dd(t,n.startContainer,n.startOffset,a,r).bind(t=>{const i=n.cloneRange();if(i.setStart(t.container,t.offset),i.setEnd(n.endContainer,n.endOffset),i.collapsed)return e.none();const a=Y1(i),r=a.lastIndexOf(s);return r!==0||Sd(a,s).length<o?e.none():e.some({text:Sd(a,s),range:i,trigger:s})})},f4=(n,s,o,i=0)=>Cv(t.fromDom(s.startContainer)).fold(()=>DA(n,s,o,i),t=>{const s=n.createRng();s.selectNode(t.dom);const i=Y1(s);return e.some({range:s,text:Sd(i,o),trigger:o})}),LA=e=>e.nodeType===Df,RA=e=>e.nodeType===Do,j4=e=>{if(LA(e))return Ve(e,e.data.length);const t=e.childNodes;return t.length>0?j4(t[t.length-1]):Ve(e,t.length)},_4=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?_4(n[t],0):n.length>0&&RA(e)&&n.length===t?j4(n[n.length-1]):Ve(e,t)},IA=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return Dd(e,t.container,t.offset,(e,t)=>t===0?-1:t,s).filter(e=>{const t=e.container.data.charAt(e.offset-1);return!s4(t)}).isSome()},BA=e=>t=>{const n=_4(t.startContainer,t.startOffset);return!IA(e,n)},VA=(e,t,n)=>ts(n.triggers,n=>f4(e,t,n)),$A=(e,t)=>{const n=t(),s=e.selection.getRng();return VA(e.dom,s,n).bind(n=>w4(e,t,n))},w4=(t,n,s,o={})=>{var i;const r=n(),c=t.selection.getRng(),l=(i=c.startContainer.nodeValue)!==null&&i!==void 0?i:"",a=m(r.lookupByTrigger(s.trigger),e=>s.text.length>=e.minChars&&e.matches.getOrThunk(()=>BA(t.dom))(s.range,l,s.text));if(a.length===0)return e.none();const d=Promise.all(b(a,e=>{const t=e.fetch(s.text,e.maxResults,o);return t.then(t=>({matchText:s.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))}));return e.some({lookupData:d,context:s})};(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Be||(Be={}));const ud=(e,t,n)=>e.stype===Be.Error?t(e.serror):n(e.svalue),qA=e=>{const t=[],n=[];return o(e,e=>{ud(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}},YA=(e,t)=>e.stype===Be.Error?{stype:Be.Error,serror:t(e.serror)}:e,GA=(e,t)=>e.stype===Be.Value?{stype:Be.Value,svalue:t(e.svalue)}:e,XA=(e,t)=>e.stype===Be.Value?t(e.svalue):e,QA=(e,t)=>e.stype===Be.Error?t(e.serror):e,F4=e=>({stype:Be.Value,svalue:e}),L4=e=>({stype:Be.Error,serror:e}),eS=e=>ud(e,ce.error,ce.value),tS=e=>e.fold(L4,F4),U={fromResult:tS,toResult:eS,svalue:F4,partition:qA,serror:L4,bind:XA,bindError:QA,map:GA,mapError:YA,fold:ud},Xl=e=>ie(e)&&fe(e).length>100?" removed due to size":JSON.stringify(e,null,2),oS=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:a("... (only showing first ten failures)")}]):e;return b(t,e=>"Failed path: ("+e.path.join(" > ")+`)
`+e.getErrorInfo())},ai=(e,t)=>U.serror([{path:e,getErrorInfo:t}]),aS=(e,t,n)=>ai(e,()=>'Could not find valid *required* value for "'+t+'" in '+Xl(n)),rS=(e,t)=>ai(e,()=>'Choice schema did not contain choice key: "'+t+'"'),cS=(e,t,n)=>ai(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Xl(t)),lS=(e,t)=>ai(e,a(t)),dS=(e,t,n,s)=>{const o=E(n,s);return o.fold(()=>cS(e,n,s),n=>n.extract(e.concat(["branch: "+s]),t))},uS=(e,t)=>{const n=(n,s)=>{const o=E(s,e);return o.fold(()=>rS(n,e),e=>dS(n,s,t,e))},s=()=>"chooseOn("+e+"). Possible values: "+fe(t);return{extract:n,toString:s}},hS=(e,t)=>t,mS=(e,t)=>{const n=Bp(e)&&Bp(t);return n?ni(e,t):t},V4=e=>(...t)=>{if(t.length===0)throw new Error(`Can't merge zero objects`);const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const t in o)f(o,t)&&(n[t]=e(n[t],o[t]))}return n},ni=V4(mS),gS=V4(hS),$4=()=>({tag:"required",process:{}}),bS=e=>({tag:"defaultedThunk",process:e}),W4=e=>bS(a(e)),yS=()=>({tag:"option",process:{}}),_S=(e,t)=>e.length>0?U.svalue(ni(t,gS.apply(void 0,e))):U.svalue(t),K4=e=>En(U.serror,Mp)(e),OS=(e,t)=>{const n=U.partition(e);return n.errors.length>0?K4(n.errors):_S(n.values,t)},xS=e=>{const t=U.partition(e);return t.errors.length>0?K4(t.errors):U.svalue(t.values)},CS={consolidateObj:OS,consolidateArr:xS},ES=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),kS=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),X4=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Nl=e=>{const t=(t,n)=>U.bindError(e(n),e=>lS(t,e)),n=a("val");return{extract:t,toString:n}},MS=Nl(U.svalue),FS=(e,t,n,s)=>E(t,n).fold(()=>aS(e,n,t),s),t0=(e,t,n,s)=>{const o=E(e,t).getOrThunk(()=>n(e));return s(o)},zS=(e,t,n)=>n(E(e,t)),DS=(e,t,n,s)=>{const o=E(e,t).map(t=>t===!0?n(e):t);return s(o)},NS=(t,n,s,o,i)=>{const r=e=>i.extract(n.concat([o]),e),c=t=>t.fold(()=>U.svalue(e.none()),t=>{const s=i.extract(n.concat([o]),t);return U.map(s,e.some)});switch(t.tag){case"required":return FS(n,s,o,r);case"defaultedThunk":return t0(s,o,t.process,r);case"option":return zS(s,o,c);case"defaultedOptionThunk":return DS(s,o,t.process,c);case"mergeWithThunk":return t0(s,o,a({}),e=>{const n=ni(t.process(s),e);return r(n)})}},LS=(e,t,n)=>{const s={},o=[];for(const i of n)X4(i,(n,i,a,r)=>{const c=NS(a,e,t,n,r);U.fold(c,e=>{o.push(...e)},e=>{s[i]=e})},(e,n)=>{s[e]=n(t)});return o.length>0?U.serror(o):U.svalue(s)},Al=e=>{const t=(t,n)=>LS(t,n,e),n=()=>{const t=b(e,e=>X4(e,(e,t,n,s)=>e+" -> "+s.toString(),(e)=>"state("+e+")"));return`obj{
`+t.join(`
`)+"}"};return{extract:t,toString:n}},i0=e=>{const t=(t,n)=>{const s=b(n,(n,s)=>e.extract(t.concat(["["+s+"]"]),n));return CS.consolidateArr(s)},n=()=>"array("+e.toString()+")";return{extract:t,toString:n}},HS=e=>Nl(t=>e(t).fold(U.serror,U.svalue)),IS=(e,t,n)=>{const s=t.extract([e],n);return U.mapError(s,e=>({input:n,errors:e}))},BS=(e,t,n)=>U.toResult(IS(e,t,n)),VS=e=>`Errors: 
`+oS(e.errors).join(`
`)+`

Input object: `+Xl(e.input),r0=(e,t)=>uS(e,Bi(t,Al)),WS=a(MS),mi=(e,t)=>Nl(n=>{const s=typeof n;return e(n)?U.svalue(n):U.serror(`Expected type: ${t} but got: ${s}`)}),KS=mi($e,"number"),ji=mi(h,"string"),YS=mi(sn,"boolean"),bl=mi(_,"function"),xo=ES,j0=kS,ZS=e=>HS(t=>O(e,t)?ce.value(t):ce.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),E0=(e,t)=>xo(e,e,$4(),t),k0=e=>E0(e,ji),S0=e=>E0(e,bl),nM=(e,t)=>xo(e,e,$4(),i0(t)),Xc=(e,t)=>xo(e,e,yS(),t),$i=e=>Xc(e,ji),iM=e=>Xc(e,bl),aM=(e,t)=>xo(e,e,W4(t),WS()),ls=(e,t,n)=>xo(e,e,W4(t),n),M0=(e,t)=>ls(e,t,KS),lM=(e,t)=>ls(e,t,ji),F0=(e,t,n)=>ls(e,t,ZS(n)),Vc=(e,t)=>ls(e,t,YS),Bc=(e,t)=>ls(e,t,bl),mM=(e,t,n)=>ls(e,t,i0(n)),fM=k0("type"),pM=S0("fetch"),Lc=S0("onAction"),vM=Bc("onSetup",()=>g),bM=$i("text"),jM=$i("icon"),yM=$i("tooltip"),_M=$i("label"),wM=Vc("active",!1),OM=Vc("enabled",!0),D0=Vc("primary",!1),CM=e=>aM("columns",e),so=e=>lM("type",e),kM=Al([fM,k0("trigger"),M0("minChars",1),CM(1),M0("maxResults",10),iM("matches"),pM,Lc,mM("highlightOn",[],ji)]),AM=e=>BS("Autocompleter",kM,{trigger:e.ch,...e}),Tc=[OM,yM,jM,bM,vM],L0=[wM].concat(Tc),FM=[Bc("predicate",S),F0("scope","node",["node","editor"]),F0("position","selection",["node","selection","line"])],TM=Tc.concat([so("contextformbutton"),D0,Lc,j0("original",se)]),zM=L0.concat([so("contextformbutton"),D0,Lc,j0("original",se)]),DM=Tc.concat([so("contextformbutton")]),NM=L0.concat([so("contextformtogglebutton")]),LM=r0("type",{contextformbutton:TM,contextformtogglebutton:zM});Al([so("contextform"),Bc("initValue",a("")),_M,nM("commands",LM),Xc("launch",r0("type",{contextformbutton:DM,contextformtogglebutton:NM}))].concat(FM));const RM=e=>{const n=e.ui.registry.getAll().popups,t=Bi(n,e=>AM(e).fold(e=>{throw new Error(VS(e))},se)),s=yp(Kc(t,e=>e.trigger)),o=Uc(t),i=e=>m(o,t=>t.trigger===e);return{dataset:t,triggers:s,lookupByTrigger:i}},PM=(e,t)=>{const n=il(t.load,50);e.on("keypress compositionend",e=>{if(e.which===27)return;n.throttle()}),e.on("keydown",e=>{const s=e.which;s===8?n.throttle():s===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},HM=e=>{const t=It(),s=V(!1),o=t.isSet,n=()=>{o()&&(Ny(e),zy(e),s.set(!1),t.clear())},r=n=>{o()||(Dy(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))},i=bn(()=>RM(e)),c=n=>t.get().map(t=>f4(e.dom,e.selection.getRng(),t.trigger).bind(t=>w4(e,i,t,n))).getOrThunk(()=>$A(e,i)),a=o=>{c(o).fold(n,o=>{r(o.context),o.lookupData.then(i=>{t.get().map(a=>{const r=o.context;a.trigger===r.trigger&&(r.text.length-a.matchLength>=10?n():(t.set({...a,matchLength:r.text.length}),s.get()?Ry(e,{lookupData:i}):(s.set(!0),By(e,{lookupData:i}))))})})})};e.addCommand("mceAutocompleterReload",(e,t)=>{const n=ie(t)?t.fetchOptions:{};a(n)}),e.addCommand("mceAutocompleterClose",n),PM(e,{cancelIfNecessary:n,load:a})},V0=e=>(t,n,s={})=>{const o=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:g,inputType:n},a=W0(new InputEvent(e));return t.dispatch(e,{...a,...i,...s})},Oc=V0("input"),yc=V0("beforeinput"),$M=(e,t,n)=>{const s=n.keyCode===u.BACKSPACE?"deleteContentBackward":"deleteContentForward";Du([{keyCode:u.BACKSPACE,action:p(h1,e)},{keyCode:u.BACKSPACE,action:p(nl,e,!1)},{keyCode:u.DELETE,action:p(nl,e,!0)},{keyCode:u.BACKSPACE,action:p(uc,e,!1)},{keyCode:u.DELETE,action:p(uc,e,!0)},{keyCode:u.BACKSPACE,action:p(Yd,e,t,!1)},{keyCode:u.DELETE,action:p(Yd,e,t,!0)},{keyCode:u.BACKSPACE,action:p(wd,e,!1)},{keyCode:u.DELETE,action:p(wd,e,!0)},{keyCode:u.BACKSPACE,action:p(pl,e,!1)},{keyCode:u.DELETE,action:p(pl,e,!0)},{keyCode:u.BACKSPACE,action:p(eu,e,!1)},{keyCode:u.DELETE,action:p(eu,e,!0)},{keyCode:u.BACKSPACE,action:p(Gr,e,!1)},{keyCode:u.DELETE,action:p(Gr,e,!0)},{keyCode:u.BACKSPACE,action:p(Vr,e,!1)},{keyCode:u.DELETE,action:p(Vr,e,!0)},{keyCode:u.BACKSPACE,action:p(Zd,e,!1)},{keyCode:u.DELETE,action:p(Zd,e,!0)}],n).each(t=>{n.preventDefault();const o=yc(e,s);o.isDefaultPrevented()||(t(),Oc(e,s))})},WM=(e,t)=>{zs([{keyCode:u.BACKSPACE,action:p(y0,e)},{keyCode:u.DELETE,action:p(y0,e)}],t)},UM=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||$M(e,t,n)}),e.on("keyup",t=>{t.isDefaultPrevented()||WM(e,t)})},KM=e=>{for(;e;){if(c(e)||s(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Gs=(e,t)=>{const o=e.dom,i=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=KM(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(o.doc.createTextNode(W),t.firstChild)}const n=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new P(t,t);let o=t,e;for(;e=a.current();){if(s(e)){n.setStart(e,0),n.setEnd(e,0);break}if(i[e.nodeName.toLowerCase()]){n.setStartBefore(e),n.setEndBefore(e);break}o=e,e=a.next()}e||(n.setStart(o,0),n.setEnd(o,0))}else F(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)):(n.setStart(t,0),n.setEnd(t,0));e.selection.setRng(n),mo(e,n)},ha=(e,t)=>{const s=e.getRoot();let o,n=t;for(;n!==s&&n&&e.getContentEditable(n)!=="false";)e.getContentEditable(n)==="true"&&(o=n),n=n.parentNode;return n!==s?o:s},fc=t=>e.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),XM=e=>fc(e).fold(a(""),e=>e.nodeName.toUpperCase()),QM=e=>fc(e).filter(e=>ao(t.fromDom(e))).isSome(),ZM=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,JM=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},U0=(e,t)=>{const n=e?.parentNode;return r(n)&&n.nodeName===t},q0=e=>r(e)&&/^(OL|UL|LI)$/.test(e.nodeName),nF=e=>r(e)&&/^(LI|DT|DD)$/.test(e.nodeName),sF=e=>q0(e)&&q0(e.parentNode),ma=e=>{const t=e.parentNode;return nF(t)?t:e},ba=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s;){if(c(s))break;s=s[n?"nextSibling":"previousSibling"]}return s===t},aF=(e,t,n,s,o)=>{const i=e.dom,c=e.selection.getRng(),r=n.parentNode;if(n===e.getBody()||!r)return;sF(n)&&(o="LI");let a=t(o);if(ba(n,s,!0)&&ba(n,s,!1))if(U0(n,"LI")){const e=ma(n);i.insertAfter(a,e),JM(n)?i.remove(e):i.remove(n)}else i.replace(a,n);else if(ba(n,s,!0))U0(n,"LI")?(i.insertAfter(a,ma(n)),a.appendChild(i.doc.createTextNode(" ")),a.appendChild(n)):r.insertBefore(a,n),i.remove(s);else if(ba(n,s,!1))i.insertAfter(a,ma(n)),i.remove(s);else{n=ma(n);const t=c.cloneRange();t.setStartAfter(s),t.setEndAfter(n);const e=t.extractContents();o==="LI"&&ZM(e,"LI")?(a=e.firstChild,i.insertAfter(e,n)):(i.insertAfter(e,n),i.insertAfter(a,n)),i.remove(s)}Gs(e,a)},rF=e=>{o(Zh(t.fromDom(e),Ae),e=>{const t=e.dom;t.nodeValue=vt(t.data)})},cF=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},lF=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),oc=e=>{e.innerHTML='<br data-mce-bogus="1">'},ec=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,e2=(e,t)=>r(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",mF=(e,t,n)=>{const i=[];if(!n)return;let s=n;for(var o;s=s.firstChild;){if(e.isBlock(s))return;c(s)&&!t[s.nodeName.toLowerCase()]&&i.push(s)}let a=i.length;for(;a--;)s=i[a],!s.hasChildNodes()||s.firstChild===s.lastChild&&((o=s.firstChild)===null||o===void 0?void 0:o.nodeValue)===""?e.remove(s):lF(e,s)&&e.remove(s)},Ur=(e,t,n)=>s(t)?e?n===1&&t.data.charAt(n-1)===q?0:n:n===t.data.length-1&&t.data.charAt(n)===q?t.data.length:n:n,pF=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Ur(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Ur(!1,e.endContainer,e.endOffset)),t},gF=e=>{let t=e;do s(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},vF=(n,s,o)=>{const i=n.dom;e.from(o.style).map(i.parseStyle).each(e=>{const n=d8(t.fromDom(s)),o={...n,...e};i.setStyles(s,o)});const a=e.from(o.class).map(e=>e.split(/\s+/)),r=e.from(s.className).map(e=>m(e.split(/\s+/),e=>e!==""));re(a,r,(e,t)=>{const n=m(t,t=>!O(e,t)),o=[...e,...n];i.setAttrib(s,"class",o.join(" "))});const c=["style","class"],l=co(o,(e,t)=>!O(c,t));i.setAttribs(s,l)},Ps=(e,t)=>{const n=ge(e);if(n.toLowerCase()===t.tagName.toLowerCase()){const n=Ts(e);vF(e,t,n)}},jF=(e,t,n,s,o)=>{const a=e.dom,c=(r=ha(a,s))!==null&&r!==void 0?r:a.getRoot();let i=a.getParent(s,a.isBlock);if(!i||!e2(a,i)){i=i||c;let u;if(i===e.getBody()||Lh(i)?u=i.nodeName.toLowerCase():i.parentNode?u=i.parentNode.nodeName.toLowerCase():u="",!i.hasChildNodes()){const s=a.create(t);return Ps(e,s),i.appendChild(s),n.setStart(s,0),n.setEnd(s,0),s}let l=s;for(var r;l&&l.parentNode!==i;)l=l.parentNode;let d;for(;l&&!a.isBlock(l);)d=l,l=l.previousSibling;if(d&&e.schema.isValidChild(u,t.toLowerCase())){const r=d.parentNode,i=a.create(t);for(Ps(e,i),r.insertBefore(i,d),l=d;l&&!a.isBlock(l);){const e=l.nextSibling;i.appendChild(l),l=e}n.setStart(s,o),n.setEnd(s,o)}}return s},yF=(e,t)=>{t.normalize();const n=t.lastChild;(!n||c(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},_F=(e,t)=>{const n=vk(e);return!D(t)&&(h(n)?O(i.explode(n),t.nodeName.toLowerCase()):n)},wF=(e,t)=>{let o,d,h,l,m=!1;const i=e.dom,w=e.schema,y=w.getNonEmptyElements(),u=e.selection.getRng(),p=ge(e),f=t=>{let a=o;const c=w.getTextInlineElements();let s;t||h==="TABLE"||h==="HR"?s=i.create(t||p):s=n.cloneNode(!1);let r=s;if(bk(e)===!1)i.setAttrib(s,"style",null),i.setAttrib(s,"class",null);else do if(c[a.nodeName]){if(Ie(a)||we(a))continue;const e=a.cloneNode(!1);i.setAttrib(e,"id",""),s.hasChildNodes()?(e.appendChild(s.firstChild),s.appendChild(e)):(r=e,s.appendChild(e))}while((a=a.parentNode)&&a!==j)return Ps(e,s),oc(r),s},v=e=>{const a=Ur(e,o,d);if(s(o)&&(e?a>0:a<o.data.length))return!1;if(o.parentNode===n&&m&&!e)return!0;if(e&&c(o)&&o===n.firstChild)return!0;if(ec(o,"TABLE")||ec(o,"HR"))return m&&!e||!m&&e;const i=new P(o,n);s(o)&&(e&&a===0?i.prev():!e&&a===o.data.length&&i.next());let t;for(;t=i.current();){if(c(t)){if(!t.getAttribute("data-mce-bogus")){const e=t.nodeName.toLowerCase();if(y[e]&&e!=="br")return!1}}else if(s(t)&&!Tn(t.data))return!1;e?i.prev():i.next()}return!0},b=()=>{let t;return/^(H[1-6]|PRE|FIGURE)$/.test(h)&&g!=="HGROUP"?t=f(p):t=f(),_F(e,l)&&e2(i,l)&&i.isEmpty(n)?t=i.split(l,n):i.insertAfter(t,n),Gs(e,t),t};fi(i,u).each(e=>{u.setStart(e.startContainer,e.startOffset),u.setEnd(e.endContainer,e.endOffset)}),o=u.startContainer,d=u.startOffset;const O=!!(t&&t.shiftKey),x=!!(t&&t.ctrlKey);c(o)&&o.hasChildNodes()&&(m=d>o.childNodes.length-1,o=o.childNodes[Math.min(d,o.childNodes.length-1)]||o,m&&s(o)?d=o.data.length:d=0);const j=ha(i,o);if(!j||cF(e,o))return;O||(o=jF(e,p,u,o,d));let n=i.getParent(o,i.isBlock)||i.getRoot();l=r(n?.parentNode)?i.getParent(n.parentNode,i.isBlock):null,h=n?n.nodeName.toUpperCase():"";const g=l?l.nodeName.toUpperCase():"";if(g==="LI"&&!x){const e=l;n=e,l=e.parentNode,h=g}if(/^(LI|DT|DD)$/.test(h)&&c(l)&&i.isEmpty(n)){aF(e,f,l,n,p);return}if(n===e.getBody())return;const _=n.parentNode;let a;if(es(n))a=cc(n),i.isEmpty(n)&&oc(n),Ps(e,a),Gs(e,a);else if(v(!1))a=b();else if(v(!0)&&_)a=_.insertBefore(f(),n),Gs(e,ec(n,"HR")?a:n);else{const s=pF(u).cloneRange();s.setEndAfter(n);const t=s.extractContents();rF(t),gF(t),a=t.firstChild,i.insertAfter(t,n),mF(i,y,a),yF(i,n),i.isEmpty(n)&&oc(n),a.normalize(),i.isEmpty(a)?(i.remove(a),b()):(Ps(e,a),Gs(e,a))}i.setAttrib(a,"id",""),e.dispatch("NewBlock",{newBlock:a})},OF="insertParagraph",o2={insert:wF,fakeEventName:OF},CF=(e,t,n)=>{const i=new P(t,n);let o;const a=e.getNonEmptyElements();for(;o=i.next();)if(a[o.nodeName.toLowerCase()]||s(o)&&o.length>0)return!0;return!1},c2=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),mo(e,s)},kF=(e,t)=>{const h=e.selection,o=e.dom,i=h.getRng();let a,u=!1;fi(o,i).each(e=>{i.setStart(e.startContainer,e.startOffset),i.setEnd(e.endContainer,e.endOffset)});let r=i.startOffset,n=i.startContainer;if(c(n)&&n.hasChildNodes()){const e=r>n.childNodes.length-1;n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,e&&s(n)?r=n.data.length:r=0}let l=o.getParent(n,o.isBlock);const d=l&&l.parentNode?o.getParent(l.parentNode,o.isBlock):null,m=d?d.nodeName.toUpperCase():"",f=!!(t&&t.ctrlKey);m==="LI"&&!f&&(l=d),s(n)&&r>=n.data.length&&(CF(e.schema,n,l||o.getRoot())||(a=o.create("br"),i.insertNode(a),i.setStartAfter(a),i.setEndAfter(a),u=!0)),a=o.create("br"),_d(o,i,a),c2(e,a,u),e.undoManager.add()},AF=(e,n)=>{const s=t.fromTag("br");Me(t.fromDom(n),s),e.undoManager.add()},SF=(e,n)=>{FF(e.getBody(),n)||Rt(t.fromDom(n),t.fromTag("br"));const s=t.fromTag("br");Rt(t.fromDom(n),s),c2(e,s.dom,!1),e.undoManager.add()},MF=e=>F(e.getNode()),FF=(e,t)=>!!MF(n.after(t))||de(e,n.after(t)).map(e=>F(e.getNode())).getOr(!1),d2=e=>e&&e.nodeName==="A"&&"href"in e,zF=e=>e.fold(S,d2,d2,S),DF=e=>{const t=d(wn,e),s=n.fromRangeStart(e.selection.getRng());return ct(t,e.getBody(),s).filter(zF)},NF=(e,t)=>{t.fold(g,d(AF,e),d(SF,e),g)},LF=(e,t)=>{const n=DF(e);n.isSome()?n.each(d(NF,e)):kF(e,t)},RF="insertLineBreak",g2={insert:LF,fakeEventName:RF},v2=(e,n)=>fc(e).filter(e=>n.length>0&&Le(t.fromDom(e),n)).isSome(),IF=e=>v2(e,yk(e)),BF=e=>v2(e,jk(e)),xe=ot.generate([{br:[]},{block:[]},{none:[]}]),$F=(e)=>BF(e),b2=e=>(t)=>QM(t)===e,x2=(e,t)=>(n)=>{const o=XM(n)===e.toUpperCase();return o===t},KF=e=>{const t=ha(e.dom,e.selection.getStart());return D(t)},Rs=e=>x2("pre",e),YF=()=>x2("summary",!0),Ka=e=>(t)=>wk(t)===e,XF=(e)=>IF(e),Ga=(e,t)=>t,ZF=e=>{const n=ge(e),t=ha(e.dom,e.selection.getStart());return r(t)&&e.schema.isValidChild(t.nodeName,n)},ze=(t,n)=>(s,o)=>{const i=je(t,(e,t)=>e&&t(s,o),!0);return i?e.some(n):e.none()},eT=(e,t)=>T4([ze([$F],xe.none()),ze([Rs(!0),KF],xe.none()),ze([YF()],xe.br()),ze([Rs(!0),Ka(!1),Ga],xe.br()),ze([Rs(!0),Ka(!1)],xe.block()),ze([Rs(!0),Ka(!0),Ga],xe.block()),ze([Rs(!0),Ka(!0)],xe.br()),ze([b2(!0),Ga],xe.br()),ze([b2(!0)],xe.block()),ze([XF],xe.br()),ze([Ga],xe.br()),ze([ZF],xe.block())],[e,!!(t&&t.shiftKey)]).getOr(xe.none()),Za=(e,t,n)=>{if(t.selection.isCollapsed()||Gg(t),r(n)){const n=yc(t,e.fakeEventName);if(n.isDefaultPrevented())return}e.insert(t,n),r(n)&&Oc(t,e.fakeEventName)},T2=(e,t)=>{const n=()=>Za(g2,e,t),s=()=>Za(o2,e,t),o=eT(e,t);switch(_k(e)){case"linebreak":o.fold(n,n,g);break;case"block":o.fold(s,s,g);break;case"invert":o.fold(s,n,g);break;default:o.fold(n,s,g);break}},sT=(e,t)=>{if(t.isDefaultPrevented())return;t.preventDefault(),Bj(e.undoManager),e.undoManager.transact(()=>{T2(e,t)})},oT=e=>{e.on("keydown",t=>{t.keyCode===u.ENTER&&sT(e,t)})},iT=(e,t,n)=>{const s=v.os.isMacOS()||v.os.isiOS();zs([{keyCode:u.END,action:p(Wu,e,!0)},{keyCode:u.HOME,action:p(Wu,e,!1)},...s?[]:[{keyCode:u.HOME,action:p(Xa,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:u.END,action:p(Xa,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:u.END,action:p(Fu,e,!0)},{keyCode:u.HOME,action:p(Fu,e,!1)},{keyCode:u.END,action:p(Aa,e,!0,t)},{keyCode:u.HOME,action:p(Aa,e,!1,t)}],n).each(e=>{n.preventDefault()})},aT=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||iT(e,t,n)})},rT=e=>{e.on("input",t=>{t.isComposing||l7(e)})},cT=Ut(),lT=(e,t,n)=>{zs([{keyCode:u.PAGE_UP,action:p(Aa,e,!1,t)},{keyCode:u.PAGE_DOWN,action:p(Aa,e,!0,t)}],n)},N2=e=>e.stopImmediatePropagation(),P2=e=>e.keyCode===u.PAGE_UP||e.keyCode===u.PAGE_DOWN,V2=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",N2,!0):!n&&e.get()&&t.off("NodeChange",N2),e.set(n)},mT=(e,t)=>{if(cT.os.isMacOS())return;const n=V(!1);e.on("keydown",t=>{P2(t)&&V2(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||lT(e,t,s),P2(s)&&n.get()&&(V2(n,e,!1),e.nodeChanged())})},U2=(o,i)=>{const a=i.container(),r=i.offset();return s(a)?(a.insertData(r,o),e.some(n(a,r+o.length))):ii(i).map(e=>{const s=t.fromText(o);return i.isAtEnd()?Rt(e,s):Me(e,s),n(s.dom,o.length)})},pT=d(U2,W),gT=d(U2," "),vT=e=>t=>t.fold(t=>ye(e.dom,n.before(t)),e=>oe(e),e=>lt(e),t=>de(e.dom,n.after(t))),bT=(e,t)=>n=>A7(e,n)?pT(t):gT(t),jT=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),yT=s=>{const i=n.fromRangeStart(s.selection.getRng()),o=t.fromDom(s.getBody());if(s.selection.isCollapsed()){const e=d(wn,s),t=n.fromRangeStart(s.selection.getRng());return ct(e,s.getBody(),t).bind(vT(o)).map(e=>()=>bT(o,i)(e).each(jT(s)))}return e.none()},_T=(e,t)=>{Du([{keyCode:u.SPACEBAR,action:p(yT,e)}],t).each(n=>{t.preventDefault();const s=yc(e,"insertText",{data:" "});s.isDefaultPrevented()||(n(),Oc(e,"insertText",{data:" "}))})},wT=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||_T(e,t)})},OT=e=>Qx(e)?[{keyCode:u.TAB,action:p(_1,e,!0)},{keyCode:u.TAB,shiftKey:!0,action:p(_1,e,!1)}]:[],xT=(e,t)=>{zs([...OT(e)],t).each(e=>{t.preventDefault()})},CT=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||xT(e,t)})},ET=e=>{if(e.addShortcut("Meta+P","","mcePrint"),HM(e),rt(e))return V(null);const t=WC(e);return qE(e),jA(e,t),UM(e,t),oT(e),wT(e),rT(e),CT(e),aT(e,t),mT(e,t),t};class kT{constructor(e){this.lastPath=[],this.editor=e;let t;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",n=>{const s=e.selection.getRng(),o={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};(n.type==="nodechange"||!Zl(o,t))&&e.dispatch("SelectionChange"),t=o}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const t=e.selection.getStart(!0);if(!t)return;Ja(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&Ja(e)&&(e.selection.getNode().nodeName==="IMG"?Oe.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let t;if(this.editor.initialized&&n&&!iE(this.editor)&&!this.editor.mode.isReadOnly()){const s=this.editor.getBody();t=n.getStart(!0)||s,(t.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(t,s))&&(t=s);const o=[];this.editor.dom.getParent(t,e=>e===s||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:t,parents:o})}}isSameElementPath(e){let t;const s=this.editor,n=_o(s.dom.getParents(e,N,s.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0;t--)if(n[t]!==this.lastPath[t])break;if(t===-1)return this.lastPath=n,!0}return this.lastPath=n,!1}}const K2="x-tinymce/html",sr=a(K2),dr="<!-- "+K2+" -->",FT=e=>dr+e,TT=e=>e.replace(dr,""),Q2=e=>e.indexOf(dr)!==-1,DT=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),NT=(e,t)=>{let n="<"+e;const s=Kc(t,(e,t)=>t+'="'+Tt.encodeAllRaw(e)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},LT=(e,t,n)=>{const o=e.split(/\n\n/),i=NT(t,n),a="</"+t+">",s=b(o,e=>e.split(/\n/).join("<br />")),r=e=>i+e+a;return s.length===1?s[0]:b(s,r).join("")},J2="%MCEPASTEBIN%",PT=(e,t)=>{const{dom:n,selection:o}=e,i=e.getBody();t.set(o.getRng());const s=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},J2);v.browser.isFirefox()&&n.setStyle(s,"left",n.getStyle(i,"direction",!0)==="rtl"?65535:-65535),n.bind(s,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),s.focus(),o.select(s,!0)},HT=(e,t)=>{const n=e.dom;if(xr(e)){let s;const o=t.get();for(;s=xr(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},xr=e=>e.dom.get("mcepastebin"),BT=e=>r(e)&&e.id==="mcepastebin",VT=e=>{const n=e.dom,i=(e,t)=>{e.appendChild(t),n.remove(t,!0)},[t,...a]=m(e.getBody().childNodes,BT);o(a,e=>{i(t,e)});const s=n.select("div[id=mcepastebin]",t);for(let e=s.length-1;e>=0;e--){const o=n.create("div");t.insertBefore(o,s[e]),i(o,s[e])}return t?t.innerHTML:""},e3=e=>e===J2,WT=e=>{const t=V(null);return{create:()=>PT(e,t),remove:()=>HT(e,t),getEl:()=>xr(e),getHtml:()=>VT(e),getLastRng:t.get}},t3=(e,t)=>(i.each(t,t=>{Si(t,RegExp)?e=e.replace(t,""):e=e.replace(t[0],t[1])}),e),KT=e=>{const n=Dt(),o=$n({},n);let t="";const a=n.getVoidElements(),r=i.makeMap("script noscript style textarea video audio iframe object"," "),c=n.getBlockElements(),s=e=>{const o=e.name,i=e;if(o==="br"){t+=`
`;return}if(o==="wbr")return;if(a[o]&&(t+=" "),r[o]){t+=" ";return}if(e.type===3&&(t+=e.value),!(e.name in n.getVoidElements())){let t=e.firstChild;if(t)do s(t);while(t=t.next)}c[o]&&i.next&&(t+=`
`,o==="p"&&(t+=`
`))};return e=t3(e,[/<!\[[^\]]+\]>/g]),s(o.parse(e)),t},s3=e=>{const t=(e,t,n)=>!t&&!n?" ":W;return e=t3(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e},YT=e=>{let t=0;return()=>e+t++},GT=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return i.hasOwn(n,t)?"image/"+n[t]:"image/"+t},XT=(e,t)=>{const n=$n({},e.schema);n.addNodeFilter("meta",e=>{i.each(e,e=>{e.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return At({validate:!0},e.schema).serialize(s)},a3=(e,t)=>({content:e,cancelled:t}),ZT=(e,t,n)=>{const o=e.dom.create("div",{style:"display:none"},t),s=ay(e,o,n);return a3(s.node.innerHTML,s.isDefaultPrevented())},JT=(e,t,n)=>{const s=ry(e,t,n),o=XT(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?ZT(e,o,n):a3(o,s.isDefaultPrevented())},ez=(e,t,n)=>JT(e,t,n),zr=(e,t)=>(e.insertContent(t,{merge:EC(e),paste:!0}),!0),Wr=e=>/^https?:\/\/[\w\-/+=.,!;:&%@^~(){}?#]+$/i.test(e),sz=(e,t)=>Wr(t)&&T(a4(e),e=>ap(t.toLowerCase(),`.${e.toLowerCase()}`)),oz=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),iz=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),az=(e,t,n)=>!!(!e.selection.isCollapsed()&&Wr(t))&&iz(e,t,n),rz=(e,t,n)=>!!sz(e,t)&&oz(e,t,n),cz=(e,t)=>{i.each([az,rz,zr],n=>!n(e,t,zr))},lz=(e,t,n)=>{n||!xC(e)?zr(e,t):cz(e,t)},dz=YT("mceclip"),d3=(e,t,n,s)=>{const o=ez(e,t,n);o.cancelled||lz(e,o.content,s)},Na=(e,t,n)=>{const s=n||Q2(t);d3(e,TT(t),s,!1)},Xr=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=r3(n,vC(e)),o=LT(s,ge(e),Ts(e));d3(e,o,!1,!0)},v3=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},is=(e,t)=>t in e&&e[t].length>0,b3=e=>is(e,"text/html")||is(e,"text/plain"),vz=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return r(n)?e.dom.encode(n[1]):void 0},bz=(e,t,n,s)=>{const o=dz(),i=Ru(e)&&r(n.name),c=i?vz(e,n.name):o,l=i?n.name:void 0,a=t.create(o,n,s,c,l);return t.add(a),a},jz=(e,t)=>{md(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const a=o?n:btoa(n),c=t.file,r=e.editorUpload.blobCache,i=r.getByData(a,s),l=i??bz(e,r,c,a);Na(e,`<img src="${l.blobUri()}">`,!1)})},yz=e=>e.type==="paste",_z=e=>Promise.all(b(e,e=>Cm(e).then(t=>({file:e,uri:t})))),wz=e=>{const t=a4(e);return e=>K(e.type,"image/")&&T(t,t=>GT(t)===e.type)},Oz=(e,t)=>{const n=t.items?ft(be(t.items),e=>e.kind==="file"?[e.getAsFile()]:[]):[],s=t.files?be(t.files):[];return m(n.length>0?n:s,wz(e))},O3=(e,t,n)=>{const s=yz(t)?t.clipboardData:t.dataTransfer;if(_a(e)&&s){const i=Oz(e,s);if(i.length>0)return t.preventDefault(),_z(i).then(t=>{n&&e.selection.setRng(n),o(t,t=>{jz(e,t)})}),!0}return!1},Cz=e=>{var t,n;return v.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},Ez=e=>u.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,C3=(e,t,n,s)=>{let o=s3(n);const i=is(t,sr())||Q2(n),a=!i&&DT(o),r=Wr(o);if((e3(o)||!o.length||a&&!r)&&(s=!0),(s||r)&&(is(t,"text/plain")&&a?o=t["text/plain"]:o=KT(o)),e3(o))return;s?Xr(e,o):Na(e,o,i)},Az=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",e=>{Ez(e)&&!e.isDefaultPrevented()&&(s=e.shiftKey&&e.keyCode===86)}),e.on("paste",i=>{if(i.isDefaultPrevented()||Cz(i))return;const r=n.get()==="text"||s;s=!1;const a=v3(i.clipboardData);if(!b3(a)&&O3(e,i,o()))return;is(a,"text/html")?(i.preventDefault(),C3(e,a,a["text/html"],r)):(t.create(),Oe.setEditorTimeout(e,()=>{const n=t.getHtml();t.remove(),C3(e,a,n,r)},0))})},Sz=e=>{const t=e=>K(e,"webkit-fake-url"),n=e=>K(e,"data:"),s=e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.paste)===!0};e.parser.addNodeFilter("img",(o,i,a)=>{if(!_a(e)&&s(a))for(const s of o){const i=s.attr("src");h(i)&&!s.attr("data-mce-object")&&i!==v.transparentSrc&&(t(i)?s.remove():!gC(e)&&n(i)&&s.remove())}})},Mz=(e,t,n)=>{Az(e,t,n),Sz(e)},Fz=(e,t)=>{t.get()==="text"?(t.set("html"),ch(e,!1)):(t.set("text"),ch(e,!0)),e.focus()},Tz=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Fz(e,t)}),e.addCommand("mceInsertClipboardContent",(t,n)=>{n.html&&Na(e,n.html,n.internal),n.text&&Xr(e,n.text)})},zz=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(sr(),t),!0}catch{return!1}else return!1},k3=(e,t,n,s)=>{zz(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},T3=e=>(t,n)=>{const{dom:s,selection:i}=e,o=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=s.create("div",{contenteditable:"true"},t);s.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(a),s.add(e.getBody(),o);const c=i.getRng();a.focus();const r=s.createRng();r.selectNodeContents(a),i.setRng(r),Oe.setEditorTimeout(e,()=>{i.setRng(c),s.remove(o),n()},0)},D3=e=>({html:FT(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Rz=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),R3=e=>!e.selection.isCollapsed()||Rz(e),Hz=e=>t=>{!t.isDefaultPrevented()&&R3(e)&&k3(t,D3(e),T3(e),()=>{if(v.browser.isChromium()||v.browser.isFirefox()){const t=e.selection.getRng();Oe.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Iz=e=>t=>{!t.isDefaultPrevented()&&R3(e)&&k3(t,D3(e),T3(e),g)},Bz=e=>{e.on("cut",Hz(e)),e.on("copy",Iz(e))},W3=(e,t)=>{var n,s;return pn.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},$z=e=>{const t=e["text/plain"];return!!t&&t.indexOf("file://")===0},U3=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Uz=e=>T(e.files,e=>/^image\//.test(e.type)),Kz=(e,t)=>{FC(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),_a(e)||e.on("drop",e=>{const t=e.dataTransfer;t&&Uz(t)&&e.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const o=W3(e,n);if(D(o))return;const s=v3(n.dataTransfer),r=is(s,sr());if((!b3(s)||$z(s))&&O3(e,n,o))return;const i=s[sr()],a=i||s["text/html"]||s["text/plain"];a&&(n.preventDefault(),Oe.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),U3(e,o);const t=s3(a);s["text/html"]?Na(e,t,r):Xr(e,t)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",n=>{_a(e)&&!t.get()&&(n.preventDefault(),U3(e,W3(e,n))),n.type==="dragend"&&t.set(!1)})},qz=e=>{const t=t=>n=>{t(e,n)},n=MC(e);_(n)&&e.on("PastePreProcess",t(n));const s=SC(e);_(s)&&e.on("PastePostProcess",t(s))},Yz=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},Gz=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,K3=e=>i.trim(e).replace(Gz,Ba).toLowerCase(),Qz=(e,t,n)=>{const o=AC(e);if(n||o==="all"||!kC(e))return t;const s=o?o.split(/[, ]/):[];if(s&&o!=="none"){const n=e.dom,o=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,i,a)=>{const l=n.parseStyle(n.decode(i)),r={};for(let e=0;e<s.length;e++){const a=l[s[e]];let t=a,i=n.getStyle(o,s[e],!0);/color/.test(s[e])&&(t=K3(t),i=K3(i)),i!==t&&(r[s[e]]=a)}const c=n.serializeStyle(r,"span");return c?t+' style="'+c+'"'+a:t+a})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,n,s)=>t+' style="'+n+'"'+s),t},Zz=e=>{(v.browser.isChromium()||v.browser.isSafari())&&Yz(e,Qz)},Jz=e=>{const n=V(!1),t=V(jC(e)?"text":"html"),s=WT(e);Zz(e),Tz(e,t),qz(e),e.on("PreInit",()=>{Bz(e),Kz(e,n),Mz(e,s,t)})},eD=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},tD=e=>{e.parser.addNodeFilter("details",e=>{o(e,e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",e=>{o(e,e=>{const t=e.attr("data-mce-open");e.attr("open",h(t)?t:null),e.attr("data-mce-open",null)})})},nD=e=>{eD(e),tD(e)},sD=F,rh=s,iD=e=>C(e.dom),aD=e=>Ne(e.dom),lh=e=>n=>j(t.fromDom(e),n),cD=(e,n)=>On(t.fromDom(e),e=>aD(e)||De(e),lh(n)).getOr(t.fromDom(n)).dom,dh=(e,n)=>On(t.fromDom(e),iD,lh(n)),uh=(e,t,n)=>{const s=new P(e,t),o=n?s.next.bind(s):s.prev.bind(s);let i=e;for(let t=n?e:o();t&&!sD(t);t=o())Fe(t)&&(i=t);return i},uD=(e,t)=>{const c=n.fromRangeStart(e),r=c.getNode(),i=cD(r,t),a=uh(r,i,!1),o=uh(r,i,!0),s=document.createRange();return dh(a,i).fold(()=>{rh(a)?s.setStart(a,0):s.setStartBefore(a)},e=>s.setStartBefore(e.dom)),dh(o,i).fold(()=>{rh(o)?s.setEnd(o,o.data.length):s.setEndAfter(o)},e=>s.setEndAfter(e.dom)),s},hD=e=>{const t=uD(e.selection.getRng(),e.getBody());e.selection.setRng(Yc(t))},mD=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),hD(e))})};(function(e){e.Before="before",e.After="after"})(Zn||(Zn={}));const pD=(e,t)=>Math.abs(e.left-t),gD=(e,t)=>Math.abs(e.right-t),vD=(e,t)=>e>=t.top&&e<=t.bottom,bD=(e,t)=>e.top<t.bottom&&e.bottom>t.top,jD=(e,t)=>{const n=jS(e,t)/Math.min(e.height,t.height);return bD(e,t)&&n>.5},yD=(e,t)=>{const n=m(e,e=>vD(t,e));return wS(n).fold(()=>[[],e],t=>{const{pass:n,fail:s}=zo(e,e=>jD(e,t));return[n,s]})},_D=(e,t)=>({node:e.node,position:pD(e,t)<gD(e,t)?Zn.Before:Zn.After}),wD=(e,t)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),$c=(t,n,o)=>{const i=t=>Fe(t.node)?e.some(t):c(t.node)?$c(be(t.node.childNodes),n,o):e.none(),r=(t,a)=>{if(t.length>=2){const r=i(t[0]).getOr(t[0]),c=i(t[1]).getOr(t[1]),l=Math.abs(a(r,n,o)-a(c,n,o));if(l<2){if(s(r.node))return e.some(r);if(s(c.node))return e.some(c)}}return e.none()},a=(e,t)=>{const s=Qn(e,(e,s)=>t(e,n,o)-t(s,n,o));return r(s,t).orThunk(()=>ts(s,i))},[l,d]=yD(G1(t),o),{pass:u,fail:h}=zo(d,e=>e.top<o);return a(l,wD).orThunk(()=>a(h,U4)).orThunk(()=>a(u,U4))},xD=(t,n,s,o)=>{const i=(n,a)=>{const l=e=>c(e)&&e.classList.contains("mce-drag-container"),r=m(n.dom.childNodes,ci(l));return a.fold(()=>$c(r,s,o),e=>{const t=m(r,t=>t!==e.dom);return $c(t,s,o)}).orThunk(()=>{const s=j(n,t)?e.none():T8(n);return s.bind(t=>i(t,e.some(n)))})};return i(n,e.none())},CD=(e,n,s)=>{const o=t.fromDom(e),i=dt(o),a=t.fromPoint(i,n,s).filter(e=>ut(o,e)),r=a.getOr(o);return xD(o,r,n,s)},mh=(e,t,n)=>CD(e,t,n).filter(e=>wo(e.node)).map(e=>_D(e,t)),bh=e=>{var n,s;const o=e.getBoundingClientRect(),i=e.ownerDocument,a=i.documentElement,t=i.defaultView;return{top:o.top+((n=t?.scrollY)!==null&&n!==void 0?n:0)-a.clientTop,left:o.left+((s=t?.scrollX)!==null&&s!==void 0?s:0)-a.clientLeft}},AD=e=>e.inline?bh(e.getBody()):{left:0,top:0},SD=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},MD=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},FD=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=bh(e.getContentAreaContainer()),s=MD(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},TD=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),zD=(e,t)=>TD(AD(e),SD(e),FD(e,t)),Ri=32,ND=100,Li=8,Ni=16,ol=C,HD=iS(ol,Ne),ID=(e,t)=>ol(t)&&t!==e,BD=(e,t,n)=>!D(t)&&t!==n&&!e.dom.isChildOf(t,n)&&!ol(t),VD=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},$D=(e,t,n,s)=>{const o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:s}),o.setAttrib(i,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a},WD=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},zi=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},yh=zi("left",-Ri),_h=zi("left",Ri),Oh=zi("top",-Ri),xh=zi("top",Ri),XD=(e,t,n,s,o,i,a,r,c,l,d,u)=>{let h=0,m=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(h=t.pageX+n-o),t.pageY+s>i&&(m=t.pageY+s-i),e.style.width=n-h+"px",e.style.height=s-m+"px";const g=c.clientHeight,v=c.clientWidth,f=a+c.getBoundingClientRect().top,p=r+c.getBoundingClientRect().left;d.on(e=>{e.intervalId.clear(),e.dragging&&u&&(a+Li>=g?e.intervalId.set(xh(l)):a-Li<=0?e.intervalId.set(Oh(l)):r+Li>=v?e.intervalId.set(_h(l)):r-Li<=0?e.intervalId.set(yh(l)):f+Ni>=window.innerHeight?e.intervalId.set(xh(window)):f-Ni<=0?e.intervalId.set(Oh(window)):p+Ni>=window.innerWidth?e.intervalId.set(_h(window)):p-Ni<=0&&e.intervalId.set(yh(window)))})},Sh=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},ZD=e=>e.button===0,JD=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),eN=(e,t)=>n=>{if(ZD(n)){const s=I(t.dom.getParents(n.target),HD).getOr(null);if(r(s)&&ID(t.getBody(),s)){const o=t.dom.getPos(s),i=t.getBody(),a=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?i.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?i.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:$D(t,s,s.offsetWidth,s.offsetHeight),intervalId:QS(ND)})}}},tN=(e,t)=>{const n=Di((e,n)=>{t._selectionOverrides.hideFakeCaret(),mh(t.getBody(),e,n).fold(()=>t.selection.placeCaretAt(e,n),s=>{const o=t._selectionOverrides.showCaret(1,s.node,s.position===Zn.Before,!1);o?t.selection.setRng(o):t.selection.placeCaretAt(e,n)})},0);t.on("remove",n.cancel);const s=e;return o=>e.on(e=>{const i=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&i>10){const n=t.dispatch("dragstart",{target:e.element});if(n.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const i=o.currentTarget===t.getDoc().documentElement,a=JD(e,zD(t,o));WD(e.ghost,t.getBody()),XD(e.ghost,a,e.width,e.height,e.maxX,e.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,i),n.throttle(o.clientX,o.clientY)}})},nN=e=>{const t=e.getSel();if(r(t)){const n=t.getRangeAt(0),e=n.startContainer;return s(e)?e.parentNode:e}return null},sN=(e,t)=>n=>{e.on(e=>{if(e.intervalId.clear(),e.dragging){if(BD(t,nN(t.selection),e.element)){const s=VD(e.element),o=t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||t.undoManager.transact(()=>{Sh(e.element),t.insertContent(t.dom.getOuterHTML(s)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),Th(e)},oN=(e,t)=>()=>{e.on(e=>{e.intervalId.clear(),e.dragging&&t.dispatch("dragend")}),Th(e)},Th=e=>{e.on(e=>{e.intervalId.clear(),Sh(e.ghost)}),e.clear()},aN=e=>{const t=It(),n=w.DOM,s=document,a=eN(t,e),o=tN(t,e),r=sN(t,e),i=oN(t,e);e.on("mousedown",a),e.on("mousemove",o),e.on("mouseup",r),n.bind(s,"mousemove",o),n.bind(s,"mouseup",i),e.on("remove",()=>{n.unbind(s,"mousemove",o),n.unbind(s,"mouseup",i)}),e.on("keydown",e=>{e.keyCode===u.ESC&&i()})},rN=e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&(O(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),t.type==="drop"&&xa(e,"Dropped file type is not supported"))}},n=n=>{ar(e,n.target)&&t(n)},s=()=>{const s=w.DOM,i=e.dom,a=document,r=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];o(c,e=>{s.bind(a,e,n),i.bind(r,e,t)}),e.on("remove",()=>{o(c,e=>{s.unbind(a,e,n),i.unbind(r,e,t)})})};e.on("init",()=>{Oe.setEditorTimeout(e,s,0)})},cN=e=>{aN(e),QC(e)&&rN(e)},lN=e=>{const t=Di(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=dc(e,t,!1);e.selection.setRng(n)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},dN=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(nt(n)){const t=yn(e.getBody(),n),s=C(t)?t:n;e.selection.getNode()!==s&&Vs(e,s).each(t=>e.selection.setRng(t))}})})},Gn=C,El=(e,t)=>yn(e.getBody(),t),mN=e=>{const d=e.selection,n=e.dom,a=e.getBody(),g=xx(e,a,n.isBlock,()=>Mn(e)),b="sel-"+n.uniqueId(),l="data-mce-selected";let i;const T=e=>r(e)&&n.hasClass(e,"mce-offscreen-selection"),_=e=>e!==a&&(Gn(e)||nt(e))&&n.isChildOf(e,a),S=e=>{e&&d.setRng(e)},h=(t,n,s,o=!0)=>{const i=e.dispatch("ShowCaret",{target:n,direction:t,before:s});return i.isDefaultPrevented()?null:(o&&d.scrollIntoView(n,t===-1),g.show(s,n))},M=e=>{e.hasAttribute("data-mce-caret")&&(cc(e),d.scrollIntoView(e))},O=()=>{e.on("click",t=>{const n=El(e,t.target);n&&Gn(n)&&(t.preventDefault(),e.focus())}),e.on("blur NewBlock",v),e.on("ResizeWindow FullscreenStateChanged",g.reposition),e.on("tap",t=>{const n=t.target,s=El(e,n);Gn(s)?(t.preventDefault(),Vs(e,s).each(m)):_(n)&&Vs(e,n).each(m)},!0),e.on("mousedown",t=>{const s=t.target;if(s!==a&&s.nodeName!=="HTML"&&!n.isChildOf(s,a))return;if(!B_(e,t.clientX,t.clientY))return;v(),p();const o=El(e,s);Gn(o)?(t.preventDefault(),Vs(e,o).each(m)):mh(a,t.clientX,t.clientY).each(n=>{t.preventDefault();const s=h(1,n.node,n.position===Zn.Before,!1);S(s),c(o)?o.focus():e.getBody().focus()})}),e.on("keypress",e=>{if(u.modifierPressed(e))return;Gn(d.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let t=e.range;if(i){if(!i.parentNode){i=null;return}t=t.cloneRange(),t.selectNode(i),e.range=t}}),e.on("SetSelectionRange",e=>{e.range=x(e.range);const t=m(e.range,e.forward);t&&(e.range=t)});const t=e=>c(e)&&e.id==="mcepastebin";e.on("AfterSetSelectionRange",e=>{const n=e.range,s=n.startContainer.parentElement;!y(n)&&!t(s)&&p(),T(s)||v()}),cN(e),lN(e),dN(e)},w=e=>ke(e)||pa(e)||ga(e),y=e=>w(e.startContainer)||w(e.endContainer),x=t=>{const a=e.schema.getVoidElements(),s=n.createRng(),o=t.startContainer,r=t.startOffset,i=t.endContainer,c=t.endOffset;return f(a,o.nodeName.toLowerCase())?r===0?s.setStartBefore(o):s.setStartAfter(o):s.setStart(o,r),f(a,i.nodeName.toLowerCase())?c===0?s.setEndBefore(i):s.setEndAfter(i):s.setEnd(i,c),s},E=(s,o)=>{const l=t.fromDom(e.getBody()),r=e.getDoc(),i=$o(l,"#"+b).getOrThunk(()=>{const e=t.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',r);return $(e,"id",b),H(l,e),e}),a=n.createRng();ro(i),Jt(i,[t.fromText(W,r),t.fromDom(o),t.fromText(W,r)]),a.setStart(i.dom.firstChild,1),a.setEnd(i.dom.lastChild,0),ya(i,{top:n.getPos(s,e.getBody()).y+"px"}),Ym(i);const c=d.getSel();return c&&(c.removeAllRanges(),c.addRange(a)),a},k=s=>{const r=s.cloneNode(!0),a=e.dispatch("ObjectSelected",{target:s,targetClone:r});if(a.isDefaultPrevented())return null;const c=E(s,a.targetClone),d=t.fromDom(s);return o(J(t.fromDom(e.getBody()),`*[${l}]`),e=>{j(d,e)||G(e,l)}),n.getAttrib(s,l)||s.setAttribute(l,"1"),i=s,p(),c},m=(e,t)=>{if(!e)return null;if(e.collapsed){if(!y(e)){const c=t?1:-1,i=No(c,a,e),s=i.getNode(!t);if(r(s)){if(wo(s))return h(c,s,!!t&&!i.isAtEnd(),!1);if(Nt(s)&&C(s.nextSibling)){const e=n.createRng();return e.setStart(s,0),e.setEnd(s,0),e}}const o=i.getNode(t);if(r(o)){if(wo(o))return h(c,o,!t&&!i.isAtEnd(),!1);if(Nt(o)&&C(o.previousSibling)){const e=n.createRng();return e.setStart(o,1),e.setEnd(o,1),e}}}return null}let o=e.startContainer,i=e.startOffset;const l=e.endOffset;if(s(o)&&i===0&&Gn(o.parentNode)&&(o=o.parentNode,i=n.nodeIndex(o),o=o.parentNode),!c(o))return null;if(l===i+1&&o===e.endContainer){const e=o.childNodes[i];if(_(e))return k(e)}return null},v=()=>{i&&i.removeAttribute(l),$o(t.fromDom(e.getBody()),"#"+b).each(A),i=null},F=()=>{g.destroy(),i=null},p=()=>{g.hide()};return rt(e)||O(),{showCaret:h,showBlockCaretContainer:M,hideFakeCaret:p,destroy:F}},fN=(e,t)=>{let n=t;for(let t=e.previousSibling;s(t);t=t.previousSibling)n+=t.data.length;return n},Hh=(e,t,n,o,i)=>{if(s(n)&&(o<0||o>n.data.length))return[];const r=i&&s(n)?[fN(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)r.push(e.nodeIndex(a,i)),a=a.parentNode;return a===t?r.reverse():[]},Ll=(e,t,n,s,o,i,a=!1)=>{const r=Hh(e,t,n,s,a),c=Hh(e,t,o,i,a);return{start:r,end:c}},Kh=(t,n)=>{const i=n.slice(),o=i.pop();if($e(o)){const n=je(i,(t,n)=>t.bind(t=>e.from(t.childNodes[n])),e.some(t));return n.bind(t=>s(t)&&(o<0||o>t.data.length)?e.none():e.some({node:t,offset:o}))}return e.none()},Gh=(e,t)=>Kh(e,t.start).bind(({node:n,offset:s})=>Kh(e,t.end).map(({node:e,offset:t})=>{const o=document.createRange();return o.setStart(n,s),o.setEnd(e,t),o})),jN=(e,t,n,s=!1)=>Ll(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Hn=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Hn(e,s,n)}},ei=(e,t,n,o=!0)=>{const i=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(s(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),s(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Hn(e,i,n),i!==a&&Hn(e,a,n))},Gl=(t,n)=>e.from(t.dom.getParent(n.startContainer,t.dom.isBlock)),am=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:o1(s).concat(e.blockPatterns),inlinePatterns:Ku(s).concat(e.inlinePatterns)}},mm=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},fm=(e,t,n)=>{const s=CA(t,0,t);s.each(s=>{const o=s.container;$1(o,n.start.length,t).each(n=>{const s=e.createRng();s.setStart(o,0),s.setEnd(n.container,n.offset),ei(e,s,e=>e===t)})})},EN=(e,t)=>{const s=e.dom,n=t.pattern,o=Gh(s.getRoot(),t.range).getOrDie("Unable to resolve path range"),i=(e,t)=>{const n=t.get(e);return R(n)&&ue(n).exists(e=>f(e,"block"))};return Gl(e,o).each(t=>{n.type==="block-format"?i(n.format,e.formatter)&&e.undoManager.transact(()=>{fm(e.dom,t,n),e.formatter.apply(n.format)}):n.type==="block-command"&&e.undoManager.transact(()=>{fm(e.dom,t,n),e.execCommand(n.cmd,!1,n.value)})}),!0},kN=e=>Qn(e,(e,t)=>t.start.length-e.start.length),AN=(e,t)=>{const n=kN(e),s=t.replace(W," ");return I(n,e=>t.indexOf(e.start)===0||s.indexOf(e.start)===0)},SN=(e,t,n,s)=>{var o;const a=e.dom,c=ge(e);if(!a.is(t,c))return[];const r=(o=t.textContent)!==null&&o!==void 0?o:"";return AN(n.blockPatterns,r).map(e=>i.trim(r).length===e.start.length?[]:[{pattern:e,range:Ll(a,a.getRoot(),t,0,t,0,s)}]).getOr([])},MN=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();o(t,t=>EN(e,t)),e.selection.moveToBookmark(n)},gm=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Ai=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},Em=(e,t,n)=>{const s=Gh(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,i=s.endContainer,a=s.endOffset===0?i:i.splitText(s.endOffset),r=s.startOffset===0?o:o.splitText(s.startOffset),c=r.parentNode,l=a.parentNode;return{prefix:t,end:l.insertBefore(gm(e,t+"-end"),a),start:c.insertBefore(gm(e,t+"-start"),r)}},Am=(e,t,n)=>{Hn(e,e.get(t.prefix+"-end"),n),Hn(e,e.get(t.prefix+"-start"),n)},fd=e=>e.start.length===0,LN=e=>(t,n)=>{const a=t.data,s=a.substring(0,n),o=s.lastIndexOf(e.charAt(e.length-1)),i=s.lastIndexOf(e);return i!==-1?i+e.length:o!==-1?o+1:-1},Pm=(t,n,s,o)=>{const i=n.start,a=Dd(t,o.container,o.offset,LN(i),s);return a.bind(o=>{var a,r;const c=(r=(a=s.textContent)===null||a===void 0?void 0:a.indexOf(i))!==null&&r!==void 0?r:-1,l=c!==-1&&o.offset>=c+i.length;if(l){const n=t.createRng();return n.setStart(o.container,o.offset-i.length),n.setEnd(o.container,o.offset),e.some(n)}const d=o.offset-i.length;return Hd(o.container,d,s).map(e=>{const n=t.createRng();return n.setStart(e.container,e.offset),n.setEnd(o.container,o.offset),n}).filter(e=>e.toString()===i).orThunk(()=>Pm(t,n,s,Ve(o.container,0)))})},PN=(t,n,s,o,i,a=!1)=>{if(n.start.length===0&&!a){const n=t.createRng();return n.setStart(s,o),n.setEnd(s,o),e.some(n)}return Wd(s,o,i).bind(s=>{const o=Pm(t,n,i,s);return o.bind(t=>{var n;if(a){if(t.endContainer===s.container&&t.endOffset===s.offset)return e.none();if(s.offset===0&&((n=t.endContainer.textContent)===null||n===void 0?void 0:n.length)===t.endOffset)return e.none()}return e.some(t)})})},HN=(t,n,s,o)=>{const i=t.dom,r=i.getRoot(),a=s.pattern,c=s.position.container,l=s.position.offset;return Hd(c,l-s.pattern.end.length,n).bind(d=>{const u=Ll(i,r,d.container,d.offset,c,l,o);if(fd(a))return e.some({matches:[{pattern:a,startRng:u,endRng:u}],position:d});const h=Fi(t,s.remainingPatterns,d.container,d.offset,n,o),m=h.getOr({matches:[],position:d}),f=m.position,p=PN(i,a,f.container,f.offset,n,h.isNone());return p.map(e=>{const t=jN(i,r,e,o);return{matches:m.matches.concat([{pattern:a,startRng:t,endRng:u}]),position:Ve(e.startContainer,e.startOffset)}})})},Fi=(t,n,s,o,i,a)=>{const r=t.dom;return Wd(s,o,r.getRoot()).bind(c=>{const l=mm(r,i,s,o);for(let e=0;e<n.length;e++){const d=n[e];if(!ap(l,d.end))continue;const u=n.slice();u.splice(e,1);const r=HN(t,i,{pattern:d,remainingPatterns:u,position:c},a);if(r.isNone()&&o>0)return Fi(t,n,s,o-1,i,a);if(r.isSome())return r}return e.none()})},o8=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?o(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},VN=(e,t,n,s)=>{const o=Ai(e.dom,n);ei(e.dom,o,s),o8(e,t,o)},$N=(e,t,n,s,o)=>{const i=e.dom,a=Ai(i,s),r=Ai(i,n);ei(i,r,o),ei(i,a,o);const c={prefix:n.prefix,start:n.end,end:s.start},l=Ai(i,c);o8(e,t,l)},WN=(e,t)=>{const n=l0("mce_textpattern"),s=di(t,(t,s)=>{const o=Em(e,n+`_end${t.length}`,s.endRng);return t.concat([{...s,endMarker:o}])},[]);return di(s,(t,o)=>{const i=s.length-t.length-1,a=fd(o.pattern)?o.endMarker:Em(e,n+`_start${i}`,o.startRng);return t.concat([{...o,startMarker:a}])},[])},UN=e=>Qn(e,(e,t)=>t.end.length-e.end.length),KN=(e,t)=>{const n=qt(e,e=>T(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},i8=(e,t,n,s,o,i)=>{const a=Fi(e,o.inlinePatterns,n,s,t,i).fold(()=>[],e=>e.matches),r=Fi(e,UN(o.inlinePatterns),n,s,t,i).fold(()=>[],e=>e.matches);return KN(a,r)},a8=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),i=WN(n,t);o(i,t=>{const o=n.getParent(t.startMarker.start,n.isBlock),s=e=>e===o;fd(t.pattern)?VN(e,t.pattern,t.endMarker,s):$N(e,t.pattern,t.startMarker,t.endMarker,s),Am(n,t.endMarker,s),Am(n,t.startMarker,s)}),e.selection.moveToBookmark(s)},GN=(e,t)=>{const n=e.selection.getRng();return Gl(e,n).map(s=>{var o;const c=Math.max(0,n.startOffset),i=am(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),a=i8(e,s,n.startContainer,c,i,!0),r=SN(e,s,i,!0);return(r.length>0||a.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Nn),a8(e,a),MN(e,r);const t=e.selection.getRng(),n=Wd(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),n.each(t=>{const n=t.container;n.data.charAt(t.offset-1)===Nn&&(n.deleteData(t.offset-1,1),Hn(e.dom,n.parentNode,t=>t===e.dom.getRoot()))})}),!0)}).getOr(!1)},XN=(e,t)=>{const n=e.selection.getRng();Gl(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),a=mm(e.dom,s,n.startContainer,o),r=am(t,s,a),i=i8(e,s,n.startContainer,o,r,!1);i.length>0&&e.undoManager.transact(()=>{a8(e,i)})})},c8=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},ZN=(e,t)=>c8(e,t,(e,t)=>e===t.keyCode&&!u.modifierPressed(t)),JN=(e,t)=>c8(e,t,(e,t)=>e.charCodeAt(0)===t.charCode),eL=e=>{const o=[",",".",";",":","!","?"],i=[32],t=()=>cA(fC(e),hC(e)),n=()=>tC(e);e.on("keydown",s=>{if(s.keyCode===13&&!u.modifierPressed(s)&&e.selection.isCollapsed()){const o=t(),i=o.inlinePatterns.length>0||o.blockPatterns.length>0||n();i&&GN(e,o)&&s.preventDefault()}},!0);const s=()=>{if(e.selection.isCollapsed()){const s=t(),o=s.inlinePatterns.length>0||n();o&&XN(e,s)}};e.on("keyup",e=>{ZN(i,e)&&s()}),e.on("keypress",t=>{JN(o,t)&&Oe.setEditorTimeout(e,s)})},tL=e=>{eL(e)},nL=e=>{const O=i.each,r=u.BACKSPACE,k=u.DELETE,t=e.dom,n=e.selection,L=e.parser,c=v.browser,a=c.isFirefox(),E=c.isChromium()||c.isSafari(),h=v.deviceType.isiPhone()||v.deviceType.isiPad(),R=v.os.isMacOS()||v.os.isiOS(),o=(t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},s=e=>e.isDefaultPrevented(),D=()=>{const o=e=>{const s=t.create("body"),o=e.cloneContents();return s.appendChild(o),n.serializer.serialize(s,{format:"html"})},i=n=>{const i=o(n),s=t.createRng();s.selectNode(e.getBody());const a=o(s);return i===a};e.on("keydown",n=>{const o=n.keyCode;if(!s(n)&&(o===k||o===r)){const o=e.selection.isCollapsed(),s=e.getBody();if(o&&!t.isEmpty(s))return;if(!o&&!i(e.selection.getRng()))return;n.preventDefault(),e.setContent(""),s.firstChild&&t.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})},j=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},y=()=>{e.inline||t.bind(e.getDoc(),"mousedown mouseup",t=>{let s;if(t.target===e.getDoc().documentElement)if(s=n.getRng(),e.getBody().focus(),t.type==="mousedown"){if(ke(s.startContainer))return;n.placeCaretAt(t.clientX,t.clientY)}else n.setRng(s)})},A=()=>{e.on("keydown",o=>{if(!s(o)&&o.keyCode===r){if(!e.getBody().getElementsByTagName("hr").length)return;if(n.isCollapsed()&&n.getRng().startOffset===0){const s=n.getNode(),e=s.previousSibling;if(s.nodeName==="HR"){t.remove(s),o.preventDefault();return}e&&e.nodeName&&e.nodeName.toLowerCase()==="hr"&&(t.remove(e),o.preventDefault())}}})},w=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!s(t)&&t.target.nodeName==="HTML"){const t=e.getBody();t.blur(),Oe.setEditorTimeout(e,()=>{t.focus()})}})},l=()=>{const s=F1(e);e.on("click",o=>{const i=o.target;/^(IMG|HR)$/.test(i.nodeName)&&t.getContentEditableParent(i)!=="false"&&(o.preventDefault(),e.selection.select(i),e.nodeChanged()),i.nodeName==="A"&&t.hasClass(i,s)&&i.childNodes.length===0&&(o.preventDefault(),n.select(i))})},T=()=>{const o=()=>{const s=t.getAttribs(n.getStart().cloneNode(!1));return()=>{const o=n.getStart();o!==e.getBody()&&(t.setAttrib(o,"style",null),O(s,e=>{o.setAttributeNode(e.cloneNode(!0))}))}},i=()=>!n.isCollapsed()&&t.getParent(n.getStart(),t.isBlock)!==t.getParent(n.getEnd(),t.isBlock);e.on("keypress",t=>{let n;return!(!s(t)&&(t.keyCode===8||t.keyCode===46)&&i())||(n=o(),e.getDoc().execCommand("delete",!1),n(),t.preventDefault(),!1)}),t.bind(e.getDoc(),"cut",t=>{if(!s(t)&&i()){const t=o();Oe.setEditorTimeout(e,()=>{t()})}})},C=()=>{e.on("keydown",e=>{if(!s(e)&&e.keyCode===r&&n.isCollapsed()&&n.getRng().startOffset===0){const t=n.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()==="table")return e.preventDefault(),!1}return!0})},F=()=>{e.on("keydown",o=>{if(s(o)||o.keyCode!==u.BACKSPACE)return;let a=n.getRng();const r=a.startContainer,c=a.startOffset,l=t.getRoot();let i=r;if(!a.collapsed||c!==0)return;for(;i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==l;)i=i.parentNode;i.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,i),a=t.createRng(),a.setStart(r,0),a.setEnd(r,0),n.setRng(a))})},d=()=>{const t=()=>{o("StyleWithCSS",!1),o("enableInlineTableEditing",!1),n1(e)||o("enableObjectResizing",!1)};x1(e)||e.on("BeforeExecCommand mousedown",t)},z=()=>{const n=()=>{O(t.select("a:not([data-mce-block])"),e=>{let n=e.parentNode;const o=t.getRoot();if(n?.lastChild===e){for(var s;n&&!t.isBlock(n);){if(((s=n.parentNode)===null||s===void 0?void 0:s.lastChild)!==n||n===o)return;n=n.parentNode}t.add(n,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",e=>{(e.type==="setcontent"||e.command==="mceInsertLink")&&n()})},S=()=>{e.on("init",()=>{o("DefaultParagraphSeparator",ge(e))})},M=e=>{const n=e.getBody(),t=e.selection.getRng();return t.startContainer===t.endContainer&&t.startContainer===n&&t.startOffset===0&&t.endOffset===n.childNodes.length},N=()=>{e.on("keyup focusin mouseup",t=>{!u.modifierPressed(t)&&!M(e)&&n.normalize()},!0)},x=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},b=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let n;t.target.nodeName==="HTML"&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())}))},p=()=>{R&&e.on("keydown",t=>{if(u.metaKeyPressed(t)&&!t.shiftKey&&(t.keyCode===37||t.keyCode===39)){t.preventDefault();const n=e.selection.getSel();n.modify("move",t.keyCode===37?"backward":"forward","lineboundary")}})},f=()=>{e.on("click",e=>{let t=e.target;do if(t.tagName==="A"){e.preventDefault();return}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},m=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})},P=()=>{L.addNodeFilter("br",e=>{let t=e.length;for(;t--;)e[t].attr("class")==="Apple-interchange-newline"&&e[t].remove()})},H=g,I=()=>{if(!a||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||t.rangeCount===0},B=()=>{E&&(y(),l(),m(),j(),h&&(_(),b(),f())),a&&(w(),d(),x(),p())},V=()=>{F(),D(),v.windowsPhone||N(),E&&(y(),l(),S(),m(),C(),P(),h?(_(),b(),f()):j()),a&&(A(),w(),T(),d(),z(),x(),p(),C())};return rt(e)?B():V(),{refreshContentEditable:H,isHidden:I}},$d=w.DOM,oL=(e,n)=>{const o=t.fromDom(e.getBody()),i=Gd(Ft(o)),s=t.fromTag("style");$(s,"type","text/css"),H(s,t.fromText(n)),H(i,s),e.on("remove",()=>{A(s)})},iL=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Ud=e=>co(e,e=>ae(e)===!1),b8=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Ud({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:iL(e),validate:!0,blob_cache:n,document:e.getDoc()})},j8=e=>{const t=e.options.get;return Ud({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},lL=e=>{const t=e.options.get;return{...b8(e),...j8(e),...Ud({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},dL=e=>{const t=$n(b8(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,n)=>{const o=e.dom,s="data-mce-"+n;let i=t.length;for(;i--;){const r=t[i];let a=r.attr(n);if(a&&!r.attr(s)){if(a.indexOf("data:")===0||a.indexOf("blob:")===0)continue;n==="style"?(a=o.serializeStyle(o.parseStyle(a),r.name),a.length||(a=null),r.attr(s,a),r.attr(n,a)):n==="tabindex"?(r.attr(s,a),r.attr(n,null)):r.attr(s,e.convertURL(a,n,r.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){const n=e[t],s=n.attr("type")||"no/type";s.indexOf("mce-")!==0&&n.attr("type","mce-"+s)}}),nC(e)&&t.addNodeFilter("#cdata",t=>{let s=t.length;for(var n;s--;){const o=t[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode((n=o.value)!==null&&n!==void 0?n:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let n=t.length;const s=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(s)&&e.getAll("br").length===0&&e.append(new he("br",1))}}),t},uL=e=>{const t=DC(e);t&&Oe.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},hL=e=>{const t=e.dom.getRoot();!e.inline&&(!Ja(e)||e.selection.getStart(!0)===t)&&oe(t).each(t=>{const n=t.getNode(),s=wt(n)?oe(n).getOr(t):t;e.selection.setRng(s.toRange())})},mL=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Xy(e),e.focus(!0),hL(e),e.nodeChanged({initial:!0});const t=LC(e);_(t)&&t.call(e,e),uL(e)},y8=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,pL=(e,t,n)=>{const s=[y8(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},_8=e=>{const r=y8(e),t=Ju(e),n=e.contentCSS,s=()=>{r.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(t)},o=()=>{e.removed?s():e.on("remove",s)};if(e.contentStyles.length>0){let t="";i.each(e.contentStyles,e=>{t+=e+`
`}),e.dom.addStyle(t)}const c=Promise.all(pL(e,n,t)).then(o).catch(o),a=UE(e);return a&&oL(e,a),c},vL=e=>{const o=e.getDoc(),t=e.getBody();p_(e),zC(e)||(o.body.spellcheck=!1,$d.setAttrib(t,"spellcheck","false")),e.quirks=nL(e),l_(e);const n=IE(e);n!==void 0&&(t.dir=n);const s=TC(e);s&&e.on("BeforeSetContent",e=>{i.each(s,t=>{e.content=e.content.replace(t,e=>"<!--mce:protected "+escape(e)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing=t.type==="compositionstart"})},bL=e=>{rt(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},fu=e=>{e.removed!==!0&&(bL(e),mL(e))},k8=e=>{const n=e.getElement();let s=e.getDoc();e.inline&&($d.addClass(n,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const t=e.getBody();t.disabled=!0,e.readonly=x1(e),e.readonly||(e.inline&&$d.getStyle(t,"position",!0)==="static"&&(t.style.position="relative"),t.contentEditable="true"),t.disabled=!1,e.editorUpload=Ew(e),e.schema=Dt(j8(e)),e.dom=w(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:nk(e),referrerPolicy:lu(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=dL(e),e.serializer=q3(lL(e),e),e.selection=Y3(e.dom,e.getWin(),e.serializer,e),e.annotator=L3(e),e.formatter=k2(e),e.undoManager=w2(e),e._nodeChangeDispatcher=new kT(e),e._selectionOverrides=mN(e),FE(e),nD(e),$E(e),rt(e)||(mD(e),tL(e));const o=ET(e);EE(e,o),HE(e),Jw(e),Jz(e);const i=iy(e);vL(e),i.fold(()=>{_8(e).then(()=>fu(e))},t=>{e.setProgressState(!0),_8(e).then(()=>{t().then(t=>{e.setProgressState(!1),fu(e),ih(e)},t=>{e.notificationManager.open({type:"error",text:String(t)}),fu(e),ih(e)})})})},D8=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline){const n=e.iframeElement,s=fw(t.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,k8(e)});if(v.browser.isFirefox()){const t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close()}else n.srcdoc=e.iframeHTML}else k8(e)},iu=w.DOM,OL=(e,n,s,o)=>{const i=t.fromTag("iframe");return o.each(e=>$(i,"tabindex",e)),Ct(i,s),Ct(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),lo(i,"tox-edit-area__iframe"),i},xL=e=>{let t=Mk(e)+"<html><head>";xu(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Ek(e),s=xk(e),o=e.translate($C(e));return ku(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+ku(e)+'" />'),t+="</head>"+`<body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}">`+"<br></body></html>",t},CL=(e,n)=>{const o=e.translate("Rich Text Area"),i=mt(t.fromDom(e.getElement()),"tabindex").bind(tr),s=OL(e.id,o,Fk(e),i).dom;s.onload=()=>{s.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=s,e.iframeHTML=xL(e),iu.add(n.iframeContainer,s)},EL=(e,t)=>{CL(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=iu.isHidden(t.editorContainer)),e.getElement().style.display="none",iu.setAttrib(e.id,"aria-hidden","true"),D8(e)},P8=w.DOM,AL=(e,t,n)=>{const s=ss.get(n),o=ss.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=i.trim(n),s&&i.inArray(t,n)===-1){if(e.plugins[n])return;try{const i=s(e,o)||{};e.plugins[n]=i,_(i.init)&&(i.init(e,o),t.push(n))}catch(t){aw(e,n,t)}}},SL=e=>e.replace(/^-/,""),ML=e=>{const t=[];o(Ua(e),n=>{AL(e,t,SL(n))})},FL=e=>{const t=i.trim(Hu(e)),n=e.ui.registry.getAll().icons,s={...ja.get("default").icons,...ja.get(t).icons};x(s,(t,s)=>{f(n,s)||e.ui.registry.addIcon(s,t)})},TL=e=>{const t=ys(e);if(h(t)){const n=gn.get(t);e.theme=n(e,gn.urls[t])||{},_(e.theme.init)&&e.theme.init(e,gn.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},zL=e=>{const t=au(e),n=ns.get(t);e.model=n(e,ns.urls[t])},DL=e=>{const t=e.theme.renderUI;return t?t():$8(e)},NL=e=>{const n=e.getElement(),s=ys(e),t=s(e,n);return t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},V8=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),RL=e=>{const t=P8.create("div");return P8.insertAfter(t,e),V8(t,t)},$8=e=>{const t=e.getElement();return e.inline?V8(null):RL(t)},HL=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,h(ys(e))?DL(e):_(ys(e))?NL(e):$8(e)},IL=(t,n)=>{const s={show:e.from(n.show).getOr(g),hide:e.from(n.hide).getOr(g),isEnabled:e.from(n.isEnabled).getOr(N),setEnabled:s=>{t.mode.isReadOnly()||e.from(n.setEnabled).each(e=>e(s))}};t.ui={...t.ui,...s}},BL=t=>{t.dispatch("ScriptsLoaded"),FL(t),TL(t),zL(t),ML(t);const n=HL(t);IL(t,e.from(n.api).getOr({})),t.editorContainer=n.editorContainer,hw(t),t.inline?D8(t):EL(t,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},fn=w.DOM,Y8=e=>e.charAt(0)==="-",WL=(e,t)=>{const n=qu(t),s=tk(t);if(!We.hasCode(n)&&n!=="en"){const o=et(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{sw(t,o,n)})}},UL=(e,t)=>{const n=ys(e);if(h(n)&&!Y8(n)&&!f(gn.urls,n)){const s=lg(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;gn.load(n,o).catch(()=>{ow(e,o,n)})}},KL=(e,t)=>{const n=au(e);if(n!=="plugin"&&!f(ns.urls,n)){const s=OE(e),o=h(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;ns.load(n,o).catch(()=>{iw(e,o,n)})}},qL=t=>e.from(mk(t)).filter(et).map(t=>({url:t,name:e.none()})),X8=(t,n,s)=>e.from(n).filter(e=>et(e)&&!ja.has(e)).map(n=>({url:`${t.editorManager.baseURL}/icons/${n}/icons${s}.js`,name:e.some(n)})),GL=(e,t,n)=>{const s=X8(t,"default",n),i=qL(t).orThunk(()=>X8(t,Hu(t),""));o(lP([s,i]),n=>{e.add(n.url).catch(()=>{nw(t,n.url,n.name.getOrUndefined())})})},XL=(e,t)=>{const n=(t,n)=>{ss.load(t,n).catch(()=>{tw(e,n,t)})};x(eE(e),(t,s)=>{n(s,t),e.options.set("plugins",Ua(e).concat(s))}),o(Ua(e),e=>{e=i.trim(e),e&&!ss.urls[e]&&!Y8(e)&&n(e,`plugins/${e}/plugin${t}.js`)})},QL=e=>{const t=ys(e);return!h(t)||r(gn.get(t))},ZL=e=>{const t=au(e);return r(ns.get(t))},JL=(e,t)=>{const n=bt.ScriptLoader,s=()=>{!e.removed&&QL(e)&&ZL(e)&&BL(e)};UL(e,t),KL(e,t),WL(n,e),GL(n,e,t),XL(e,t),n.loadQueue().then(s,s)},eR=(e,t)=>M2.forElement(e,{contentCssCors:C1(t),referrerPolicy:lu(t)}),tR=e=>{const o=e.id;We.setCode(qu(e));const i=()=>{fn.unbind(window,"ready",i),e.render()};if(!Qt.Event.domLoaded){fn.bind(window,"ready",i);return}if(!e.getElement())return;const s=t.fromDom(e.getElement()),a=gf(s);e.on("remove",()=>{Tp(s.dom.attributes,e=>G(s,e.name)),Ct(s,a)}),e.ui.styleSheetLoader=eR(s,e),ou(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const n=e.getElement().form||fn.getParent(o,"form");n&&(e.formElement=n,pE(e)&&!Sl(e.getElement())&&(fn.insertAfter(fn.create("input",{type:"hidden",name:o}),o),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},fn.bind(n,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),hE(e)&&!n.submit.nodeType&&!n.submit.length&&!n._mceOldSubmit&&(n._mceOldSubmit=n.submit,n.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),n._mceOldSubmit(n)))),e.windowManager=S3(e),e.notificationManager=N3(e),Zx(e)&&e.on("GetContent",e=>{e.save&&(e.content=fn.encode(e.content))}),uE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),lE(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),JL(e,e.suffix)},nR=(e,t)=>({sections:a(e),options:a(t)}),Z8=Ut().deviceType,mf=Z8.isPhone(),iR=Z8.isTablet(),Ro=e=>{if(D(e))return[];const t=R(e)?e:e.split(/[ ,]/),n=b(t,fs);return m(n,et)},rR=(e,t)=>{const n=bH(t,(t,n)=>O(e,n));return nR(n.t,n.f)},cR=(e,t,n={})=>{const s=e.sections(),o=E(s,t).getOr({});return i.extend({},n,o)},Ul=(e,t)=>f(e.sections(),t),dR=(e,t)=>Ul(e,t)?e.sections()[t]:{},uR=(e,t)=>{const n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:E(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},s={menubar:!1};return{...n,...t?s:{}}},hR=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?i.extend({},e.external_plugins,s):s},mR=(e,t)=>[...Ro(e),...Ro(t)],fR=(e,t,n,s)=>e&&Ul(t,"mobile")?s:n,pR=(e,t,n,s)=>{const o=Ro(n.forced_plugins),a=Ro(s.plugins),r=dR(t,"mobile"),c=r.plugins?Ro(r.plugins):a,l=fR(e,t,a,c),d=mR(o,l);return i.extend(s,{forced_plugins:o,plugins:d})},gR=(e,t)=>e&&Ul(t,"mobile"),vR=(e,t,n,s,o)=>{var r;const c=e?{mobile:uR((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=rR(["mobile"],ni(c,o)),l=i.extend(n,s,a.options(),gR(e,a)?cR(a,"mobile"):{},{external_plugins:hR(s,a.options())});return pR(e,a,s,l)},bR=(e,t)=>vR(mf||iR,mf,t,e,t),jR=(e,t)=>Ty(e,t),yR=e=>{const n=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()},t=t=>()=>{o("left,center,right,justify".split(","),n=>{t!==n&&e.formatter.remove("align"+n)}),t!=="none"&&n("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},_R=e=>{const t=t=>()=>{const n=e.selection,s=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return T(s,n=>r(e.formatter.matchNode(n,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},wR=e=>{yR(e),_R(e)},OR=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let t=e.translate(`Your browser doesn't support direct access to the clipboard. `+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");(v.os.isMacOS()||v.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})},xR=(e,s,o)=>{const i=t.fromDom(e.getRoot());return qs(i,n.fromRangeStart(s))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Us(i,n.fromRangeEnd(s))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},CR=e=>{if(typeof e!="string"){const t=i.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},ER=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?xR(s,n.getRng(),t):t},Go=(e,t)=>{const{content:s,details:n}=CR(t);Wl(e,{...n,content:ER(e,s),format:"html",set:!1,selection:!0}).each(t=>{const s=My(e,t.content,n);Rl(e,s,t),e.addVisual()})},AR=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Go(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Go(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Go(e,s)},mceInsertContent:(t,n,s)=>{Go(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},SR={"font-size":"size","font-family":"face"},MR=$l("font"),FR=(n,s,o)=>{const i=t=>la(t,n).orThunk(()=>MR(t)?E(SR,n).bind(e=>mt(t,e)):e.none()),a=e=>j(t.fromDom(s),e);return Pr(t.fromDom(o),e=>i(e),a)},TR=e=>e.replace(/['"\\]/g,"").replace(/,\s+/g,","),zR=(t,n)=>e.from(w.DOM.getStyle(n,t,!0)),wf=n=>(s,o)=>e.from(o).map(t.fromDom).filter(ve).bind(e=>FR(n,s,e.dom).or(zR(n,e.dom))).getOr(""),NR=wf("font-size"),LR=En(TR,wf("font-family")),RR=t=>oe(t.getBody()).bind(t=>{const n=t.container();return e.from(s(n)?n.parentNode:n)}),PR=t=>e.from(t.selection.getRng()).bind(n=>{const s=t.getBody(),o=n.startContainer===s&&n.startOffset===0;return o?e.none():e.from(t.selection.getStart(!0))}),HR=(e,n)=>PR(e).orThunk(d(RR,e)).map(t.fromDom).filter(ve).bind(n),Pl=(t,n)=>HR(t,Hp(e.some,n)),$f=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=eC(e),s=Jx(e);return s.length>0?s[n-1]||t:o[n-1]||t}else return t}else return t},VR=e=>{const t=e.split(/\s*,\s*/);return b(t,e=>e.indexOf(" ")!==-1&&!K(e,'"')&&!K(e,`'`)?`'${e}'`:e).join(",")},$R=(e,t)=>{const n=$f(e,t);e.formatter.toggle("fontname",{value:VR(n)}),e.nodeChanged()},WR=e=>Pl(e,t=>LR(e.getBody(),t.dom)).getOr(""),UR=(e,t)=>{e.formatter.toggle("fontsize",{value:$f(e,t)}),e.nodeChanged()},KR=e=>Pl(e,t=>NR(e.getBody(),t.dom)).getOr(""),qR=e=>Pl(e,n=>{const s=t.fromDom(e.getBody()),o=Pr(n,e=>la(e,"line-height"),d(j,s)),i=()=>{const e=parseFloat(Xe(n,"line-height")),t=parseFloat(Xe(n,"font-size"));return String(e/t)};return o.getOrThunk(i)}).getOr(""),YR=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},GR=e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,s)=>{t(e,{value:s})},BackColor:(e,n,s)=>{t("hilitecolor",{value:s})},FontName:(t,n,s)=>{$R(e,s)},FontSize:(t,n,s)=>{UR(e,s)},LineHeight:(t,n,s)=>{YR(e,s)},Lang:(e,n,s)=>{var o;t(e,{value:s.code,customValue:(o=s.customCode)!==null&&o!==void 0?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,s)=>{t(h(s)?s:"p")},mceToggleFormat:(e,n,s)=>{t(s)}})},XR=e=>{const t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>WR(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>KR(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>qR(e))},QR=e=>{GR(e),XR(e)},ZR=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},JR=e=>{e.editorCommands.addCommands({Indent:()=>{yE(e)},Outdent:()=>{m1(e)}}),e.editorCommands.addCommands({Outdent:()=>b1(e)},"state")},eP=e=>{const t=(t,n,s)=>{const o=h(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");ie(o)&&h(o.href)&&(o.href=o.href.replace(/ /g,"%20"),(!i||!o.href)&&e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},tP=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const s=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(s)}}}})},nP=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},sP=e=>{tP(e),nP(e)},oP=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Za(o2,e)},mceInsertNewLine:(t,n,s)=>{T2(e,s)},InsertLineBreak:()=>{Za(g2,e)}})},iP=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),t=>!c(t)||o++!==s||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Ne);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},aP=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{Gv(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},rP=e=>{wR(e),OR(e),ZR(e),iP(e),AR(e),eP(e),JR(e),oP(e),sP(e),QR(e),aP(e)},cP=["toggleview"],qf=e=>O(cP,e.toLowerCase());class Yf{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,n,s){const o=this.editor,i=e.toLowerCase(),r=s?.skip_focus;if(o.removed)return!1;i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!r?o.focus():_9(o));const c=o.dispatch("BeforeExecCommand",{command:e,ui:t,value:n});if(c.isDefaultPrevented())return!1;const a=this.commands.exec[i];return!!_(a)&&(a(i,t,n),o.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(!qf(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!_(n)&&n(t)}queryCommandValue(e){if(!qf(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return _(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;x(e,(e,s)=>{o(s.toLowerCase().split(","),s=>{n[t][s]=e})})}addCommand(e,t,n){const s=e.toLowerCase();this.commands.exec[s]=(e,s,o)=>t.call(n??this.editor,s,o)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(n??this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(n??this.editor)}}const dn="data-mce-contenteditable",hP=(e,t,n)=>{Fd(e,t)&&!n?Ui(e,t):n&&lo(e,t)},jl=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},_i=(e,t)=>{e.dom.contentEditable=t?"true":"false"},pP=e=>{o(J(e,'*[contenteditable="true"]'),e=>{$(e,dn,"true"),_i(e,!1)})},gP=e=>{o(J(e,`*[${dn}="true"]`),e=>{G(e,dn),_i(e,!0)})},vP=t=>{e.from(t.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})},bP=e=>{e.selection.setRng(e.selection.getRng())},jP=(e,n)=>{const s=t.fromDom(e.getBody());hP(s,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),vP(e),e.readonly=!0,_i(s,!1),pP(s)):(e.readonly=!1,_i(s,!0),gP(s),jl(e,"StyleWithCSS",!1),jl(e,"enableInlineTableEditing",!1),jl(e,"enableObjectResizing",!1),Zv(e)&&e.focus(),bP(e),e.nodeChanged())},an=e=>e.readonly,Zf=e=>{e.parser.addAttributeFilter("contenteditable",t=>{an(e)&&o(t,e=>{e.attr(dn,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(dn,t=>{an(e)&&o(t,e=>{e.attr("contenteditable",e.attr(dn))})}),e.serializer.addTempAttr(dn)},wP=e=>{e.serializer?Zf(e):e.on("PreInit",()=>{Zf(e)})},OP=e=>e.type==="click",xP=["copy"],CP=e=>O(xP,e.type),EP=(e,n)=>{const s=n=>j(n,t.fromDom(e.getBody()));return kn(n,"a",s).bind(e=>mt(e,"href"))},kP=(e,n)=>{if(OP(n)&&!u.metaKeyPressed(n)){const s=t.fromDom(n.target);EP(e,s).each(t=>{if(n.preventDefault(),/^#/.test(t)){const n=e.dom.select(`${t},[name="${eH(t,"#")}"]`);n.length&&e.selection.scrollIntoView(n[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else CP(n)&&e.dispatch(n.type,n)},AP=e=>{e.on("ShowCaret",t=>{an(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{an(e)&&t.preventDefault()})},SP=i.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class gl{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||S}static isNative(e){return!!SP[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const s=e.toLowerCase(),n=mc(s,t??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);const o=this.bindings[s];if(o)for(let t=0,i=o.length;t<i;t++){const e=o[t];if(e.removed)continue;if(e.once&&this.off(s,e.func),n.isImmediatePropagationStopped())return n;if(e.func.call(this.scope,n)===!1)return n.preventDefault(),n}return n}on(e,t,n,s){if(t===!1&&(t=S),t){const o={func:t,removed:!1};s&&i.extend(o,s);const a=e.toLowerCase().split(" ");let r=a.length;for(;r--;){const t=a[r];let e=this.bindings[t];e||(e=[],this.toggleEvent(t,!0)),n?e=[o,...e]:e=[...e,o],this.bindings[t]=e}}return this}off(e,t){if(e){{const n=e.toLowerCase().split(" ");let s=n.length;for(;s--;){const a=n[s];let i=this.bindings[a];if(!a)return x(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(i){if(t){const e=zo(i,e=>e.func===t);i=e.fail,this.bindings[a]=i,o(e.pass,e=>{e.removed=!0})}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}}}else x(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){e=e.toLowerCase();const t=this.bindings[e];return!!t&&t.length!==0}}const ho=e=>(e._eventDispatcher||(e._eventDispatcher=new gl({scope:e,toggleEvent:(t,n)=>{gl.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),sl={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return mc(e.toLowerCase(),t??{},s);const o=ho(s).dispatch(e,t);if(n!==!1&&s.parent){let t=s.parent();for(;t&&!o.isPropagationStopped();)t.dispatch(e,o,!1),t=t.parent?t.parent():void 0}return o},on(e,t,n){return ho(this).on(e,t,n)},off(e,t){return ho(this).off(e,t)},once(e,t){return ho(this).once(e,t)},hasEventListeners(e){return ho(this).has(e)}},Xi=w.DOM;let Kt;const Qi=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=i1(e);return n?(e.eventRoot||(e.eventRoot=Xi.select(n)[0]),e.eventRoot):e.getBody()},LP=e=>!e.hidden&&!an(e),e6=(e,t,n)=>{LP(e)?e.dispatch(t,n):an(e)&&kP(e,n)},t6=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Qi(e,t);if(i1(e)){if(Kt||(Kt={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Kt&&(x(Kt,(t,n)=>{e.dom.unbind(Qi(e,n))}),Kt=null)})),Kt[t])return;const s=n=>{const i=n.target,s=e.editorManager.get();let o=s.length;for(;o--;){const e=s[o].getBody();(e===i||Xi.isChildOf(i,e))&&e6(s[o],t,n)}};Kt[t]=s,Xi.bind(n,t,s)}else{const s=n=>{e6(e,t,n)};Xi.bind(n,t,s),e.delegates[t]=s}},c6={...sl,bindPendingEventDelegates(){const e=this;i.each(e._pendingNativeEvents,t=>{t6(e,t)})},toggleNativeEvent(e,t){const n=this;if(e==="focus"||e==="blur")return;if(n.removed)return;t?n.initialized?t6(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Qi(n,e),e,n.delegates[e]),delete n.delegates[e])},unbindAllNativeEvents(){const e=this,n=e.getBody(),t=e.dom;e.delegates&&(x(e.delegates,(t,n)=>{e.dom.unbind(Qi(e,n),n,t)}),delete e.delegates),!e.inline&&n&&t&&(n.onload=null,t.unbind(e.getWin()),t.unbind(e.getDoc())),t&&(t.unbind(n),t.unbind(e.getContainer()))}},IP=e=>h(e)?{value:e.split(/[ ,]/),valid:!0}:Yn(e,h)?{value:e,valid:!0}:{valid:!1,message:`The value must be a string[] or a comma/space separated string.`},BP=e=>{const t=(()=>{switch(e){case"array":return R;case"boolean":return sn;case"function":return _;case"number":return $e;case"object":return ie;case"string":return h;case"string[]":return IP;case"object[]":return e=>Yn(e,ie);case"regexp":return e=>Si(e,RegExp);default:return N}})();return n=>Er(n,t,`The value must be a ${e}.`)},VP=e=>h(e.processor),H6=(e,t)=>{const n=Es(t.message)?"":`. ${t.message}`;return e+n},np=e=>e.valid,Er=(e,t,n="")=>{const s=t(e);return sn(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},KP=(e,t,n)=>{if(!ae(t)){const s=Er(t,n);if(np(s))return s.value;console.error(H6(`Invalid default value passed for the "${e}" option`,s))}},qP=(e,t)=>{const s={},n={},i=(e,t,s)=>{const o=Er(t,s);return np(o)?(n[e]=o.value,!0):(console.warn(H6(`Invalid value passed for the ${e} option`,o)),!1)},a=(e,o)=>{const a=VP(o)?BP(o.processor):o.processor,r=KP(e,o.default,a);s[e]={...o,default:r,processor:a};const c=E(n,e).orThunk(()=>E(t,e));c.each(t=>i(e,t,a))},o=e=>f(s,e),r=e=>E(n,e).orThunk(()=>E(s,e).map(e=>e.default)).getOrUndefined(),c=(e,t)=>{if(!o(e))return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1;const n=s[e];return n.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):i(e,t,n.processor)},l=e=>{const t=o(e);return t&&delete n[e],t},d=e=>f(n,e);return{register:a,isRegistered:o,get:r,set:c,unset:l,isSet:d}},YP=["design","readonly"],sp=(e,t,n,s)=>{const i=n[t.get()],o=n[s];try{o.activate()}catch(e){console.error(`problem while activating editor mode ${s}:`,e);return}i.deactivate(),i.editorReadOnly!==o.editorReadOnly&&jP(e,o.editorReadOnly),t.set(s),M_(e,s)},XP=(e,t,n,s)=>{if(s===n.get())return;if(!f(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?sp(e,n,t,s):e.on("init",()=>sp(e,n,t,s))},QP=(e,t,n)=>{if(O(YP,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}},ZP=e=>{const n=V("design"),t=V({design:{activate:g,deactivate:g,editorReadOnly:!1},readonly:{activate:g,deactivate:g,editorReadOnly:!0}});return wP(e),AP(e),{isReadOnly:()=>an(e),set:s=>XP(e,t.get(),n,s),get:()=>n.get(),register:(e,n)=>{t.set(QP(t.get(),e,n))}}},mr=i.each,Tr=i.explode,tH={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},dp=i.makeMap("alt,ctrl,shift,meta,access"),sH=e=>e in dp,oH=e=>{const t={},s=v.os.isMacOS()||v.os.isiOS();mr(Tr(e.toLowerCase(),"+"),e=>{sH(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=tH[e]||e.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let n;for(n in dp)t[n]?o.push(n):t[n]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,s?t.ctrl=!0:t.shift=!0),t.meta&&(s?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class hp{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",e=>{(t.hasModifier(e)||t.isFunctionKey(e))&&!e.isDefaultPrevented()&&(mr(t.shortcuts,n=>{t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),e.type==="keydown"&&t.executeShortcutAction(n))}),t.matchShortcut(e,t.pendingPatterns[0])&&(t.pendingPatterns.length===1&&e.type==="keydown"&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,n,s){const o=this,a=o.normalizeCommandFunc(n);return mr(Tr(i.trim(e)),e=>{const n=o.createShortcut(e,t,a,s);o.shortcuts[n.id]=n}),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const n=this,t=e;return typeof t=="string"?()=>{n.editor.execCommand(t,!1,null)}:i.isArray(t)?()=>{n.editor.execCommand(t[0],t[1],t[2])}:t}createShortcut(e,t,n,s){const o=i.map(Tr(e,">"),oH);return o[o.length-1]=i.extend(o[o.length-1],{func:n,scope:s||this.editor}),i.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return e.type==="keydown"&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const aH=()=>{const t={},n={},o={},i={},a={},s={},r={},c={},e=(e,t)=>(n,s)=>{e[n.toLowerCase()]={...s,type:t}},l=(e,t)=>i[e.toLowerCase()]=t;return{addButton:e(t,"button"),addGroupToolbarButton:e(t,"grouptoolbarbutton"),addToggleButton:e(t,"togglebutton"),addMenuButton:e(t,"menubutton"),addSplitButton:e(t,"splitbutton"),addMenuItem:e(n,"menuitem"),addNestedMenuItem:e(n,"nestedmenuitem"),addToggleMenuItem:e(n,"togglemenuitem"),addAutocompleter:e(o,"autocompleter"),addContextMenu:e(a,"contextmenu"),addContextToolbar:e(s,"contexttoolbar"),addContextForm:e(s,"contextform"),addSidebar:e(r,"sidebar"),addView:e(c,"views"),addIcon:l,getAll:()=>({buttons:t,menuItems:n,icons:i,popups:o,contextMenus:a,contextToolbars:s,sidebars:r,views:c})}},rH=()=>{const e=aH();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},en=w.DOM,fp=i.extend,dH=i.each;class Ma{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,fp(this,c6);const s=this;this.id=e,this.hidden=!1;const a=bR(n.defaultOptions,t);this.options=qP(s,a),Tk(s);const o=this.options.get;o("deprecation_warnings")&&__(t,a);const c=o("suffix");c&&(n.suffix=c),this.suffix=n.suffix;const l=o("base_url");l&&n._setBaseUrl(l),this.baseUri=n.baseURI;const i=lu(s);i&&(bt.ScriptLoader._setReferrerPolicy(i),w.DOM.styleSheetLoader._setReferrerPolicy(i));const d=C1(s);r(d)&&w.DOM.styleSheetLoader._setContentCssCors(d),te.languageLoad=o("language_load"),te.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new tt(xu(s),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ou(s),this.hasVisual=XC(s),this.shortcuts=new hp(this),this.editorCommands=new Yf(this),rP(this);const u=o("cache_suffix");u&&(v.cacheSuffix=u.replace(/^[?&]+/,"")),this.ui={registry:rH(),styleSheetLoader:void 0,show:g,hide:g,setEnabled:g,isEnabled:N},this.mode=ZP(s),n.dispatch("SetupEditor",{editor:this});const h=VC(s);_(h)&&h.call(s,s)}render(){tR(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Mn(this)}translate(e){return We.translate(e)}getParam(e,t,n){const s=this.options;return s.isRegistered(e)||(r(n)?s.register(e,{processor:n,default:t}):s.register(e,{processor:N,default:t})),!s.isSet(e)&&!ae(t)?t:s.get(e)}hasPlugin(e,t){const n=O(Ua(this),e);return!!n&&(!t||ss.get(e)!==void 0)}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,s){this.shortcuts.add(e,t,n,s)}execCommand(e,t,n,s){return this.editorCommands.execCommand(e,t,n,s)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(en.show(e.getContainer()),en.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(en.hide(e.getContainer()),en.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){const n=this,t=n.getElement();if(n.removed)return"";if(t){const s={...e,load:!0},o=Sl(t)?t.value:t.innerHTML,i=n.setContent(o,s);return s.no_events||n.dispatch("LoadContent",{...s,element:t}),i}return""}save(e={}){const t=this;let s=t.getElement();if(!s||!t.initialized||t.removed)return"";const i={...e,save:!0,element:s};let o=t.getContent(i);const n={...i,content:o};if(n.no_events||t.dispatch("SaveContent",n),n.format==="raw"&&t.dispatch("RawSaveContent",n),o=n.content,Sl(s))s.value=o;else{(e.is_removing||!t.inline)&&(s.innerHTML=o);const n=en.getParent(t.id,"form");n&&dH(n.elements,e=>e.name!==t.id||(e.value=o,!1))}return n.element=i.element=s=null,n.set_dirty!==!1&&t.setDirty(!1),o}setContent(e,t){return vc(this,e,t)}getContent(e){return h_(this,e)}insertContent(e,t){t&&(e=fp({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){e===void 0?vc(this,this.startContent,{format:"raw"}):vc(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||en.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=en.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;const n=this.getDoc();return(t=(e=this.bodyElement)!==null&&e!==void 0?e:n?.body)!==null&&t!==void 0?t:null}convertURL(e,t,n){const s=this,o=s.options.get,i=NC(s);return _(i)?i.call(s,e,n,!0,t):!o("convert_urls")||n==="link"||ie(n)&&n.nodeName==="LINK"||e.indexOf("file:")===0||e.length===0?e:o("relative_urls")?s.documentBaseURI.toRelative(e):(e=s.documentBaseURI.toAbsolute(e,o("remove_script_host")),e)}addVisual(e){jR(this,e)}remove(){k_(this)}destroy(e){A_(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Os=w.DOM,Oa=i.each;let gp=!1,ia,le=[];const Ko=e=>{const t=e.type;Oa(zt.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},_p=e=>{if(e!==gp){const t=w.DOM;e?(t.bind(window,"resize",Ko),t.bind(window,"scroll",Ko)):(t.unbind(window,"resize",Ko),t.unbind(window,"scroll",Ko)),gp=e}},Ap=e=>{const t=le;return le=m(le,t=>e!==t),zt.activeEditor===e&&(zt.activeEditor=le.length>0?le[0]:null),zt.focusedEditor===e&&(zt.focusedEditor=null),t.length!==le.length},yH=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Ap(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},_H=document.compatMode!=="CSS1Compat",zt={...sl,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.1",releaseDate:"2022-12-06",i18n:We,activeEditor:null,focusedEditor:null,setup(){const t=this;let n="",s="",e=tt.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^/]+\//.test(e)&&(e=e.replace(/[?#].*$/,"").replace(/[/\\][^/]+$/,""),/[/\\]$/.test(e)||(e+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)n=o.base||o.baseURL,s=o.suffix;else{const e=document.getElementsByTagName("script");for(let o=0;o<e.length;o++){const t=e[o].src||"";if(t==="")continue;const i=t.substring(t.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(t)){i.indexOf(".min")!==-1&&(s=".min"),n=t.substring(0,t.lastIndexOf("/"));break}}if(!n&&document.currentScript){const e=document.currentScript.src;e.indexOf(".min")!==-1&&(s=".min"),n=e.substring(0,e.lastIndexOf("/"))}}t.baseURL=new tt(e).toAbsolute(n),t.documentBaseURL=e,t.baseURI=new tt(t.baseURL),t.suffix=s,a9(t)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&x(s,(e,t)=>{te.PluginManager.urls[t]=e})},init(e){const t=this;let n;const a=i.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(e,t)=>e.inline&&t.tagName.toLowerCase()in a,l=e=>{let t=e.id;return t||(t=E(e,"name").filter(e=>!Os.get(e)).getOrThunk(Os.uniqueId),e.setAttribute("id",t)),t},d=n=>{const s=e[n];if(!s)return;return s.apply(t,[])},u=e=>v.browser.isIE()||v.browser.isEdge()?(Da("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):_H?(Da("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):h(e.selector)?Os.select(e.selector):r(e.target)?[e.target]:[];let s=e=>{n=e};const o=()=>{let r=0;const a=[];let n;const h=(e,o,i)=>{const c=new Ma(e,o,t);a.push(c),c.on("init",()=>{++r===n.length&&s(a)}),c.targetElm=c.targetElm||i,c.render()};Os.unbind(window,"ready",o),d("onpageload"),n=CH(u(e)),i.each(n,e=>{yH(t.get(e.id))}),n=i.grep(n,e=>!t.get(e.id)),n.length===0?s([]):Oa(n,t=>{c(e,t)?Da("Could not initialize inline editor on invalid inline target element",t):h(l(t),e,t)})};return Os.bind(window,"ready",o),new Promise(e=>{n?e(n):s=t=>{e(t)}})},get(e){return arguments.length===0?le.slice(0):h(e)?I(le,t=>t.id===e).getOr(null):$e(e)?le[e]?le[e]:null:null},add(e){const t=this,n=t.get(e.id);return n===e?e:(n===null&&le.push(e),_p(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),ia||(ia=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",ia)),e)},createEditor(e,t){return this.add(new Ma(e,t,this))},remove(e){const n=this;let t;if(!e){for(let e=le.length-1;e>=0;e--)n.remove(le[e]);return}if(h(e)){Oa(Os.select(e),e=>{t=n.get(e.id),t&&n.remove(t)});return}return t=e,Yt(n.get(t.id))?null:(Ap(t)&&n.dispatch("RemoveEditor",{editor:t}),le.length===0&&window.removeEventListener("beforeunload",ia),t.remove(),_p(le.length>0),t)},execCommand(e,t,n){var i;const s=this,o=ie(n)?(i=n.id)!==null&&i!==void 0?i:n.index:n;switch(e){case"mceAddEditor":{if(!s.get(o)){const e=n.options;new Ma(o,e,s).render()}return!0}case"mceRemoveEditor":{const e=s.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{const e=s.get(o);return e?(e.isHidden()?e.show():e.hide(),!0):(s.execCommand("mceAddEditor",!1,n),!0)}}return!!s.activeEditor&&s.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Oa(le,e=>{e.save()})},addI18n:(e,t)=>{We.add(e,t)},translate:e=>We.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new tt(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new tt(this.baseURL)}};zt.setup();const OH=()=>{const e=It(),t=e=>({items:e,types:fe(e),getType:t=>E(e,t).getOrUndefined()}),n=t=>{e.set(t)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}},xH=OH(),Sp=Math.min,Bn=Math.max,si=Math.round,Rp=(e,t,n)=>{let o=t.x,i=t.y;const a=e.w,r=e.h,c=t.w,l=t.h,s=(n||"").split("");return s[0]==="b"&&(i+=l),s[1]==="r"&&(o+=c),s[0]==="c"&&(i+=si(l/2)),s[1]==="c"&&(o+=si(c/2)),s[3]==="b"&&(i-=r),s[4]==="r"&&(o-=a),s[3]==="c"&&(i-=si(r/2)),s[4]==="c"&&(o-=si(a/2)),Ln(o,i,a,r)},SH=(e,t,n,s)=>{for(let i=0;i<s.length;i++){const o=Rp(e,t,s[i]);if(o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[i]}return null},MH=(e,t,n)=>Ln(e.x-t,e.y-n,e.w+t*2,e.h+n*2),FH=(e,t)=>{const n=Bn(e.x,t.x),s=Bn(e.y,t.y),o=Sp(e.x+e.w,t.x+t.w),i=Sp(e.y+e.h,t.y+t.h);return o-n<0||i-s<0?null:Ln(n,s,o-n,i-s)},TH=(e,t,n)=>{let s=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h;const u=t.x+t.w,h=t.y+t.h,r=Bn(0,t.x-s),c=Bn(0,t.y-o),l=Bn(0,i-u),d=Bn(0,a-h);return s+=r,o+=c,n&&(i+=r,a+=c,s-=l,o-=d),i-=l,a-=d,Ln(s,o,i-s,a-o)},Ln=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),DH=e=>Ln(e.left,e.top,e.width,e.height),NH={inflate:MH,relativePosition:Rp,findBestRelativePosition:SH,intersect:FH,clamp:TH,create:Ln,fromClientRect:DH},LH=(e,t,n=1e3)=>{let o=!1,s=null;const i=e=>(...t)=>{o||(o=!0,s!==null&&(clearTimeout(s),s=null),e.apply(null,t))},r=i(e),a=i(t),c=(...e)=>{!o&&s===null&&(s=setTimeout(()=>a.apply(null,e),n))};return{start:c,resolve:r,reject:a}},RH=()=>{const e={},t={},n=(n,s)=>{const i=`Script at URL "${s}" failed to load`,a=`Script at URL "${s}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(e[n]!==void 0)return e[n];const o=new Promise((e,o)=>{const r=LH(e,o);t[n]=r.resolve,bt.ScriptLoader.loadScript(s).then(()=>r.start(a),()=>r.reject(i))});return e[n]=o,o},s=(n,s)=>{t[n]!==void 0&&(t[n](s),delete t[n]),e[n]=Promise.resolve(s)},o=t=>{delete e[t]};return{load:n,add:s,unload:o}},PH=RH(),HH=()=>(()=>{let t={},e=[];const n={getItem:e=>{const n=t[e];return n||null},setItem:(n,s)=>{e.push(n),t[n]=String(s)},key:t=>e[t],removeItem:n=>{e=e.filter(e=>e===n),delete t[n]},clear:()=>{e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>e.length,configurable:!1,enumerable:!1}),n})();let Fo;try{const e="__storage_test__";Fo=window.localStorage,Fo.setItem(e,e),Fo.removeItem(e)}catch{Fo=HH()}Kp=Fo;const VH={geom:{Rect:NH},util:{Delay:Oe,Tools:i,VK:u,URI:tt,EventDispatcher:gl,Observable:sl,I18n:We,LocalStorage:Kp,ImageUploader:Cw},dom:{EventUtils:Qt,TreeWalker:P,TextSeeker:_n,DOMUtils:w,ScriptLoader:bt,RangeUtils:pn,Serializer:q3,StyleSheetLoader:F2,ControlSelection:gh,BookmarkManager:Ks,Selection:Y3,Event:Qt.Event},html:{Styles:rc,Entities:Tt,Node:he,Schema:Dt,DomParser:$n,Writer:Mf,Serializer:At},Env:v,AddOnManager:te,Annotator:L3,Formatter:k2,UndoManager:w2,EditorCommands:Yf,WindowManager:S3,NotificationManager:N3,EditorObservable:c6,Shortcuts:hp,Editor:Ma,FocusManager:h8,EditorManager:zt,DOM:w.DOM,ScriptLoader:bt.ScriptLoader,PluginManager:ss,ThemeManager:gn,ModelManager:ns,IconManager:ja,Resource:PH,FakeClipboard:xH,trim:i.trim,isArray:i.isArray,is:i.is,toArray:i.toArray,makeMap:i.makeMap,each:i.each,map:i.map,grep:i.grep,inArray:i.inArray,extend:i.extend,walk:i.walk,resolve:i.resolve,explode:i.explode,_addCacheSuffix:i._addCacheSuffix},Yp=i.extend(zt,VH),WH=e=>{if(typeof module=="object")try{module.exports=e}catch{}},UH=e=>{window.tinymce=e,window.tinyMCE=e};UH(Yp),WH(Yp)})()