!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(e,t,n)=>{e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),((e,t)=>{e.dispatch("VisualBlocks",{state:t})})(e,n.get())},s=("visualblocks_default_state",e=>e.options.get("visualblocks_default_state")),t=(e,t)=>n=>{n.setActive(t.get());const s=e=>n.setActive(e.state);return e.on("VisualBlocks",s),()=>e.off("VisualBlocks",s)};n.add("visualblocks",(n)=>{(e=>{(0,e.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(n);const i=(e=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();((t,n,s)=>{t.addCommand("mceVisualBlocks",()=>{e(t,0,s)})})(n,0,i),((e,n)=>{const s=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:s,onSetup:t(e,n)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:s,onSetup:t(e,n)})})(n,i),((t,n,o)=>{t.on("PreviewFormats AfterPreviewFormats",e=>{o.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),t.on("init",()=>{s(t)&&e(t,0,o)})})(n,0,i)})}()