(function(){"use strict";const we=e=>{let t=e;const n=()=>t,s=e=>{t=e};return{get:n,set:s}};var O,J,bn=tinymce.util.Tools.resolve("tinymce.PluginManager"),he;const _e=e=>({isFullscreen:()=>e.get()!==null}),gn=(e,t,n)=>{var s;return!!n(e,t.prototype)||((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},fn=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&gn(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},ye=e=>t=>fn(t)===e,f=e=>t=>typeof t===e,be=e=>t=>e===t,pe=ye("string"),mn=ye("array"),fe=be(null),dn=f("boolean"),sn=be(void 0),nn=e=>e==null,c=e=>!nn(e),l=f("function"),en=f("number"),u=()=>{},Yt=(e,t)=>(...n)=>e(t.apply(null,n)),Vt=(e,t)=>n=>e(t(n)),t=e=>()=>e;function Ht(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const T=t(!1),Pt=t(!0);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return c(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const F=t=>{const n=we(e.none()),s=()=>n.get().each(t),o=()=>{s(),n.set(e.none())},i=()=>n.get().isSome(),a=()=>n.get(),r=t=>{s(),n.set(e.some(t))};return{clear:o,isSet:i,get:a,set:r}},M=()=>F(e=>e.unbind()),Rt=()=>{const e=F(u),t=t=>e.get().each(t);return{...e,on:t}},Lt=(e,t)=>{let n=null;const s=()=>{fe(n)||(clearTimeout(n),n=null)},o=(...s)=>{fe(n)&&(n=setTimeout(()=>{n=null,e.apply(null,s)},t))};return{cancel:s,throttle:o}},Dt=Array.prototype.push,b=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s},C=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},w=(e,t)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];t(o,s)&&n.push(o)}return n},zt=(t,n,s)=>{for(let o=0,a=t.length;o<a;o++){const i=t[o];if(n(i,o))return e.some(i);if(s(i,o))break}return e.none()},D=(e,t)=>zt(e,t,T),Mt=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!mn(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Dt.apply(t,e[n])}return t},xt=(e,t)=>Mt(b(e,t)),Ot=(t,n)=>n>=0&&n<t.length?e.some(t[n]):e.none(),_t=e=>Ot(e,0),yt=(t,n)=>{for(let e=0;e<t.length;e++){const s=n(t[e],e);if(s.isSome())return s}return e.none()},jt=Object.keys,bt=(e,t)=>{const n=jt(e);for(let s=0,i=n.length;s<i;s++){const o=n[s],a=e[o];t(a,o)}},s=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1&&(!!sn(s)||o+t.length<=s)},$=e=>e.style!==void 0&&l(e.style.getPropertyValue),vt=(e,t)=>{const s=t||document,n=s.createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return i(n.childNodes[0])},gt=(e,t)=>{const n=t||document,s=n.createElement(e);return i(s)},pt=(e,t)=>{const n=t||document,s=n.createTextNode(e);return i(s)},i=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ft=(t,n,s)=>e.from(t.dom.elementFromPoint(n,s)).map(i),n={fromHtml:vt,fromTag:gt,fromText:pt,fromDom:i,fromPoint:ft};typeof window!="undefined"?window:Function("return this;")();const X=9,Q=11,v=1,mt=3,ht=e=>e.dom.nodeType,d=e=>t=>ht(t)===e,dt=d(v),lt=d(mt),ct=d(X),rt=d(Q),ae=(e,t)=>{const s=e.dom;if(s.nodeType!==v)return!1;const n=s;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},at=e=>e.nodeType!==v&&e.nodeType!==X&&e.nodeType!==Q||e.childElementCount===0,it=(e,t)=>{const s=t===void 0?document:t.dom;return at(s)?[]:b(s.querySelectorAll(e),n.fromDom)},ot=(e,t)=>e.dom===t.dom,r=e=>n.fromDom(e.dom.ownerDocument),tt=e=>ct(e)?e:r(e),et=t=>e.from(t.dom.parentNode).map(n.fromDom),Qe=(e,t)=>{const i=l(t)?t:T;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const e=s.parentNode,t=n.fromDom(e);if(o.push(t),i(t)===!0)break;s=e}return o},Ge=e=>{const t=t=>w(t,t=>!ot(e,t));return et(e).map(Ye).map(t).getOr([])},Ye=e=>b(e.dom.childNodes,n.fromDom),qe=e=>rt(e)&&c(e.dom.host),ve=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode),Le=t(ve),Ne=ve?e=>n.fromDom(e.dom.getRootNode()):tt,g=t=>{const n=Ne(t);return qe(n)?e.some(n):e.none()},y=e=>n.fromDom(e.dom.host),Fe=t=>{if(Le()&&c(t.target)){const e=n.fromDom(t.target);if(dt(e)&&Se(e)&&t.composed&&t.composedPath){const e=t.composedPath();if(e)return _t(e)}}return e.from(t.target)},Se=e=>c(e.dom.shadowRoot),xe=e=>{const t=lt(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const s=t.ownerDocument;return g(n.fromDom(t)).fold(()=>s.body.contains(t),Vt(xe,y))},Ae=e=>{const t=e.dom.body;if(t==null)throw new Error("Body is not available yet");return n.fromDom(t)},wt=(e,t,n)=>{if(pe(n)||dn(n)||en(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},ke=(e,t,n)=>{wt(e.dom,t,n)},P=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Oe=(e,t)=>{e.dom.removeAttribute(t)},Me=(e,t,n)=>{if(!pe(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);$(e)&&e.style.setProperty(t,n)},x=(e,t)=>{const n=e.dom;bt(t,(e,t)=>{Me(n,t,e)})},Te=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n),s=o.getPropertyValue(t);return s===""&&!xe(e)?ze(n,t):s},ze=(e,t)=>$(e)?e.style.getPropertyValue(t):"",De=(e,t,n,s,o,i,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:i,raw:a}),je=e=>{const o=n.fromDom(Fe(e).getOr(e.target)),t=()=>e.stopPropagation(),s=()=>e.preventDefault(),i=Yt(s,t);return De(o,e.clientX,e.clientY,t,s,i,e)},Ce=(e,t)=>n=>{e(n)&&t(je(n))},Re=(e,t,n,s,o)=>{const i=Ce(n,s);return e.dom.addEventListener(t,i,o),{unbind:Ht(He,e,t,i,o)}},Pe=(e,t,n,s)=>Re(e,t,n,s,!1),He=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Ie=Pt,Be=(e,t,n)=>Pe(e,t,Ie,n),Ve=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},$e=(e,n,s,o)=>{const i=e.isiOS()&&/ipad/i.test(s)===!0,a=e.isiOS()&&!i,r=e.isiOS()||e.isAndroid(),u=r||o("(pointer:coarse)"),c=i||!a&&r&&o("(min-device-width:768px)"),l=a||r&&!c,d=n.isSafari()&&e.isiOS()&&/safari/i.test(s)===!1,h=!l&&!c&&!d;return{isiPad:t(i),isiPhone:t(a),isTablet:t(c),isPhone:t(l),isTouch:t(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:t(d),isDesktop:t(h)}},We=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},Ue=(e,t)=>{const n=We(e,t);if(!n)return{major:0,minor:0};const s=e=>Number(t.replace(n,"$"+e));return m(s(1),s(2))},Ke=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?ge():Ue(e,n)},ge=()=>m(0,0),m=(e,t)=>({major:e,minor:t}),a={nu:m,detect:Ke,unknown:ge},Xe=(e,t)=>yt(t.brands,t=>{const n=t.brand.toLowerCase();return D(e,e=>{var t;return n===((t=e.brand)===null||t===void 0?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:a.nu(parseInt(t.version,10),0)}))}),me=(e,t)=>{const n=String(t).toLowerCase();return D(e,e=>e.search(n))},Ze=(e,t)=>me(e,t).map(e=>{const n=a.detect(e.versionRegexes,t);return{current:e.name,version:n}}),Je=(e,t)=>me(e,t).map(e=>{const n=a.detect(e.versionRegexes,t);return{current:e.name,version:n}}),p=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,o=e=>t=>s(t,e),nt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>s(e,"edge/")&&s(e,"chrome")&&s(e,"safari")&&s(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,p],search:e=>s(e,"chrome")&&!s(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>s(e,"msie")||s(e,"trident")},{name:"Opera",versionRegexes:[p,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:o("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:o("firefox")},{name:"Safari",versionRegexes:[p,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(s(e,"safari")||s(e,"mobile/"))&&s(e,"applewebkit")}],st=[{name:"Windows",search:o("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>s(e,"iphone")||s(e,"ipad"),versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:o("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:o("mac os x"),versionRegexes:[/.*?mac os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:o("linux"),versionRegexes:[]},{name:"Solaris",search:o("sunos"),versionRegexes:[]},{name:"FreeBSD",search:o("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:o("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],le={browsers:t(nt),oses:t(st)},ce="Edge",re="Chromium",ie="IE",oe="Opera",se="Firefox",ne="Safari",ut=()=>ee({current:void 0,version:a.unknown()}),ee=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isEdge:t(ce),isChromium:t(re),isIE:t(ie),isOpera:t(oe),isFirefox:t(se),isSafari:t(ne)}},k={unknown:ut,nu:ee,edge:t(ce),chromium:t(re),ie:t(ie),opera:t(oe),firefox:t(se),safari:t(ne)},Y="Windows",K="iOS",U="Android",W="Linux",B="macOS",I="Solaris",H="FreeBSD",E="ChromeOS",Ee=()=>R({current:void 0,version:a.unknown()}),R=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isWindows:t(Y),isiOS:t(K),isAndroid:t(U),isMacOS:t(B),isLinux:t(W),isSolaris:t(I),isFreeBSD:t(H),isChromeOS:t(E)}},L={unknown:Ee,nu:R,windows:t(Y),ios:t(K),android:t(U),linux:t(W),macos:t(B),solaris:t(I),freebsd:t(H),chromeos:t(E)},Ct=(e,t,n)=>{const s=le.browsers(),a=le.oses(),o=t.bind(e=>Xe(s,e)).orThunk(()=>Ze(s,e)).fold(k.unknown,k.nu),i=Je(a,e).fold(L.unknown,L.nu),r=$e(i,o,e,n);return{browser:o,os:i,deviceType:r}},Et={detect:Ct},kt=e=>window.matchMedia(e).matches;let At=Ve(()=>Et.detect(navigator.userAgent,e.from(navigator.userAgentData),kt));const St=()=>At(),N=(e,t)=>{const n=(n,s)=>N(e+n,t+s);return{left:e,top:t,translate:n}},Ft=N,Tt=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Ft(n,s)},_=t=>{const n=t===void 0?window:t;return St().browser.isFirefox()?e.none():e.from(n.visualViewport)},S=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Nt=e=>{const s=e===void 0?window:e,o=s.document,t=Tt(n.fromDom(o));return _(s).fold(()=>{const e=s.document.documentElement,n=e.clientWidth,o=e.clientHeight;return S(t.left,t.top,n,o)},e=>S(Math.max(e.pageLeft,t.left),Math.max(e.pageTop,t.top),e.width,e.height))},A=(e,t,n)=>_(n).map(n=>{const s=e=>t(je(e));return n.addEventListener(e,s),{unbind:()=>n.removeEventListener(e,s)}}).getOrThunk(()=>({unbind:u}));J=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O=tinymce.util.Tools.resolve("tinymce.Env");const z=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},It=e=>t=>t.options.get(e),Bt=e=>{const t=e.options.register;t("fullscreen_native",{processor:"boolean",default:!1})},j=It("fullscreen_native"),$t=e=>{const t=n.fromDom(e.getElement());return g(t).map(y).getOrThunk(()=>Ae(r(t)))},Wt=e=>e.fullscreenElement!==void 0?e.fullscreenElement:e.msFullscreenElement!==void 0?e.msFullscreenElement:e.webkitFullscreenElement!==void 0?e.webkitFullscreenElement:null,Ut=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Kt=e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},qt=e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()},V=e=>e.dom===Wt(r(e).dom),Gt=(e,t,n)=>w(Qe(e,n),t),Xt=(e,t)=>w(Ge(e),t),Qt=e=>it(e),Zt=(e,t,n)=>Gt(e,e=>ae(e,t),n),Jt=(e,t)=>Xt(e,e=>ae(e,t)),h="data-ephox-mobile-fullscreen-style",tn="display:none!important;",q="position:absolute!important;",G="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",on="background-color:rgb(255,255,255)!important;",an=O.os.isAndroid(),rn=e=>{const t=Te(e,"background-color");return t!==void 0&&t!==""?"background-color:"+t+"!important":on},cn=(e,t,n)=>{const a=e=>Jt(e,"*:not(.tox-silver-sink)"),s=t=>n=>{const s=P(n,"style"),o=s===void 0?"no-styles":s.trim();if(o===t)return;ke(n,h,o),x(n,e.parseStyle(t))},o=Zt(t,"*"),r=xt(o,a),i=rn(n);C(r,s(tn)),C(o,s(q+G+i));const c=an===!0?"":q;s(c+G+i)(t)},ln=e=>{const t=Qt("["+h+"]");C(t,t=>{const n=P(t,h);n&&n!=="no-styles"?x(t,e.parseStyle(n)):Oe(t,"style"),Oe(t,h)})},Z=J.DOM,un=()=>Nt(window),hn=e=>window.scrollTo(e.x,e.y),te=_().fold(()=>({bind:u,unbind:u}),e=>{const t=Rt(),s=M(),o=M(),i=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},a=()=>{window.requestAnimationFrame(()=>{t.on(t=>x(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},n=Lt(()=>{i(),a()},50),r=e=>{t.set(e),n.throttle(),s.set(A("resize",n.throttle)),o.set(A("scroll",n.throttle))},c=()=>{t.on(()=>{s.clear(),o.clear()}),t.clear()};return{bind:r,unbind:c}}),de=(t,s)=>{const v=document.body,b=document.documentElement,u=t.getContainer(),d=n.fromDom(u),c=$t(t),i=s.get(),p=n.fromDom(t.getBody()),m=O.deviceType.isTouch(),o=u.style,l=t.iframeElement,a=l?.style,f=e=>{e(v,"tox-fullscreen"),e(b,"tox-fullscreen"),e(u,"tox-fullscreen"),g(d).map(e=>y(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},h=()=>{m&&ln(t.dom),f(Z.removeClass),te.unbind(),e.from(s.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(i)i.fullscreenChangeHandler.unbind(),j(t)&&V(c)&&qt(r(c)),a.width=i.iframeWidth,a.height=i.iframeHeight,o.width=i.containerWidth,o.height=i.containerHeight,o.top=i.containerTop,o.left=i.containerLeft,h(),hn(i.scrollPos),s.set(null),z(t,!1),t.off("remove",h);else{const e=Be(r(c),Ut(),e=>{j(t)&&!V(c)&&s.get()!==null&&de(t,s)}),n={scrollPos:un(),containerWidth:o.width,containerHeight:o.height,containerTop:o.top,containerLeft:o.left,iframeWidth:a.width,iframeHeight:a.height,fullscreenChangeHandler:e};m&&cn(t.dom,d,p),a.width=a.height="100%",o.width=o.height="",f(Z.addClass),te.bind(d),t.on("remove",h),s.set(n),j(t)&&Kt(c),z(t,!0)}},pn=(e,t)=>{e.addCommand("mceFullScreen",()=>{de(e,t)})},ue=(e,t)=>n=>{n.setActive(t.get()!==null);const s=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",s),()=>e.off("FullscreenStateChanged",s)},vn=(e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:ue(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:ue(e,t)})};he=()=>{bn.add("fullscreen",e=>{const t=we(null);return e.inline?_e(t):(Bt(e),pn(e,t),vn(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen"),_e(t))})},he()})()