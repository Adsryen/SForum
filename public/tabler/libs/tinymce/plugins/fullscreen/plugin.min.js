!function(){"use strict";const Z=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};N=tinymce.util.Tools.resolve("tinymce.PluginManager");const I=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(s=o=e,(i=String).prototype.isPrototypeOf(s)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===i.name)?"string":t;var n,s,o,i})(t)===e,b=e=>t=>typeof t===e,G=e=>t=>e===t,se=I("string"),ze=I("array"),ee=G(null),_e=b("boolean"),pe=G(void 0),r=e=>!(e=>e==null)(e),u=b("function"),ye=b("number"),d=()=>{},t=e=>()=>e;function Ne(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const R=t(!1),qe=t(!0);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return r(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const M=t=>{const n=Z(e.none()),s=()=>n.get().each(t);return{clear:()=>{s(),n.set(e.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:t=>{s(),n.set(e.some(t))}}},k=()=>M(e=>e.unbind()),ve=Array.prototype.push,w=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s},m=(e,t)=>{for(let n=0,s=e.length;n<s;n++)t(e[n],n)},_=(e,t)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];t(o,s)&&n.push(o)}return n},C=(t,n)=>((t,n,s)=>{for(let o=0,a=t.length;o<a;o++){const i=t[o];if(n(i,o))return e.some(i);if(s(i,o))break}return e.none()})(t,n,R),Ge=Object.keys,s=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return-1!==o&&(!!pe(s)||o+t.length<=s)},A=e=>void 0!==e.style&&u(e.style.getPropertyValue),Fe=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},n=Fe;"undefined"!=typeof window?window:Function("return this;")();const c=e=>t=>(e=>e.dom.nodeType)(t)===e,Ke=c(1),$e=c(3),Ve=c(9),Be=c(11),L=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},a=e=>n(e.dom.ownerDocument),Pe=e=>w(e.dom.childNodes,n),H=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),Re=t(H),Le=H?e=>n(e.dom.getRootNode()):e=>Ve(e)?e:a(e),p=t=>{const n=Le(t);return Be(s=n)&&r(s.dom.host)?e.some(n):e.none();var s},h=e=>n(e.dom.host),W=e=>{const t=$e(e)?e.dom.parentNode:e.dom;if(t==null||null===t.ownerDocument)return!1;const i=t.ownerDocument;return p(n(t)).fold(()=>i.body.contains(t),(s=W,o=h,e=>s(o(e))));var s,o},U=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},K=(e,t)=>{e.dom.removeAttribute(t)},y=(e,t)=>{const n=e.dom;((e,t)=>{const n=Ge(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];t(e[o],o)}})(t,(e,t)=>{((e,t,n)=>{if(!se(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);A(e)&&e.style.setProperty(t,n)})(n,t,e)})},Y=t=>{const c=n((t=>{if(Re()&&r(t.target)){const s=n(t.target);if(Ke(s)&&r(s.dom.shadowRoot)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return((t)=>0<t.length?e.some(t[0]):e.none())(n)}}return e.from(t.target)})(t).getOr(t.target)),s=()=>t.stopPropagation(),o=()=>t.preventDefault(),l=(i=o,a=s,(...e)=>i(a.apply(null,e)));var i,a;return((e,t,n,s,o,i,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:i,raw:a}))(c,t.clientX,t.clientY,s,o,l,t)},Me=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Ae=qe,we=(e,t,n)=>((e,t,n,s)=>((e,t,n,s,o)=>{const i=((e,t)=>n=>{e(n)&&t(Y(n))})(n,s);return e.dom.addEventListener(t,i,o),{unbind:Ne(Me,e,t,i,o)}})(e,t,n,s,!1))(e,t,Ae,n),O=()=>v(0,0),v=(e,t)=>({major:e,minor:t}),i={nu:v,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?O():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}})(e,t);if(!n)return{major:0,minor:0};const s=e=>Number(t.replace(n,"$"+e));return v(s(1),s(2))})(e,n)},unknown:O},te=(e,t)=>{const n=String(t).toLowerCase();return C(e,e=>e.search(n))},f=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,o=e=>t=>s(t,e),je=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>s(e,"edge/")&&s(e,"chrome")&&s(e,"safari")&&s(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,f],search:e=>s(e,"chrome")&&!s(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>s(e,"msie")||s(e,"trident")},{name:"Opera",versionRegexes:[f,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:o("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:o("firefox")},{name:"Safari",versionRegexes:[f,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(s(e,"safari")||s(e,"mobile/"))&&s(e,"applewebkit")}],ge=[{name:"Windows",search:o("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>s(e,"iphone")||s(e,"ipad"),versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:o("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:o("mac os x"),versionRegexes:[/.*?mac os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:o("linux"),versionRegexes:[]},{name:"Solaris",search:o("sunos"),versionRegexes:[]},{name:"FreeBSD",search:o("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:o("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ae={browsers:t(je),oses:t(ge)},re="Edge",ce="Chromium",le="Opera",x="Firefox",ue="Safari",he=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isEdge:t(re),isChromium:t(ce),isIE:t("IE"),isOpera:t(le),isFirefox:t(x),isSafari:t(ue)}},Te=()=>he({current:void 0,version:i.unknown()}),Ye=he,fe=(t(re),t(ce),t("IE"),t(le),t(x),t(ue),"Windows"),me="Android",de="Linux",ie="macOS",oe="Solaris",ne="FreeBSD",J="ChromeOS",Q=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isWindows:t(fe),isiOS:t("iOS"),isAndroid:t(me),isMacOS:t(ie),isLinux:t(de),isSolaris:t(oe),isFreeBSD:t(ne),isChromeOS:t(J)}},Oe=()=>Q({current:void 0,version:i.unknown()}),xe=Q,Ce=(t(fe),t("iOS"),t(me),t(de),t(ie),t(oe),t(ne),t(J),(n,s,o)=>{const a=ae.browsers(),l=ae.oses(),r=s.bind(t=>((t,n)=>((t,n)=>{for(let e=0;e<t.length;e++){const s=n(t[e]);if(s.isSome())return s}return e.none()})(n.brands,e=>{const n=e.brand.toLowerCase();return C(t,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(t=>({current:t.name,version:i.nu(parseInt(e.version,10),0)}))}))(a,t)).orThunk(()=>((e,t)=>te(e,t).map(e=>{const n=i.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(a,n)).fold(Te,Ye),c=((e,t)=>te(e,t).map(e=>{const n=i.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(l,n).fold(Oe,xe),d=((e,n,s,o)=>{const i=e.isiOS()&&!0===/ipad/i.test(s),a=e.isiOS()&&!i,r=e.isiOS()||e.isAndroid(),u=r||o("(pointer:coarse)"),c=i||!a&&r&&o("(min-device-width:768px)"),l=a||r&&!c,d=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(s),h=!l&&!c&&!d;return{isiPad:t(i),isiPhone:t(a),isTablet:t(c),isPhone:t(l),isTouch:t(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:t(d),isDesktop:t(h)}})(c,r,n,o);return{browser:r,os:c,deviceType:d}}),Ee=e=>window.matchMedia(e).matches;let ke=(e=>{let t,n=!1;return(...s)=>(n||(n=!0,t=e.apply(null,s)),t)})(()=>Ce(navigator.userAgent,e.from(navigator.userAgentData),Ee));const X=(e,t)=>({left:e,top:t,translate:(n,s)=>X(e+n,t+s)}),Se=X,g=t=>{const n=void 0===t?window:t;return ke().browser.isFirefox()?e.none():e.from(n.visualViewport)},q=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),be=e=>{const s=void 0===e?window:e,o=s.document,t=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Se(n,s)})(n(o));return g(s).fold(()=>{const e=s.document.documentElement,n=e.clientWidth,o=e.clientHeight;return q(t.left,t.top,n,o)},e=>q(Math.max(e.pageLeft,t.left),Math.max(e.pageTop,t.top),e.width,e.height))},$=(e,t,n)=>g(n).map(n=>{const s=e=>t(Y(e));return n.addEventListener(e,s),{unbind:()=>n.removeEventListener(e,s)}}).getOrThunk(()=>({unbind:d}));var N,De=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.Env");const B=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},j=("fullscreen_native",e=>e.options.get("fullscreen_native")),P=e=>{return e.dom===(void 0!==(t=a(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},He=(e,t,s)=>((e,t,s)=>_(((e,t)=>{const i=u(t)?t:R;let s=e.dom;const o=[];for(;null!==s.parentNode&&void 0!==s.parentNode;){const e=s.parentNode,t=n(e);if(o.push(t),!0===i(t))break;s=e}return o})(e,s),t))(e,e=>L(e,t),s),Ie=(t,s)=>((t)=>{return _((t=>e.from(t.dom.parentNode).map(n))(i=t).map(Pe).map(e=>_(e,e=>{return t=e,i.dom!==t.dom;var t})).getOr([]),e=>L(e,s));var i})(t),l="data-ephox-mobile-fullscreen-style",D="position:absolute!important;",z="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",We=V.os.isAndroid(),Ue=e=>{const t=((e,t)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(t);return""!==s||W(e)?s:((e,t)=>A(e)?e.style.getPropertyValue(t):"")(n,t)})(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},T=De.DOM,F=g().fold(()=>({bind:d,unbind:d}),e=>{const t=(()=>{const e=M(d);return{...e,on:t=>e.get().each(t)}})(),s=k(),o=k(),n=((e)=>{let n=null;return{cancel:()=>{ee(n)||(clearTimeout(n),n=null)},throttle:(...t)=>{ee(n)&&(n=setTimeout(()=>{n=null,e.apply(null,t)},50))}}})(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(()=>{t.on(t=>y(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})});return{bind:e=>{t.set(e),n.throttle(),s.set($("resize",n.throttle)),o.set($("scroll",n.throttle))},unbind:()=>{t.on(()=>{s.clear(),o.clear()}),t.clear()}}}),S=(t,s)=>{const O=document.body,C=document.documentElement,u=t.getContainer(),f=n(u),c=(e=>{const t=n(e.getElement());return p(t).map(h).getOrThunk(()=>(e=>{const t=e.dom.body;if(t==null)throw new Error("Body is not available yet");return n(t)})(a(t)))})(t),i=s.get(),x=n(t.getBody()),b=V.deviceType.isTouch(),o=u.style,v=t.iframeElement,r=v?.style,_=e=>{e(O,"tox-fullscreen"),e(C,"tox-fullscreen"),e(u,"tox-fullscreen"),p(f).map(e=>h(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},g=()=>{b&&(e=>{const t=((e)=>{const o=document;return 1!==(s=o).nodeType&&9!==s.nodeType&&11!==s.nodeType||0===s.childElementCount?[]:w(o.querySelectorAll(e),n);var s})("["+l+"]");m(t,t=>{const n=U(t,l);n&&"no-styles"!==n?y(t,e.parseStyle(n)):K(t,"style"),K(t,l)})})(t.dom),_(T.removeClass),F.unbind(),e.from(s.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(i)i.fullscreenChangeHandler.unbind(),j(t)&&P(c)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(a(c)),r.width=i.iframeWidth,r.height=i.iframeHeight,o.width=i.containerWidth,o.height=i.containerHeight,o.top=i.containerTop,o.left=i.containerLeft,g(),d=i.scrollPos,window.scrollTo(d.x,d.y),s.set(null),B(t,!1),t.off("remove",g);else{const e=we(a(c),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",e=>{j(t)&&(P(c)||null===s.get()||S(t,s))}),n={scrollPos:be(window),containerWidth:o.width,containerHeight:o.height,containerTop:o.top,containerLeft:o.left,iframeWidth:r.width,iframeHeight:r.height,fullscreenChangeHandler:e};b&&((e,t,n)=>{const s=t=>n=>{const s=U(n,"style"),o=void 0===s?"no-styles":s.trim();o!==t&&(((e,t,n)=>{((e,t,n)=>{if(!(se(n)||_e(n)||ye(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)})(n,l,o),y(n,e.parseStyle(t)))},o=He(t,"*"),a=(e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!ze(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ve.apply(t,e[n])}return t})(w(o,e=>Ie(e,"*:not(.tox-silver-sink)"))),i=Ue(n);m(a,s("display:none!important;")),m(o,s(D+z+i)),s((!0===We?"":D)+z+i)(t)})(t.dom,f,x),r.width=r.height="100%",o.width=o.height="",_(T.addClass),F.bind(f),t.on("remove",g),s.set(n),j(t)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(c),B(t,!0)}var d},E=(e,t)=>n=>{n.setActive(null!==t.get());const s=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",s),()=>e.off("FullscreenStateChanged",s)};N.add("fullscreen",e=>{const t=Z(null);return e.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(e),((e,t)=>{e.addCommand("mceFullScreen",()=>{S(e,t)})})(e,t),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:E(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:E(e,t)})})(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),(e=>({isFullscreen:()=>null!==e.get()}))(t)})}()