!function(){"use strict";var b=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=e=>t=>typeof t===e,w=e=>"string"===(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(s=o=e,(i=String).prototype.isPrototypeOf(s)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===i.name)?"string":t;var n,s,o,i})(e),_=o("boolean"),u=e=>!(e=>e==null)(e),s=o("function"),E=o("number"),v=(!1,()=>!1);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return u(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const l=(e,t)=>{for(let n=0,s=e.length;n<s;n++)t(e[n],n)},C=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},t=C,h=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const n=e=>t=>(e=>e.dom.nodeType)(t)===e,r=n(1),p=n(3),g=n(9),f=n(11),a=(e,t)=>{e.dom.removeAttribute(t)},j=s(Element.prototype.attachShadow)&&s(Node.prototype.getRootNode)?e=>t(e.dom.getRootNode()):e=>g(e)?e:t(e.dom.ownerDocument),y=e=>t(e.dom.host),m=n=>{const s=p(n)?n.dom.parentNode:n.dom;if(s==null||null===s.ownerDocument)return!1;const a=s.ownerDocument;return(t=>{const n=j(t);return f(s=n)&&u(s.dom.host)?e.some(n):e.none();var s})(t(s)).fold(()=>a.body.contains(s),(o=m,i=y,e=>o(i(e))));var o,i},i=e=>"rtl"===((e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||m(e)?o:((e,t)=>(e=>void 0!==e.style&&s(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"")(n,t)})(e,"direction")?"rtl":"ltr",O=(e,n)=>((e)=>((e,t)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];t(o,s)&&n.push(o)}return n})(((e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s})(e.dom.childNodes,t),e=>h(e,n)))(e),x=("li",e=>r(e)&&"li"===e.dom.nodeName.toLowerCase()),d=(n,o)=>{const c=n.selection.getSelectedBlocks();c.length>0&&(l(c,n=>{const d=t(n),u=x(d),c=((n,o)=>{return(o?(i=n,a="ol,ul",((n,o,i)=>{let r=n.dom;const c=s(i)?i:v;for(;r.parentNode;){r=r.parentNode;const n=t(r);if(h(n,a))return e.some(n);if(c(n))break}return e.none()})(i,0,r)):e.some(n)).getOr(n);var i,a,r})(d,u);var m;(m=c,(n=>e.from(n.dom.parentNode).map(t))(m).filter(r)).each(e=>{if(i(e)!==o?((e,t,n)=>{((e,t,n)=>{if(!(w(n)||_(n)||E(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)})(c,"dir",o):i(c)!==o&&a(c,"dir"),u){const e=O(c,"li[dir]");l(e,e=>a(e,"dir"))}})}),n.nodeChanged())},c=(e,n)=>s=>{const o=e=>{const o=t(e.element);s.setActive(i(o)===n)};return e.on("NodeChange",o),()=>e.off("NodeChange",o)};b.add("directionality",e=>{(e=>{e.addCommand("mceDirectionLTR",()=>{d(e,"ltr")}),e.addCommand("mceDirectionRTL",()=>{d(e,"rtl")})})(e),(e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:c(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:c(e,"rtl")})})(e)})}()