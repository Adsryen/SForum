!function(){"use strict";var n,h=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=e=>t=>t.options.get(e),m=e("autolink_pattern"),l=e("link_default_target"),p=e("link_default_protocol"),d=e("allow_unsafe_link_target"),c=("string",e=>"string"===(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(s=o=e,(i=String).prototype.isPrototypeOf(s)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===i.name)?"string":t;var n,s,o,i})(e)),u=(void 0,e=>void 0===e),r=e=>!(e=>e==null)(e),g=Object.hasOwnProperty,f=e=>"ï»¿"===e;n=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const t=e=>/^[([{ \u00a0]$/.test(e),a=(e,t,n)=>{for(let s=t-1;s>=0;s--){const o=e.charAt(s);if(!f(o)&&n(o))return s}return-1},i=(e,s)=>{var c,l,w;const C=e.schema.getVoidElements(),x=m(e),{dom:o,selection:h}=e;if(null!==o.getParent(h.getNode(),"a[href]"))return null;const y=h.getRng(),b=n(o,e=>{return o.isBlock(e)||(t=C,n=e.nodeName.toLowerCase(),g.call(t,n))||"false"===o.getContentEditable(e);var t,n}),{container:f,offset:O}=((e,t)=>{let n=e,s=t;for(;1===n.nodeType&&n.childNodes[s];)n=n.childNodes[s],s=3===n.nodeType?n.data.length:n.childNodes.length;return{container:n,offset:s}})(y.endContainer,y.endOffset),v=null!==(l=o.getParent(f,o.isBlock))&&void 0!==l?l:o.getRoot(),i=b.backwards(f,O+s,(e,n)=>{const o=e.data,s=a(o,n,(i=t,e=>!i(e)));var i,r;return-1===s||(r=o[s],/[?!,.;:]/.test(r))?s:s+1},v);if(!i)return null;let j=i.container;const d=b.backwards(i.container,i.offset,(e,n)=>{j=e;const s=a(e.data,n,t);return-1===s?s:s+1},v),r=o.createRng();d?r.setStart(d.container,d.offset):r.setStart(j,0),r.setEnd(i.container,i.offset);const _=r.toString().replace(/\uFEFF/g,"").match(x);if(_){let t=_[0];return c="www.",(w=t).length>=c.length&&w.substr(0,0+c.length)===c?t=p(e)+"://"+t:((e,t,n=0,s)=>{const o=e.indexOf(t,n);return-1!==o&&(!!u(s)||o+t.length<=s)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t),{rng:r,url:t}}return null},o=(e,t)=>{const{dom:s,selection:n}=e,{rng:r,url:o}=t,u=n.getBookmark();n.setRng(r);const i="createlink",a={command:i,ui:!1,value:o};if(!e.dispatch("BeforeExecCommand",a).isDefaultPrevented()){e.getDoc().execCommand(i,!1,o),e.dispatch("ExecCommand",a);const t=l(e);if(c(t)){const o=n.getNode();s.setAttrib(o,"target",t),"_blank"!==t||d(e)||s.setAttrib(o,"rel","noopener")}}n.moveToBookmark(u),e.nodeChanged()},s=e=>{const t=i(e,-1);r(t)&&o(e,t)},v=s;h.add("autolink",e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),/\w]*[-~*+=%@$()/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),(e=>{e.on("keydown",t=>{13!==t.keyCode||t.isDefaultPrevented()||(e=>{const t=i(e,0);r(t)&&o(e,t)})(e)}),e.on("keyup",t=>{32===t.keyCode?s(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&v(e)})})(e)})}()