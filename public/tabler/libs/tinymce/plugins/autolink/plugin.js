(function(){"use strict";var n,c,y=tinymce.util.Tools.resolve("tinymce.PluginManager");const H=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),/\w]*[-~*+=%@$()/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),/\w]+))?/g,e=e=>t=>t.options.get(e),N=e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+H().source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})},D=e("autolink_pattern"),z=e("link_default_target"),F=e("link_default_protocol"),A=e("allow_unsafe_link_target"),C=(e,t,n)=>{var s;return!!n(e,t.prototype)||((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},p=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&C(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},x=e=>t=>p(t)===e,u=e=>t=>e===t,h=x("string"),m=u(void 0),f=e=>e==null,t=e=>!f(e),g=e=>t=>!e(t),v=Object.hasOwnProperty,b=(e,t)=>v.call(e,t),j=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,l=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1&&(!!m(s)||o+t.length<=s)},_=(e,t)=>j(e,t,0),w="ï»¿",O=e=>e===w,d=e=>e.replace(/\uFEFF/g,"");c=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const E=e=>e.nodeType===3,k=e=>e.nodeType===1,r=e=>/^[([{ \u00a0]$/.test(e),S=e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e),M=e=>/[?!,.;:]/.test(e),a=(e,t,n)=>{for(let s=t-1;s>=0;s--){const o=e.charAt(s);if(!O(o)&&n(o))return s}return-1},T=(e,t)=>{let n=e,s=t;for(;k(n)&&n.childNodes[s];)n=n.childNodes[s],s=E(n)?n.data.length:n.childNodes.length;return{container:n,offset:s}},i=(e,t)=>{var u;const x=e.schema.getVoidElements(),O=D(e),{dom:n,selection:h}=e;if(n.getParent(h.getNode(),"a[href]")!==null)return null;const v=h.getRng(),m=c(n,e=>n.isBlock(e)||b(x,e.nodeName.toLowerCase())||n.getContentEditable(e)==="false"),{container:f,offset:w}=T(v.endContainer,v.endOffset),p=(u=n.getParent(f,n.isBlock))!==null&&u!==void 0?u:n.getRoot(),s=m.backwards(f,w+t,(e,t)=>{const s=e.data,n=a(s,t,g(r));return n===-1||M(s[n])?n:n+1},p);if(!s)return null;let j=s.container;const i=m.backwards(s.container,s.offset,(e,t)=>{j=e;const n=a(e.data,t,r);return n===-1?n:n+1},p),o=n.createRng();i?o.setStart(i.container,i.offset):o.setStart(j,0),o.setEnd(s.container,s.offset);const C=d(o.toString()),y=C.match(O);if(y){let t=y[0];if(_(t,"www.")){const n=F(e);t=n+"://"+t}else l(t,"@")&&!S(t)&&(t="mailto:"+t);return{rng:o,url:t}}return null},o=(e,t)=>{const{dom:s,selection:n}=e,{rng:r,url:o}=t,c=n.getBookmark();n.setRng(r);const i="createlink",a={command:i,ui:!1,value:o},l=e.dispatch("BeforeExecCommand",a);if(!l.isDefaultPrevented()){e.getDoc().execCommand(i,!1,o),e.dispatch("ExecCommand",a);const t=z(e);if(h(t)){const o=n.getNode();s.setAttrib(o,"target",t),t==="_blank"&&!A(e)&&s.setAttrib(o,"rel","noopener")}}n.moveToBookmark(c),e.nodeChanged()},s=e=>{const n=i(e,-1);t(n)&&o(e,n)},L=s,R=e=>{const n=i(e,0);t(n)&&o(e,n)},P=e=>{e.on("keydown",t=>{t.keyCode===13&&!t.isDefaultPrevented()&&R(e)}),e.on("keyup",t=>{t.keyCode===32?s(e):(t.keyCode===48&&t.shiftKey||t.keyCode===221)&&L(e)})};n=()=>{y.add("autolink",e=>{N(e),P(e)})},n()})()