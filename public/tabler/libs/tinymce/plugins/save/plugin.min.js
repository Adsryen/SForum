!function(){"use strict";t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=("function",e=>"function"==typeof e);var t,a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.Tools");const e=e=>t=>t.options.get(e),s=e("save_enablewhendirty"),c=e("save_onsavecallback"),l=e("save_oncancelcallback"),o=(e,t)=>{e.notificationManager.open({text:t,type:"error"})},i=e=>t=>{const n=()=>{t.setEnabled(!s(e)||e.isDirty())};return n(),e.on("NodeChange dirty",n),()=>e.off("NodeChange dirty",n)};t.add("save",e=>{(e=>{const t=e.options.register;t("save_enablewhendirty",{processor:"boolean",default:!0}),t("save_onsavecallback",{processor:"function"}),t("save_oncancelcallback",{processor:"function"})})(e),(e=>{e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>e.execCommand("mceSave"),onSetup:i(e)}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>e.execCommand("mceCancel"),onSetup:i(e)}),e.addShortcut("Meta+S","","mceSave")})(e),(e=>{e.addCommand("mceSave",()=>{(e=>{const t=a.DOM.getParent(e.id,"form");if(s(e)&&!e.isDirty())return;e.save();const i=c(e);if(n(i))return i.call(e,e),void e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():o(e,"Error: Form submit field collision.")),e.nodeChanged()):o(e,"Error: No form element found.")})(e)}),e.addCommand("mceCancel",()=>{(e=>{const s=r.trim(e.startContent),t=l(e);n(t)?t.call(e,e):e.resetContent(s)})(e)})})(e)})}()