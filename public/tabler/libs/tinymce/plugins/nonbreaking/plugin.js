(function(){"use strict";var n,s,a=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,p=t("boolean"),h=t("number"),i=e=>t=>t.options.get(e),c=e=>{const t=e.options.register;t("nonbreaking_force_tab",{processor:e=>p(e)?{value:e?3:0,valid:!0}:h(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),t("nonbreaking_wrap",{processor:"boolean",default:!0})},r=i("nonbreaking_force_tab"),d=i("nonbreaking_wrap"),e=(e,t)=>{let n="";for(let s=0;s<t;s++)n+=e;return n},l=e=>!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled(),o=(t,n)=>{const s=()=>l(t)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",o=()=>`<span class="${s()}" contenteditable="false">${e("&nbsp;",n)}</span>`,i=d(t),a=i||t.plugins.visualchars?o():e("&nbsp;",n);t.undoManager.transact(()=>t.insertContent(a))},u=e=>{e.addCommand("mceNonBreaking",()=>{o(e,1)})};s=tinymce.util.Tools.resolve("tinymce.util.VK");const m=e=>{const t=r(e);t>0&&e.on("keydown",n=>{if(n.keyCode===s.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),o(e,t)}})},f=e=>{const t=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:t}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:t})};n=()=>{a.add("nonbreaking",e=>{c(e),u(e),f(e),m(e)})},n()})()