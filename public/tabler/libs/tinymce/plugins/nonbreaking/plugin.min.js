!function(){"use strict";var o,i=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=e=>t=>typeof t===e,a=e("boolean"),r=e("number"),t=e=>t=>t.options.get(e),c=t("nonbreaking_force_tab"),l=t("nonbreaking_wrap"),n=(e,t)=>{let n="";for(let s=0;s<t;s++)n+=e;return n},s=(e,t)=>{const s=l(e)||e.plugins.visualchars?`<span class="${(e=>!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled())(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${n("&nbsp;",t)}</span>`:n("&nbsp;",t);e.undoManager.transact(()=>e.insertContent(s))};o=tinymce.util.Tools.resolve("tinymce.util.VK"),i.add("nonbreaking",e=>{(e=>{const t=e.options.register;t("nonbreaking_force_tab",{processor:e=>a(e)?{value:e?3:0,valid:!0}:r(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),t("nonbreaking_wrap",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceNonBreaking",()=>{s(e,1)})})(e),(e=>{const t=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:t}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:t})})(e),(e=>{const t=c(e);t>0&&e.on("keydown",n=>{if(n.keyCode===o.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),s(e,t)}})})(e)})}()