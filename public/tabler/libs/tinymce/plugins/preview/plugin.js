(function(){"use strict";var n,a=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),h=tinymce.util.Tools.resolve("tinymce.util.Tools");const e=e=>t=>t.options.get(e),o=e("content_style"),i=e("content_css_cors"),s=e("body_class"),r=e("body_id"),c=e=>{var c;let a="";const n=e.dom.encode,l=(c=o(e))!==null&&c!==void 0?c:"";a+='<base href="'+n(e.documentBaseURI.getURI())+'">';const u=i(e)?' crossorigin="anonymous"':"";h.each(e.contentCSS,t=>{a+='<link type="text/css" rel="stylesheet" href="'+n(e.documentBaseURI.toAbsolute(t))+'"'+u+">"}),l&&(a+='<style type="text/css">'+l+"</style>");const m=r(e),f=s(e),p=t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey",g='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+p+")) {e.preventDefault();}}}, false);<\/script> ",d=e.getBody().dir,v=d?' dir="'+n(d)+'"':"",b="<!DOCTYPE html><html><head>"+a+'</head><body id="'+n(m)+'" class="mce-content-body '+n(f)+'"'+v+">"+e.getContent()+g+"</body></html>";return b},l=e=>{const t=c(e),n=e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:t}});n.focus("close")},d=e=>{e.addCommand("mcePreview",()=>{l(e)})},u=e=>{const t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})};n=()=>{a.add("preview",e=>{d(e),u(e)})},n()})()