!function(){"use strict";r=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(s=o=e,(i=String).prototype.isPrototypeOf(s)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===i.name)?"string":t;var n,s,o,i})(t)===e,s=n("string"),x=n("object"),O=n("array"),w=("function",e=>"function"==typeof e);var r,h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.EditorManager"),b=tinymce.util.Tools.resolve("tinymce.Env"),e=tinymce.util.Tools.resolve("tinymce.util.Tools");const t=e=>t=>t.options.get(e),u=t("importcss_merge_classes"),l=t("importcss_exclusive"),m=t("importcss_selector_converter"),f=t("importcss_selector_filter"),p=t("importcss_groups"),g=t("importcss_append"),v=t("importcss_file_filter"),d=t("skin"),j=t("skin_url"),y=Array.prototype.push,_=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,o=e=>s(e)?t=>-1!==t.indexOf(e):e instanceof RegExp?t=>e.test(t):e,a=(t,n)=>{let s={};const i=/^(?:([a-z0-9-_]+))?(\.[a-z0-9_\-.]+)$/i.exec(n);if(!i)return;const o=i[1],a=i[2].substr(1).split(".").join(" "),r=e.makeMap("a,img");return i[1]?(s={title:n},t.schema.getTextBlockElements()[o]?s.block=o:t.schema.getBlockElements()[o]||r[o.toLowerCase()]?s.selector=o:s.inline=o):i[2]&&(s={inline:"span",title:n.substr(1),classes:a}),u(t)?s.classes=a:s.attributes={class:a},s},i=(e,t)=>null===t||l(e),C=t=>{t.on("init",()=>{const n=(()=>{const t=[],n=[],e={};return{addItemToGroup:(t,s)=>{e[t]?e[t].push(s):(n.push(t),e[t]=[s])},addItem:e=>{t.push(e)},toFormats:()=>{return(s=n,o=t=>{const n=e[t];return 0===n.length?[]:[{title:t,items:n}]},(e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!O(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);y.apply(t,e[n])}return t})(((e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s})(s,o))).concat(t);var s,o}}})(),r={},l=o(f(t)),w=(t=>e.map(t,t=>e.extend({},t,{original:t,selectors:{},filter:o(t.filter)})))(p(t)),u=(e,n)=>{if(((e,t,n,s)=>!(i(e,n)?t in s:t in n.selectors))(t,e,n,r)){((e,t,n,s)=>{i(e,n)?s[t]=!0:n.selectors[t]=!0})(t,e,n,r);const s=((e,t,n,s)=>{let o;const i=m(e);return o=s&&s.selector_converter?s.selector_converter:i||(()=>a(e,n)),o.call(t,n,s)})(t,t.plugins.importcss,e,n);if(s){const e=s.name||h.DOM.uniqueId();return t.formatter.register(e,s),{title:s.title,format:e}}}return null};e.each(((t,n,o)=>{const a=[],r={},i=(n,r)=>{let u,l=n.href;if(l=(e=>{const t=b.cacheSuffix;return s(e)&&(e=e.replace("?"+t,"").replace("&"+t,"")),e})(l),l&&(!o||o(l,r))&&!((e,t)=>{const n=d(e);if(n){const s=j(e),o=s?e.documentBaseURI.toAbsolute(s):c.baseURL+"/skins/ui/"+n,i=c.baseURL+"/skins/content/";return t===o+"/content"+(e.inline?".inline":"")+".min.css"||-1!==t.indexOf(i)}return!1})(t,l)){e.each(n.imports,e=>{i(e,!0)});try{u=n.cssRules||n.rules}catch{}e.each(u,t=>{t.styleSheet?i(t.styleSheet,!0):t.selectorText&&e.each(t.selectorText.split(","),t=>{a.push(e.trim(t))})})}};e.each(t.contentCSS,e=>{r[e]=!0}),o||(o=(e,t)=>t||r[e]);try{e.each(n.styleSheets,e=>{i(e)})}catch{}return a})(t,t.getDoc(),o(v(t))),t=>{if(!_.test(t)&&(!l||l(t))){const s=((t,n)=>e.grep(t,e=>!e.filter||e.filter(n)))(w,t);if(s.length>0)e.each(s,e=>{const s=u(t,e);s&&n.addItemToGroup(e.title,s)});else{const e=u(t,null);e&&n.addItem(e)}}});const x=n.toFormats();t.dispatch("addStyleModifications",{items:x,replace:!g(t)})})};r.add("importcss",e=>((e=>{const t=e.options.register,n=e=>s(e)||w(e)||x(e);t("importcss_merge_classes",{processor:"boolean",default:!0}),t("importcss_exclusive",{processor:"boolean",default:!0}),t("importcss_selector_converter",{processor:"function"}),t("importcss_selector_filter",{processor:n}),t("importcss_file_filter",{processor:n}),t("importcss_groups",{processor:"object[]"}),t("importcss_append",{processor:"boolean",default:!1})})(e),C(e),(e=>({convertSelectorToFormat:t=>a(e,t)}))(e)))}()