(function(){"use strict";const k=e=>{let t=e;const n=()=>t,s=e=>{t=e};return{get:n,set:s}};var n,i,m,W,Je=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qe=(e,t,n)=>{var s;return!!n(e,t.prototype)||((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},Ge=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Qe(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},S=e=>t=>Ge(t)===e,O=e=>t=>typeof t===e,$e=S("string"),Ve=S("array"),Ie=O("boolean"),He=e=>e==null,Pe=e=>!He(e),Le=O("number"),Ne=()=>{},y=e=>()=>e,j=y(!0),De="[!-#%-*,-\\/:;?@\\[-\\]_{}\xA1\xAB\xB7\xBB\xBF;\xB7՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",ze=y(De);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return Pe(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const b=ze;i=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const Fe=Array.prototype.slice,Ae=Array.prototype.push,r=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s},x=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},C=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},ke=(e,t)=>{if(e.length===0)return[];let o=t(e[0]);const s=[];let n=[];for(let i=0,c=e.length;i<c;i++){const a=e[i],r=t(a);r!==o&&(s.push(n),n=[]),o=r,n.push(a)}return n.length!==0&&s.push(n),s},U=(e,t,n)=>(x(e,(e,s)=>{n=t(n,e,s)}),n),Oe=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Ve(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Ae.apply(t,e[n])}return t},a=(e,t)=>Oe(r(e,t)),K=(e,t)=>{const n=Fe.call(e,0);return n.sort(t),n},ye=Object.hasOwnProperty,T=(e,t)=>ye.call(e,t);typeof window!="undefined"?window:Function("return this;")();const je=9,be=11,ve=1,ge=3,me=e=>e.dom.nodeType,ue=e=>t=>me(t)===e,de=ue(ge),le=(e,t,n)=>{if($e(n)||Ie(n)||Le(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},ie=(e,t,n)=>{le(e.dom,t,n)},ne=(e,t)=>{const o=t||document,n=o.createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return s(n.childNodes[0])},Z=(e,t)=>{const n=t||document,o=n.createElement(e);return s(o)},q=(e,t)=>{const n=t||document,o=n.createTextNode(e);return s(o)},s=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},we=(t,n,o)=>e.from(t.dom.elementFromPoint(n,o)).map(s),t={fromHtml:ne,fromTag:Z,fromText:q,fromDom:s,fromPoint:we},Y=e=>e.nodeType!==ve&&e.nodeType!==je&&e.nodeType!==be||e.childElementCount===0,G=(e,n)=>{const s=n===void 0?document:n.dom;return Y(s)?[]:r(s.querySelectorAll(e),t.fromDom)},X=n=>e.from(n.dom.parentNode).map(t.fromDom),Q=e=>r(e.dom.childNodes,t.fromDom),$=(e,t)=>({element:e,offset:t}),J=(e,t)=>{const n=Q(e);return n.length>0&&t<n.length?$(n[t],0):$(e,t)},ee=(e,t)=>{const n=X(e);n.each(n=>{n.dom.insertBefore(t.dom,e.dom)})},te=(e,t)=>{e.dom.appendChild(t.dom)},V=(e,t)=>{ee(e,t),te(t,e)},se=(t,n)=>{const o=e=>{if(!t(e))throw new Error("Can only get "+n+" value of a "+n+" node");return s(e).getOr("")},s=n=>t(n)?e.from(n.dom.nodeValue):e.none(),i=(e,s)=>{if(!t(e))throw new Error("Can only set raw "+n+" value of a "+n+" node");e.dom.nodeValue=s};return{get:o,getOption:s,set:i}},oe=se(de,"text"),B=e=>oe.get(e),ae=(e,t,n)=>(e.compareDocumentPosition(t)&n)!==0,re=(e,t)=>ae(e,t,Node.DOCUMENT_POSITION_PRECEDING),ce=(e,t)=>G(t,e);m=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const H=(e,t)=>e.isBlock(t)||T(e.schema.getVoidElements(),t.nodeName),P=(e,t)=>e.getContentEditable(t)==="false",he=(e,t)=>e.getContentEditable(t)==="true"&&t.parentNode&&e.getContentEditableParent(t.parentNode)==="false",R=(e,t)=>!e.isBlock(t)&&T(e.schema.getWhitespaceElements(),t.nodeName),fe=(e,t)=>H(e,t)||P(e,t)||R(e,t)||he(e,t),pe=e=>e.nodeType===3,L=()=>({sOffset:0,fOffset:0,elements:[]}),N=(e,n)=>J(t.fromDom(e),n),D=(e,t,n,s,o,i=!0)=>{let a=i?t(!1):n;for(;a;){const n=P(e,a);if(n||R(e,a)){const e=n?s.cef(a):s.boundary(a);if(e)break;a=t(!0);continue}else if(H(e,a)){if(s.boundary(a))break}else pe(a)&&s.text(a);if(a===o)break;a=t(!1)}},z=(e,n,s,o,i)=>{var r;if(fe(e,s))return;const c=(r=e.getParent(o,e.isBlock))!==null&&r!==void 0?r:e.getRoot(),a=new m(s,c),l=i?a.next.bind(a):a.prev.bind(a);D(e,l,s,{boundary:j,cef:j,text:e=>{i?n.fOffset+=e.length:n.sOffset+=e.length,n.elements.push(t.fromDom(e))}})},v=(e,n,s,o,i,a=!0)=>{const d=new m(s,n),c=[];let r=L();z(e,r,s,n,!1);const l=()=>(r.elements.length>0&&(c.push(r),r=L()),!1);return D(e,d.next.bind(d),s,{boundary:l,cef:e=>(l(),i&&c.push(...i.cef(e)),!1),text:e=>{r.elements.push(t.fromDom(e)),i&&i.text(e,r)}},o,a),o&&z(e,r,o,n,!0),l(),c},_e=(e,n)=>{const s=N(n.startContainer,n.startOffset),o=s.element.dom,i=N(n.endContainer,n.endOffset),r=i.element.dom;return v(e,n.commonAncestorContainer,o,r,{text:(e,t)=>{e===r?t.fOffset+=e.length-i.offset:e===o&&(t.sOffset+=s.offset)},cef:n=>{const s=a(ce(t.fromDom(n),"*[contenteditable=true]"),t=>{const n=t.dom;return v(e,n,n)});return K(s,(e,t)=>re(e.elements[0].dom,t.elements[0].dom)?1:-1)}},!1)},M=(e,t)=>t.collapsed?[]:_e(e,t),A=(e,t)=>{const n=e.createRng();return n.selectNode(t),M(e,n)},xe=(e,t)=>a(t,t=>A(e,t)),Ce=(e,t,n=0,s=e.length)=>{const i=t.regex;i.lastIndex=n;const a=[];let o;for(;o=i.exec(e);){const n=o[t.matchIndex],r=o.index+o[0].indexOf(n),e=r+n.length;if(e>s)break;a.push({start:r,finish:e}),i.lastIndex=e}return a},Ee=(e,t)=>{const n=U(e,(e,n)=>{const i=B(n),s=e.last,o=s+i.length,r=a(t,(e,t)=>e.start<o&&e.finish>s?[{element:n,start:Math.max(s,e.start)-s,finish:Math.min(o,e.finish)-s,matchId:t}]:[]);return{results:e.results.concat(r),last:o}},{results:[],last:0}).results;return ke(n,e=>e.matchId)},E=(e,t)=>a(t,t=>{const n=t.elements,s=r(n,B).join(""),o=Ce(s,e,t.sOffset,s.length-t.fOffset);return Ee(n,o)}),g=(e,n)=>{C(e,(e,s)=>{C(e,e=>{const i=t.fromDom(n.cloneNode(!1));ie(i,"data-mce-index",s);const o=e.element.dom;if(o.length===e.finish&&e.start===0)V(e.element,i);else{o.length!==e.finish&&o.splitText(e.finish);const n=o.splitText(e.start);V(t.fromDom(n),i)}})})},Se=(e,t,n,s)=>{const i=A(e,n),o=E(t,i);return g(o,s),o.length},Me=(e,t,n,s)=>{const a=n.getBookmark(),o=e.select("td[data-mce-selected],th[data-mce-selected]"),r=o.length>0?xe(e,o):M(e,n.getRng()),i=E(t,r);return g(i,s),n.moveToBookmark(a),i.length},o=e=>e.getAttribute("data-mce-index"),Te=(e,t,n,s)=>{const o=e.dom.create("span",{"data-mce-bogus":1});o.className="mce-match-marker";const i=e.getBody();return c(e,t,!1),s?Me(e.dom,n,e.selection,o):Se(e.dom,n,i,o)},F=e=>{var t;const n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),(t=e.parentNode)===null||t===void 0?void 0:t.removeChild(e)},p=(e,t)=>{const i=[],s=n.toArray(e.getBody().getElementsByTagName("span"));if(s.length)for(let e=0;e<s.length;e++){const n=o(s[e]);if(n===null||!n.length)continue;n===t.toString()&&i.push(s[e])}return i},h=(e,t,n)=>{const o=t.get();let s=o.index;const i=e.dom;n?s+1===o.count?s=0:s++:s-1===-1?s=o.count-1:s--,i.removeClass(p(e,o.index),"mce-match-marker-selected");const a=p(e,s);return a.length?(i.addClass(p(e,s),"mce-match-marker-selected"),e.selection.scrollIntoView(a[0]),s):-1},_=(e,t)=>{const n=t.parentNode;e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},Re=(e,t)=>{const s=e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&").replace(/\s/g,`[^\\S\\r\\n\\uFEFF]`),n="("+s+")";return t?`(?:^|\\s|${b()})`+n+`(?=$|\\s|${b()})`:n},w=(e,t,n,s,o,a)=>{const r=e.selection,l=Re(n,o),d=r.isForward(),u={regex:new RegExp(l,s?"g":"gi"),matchIndex:1},c=Te(e,t,u,a);if(i.browser.isSafari()&&r.setRng(r.getRng(),d),c){const i=h(e,t,!0);t.set({index:i,count:c,text:n,matchCase:s,wholeWord:o,inSelection:a})}return c},l=(e,t)=>{const n=h(e,t,!0);t.set({...t.get(),index:n})},d=(e,t)=>{const n=h(e,t,!1);t.set({...t.get(),index:n})},Be=e=>{const t=o(e);return t!==null&&t.length>0},u=(e,t,s,i,a)=>{const c=t.get(),h=c.index;let u,m=h;i=i!==!1;const f=e.getBody(),r=n.grep(n.toArray(f.getElementsByTagName("span")),Be);for(let t=0;t<r.length;t++){const l=o(r[t]);let n=u=parseInt(l,10);if(a||n===c.index){for(s.length?(r[t].innerText=s,F(r[t])):_(e.dom,r[t]);r[++t];)if(n=parseInt(o(r[t]),10),n===u)_(e.dom,r[t]);else{t--;break}i&&m--}else u>h&&r[t].setAttribute("data-mce-index",String(u-1))}return t.set({...c,count:a?0:c.count-1,index:m}),i?l(e,t):d(e,t),!a&&t.get().count>0},c=(e,t,s)=>{let a,r;const c=t.get(),i=n.toArray(e.getBody().getElementsByTagName("span"));for(let e=0;e<i.length;e++){const t=o(i[e]);t!==null&&t.length&&(t===c.index.toString()&&(a||(a=i[e].firstChild),r=i[e].firstChild),F(i[e]))}if(t.set({...c,index:-1,count:0,text:""}),a&&r){const t=e.dom.createRng();return t.setStart(a,0),t.setEnd(r,r.data.length),s!==!1&&e.selection.setRng(t),t}},We=(e,t)=>t.get().count>1,Ue=(e,t)=>t.get().count>1,Ke=(e,t)=>{const n=n=>c(e,t,n),s=(n,s,o,i=!1)=>w(e,t,n,s,o,i),o=()=>l(e,t),i=()=>d(e,t),a=(n,s,o)=>u(e,t,n,s,o);return{done:n,find:s,next:o,prev:i,replace:a}},qe=t=>{const n=k(e.none()),s=()=>n.get().each(t),o=()=>{s(),n.set(e.none())},i=()=>n.get().isSome(),a=()=>n.get(),r=t=>{s(),n.set(e.some(t))};return{clear:o,isSet:i,get:a,set:r}},Ye=()=>{const e=qe(Ne),t=t=>e.get().each(t);return{...e,on:t}},I=(e,t)=>{const f=Ye();e.undoManager.add();const p=n.trim(e.selection.getContent({format:"text"})),s=n=>{n.setEnabled("next",We(e,t)),n.setEnabled("prev",Ue(e,t))},g=e=>{const n=e.getData(),s=t.get();t.set({...s,matchCase:n.matchcase,wholeWord:n.wholewords,inSelection:n.inselection})},r=(e,t)=>{const n=["replace","replaceall","prev","next"],s=n=>e.setEnabled(n,!t);x(n,s)},v=t=>{e.windowManager.alert("Could not find the specified string.",()=>{t.focus("findtext")})},h=(e,t)=>{i.browser.isSafari()&&i.deviceType.isTouch()&&(t==="find"||t==="replace"||t==="replaceall")&&e.focus(t)},o=n=>{c(e,t,!1),r(n,!0),s(n)},m=n=>{const i=n.getData(),a=t.get();if(!i.findtext.length){o(n);return}if(a.text===i.findtext&&a.matchCase===i.matchcase&&a.wholeWord===i.wholewords)l(e,t);else{const s=w(e,t,i.findtext,i.matchcase,i.wholewords,i.inselection);s<=0&&v(n),r(n,s===0)}s(n)},a=t.get(),b={findtext:p,replacetext:"",wholewords:a.wholeWord,matchcase:a.matchCase,inselection:a.inSelection},j={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:b,onChange:(e,n)=>{n.name==="findtext"&&t.get().count>0&&o(e)},onAction:(n,i)=>{const a=n.getData();switch(i.name){case"find":m(n);break;case"replace":u(e,t,a.replacetext)?s(n):o(n);break;case"replaceall":u(e,t,a.replacetext,!0,!0),o(n);break;case"prev":d(e,t),s(n);break;case"next":l(e,t),s(n);break;case"matchcase":case"wholewords":case"inselection":g(n),o(n);break}h(n,i.name)},onSubmit:e=>{m(e),h(e,"find")},onClose:()=>{e.focus(),c(e,t),e.undoManager.add()}};f.set(e.windowManager.open(j,{inline:"toolbar"}))},Xe=(e,t)=>{e.addCommand("SearchReplace",()=>{I(e,t)})},f=(e,t)=>()=>{I(e,t)},Ze=(e,t)=>{e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:f(e,t),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:f(e,t),icon:"search"}),e.shortcuts.add("Meta+F","",f(e,t))};W=()=>{Je.add("searchreplace",e=>{const t=k({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Xe(e,t),Ze(e,t),Ke(e,t)})},W()})()