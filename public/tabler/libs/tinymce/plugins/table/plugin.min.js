!function(){"use strict";var pn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Xe,Ee,et,Rt,Vt;const Wt=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(s=o=e,(i=String).prototype.isPrototypeOf(s)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===i.name)?"string":t;var n,s,o,i})(t)===e,Me=e=>t=>typeof t===e,ge=Wt("string"),he=Wt("array"),os=Me("boolean"),ce=(void 0,e=>void 0===e),re=e=>!(e=>e==null)(e),d=Me("function"),ss=Me("number"),ns=()=>{},s=e=>()=>e,X=e=>e,ts=(e,t)=>e===t;function r(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const Xn=e=>{e()},N=s(!1),L=s(!0);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return re(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const D=Object.keys,Yn=Object.hasOwnProperty,C=(e,t)=>{const n=D(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];t(e[o],o)}},K=(e,t)=>{const n={};var s;return((e,t,n,s)=>{C(e,(e,o)=>{(t(e,o)?n:s)(e,o)})})(e,t,(s=n,(e,t)=>{s[t]=e}),ns),n},j=e=>D(e).length,g=(t,n)=>p(t,n)?e.from(t[n]):e.none(),p=(e,t)=>Yn.call(e,t),It=(e,t)=>p(e,t)&&void 0!==e[t]&&null!==e[t],Wn=Array.prototype.indexOf,In=Array.prototype.push,c=(e,t)=>((e,t)=>Wn.call(e,t))(e,t)>-1,oe=(e,t)=>{for(let n=0,s=e.length;n<s;n++)if(t(e[n],n))return!0;return!1},zt=(e,t)=>{const n=[];for(let s=0;s<e;s++)n.push(t(s));return n},n=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s},i=(e,t)=>{for(let n=0,s=e.length;n<s;n++)t(e[n],n)},w=(e,t)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];t(o,s)&&n.push(o)}return n},Ft=(e,t,n)=>(i(e,(e,s)=>{n=t(n,e,s)}),n),Ce=(t,n)=>((t,n,s)=>{for(let o=0,a=t.length;o<a;o++){const i=t[o];if(n(i,o))return e.some(i);if(s(i,o))break}return e.none()})(t,n,N),R=(e,t)=>(e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!he(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);In.apply(t,e[n])}return t})(n(e,t)),B=(e,t)=>{for(let n=0,s=e.length;n<s;++n)if(!0!==t(e[n],n))return!1;return!0},At=(t,n)=>n>=0&&n<t.length?e.some(t[n]):e.none(),kt=(t,n)=>{for(let e=0;e<t.length;e++){const s=n(t[e],e);if(s.isSome())return s}return e.none()},E=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},t={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return E(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return E(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return E(n)},fromDom:E,fromPoint:(t,n,s)=>e.from(t.dom.elementFromPoint(n,s)).map(E)};"undefined"!=typeof window?window:Function("return this;")();const l=e=>e.dom.nodeName.toLowerCase(),Et=e=>e.dom.nodeType,U=e=>t=>Et(t)===e,y=U(1),ve=U(3),Rn=U(9),Ln=U(11),bt=e=>t=>y(t)&&l(t)===e,f=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},vt=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,u=(e,t)=>e.dom===t.dom,Nn=f,pt=e=>Rn(e)?e:t.fromDom(e.dom.ownerDocument),H=n=>e.from(n.dom.parentNode).map(t.fromDom),ft=n=>e.from(n.dom.nextSibling).map(t.fromDom),M=e=>n(e.dom.childNodes,t.fromDom),Dn=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode)?e=>t.fromDom(e.dom.getRootNode()):pt,zn=e=>t.fromDom(e.dom.host),mt=n=>{const s=ve(n)?n.dom.parentNode:n.dom;if(s==null||null===s.ownerDocument)return!1;const a=s.ownerDocument;return(t=>{const n=Dn(t);return Ln(s=n)&&re(s.dom.host)?e.some(n):e.none();var s})(t.fromDom(s)).fold(()=>a.body.contains(s),(o=mt,i=zn,e=>o(i(e))));var o,i},ht=(e,t)=>{let n=[];return i(M(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(ht(e,t))}),n},le=(e,t)=>((e)=>w(M(e),e=>f(e,t)))(e),ut=(e,s)=>((e,s)=>{const o=void 0===s?document:s.dom;return vt(o)?[]:n(o.querySelectorAll(e),t.fromDom)})(s,e),dt=(n,s,o)=>{let i=n.dom;const a=d(o)?o:N;for(;i.parentNode;){i=i.parentNode;const n=t.fromDom(i);if(s(n))return e.some(n);if(a(n))break}return e.none()},O=(e,t,n)=>dt(e,e=>f(e,t),n),Sn=(e,n)=>((e)=>Ce(e.dom.childNodes,e=>{return s=t.fromDom(e),f(s,n);var s}).map(t.fromDom))(e),ct=(n,s)=>((n,s)=>{const o=void 0===s?document:s.dom;return vt(o)?e.none():e.from(o.querySelector(n)).map(t.fromDom)})(s,n),Q=(t,n,s)=>((t,n,s,o,i)=>((e,t)=>f(e,t))(s,o)?e.some(s):d(i)&&i(s)?e.none():n(s,o,i))(0,O,t,n,s),it=(e,t,n)=>{if(!(ge(n)||os(n)||ss(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},q=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},S=(t,n)=>e.from(q(t,n)),nt=(e,t)=>{e.dom.removeAttribute(t)},tt=(e,t,n=ts)=>e.exists(e=>n(e,t)),Je=(t,n,s)=>t.isSome()&&n.isSome()?e.some(s(t.getOrDie(),n.getOrDie())):e.none(),Ne=(e,t)=>((e,t)=>""===t||e.length>=t.length&&e.substr(0,0+t.length)===t)(e,t),An=(Xe=/^\s+|\s+$/g,e=>e.replace(Xe,"")),Ge=e=>e.length>0,Ye=(t,n=10)=>{const s=parseInt(t,n);return isNaN(s)?e.none():e.some(s)},ke=e=>void 0!==e.style&&d(e.style.getPropertyValue),We=(e,t)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(t);return""!==s||mt(e)?s:Ve(n,t)},Ve=(e,t)=>ke(e)?e.style.getPropertyValue(t):"",x=(t,n)=>{const s=t.dom,o=Ve(s,n);return e.from(o).filter(e=>e.length>0)},Fe=(e,t,n=0)=>S(e,t).map(e=>parseInt(e,10)).getOr(n),Be=(e,t)=>Ie(e,t,L),Ie=(e,t,n)=>R(M(e),e=>f(e,t)?n(e)?[e]:[]:Ie(e,t,n)),En=["tfoot","thead","tbody","colgroup"],Le=(e,t,n)=>({element:e,rowspan:t,colspan:n}),ee=(e,t,n)=>({element:e,cells:t,section:n}),a=(e,t)=>Q(e,"table",t),Pe=e=>Be(e,"tr"),He=e=>a(e).fold(s([]),e=>le(e,"colgroup")),wn=e=>H(e).map(e=>{const t=l(e);return(e=>c(En,e))(t)?t:"tbody"}).getOr("tbody"),_n=t=>S(t,"data-snooker-locked-cols").bind(t=>e.from(t.match(/\d+/g))).map(e=>((e,t)=>{const n={};for(let s=0,i=e.length;s<i;s++){const o=e[s];n[String(o)]=t(o,s)}return n})(e,L)),Se=(e,t)=>e+","+t,yn=e=>{const n={},o=[];var r;const l=(r=e,At(r,0)).map(e=>e.element).bind(a).bind(_n).getOr({});let c=0,s=0,t=0;const{pass:d,fail:u}=((e)=>{const n=[],s=[];for(let t=0,a=e.length;t<a;t++){const i=e[t];(o=i,"colgroup"===o.section?n:s).push(i)}var o;return{pass:n,fail:s}})(e);i(u,e=>{const a=[];i(e.cells,e=>{let o=0;for(;void 0!==n[Se(t,o)];)o++;const r=It(l,o.toString()),i=((e,t,n,s,o,i)=>({element:e,rowspan:t,colspan:n,row:s,column:o,isLocked:i}))(e.element,e.rowspan,e.colspan,t,o,r);for(let a=0;a<e.colspan;a++)for(let r=0;r<e.rowspan;r++){const c=o+a,l=Se(t+r,c);n[l]=i,s=Math.max(s,c+1)}a.push(i)}),c++,o.push(ee(e.element,a,e.section)),t++});const{columns:h,colgroups:m}=(e=>At(e,e.length-1))(d).map(e=>{const t=(e=>{const t={};let n=0;return i(e.cells,e=>{const s=e.colspan;zt(s,o=>{const i=n+o;t[i]=((e,t,n)=>({element:e,colspan:t,column:n}))(e.element,s,i)}),n+=s}),t})(e),n=((e,t)=>({element:e,columns:t}))(e.element,((e,t)=>{const n=[];return C(e,(e,s)=>{n.push(t(e,s))}),n})(t,X));return{colgroups:[n],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),f=((e,t)=>({rows:e,columns:t}))(c,s);return{grid:f,access:n,all:o,columns:h,colgroups:m}},I=e=>{const t=(e=>{const t=Pe(e);return((e,t)=>n(e,e=>{if("colgroup"===l(e)){const t=n((e=>f(e,"colgroup")?le(e,"col"):R(He(e),e=>le(e,"col")))(e),e=>{const t=Fe(e,"span",1);return Le(e,1,t)});return ee(e,t,"colgroup")}{const s=n((e=>Be(e,"th,td"))(e),e=>{const t=Fe(e,"rowspan",1),n=Fe(e,"colspan",1);return Le(e,t,n)});return ee(e,s,t(e))}}))([...He(e),...t],wn)})(e);return yn(t)},bn=(t,n,s)=>e.from(t.access[Se(n,s)]),Ke=(t,n,s)=>{const o=((e,t)=>{const n=R(e.all,e=>e.cells);return w(n,t)})(t,e=>s(n,e.element));return o.length>0?e.some(o[0]):e.none()},vn=(t,n)=>e.from(t.columns[n]);Ee=tinymce.util.Tools.resolve("tinymce.util.Tools");const V=(e,t,n)=>{const o=e.select("td,th",t);let s;for(let t=0;t<o.length;t++){const i=e.getStyle(o[t],n);if(ce(s)&&(s=i),s!==i)return""}return s},xe=(e,t,n)=>{Ee.each("left center right".split(" "),s=>{s!==n&&e.formatter.remove("align"+s,{},t)}),n&&e.formatter.apply("align"+n,{},t)},Oe=(e,t,n)=>{e.dispatch("TableModified",{...n,table:t})},$=(t,n,s)=>((t,n)=>(t=>{const n=parseFloat(t);return isNaN(n)?e.none():e.some(n)})(t).getOr(n))(We(t,n),s),gn=e=>((e,t)=>{const n=e.dom,s=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?s:((e,t)=>t-$(e,"padding-left",0)-$(e,"padding-right",0)-$(e,"border-left-width",0)-$(e,"border-right-width",0))(e,s)})(e,"content-box");et=tinymce.util.Tools.resolve("tinymce.Env");const qt=zt(5,e=>{const t=`${e+1}px`;return{title:t,value:t}}),fn=n(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),st="100%",ot=e=>{var n;const s=e.dom,o=null!==(n=s.getParent(e.selection.getStart(),s.isBlock))&&void 0!==n?n:e.getBody();return gn(t.fromDom(o))+"px"},o=e=>t=>t.options.get(e),at=o("table_sizing_mode"),rt=o("table_border_widths"),fe=o("table_border_styles"),me=o("table_cell_advtab"),ue=o("table_row_advtab"),b=o("table_advtab"),mn=o("table_appearance_options"),hn=o("table_grid"),m=o("table_style_by_css"),te=o("table_cell_class_list"),un=o("table_row_class_list"),Z=o("table_class_list"),dn=o("table_toolbar"),jt=o("table_background_color_map"),yt=o("table_border_color_map"),_t=e=>"fixed"===at(e),wt=e=>"responsive"===at(e),Ot=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>wt(e)||!m(e)?t:_t(e)?{...t,width:ot(e)}:{...t,width:st})(e,n)},xt=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>wt(e)||m(e)?t:_t(e)?{...t,width:ot(e)}:{...t,width:st})(e,n)},z=e=>n=>u(n,(e=>t.fromDom(e.getBody()))(e)),h=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Ae=e=>t.fromDom(e.selection.getStart()),cn=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,rn=(t,n,s)=>((e,t,n)=>{const s=Ke(e,t,u),o=Ke(e,n,u);return s.bind(e=>o.map(t=>{return n=e,s=t,{startRow:Math.min(n.row,s.row),startCol:Math.min(n.column,s.column),finishRow:Math.max(n.row+n.rowspan-1,s.row+s.rowspan-1),finishCol:Math.max(n.column+n.colspan-1,s.column+s.colspan-1)};var n,s}))})(t,n,s).bind(n=>((t,n)=>{let s=!0;const o=r(cn,n);for(let e=n.startRow;e<=n.finishRow;e++)for(let i=n.startCol;i<=n.finishCol;i++)s=s&&bn(t,e,i).exists(o);return s?e.some(n):e.none()})(t,n)),an=I,we=(e,t)=>{H(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Tt=(e,t)=>{ft(e).fold(()=>{H(e).each(e=>{F(e,t)})},e=>{we(e,t)})},F=(e,t)=>{e.dom.appendChild(t.dom)},Dt=(e,t)=>{i(t,(n,s)=>{const o=0===s?e:t[s-1];Tt(o,n)})},Nt=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Lt=((t)=>{const s=n=>t(n)?e.from(n.dom.nodeValue):e.none();return{get:e=>{if(!t(e))throw new Error("Can only get text value of a text node");return s(e).getOr("")},getOption:s,set:(e,n)=>{if(!t(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=n}}})(ve);Rt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const on=(e,t,n,s)=>{const a=t(e,n);return i=(n,s)=>{const o=t(e,s);return tn(e,n,o)},o=a,((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(s,(e)=>{o=i(o,e)}),o;var o,i},tn=(e,t,n)=>t.bind(t=>n.filter(r(e.eq,t))),en={up:s({selector:O,closest:Q,predicate:dt,all:(e,n)=>{const i=d(n)?n:N;let s=e.dom;const o=[];for(;null!==s.parentNode&&void 0!==s.parentNode;){const e=s.parentNode,n=t.fromDom(e);if(o.push(n),!0===i(n))break;s=e}return o}}),down:s({selector:ut,predicate:ht}),styles:s({get:We,getRaw:x,set:(e,t,n)=>{((e,t,n)=>{if(!ge(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ke(e)&&e.style.setProperty(t,n)})(e.dom,t,n)},remove:(e,t)=>{((e,t)=>{ke(e)&&e.style.removeProperty(t)})(e.dom,t),tt(S(e,"style").map(An),"")&&nt(e,"style")}}),attrs:s({get:q,set:(e,t,n)=>{it(e.dom,t,n)},remove:nt,copyTo:(e,t)=>{((e,t)=>{const n=e.dom;C(t,(e,t)=>{it(n,t,e)})})(t,Ft(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}))}}),insert:s({before:we,after:Tt,afterAll:Dt,append:F,appendAll:(e,t)=>{i(t,t=>{F(e,t)})},prepend:(n,s)=>{(n=>((n)=>{const o=n.dom.childNodes;return e.from(o[0]).map(t.fromDom)})(n))(n).fold(()=>{F(n,s)},e=>{n.dom.insertBefore(s.dom,e.dom)})},wrap:(e,t)=>{we(e,t),F(t,e)}}),remove:s({unwrap:e=>{const t=M(e);t.length>0&&Dt(e,t),Nt(e)},remove:Nt}),create:s({nu:t.fromTag,clone:e=>t.fromDom(e.dom.cloneNode(!1)),text:t.fromText}),query:s({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:n=>e.from(n.dom.previousSibling).map(t.fromDom),nextSibling:ft}),property:s({children:M,name:l,parent:H,document:e=>pt(e).dom,isText:ve,isComment:e=>8===Et(e)||"#comment"===l(e),isElement:y,isSpecial:e=>{const t=l(e);return c(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:t=>y(t)?S(t,"lang"):e.none(),getText:e=>Lt.get(e),setText:(e,t)=>Lt.set(e,t),isBoundary:e=>!!y(e)&&("body"===l(e)||c(Rt,l(e))),isEmptyTag:e=>!!y(e)&&c(["br","img","hr","input"],l(e)),isNonEditable:e=>y(e)&&"false"===q(e,"contenteditable")}),eq:u,is:Nn},Xt=e=>O(e,"table"),Yt=(t,n,s)=>ct(t,n).bind(n=>ct(t,s).bind(t=>{return(s=Xt,o=[n,t],((t,n,s)=>s.length>0?((e,t,n,s)=>s(e,t,n[0],n.slice(1)))(t,n,s,on):e.none())(en,(e,t)=>s(t),o)).map(e=>({first:n,last:t,table:e}));var s,o})),J=e=>n(e,t.fromDom),De={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Ut=t=>(n,o)=>{const i=l(n),c="col"===i||"colgroup"===i?a(r=n).bind(t=>((t,n)=>((t,n)=>{const s=ut(t,n);return s.length>0?e.some(s):e.none()})(t,n))(t,De.firstSelectedSelector)).fold(s(r),e=>e[0]):n;var r;return Q(c,t,o)},Kt=Ut("th,td,caption"),Ze=Ut("th,td"),be=e=>J(e.model.table.getSelectedCells()),Gt=(e,t)=>{const n=Ze(e),s=n.bind(e=>a(e)).map(e=>Pe(e));return Je(n,s,(e,n)=>w(n,n=>oe(J(n.dom.cells),n=>"1"===q(n,t)||u(n,e)))).getOr([])},_e=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Qt=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Zt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Jt=e=>{return(t=e,"#",Ne(t,"#")?((e,t)=>e.substring(t))(t,"#".length):t).toUpperCase();var t},se=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ye=e=>({value:se(e.red)+se(e.green)+se(e.blue)}),nn=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,sn=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,je=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),Mt=(e,t,n,s)=>{const o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),r=parseFloat(s);return je(o,i,a,r)},St=t=>{if("transparent"===t)return e.some(je(0,0,0,0));const s=nn.exec(t);if(null!==s)return e.some(Mt(s[1],s[2],s[3],"1"));const n=sn.exec(t);return null!==n?e.some(Mt(n[1],n[2],n[3],n[4])):e.none()},pe=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},ln=(t,n,s)=>o=>{const i=(t=>{const n=pe(e.none()),s=()=>n.get().each(t);return{clear:()=>{s(),n.set(e.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:t=>{s(),n.set(e.some(t))}}})(e=>e.unbind()),a=!Ge(s),r=()=>{const e=be(t),r=e=>t.formatter.match(n,{value:s},e.dom,a);a?(o.setActive(!oe(e,r)),i.set(t.formatter.formatChanged(n,e=>o.setActive(!e),!0))):(o.setActive(B(e,r)),i.set(t.formatter.formatChanged(n,o.setActive,!1,{value:s})))};return t.initialized?r():t.on("init",r),i.clear},ne=e=>It(e,"menu"),T=e=>n(e,e=>{const t=e.text||e.title||"";return ne(e)?{text:t,items:T(e.menu)}:{text:t,value:e.value}}),v=(e,t,s,o)=>n(t,t=>{const n=t.text||t.title;return ne(t)?{type:"nestedmenuitem",text:n,getSubmenuItems:()=>v(e,t.menu,s,o)}:{text:n,type:"togglemenuitem",onAction:()=>o(t.value),onSetup:ln(e,s,t.value)}}),_=(e,t)=>n=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:n})},A=e=>R(e,e=>ne(e)?[{...e,menu:A(e.menu)}]:Ge(e.value)?[e]:[]),k=(e,t,n,s)=>o=>o(v(e,t,n,s)),W=(t,s,o)=>{const i=n(s,t=>{return{text:t.title,value:"#"+(n=t.value,(s=n,(e=>Qt.test(e)||Zt.test(e))(s)?e.some({value:Jt(s)}):e.none()).orThunk(()=>St(n).map(ye)).getOrThunk(()=>{const e=document.createElement("canvas");e.height=1,e.width=1;const t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=n,t.fillRect(0,0,1,1);const s=t.getImageData(0,0,1,1).data,o=s[0],i=s[1],a=s[2],r=s[3];return ye(je(o,i,a,r))})).value,type:"choiceitem"};var n,s});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:i.length>0?i:void 0,allowCustomColors:!1},onAction:e=>{const n="remove"===e.value?"":e.value;t.execCommand("mceTableApplyCellStyle",!1,{[o]:n})}}]},qe=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},Ue=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},jn=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:_e}],$e=t=>jn.concat((t=>{const n=T(te(t));return n.length>0?e.some({name:"class",type:"listbox",label:"Class",items:n}):e.none()})(t).toArray()),Te=(e,t)=>{const n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(T(fe(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}},ze=(e,t)=>{const n=e.dom;return{setAttrib:(e,s)=>{n.setAttrib(t,e,s)},setStyle:(e,s)=>{n.setStyle(t,e,s)},setFormat:(n,s)=>{""===s?e.formatter.remove(n,{value:null},t,!0):e.formatter.apply(n,{value:s},t)}}},On=bt("th"),xn=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Cn=t=>{const s=n(t,t=>(t=>{const n="thead"===t.section,s=tt((t=>{const n=w(t,e=>On(e.element));return 0===n.length?e.some("td"):n.length===t.length?e.some("th"):e.none()})(t.cells),"th");return"tfoot"===t.section?{type:"footer"}:n||s?{type:"header",subType:xn(n,s)}:{type:"body"}})(t).type),o=c(s,"header"),i=c(s,"footer");if(o||i){const t=c(s,"body");return!o||t||i?o||t||!i?e.none():e.some("footer"):e.some("header")}return e.some("body")},Re=(e,t)=>kt(e.all,e=>Ce(e.cells,e=>u(t,e.element))),kn=(t,s,o)=>{const i=(e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})(n(s.selection,n=>{return(s=n,((t,n,s=N)=>s(n)?e.none():c(t,l(n))?e.some(n):O(n,t.join(","),e=>f(e,"table")||s(e)))(["td","th"],s,i)).bind(e=>Re(t,e)).filter(o);var s,i}));return a=i,i.length>0?e.some(a):e.none();var a},Qe=(e,t)=>kn(e,t,L),lt=(e,t)=>B(t,t=>((e,t)=>Re(e,t).exists(e=>!e.isLocked))(e,t)),Mn=(e,t)=>((e,t)=>t.mergable)(0,t).filter(t=>lt(e,t.cells)),Fn=(e,t)=>((e,t)=>t.unmergable)(0,t).filter(t=>lt(e,t)),Tn=((e=>{if(!he(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};i(e,(s,o)=>{const r=D(s);if(1!==r.length)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!he(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...n)=>{const s=n.length;if(s!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+s);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,n)},match:e=>{const s=D(e);if(t.length!==s.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+s.join(","));if(!B(t,e=>c(s,e)))throw new Error("Not all branches were specified when using match. Specified: "+s.join(", ")+`
Required: `+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,t)=>{const n=I(e);return Qe(n,t).bind(e=>{const t=e[e.length-1],s=e[0].row,o=t.row+t.rowspan,i=n.all.slice(s,o);return Cn(i)}).getOr("")}),G=e=>{return Ne(e,"rgb")?St(t=e).map(ye).map(e=>"#"+e.value).getOr(t):e;var t},ie=e=>{const n=t.fromDom(e);return{borderwidth:x(n,"border-width").getOr(""),borderstyle:x(n,"border-style").getOr(""),bordercolor:x(n,"border-color").map(G).getOr(""),backgroundcolor:x(n,"background-color").map(G).getOr("")}},gt=e=>{const t=e[0],n=e.slice(1);return i(n,e=>{i(D(t),n=>{C(e,(e,s)=>{const o=t[n];""!==o&&n===s&&o!==e&&(t[n]="")})})}),t},Ct=(e,t,n,s)=>Ce(e,e=>!ce(n.formatter.matchNode(s,t+e))).getOr(""),de=r(Ct,["left","center","right"],"align"),Pn=r(Ct,["top","middle","bottom"],"valign"),Hn=e=>a(t.fromDom(e)).map(t=>{const n={selection:J(e.cells)};return Tn(t,n)}).getOr(""),Pt=(e,t)=>{const s=I(e),o=(e=>R(e.all,e=>e.cells))(s),i=w(o,e=>oe(t,t=>u(e.element,t)));return n(i,e=>({element:e.element.dom,column:vn(s,e.column).map(e=>e.element.dom)}))},Bn=(e,t,n,s)=>{const o=s.getData();s.close(),e.undoManager.transact(()=>{((e,t,n,s)=>{const o=K(s,(e,t)=>n[t]!==e);j(o)>0&&t.length>=1&&a(t[0]).each(n=>{const l=Pt(n,t),a=j(K(o,(e,t)=>"scope"!==t&&"celltype"!==t))>0,c=p(o,"celltype");(a||p(o,"scope"))&&((e,t,n,s)=>{const o=1===t.length;i(t,t=>{const i=t.element,r=o?L:s,a=ze(e,i);((e,t,n,s)=>{s("scope")&&e.setAttrib("scope",n.scope),s("class")&&e.setAttrib("class",n.class),s("height")&&e.setStyle("height",h(n.height)),s("width")&&t.setStyle("width",h(n.width))})(a,t.column.map(t=>ze(e,t)).getOr(a),n,r),me(e)&&((e,t,n)=>{n("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),n("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),n("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),n("borderwidth")&&e.setFormat("tablecellborderwidth",h(t.borderwidth))})(a,n,r),s("halign")&&xe(e,i,n.halign),s("valign")&&((e,t,n)=>{Ee.each("top middle bottom".split(" "),s=>{s!==n&&e.formatter.remove("valign"+s,{},t)}),n&&e.formatter.apply("valign"+n,{},t)})(e,i,n.valign)})})(e,l,s,r(p,o)),c&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,s),Oe(e,n.dom,{structure:c,style:a})})})(e,t,n,o),e.focus()})},Vn=e=>{const t=be(e);if(0===t.length)return;const s=((e,t)=>{const s=a(t[0]).map(s=>n(Pt(s,t),t=>((e,t,n,s)=>{const o=e.dom,i=(e,t)=>o.getStyle(e,t)||o.getAttrib(e,t);return{width:i(s.getOr(t),"width"),height:i(t,"height"),scope:o.getAttrib(t,"scope"),celltype:(a=t,a.nodeName.toLowerCase()),class:o.getAttrib(t,"class",""),halign:de(e,t),valign:Pn(e,t),...n?ie(t):{}};var a})(e,t.element,me(e),t.column)));return gt(s.getOrDie())})(e,t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:$e(e)},Te(e,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:$e(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:me(e)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s,onSubmit:r(Bn,e,t,s)})},$n=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ht=t=>$n.concat((t=>{const n=T(un(t));return n.length>0?e.some({name:"class",type:"listbox",label:"Class",items:n}):e.none()})(t).toArray()),Un=(e,n,s,o)=>{const c=o.getData();o.close(),e.undoManager.transact(()=>{((e,n,s,o)=>{const c=K(o,(e,t)=>s[t]!==e);if(j(c)>0){const s=p(c,"type"),l=!s||j(c)>1;l&&((e,t,n,s)=>{const o=1===t.length?L:s;i(t,t=>{const i=ze(e,t);((e,t,n)=>{n("class")&&e.setAttrib("class",t.class),n("height")&&e.setStyle("height",h(t.height))})(i,n,o),ue(e)&&((e,t,n)=>{n("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),n("bordercolor")&&e.setStyle("border-color",t.bordercolor),n("borderstyle")&&e.setStyle("border-style",t.borderstyle)})(i,n,o),s("align")&&xe(e,t,n.align)})})(e,n,o,r(p,c)),s&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,o),a(t.fromDom(n[0])).each(t=>Oe(e,t.dom,{structure:s,style:l}))}})(e,n,s,c),e.focus()})},Kn=e=>{const t=Gt(Ae(e),De.selected);if(0===t.length)return;const o=n(t,t=>((e,t,n)=>{const s=e.dom;return{height:s.getStyle(t,"height")||s.getAttrib(t,"height"),class:s.getAttrib(t,"class",""),type:Hn(t),align:de(e,t),...n?ie(t):{}}})(e,t.dom,ue(e))),s=gt(o),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ht(e)},Te(e,"row")]},a={type:"panel",items:[{type:"grid",columns:2,items:Ht(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:ue(e)?i:a,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s,onSubmit:r(Un,e,n(t,e=>e.dom),s)})},qn=(e,t,n)=>{const s=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=mn(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return s.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},ae=(e,t,n,s)=>{if("TD"===t.tagName||"TH"===t.tagName)ge(n)&&re(s)?e.setStyle(t,n,s):e.setStyles(t,n);else if(t.children)for(let o=0;o<t.children.length;o++)ae(e,t.children[o],n,s)},Gn=(e,t,n,s)=>{const r=e.dom,o=s.getData(),i=K(o,(e,t)=>n[t]!==e);s.close(),""===o.class&&delete o.class,e.undoManager.transact(()=>{if(!t){const n=Ye(o.cols).getOr(1),s=Ye(o.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:s,columns:n}),t=Ze(Ae(e),z(e)).bind(t=>a(t,z(e))).map(e=>e.dom).getOrDie()}if(j(i)>0){((e,t,n)=>{const i=e.dom,o={},s={};if(ce(n.class)||(o.class=n.class),s.height=h(n.height),m(e)?s.width=h(n.width):i.getAttrib(t,"width")&&(o.width=(e=>e?e.replace(/px$/,""):"")(n.width)),m(e)?(s["border-width"]=h(n.border),s["border-spacing"]=h(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),m(e)&&t.children)for(let s=0;s<t.children.length;s++)ae(i,t.children[s],{"border-width":h(n.border),padding:h(n.cellpadding)}),b(e)&&ae(i,t.children[s],{"border-color":n.bordercolor});if(b(e)){const e=n;s["background-color"]=e.backgroundcolor,s["border-color"]=e.bordercolor,s["border-style"]=e.borderstyle}o.style=i.serializeStyle({...Ot(e),...s}),i.setAttribs(t,{...xt(e),...o})})(e,t,o);const n=r.select("caption",t)[0];(n&&!o.caption||!n&&o.caption)&&e.execCommand("mceTableToggleCaption"),xe(e,t,o.align)}if(e.focus(),e.addVisual(),j(i)>0){const n=p(i,"caption"),s=!n||j(i)>1;Oe(e,t,{structure:n,style:s})}})},Bt=(e,n)=>{const c=e.dom;let o,s=((e,t)=>{const n=Ot(e),s=xt(e),o=t?{borderstyle:g(n,"border-style").getOr(""),bordercolor:G(g(n,"border-color").getOr("")),backgroundcolor:G(g(n,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...n,...s,...o,...(()=>{const t=n["border-width"];return m(e)&&t?{border:t}:g(s,"border").fold(()=>({}),e=>({border:e}))})(),...{...g(n,"border-spacing").or(g(s,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...g(n,"border-padding").or(g(s,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}}})(e,b(e));n?(s.cols="1",s.rows="1",b(e)&&(s.borderstyle="",s.bordercolor="",s.backgroundcolor="")):(o=c.getParent(e.selection.getStart(),"table",e.getBody()),o?s=((e,n,s)=>{const o=e.dom,i=m(e)?o.getStyle(n,"border-spacing")||o.getAttrib(n,"cellspacing"):o.getAttrib(n,"cellspacing")||o.getStyle(n,"border-spacing"),a=m(e)?V(o,n,"padding")||o.getAttrib(n,"cellpadding"):o.getAttrib(n,"cellpadding")||V(o,n,"padding");return{width:o.getStyle(n,"width")||o.getAttrib(n,"width"),height:o.getStyle(n,"height")||o.getAttrib(n,"height"),cellspacing:i??"",cellpadding:a??"",border:((n,s)=>{const o=x(t.fromDom(s),"border-width");return m(e)&&o.isSome()?o.getOr(""):n.getAttrib(s,"border")||V(e.dom,s,"border-width")||V(e.dom,s,"border")||""})(o,n),caption:!!o.select("caption",n)[0],class:o.getAttrib(n,"class",""),align:de(e,n),...s?ie(n):{}}})(e,o,b(e)):b(e)&&(s.borderstyle="",s.bordercolor="",s.backgroundcolor=""));const i=T(Z(e));i.length>0&&s.class&&(s.class=s.class.replace(/\s*mce-item-table\s*/g,""));const a={type:"grid",columns:2,items:qn(e,i,n)},l=b(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},Te(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:r(Gn,e,o,s),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s})},Qn=X,Zn=t=>{const n=(e,t)=>S(e,t).exists(e=>parseInt(e,10)>1);return t.length>0&&B(t,e=>n(e,"rowspan")||n(e,"colspan"))?e.some(t):e.none()},Jn=(t,n,s)=>{return n.length<=1?e.none():(o=t,i=s.firstSelectedSelector,a=s.lastSelectedSelector,Yt(o,i,a).bind(t=>{const n=e=>u(o,e),s="thead,tfoot,tbody,table",i=O(t.first,s,n),a=O(t.last,s,n);return i.bind(n=>a.bind(s=>u(n,s)?((e,t,n)=>{const s=an(e);return rn(s,t,n)})(t.table,t.first,t.last):e.none()))})).map(e=>({bounds:e,cells:n}));var o,i,a},es=n=>{const c=pe(e.none()),r=pe([]);let l=e.none();const o=bt("caption"),p=e=>l.forall(t=>!t[e]),b=()=>Kt(Ae(n),z(n)).bind(s=>{return i=Je(a(s),Kt((e=>t.fromDom(e.selection.getEnd()))(n),z(n)).bind(a),(t,i)=>u(t,i)?o(s)?e.some((t=>({element:t,mergable:e.none(),unmergable:e.none(),selection:[t]}))(s)):e.some(((e,t,n)=>({element:n,mergable:Jn(t,e,De),unmergable:Zn(e),selection:Qn(e)}))(be(n),t,s)):e.none()),i.bind(X);var i}),v=e=>a(e.element).map(t=>{const n=I(t),s=Qe(n,e).getOr([]),o=Ft(s,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Mn(n,e).isSome(),unmergeable:Fn(n,e).isSome(),locked:o}}),h=()=>{c.set((e=>{let t,n=!1;return(...s)=>(n||(n=!0,t=e.apply(null,s)),t)})(b)()),l=c.get().bind(v),i(r.get(),Xn)},m=e=>(e(),r.set(r.get().concat([e])),()=>{r.set(w(r.get(),t=>t!==e))}),s=(e,t)=>m(()=>c.get().fold(()=>{e.setEnabled(!1)},n=>{e.setEnabled(!t(n))})),f=(e,t,n)=>m(()=>c.get().fold(()=>{e.setEnabled(!1),e.setActive(!1)},s=>{e.setEnabled(!t(s)),e.setActive(n(s))})),d=e=>l.exists(t=>t.locked[e]),g=(e,t)=>s=>f(s,e=>o(e.element),()=>n.queryCommandValue(e)===t),j=g("mceTableRowType","header"),y=g("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",h),{onSetupTable:e=>s(e,e=>!1),onSetupCellOrRow:e=>s(e,e=>o(e.element)),onSetupColumn:e=>t=>s(t,t=>o(t.element)||d(e)),onSetupPasteable:e=>t=>s(t,t=>o(t.element)||e().isNone()),onSetupPasteableColumn:(e,t)=>n=>s(n,n=>o(n.element)||e().isNone()||d(t)),onSetupMergeable:e=>s(e,e=>p("mergeable")),onSetupUnmergeable:e=>s(e,e=>p("unmergeable")),resetTargets:h,onSetupTableWithCaption:e=>f(e,N,e=>a(e.element,z(n)).exists(e=>Sn(e,"caption").isSome())),onSetupTableRowHeaders:j,onSetupTableColumnHeaders:y,targets:c.get}};Vt=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const $t=t=>{var n;const s=null!==(n=Vt.read())&&void 0!==n?n:[];return kt(s,n=>e.from(n.getType(t)))},P=()=>$t("x-tinymce/dom-table-rows"),Y=()=>$t("x-tinymce/dom-table-columns");pn.add("table",e=>{const t=es(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:qt}),t("table_border_styles",{processor:"object[]",default:fn}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!et.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),(e=>{C({mceTableProps:r(Bt,e,!1),mceTableRowProps:r(Kn,e),mceTableCellProps:r(Vn,e)},(t,n)=>e.addCommand(n,()=>t())),e.addCommand("mceInsertTableDialog",t=>{Bt(e,!0)})})(e),((e,t)=>{const o=t=>()=>e.execCommand(t),n=(t,n)=>!!e.queryCommandSupported(n.command)&&(e.ui.registry.addMenuItem(t,{...n,onAction:d(n.onAction)?n.onAction:o(n.command)}),!0),i=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addToggleMenuItem(t,{...n,onAction:d(n.onAction)?n.onAction:o(n.command)})},u=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},h=[n("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),n("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),n("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),n("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),n("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),n("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),n("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(P)}),n("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(P)})],m=[n("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),n("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),n("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),n("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),n("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),n("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(Y,"onFirst")}),n("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(Y,"onLast")})],f=[n("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),n("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),n("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];hn(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog")}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog")}),n("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),n("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),c(h,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:s("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),c(m,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:s("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),c(f,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:s("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(s(""),e=>"caption"===l(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const a=A(Z(e));0!==a.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>v(e,a,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});const r=A(te(e));0!==r.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>v(e,r,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>v(e,_e,"tablecellverticalalign",_(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>v(e,rt(e),"tablecellborderwidth",_(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>v(e,fe(e),"tablecellborderstyle",_(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>W(e,jt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>W(e,yt(e),"border-color"),onSetup:t.onSetupCellOrRow})),i("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),i("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:qe(e),onSetup:t.onSetupTableRowHeaders}),i("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Ue(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const o=t=>()=>e.execCommand(t),n=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addButton(t,{...n,onAction:d(n.onAction)?n.onAction:o(n.command)})},s=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addToggleButton(t,{...n,onAction:d(n.onAction)?n.onAction:o(n.command)})};n("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),n("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),n("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),n("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),n("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(P)}),n("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(P)}),n("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),n("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),n("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(Y,"onFirst")}),n("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(Y,"onLast")}),n("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const i=A(Z(e));0!==i.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:k(e,i,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});const a=A(te(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:k(e,a,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:k(e,_e,"tablecellverticalalign",_(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:k(e,rt(e),"tablecellborderwidth",_(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:k(e,fe(e),"tablecellborderstyle",_(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(W(e,jt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(W(e,yt(e),"border-color")),onSetup:t.onSetupCellOrRow})),s("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),s("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:qe(e),onSetup:t.onSetupTableRowHeaders}),s("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Ue(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=dn(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t),items:t,scope:"node",position:"node"})})(e)})}()