(function(){"use strict";var n,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),h=tinymce.util.Tools.resolve("tinymce.Env");const s=e=>t=>t.options.get(e),i=e=>{const t=e.options.register;t("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),t("pagebreak_split_block",{processor:"boolean",default:!1})},a=s("pagebreak_separator"),t=s("pagebreak_split_block"),e="mce-pagebreak",o=t=>{const n=`<img src="${h.transparentSrc}" class="${e}" data-mce-resize="false" data-mce-placeholder />`;return t?`<p>${n}</p>`:n},c=n=>{const s=a(n),i=()=>t(n),r=new RegExp(s.replace(/[?.*[\](){}+^$:]/g,e=>"\\"+e),"gi");n.on("BeforeSetContent",e=>{e.content=e.content.replace(r,o(i()))}),n.on("PreInit",()=>{n.serializer.addNodeFilter("img",t=>{let r=t.length,o,a;for(;r--;)if(o=t[r],a=o.attr("class"),a&&a.indexOf(e)!==-1){const e=o.parent;if(e&&n.schema.getBlockElements()[e.name]&&i()){e.type=3,e.value=s,e.raw=!0,o.remove();continue}o.type=3,o.value=s,o.raw=!0}})})},l=e=>{e.addCommand("mcePageBreak",()=>{e.insertContent(o(t(e)))})},d=t=>{t.on("ResolveName",n=>{n.target.nodeName==="IMG"&&t.dom.hasClass(n.target,e)&&(n.name="pagebreak")})},u=e=>{const t=()=>e.execCommand("mcePageBreak");e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:t}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:t})};n=()=>{r.add("pagebreak",e=>{i(e),l(e),u(e),c(e),d(e)})},n()})()