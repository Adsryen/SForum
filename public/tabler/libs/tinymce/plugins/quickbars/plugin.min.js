!function(){"use strict";c=tinymce.util.Tools.resolve("tinymce.PluginManager");const u=e=>t=>typeof t===e,v=("string",e=>"string"===(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(s=o=e,(i=String).prototype.isPrototypeOf(s)||(null===(n=o.constructor)||void 0===n?void 0:n.name)===i.name)?"string":t;var n,s,o,i})(e)),i=u("boolean"),d=u("function"),n=e=>t=>t.options.get(e),j=n("quickbars_selection_toolbar"),b=n("quickbars_insert_toolbar"),p=n("quickbars_image_toolbar");let l=0;var t,c,f=tinymce.util.Tools.resolve("tinymce.Env"),_=tinymce.util.Tools.resolve("tinymce.util.Delay");const m=e=>{e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{(e=>new Promise(t=>{const n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",e=>{t(Array.prototype.slice.call(e.target.files))});const s=o=>{const i=()=>{var e;t([]),null===(e=n.parentNode)||void 0===e||e.removeChild(n)};f.os.isAndroid()&&"remove"!==o.type?_.setEditorTimeout(e,i,0):i(),e.off("focusin remove",s)};e.on("focusin remove",s),n.click()}))(e).then(t=>{if(t.length>0){const n=t[0];(e=>new Promise(t=>{const n=new FileReader;n.onloadend=()=>{t(n.result.split(",")[1])},n.readAsDataURL(e)}))(n).then(t=>{((e,t,n)=>{const s=e.editorUpload.blobCache,o=s.create((e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return l++,"mceu_"+n+l+String(t)})(),n,t);s.add(o),e.insertContent(e.dom.createHTML("img",{src:o.blobUri()}))})(e,t,n)})}})}}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{((e)=>{e.execCommand("mceInsertTable",!1,{rows:2,columns:2})})(e)}})},o=(!1,()=>!1);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return t==null?e.none():e.some(t)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1),"undefined"!=typeof window?window:Function("return this;")(),t=(t,n,s,o,i)=>t(s,o)?e.some(s):d(i)&&i(s)?e.none():n(s,o,i);const g=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},s=g,r=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},a=(t,n,i)=>{let a=t.dom;const r=d(i)?i:o;for(;a.parentNode;){a=a.parentNode;const t=s(a);if(n(t))return e.some(t);if(r(t))break}return e.none()},y=(e,t,n)=>a(e,e=>r(e,t),n),h=e=>{const n=b(e);n.length>0&&e.ui.registry.addContextToolbar("quickblock",{predicate:n=>{const i=s(n),l=e.schema.getTextBlockElements(),c=t=>t.dom===e.getBody();return!((e)=>{const n=e.dom;return!!n&&!!n.hasAttribute&&n.hasAttribute("data-mce-bogus")})(i)&&((e,n,s)=>t((e,t)=>r(e,t),y,e,'table,[data-mce-bogus="all"]',s))(i,0,c).fold(()=>((e,n,s)=>((e,n,s)=>t((e,t)=>t(e),a,e,n,s))(e,n,s).isSome())(i,t=>t.dom.nodeName.toLowerCase()in l&&e.dom.isEmpty(t.dom),c),o)},items:n,position:"line",scope:"editor"})};c.add("quickbars",e=>{(e=>{const t=e.options.register,n=e=>t=>{const n=i(t)||v(t);return n?i(t)?{value:t?e:"",valid:n}:{value:t.trim(),valid:n}:{valid:!1,message:"Must be a boolean or string."}},s="bold italic | quicklink h2 h3 blockquote";t("quickbars_selection_toolbar",{processor:n(s),default:s});const o="quickimage quicktable";t("quickbars_insert_toolbar",{processor:n(o),default:o});const a="alignleft aligncenter alignright";t("quickbars_image_toolbar",{processor:n(a),default:a})})(e),m(e),h(e),(e=>{const t=e=>"IMG"===e.nodeName||"FIGURE"===e.nodeName&&/image/i.test(e.className),n=p(e);n.length>0&&e.ui.registry.addContextToolbar("imageselection",{predicate:t,items:n,position:"node"});const s=j(e);s.length>0&&e.ui.registry.addContextToolbar("textselection",{predicate:n=>!t(n)&&!e.selection.isCollapsed()&&(t=>"false"!==e.dom.getContentEditableParent(t))(n),items:s,position:"selection",scope:"editor"})})(e)})}()