!function(){"use strict";var Nm=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},Es=function(e){return{eq:e}},cy=Es(function(e,t){return e===t}),pu=function(e){return Es(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!e.eq(t[s],n[s]))return!1;return!0})},_u=function(e){return Es(function(t,n){var s,i,a,o=Object.keys(t),r=Object.keys(n);if(!function(e,t){return function(e,t){return Es(function(n,s){return e.eq(t(n),t(s))})}(pu(e),function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)})}(cy).eq(o,r))return!1;for(a=o.length,s=0;s<a;s++)if(i=o[s],!e.eq(t[i],n[i]))return!1;return!0})},su=Es(function(e,t){if(e===t)return!0;var n=Nm(e);return n===Nm(t)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(n)?e===t:"array"===n?pu(su).eq(e,t):"object"===n&&_u(su).eq(e,t))});const ny=Object.getPrototypeOf,Ou=(e,t,n)=>{var s;return!!n(e,t.prototype)||(null===(s=e.constructor)||void 0===s?void 0:s.name)===t.name},tu=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&Ou(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t})(t)===e,eu=e=>t=>typeof t===e,Vu=e=>t=>e===t,Jo=(e,t)=>ne(e)&&Ou(e,t,(e,t)=>ny(e)===t),h=tu("string"),ne=tu("object"),Wu=e=>Jo(e,Object),L=tu("array"),gn=Vu(null),bn=eu("boolean"),re=Vu(void 0),D=e=>e==null,r=e=>!D(e),j=eu("function"),We=eu("number"),Yn=(e,t)=>{if(L(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},g=()=>{},Tn=(e,t)=>(...n)=>e(t.apply(null,n)),Ku=(e,t)=>n=>e(t(n)),a=e=>()=>e,oe=e=>e,Uj=(e,t)=>e===t;function d(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const ii=e=>t=>!e(t),Wd=e=>e(),Ss=e=>{e()},S=a(!1),N=a(!0);class e{constructor(e,t){this.tag=e,this.value=t}static some(t){return new e(!0,t)}static none(){return e.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?e.some(t(this.value)):e.none()}bind(t){return this.tag?t(this.value):e.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(t){return!this.tag||t(this.value)?this:e.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(t){return r(t)?e.some(t):e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}e.singletonNone=new e(!1);const Nd=Array.prototype.slice,Wj=Array.prototype.indexOf,$j=Array.prototype.push,Ju=(e,t)=>Wj.call(e,t),O=(e,t)=>Ju(e,t)>-1,z=(e,t)=>{for(let n=0,s=e.length;n<s;n++)if(t(e[n],n))return!0;return!1},v=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const i=e[o];s[o]=t(i,o)}return s},o=(e,t)=>{for(let n=0,s=e.length;n<s;n++)t(e[n],n)},o1=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},zs=(e,t)=>{const n=[],s=[];for(let o=0,a=e.length;o<a;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},m=(e,t)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];t(o,s)&&n.push(o)}return n},vi=(e,t,n)=>(o1(e,(e,s)=>{n=t(n,e,s)}),n),be=(e,t,n)=>(o(e,(e,s)=>{n=t(n,e,s)}),n),i1=(t,n,s)=>{for(let o=0,a=t.length;o<a;o++){const i=t[o];if(n(i,o))return e.some(i);if(s(i,o))break}return e.none()},V=(e,t)=>i1(e,t,S),Ns=(t,n)=>{for(let s=0,o=t.length;s<o;s++)if(n(t[s],s))return e.some(s);return e.none()},u1=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!L(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);$j.apply(t,e[n])}return t},mt=(e,t)=>u1(v(e,t)),Xt=(e,t)=>{for(let n=0,s=e.length;n<s;++n)if(!0!==t(e[n],n))return!1;return!0},Ls=e=>{const t=Nd.call(e,0);return t.reverse(),t},nd=(e,t)=>m(e,e=>!O(t,e)),td=(e,t)=>{const n={};for(let s=0,i=e.length;s<i;s++){const o=e[s];n[String(o)]=t(o,s)}return n},Un=(e,t)=>{const n=Nd.call(e,0);return n.sort(t),n},xi=(t,n)=>n>=0&&n<t.length?e.some(t[n]):e.none(),ue=e=>xi(e,0),Gt=e=>xi(e,e.length-1),fe=j(Array.from)?Array.from:e=>Nd.call(e),ls=(t,n)=>{for(let e=0;e<t.length;e++){const s=n(t[e],e);if(s.isSome())return s}return e.none()},pe=Object.keys,Oj=Object.hasOwnProperty,C=(e,t)=>{const n=pe(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];t(e[o],o)}},Ei=(e,t)=>wj(e,(e,n)=>({k:n,v:t(e,n)})),wj=(e,t)=>{const n={};return C(e,(e,s)=>{const o=t(e,s);n[o.k]=o.v}),n},Gl=e=>(t,n)=>{e[n]=t},P1=(e,t,n,s)=>{C(e,(e,o)=>{(t(e,o)?n:s)(e,o)})},Us=(e,t)=>{const n={};return P1(e,t,Gl(n),g),n},Rl=(e,t)=>{const n=[];return C(e,(e,s)=>{n.push(t(e,s))}),n},Sl=e=>Rl(e,oe),E=(t,n)=>f(t,n)?e.from(t[n]):e.none(),f=(e,t)=>Oj.call(e,t),vs=(e,t)=>f(e,t)&&void 0!==e[t]&&null!==e[t],V1=e=>{const t={};return o(e,e=>{t[e]={}}),pe(t)},U1=e=>void 0!==e.length,gl=Array.isArray,sa=(e,t,n)=>{if(!e)return!1;if(n=n||e,U1(e)){for(let s=0,o=e.length;s<o;s++)if(!1===t.call(n,e[s],s,e))return!1}else for(const s in e)if(f(e,s)&&!1===t.call(n,e[s],s,e))return!1;return!0},dl=(e,t)=>{const n=[];return sa(e,(s,o)=>{n.push(t(s,o,e))}),n},Ys=(e,t)=>{const n=[];return sa(e,(s,o)=>{t&&!t(s,o,e)||n.push(s)}),n},aa=(e,t,n,s)=>{let o=re(n)?e[0]:n;for(let n=0;n<e.length;n++)o=t.call(s,o,e[n],n);return o},K1=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},wn=e=>e[e.length-1],on=e=>{let t,n=!1;return(...s)=>(n||(n=!0,t=e.apply(null,s)),t)},G1=()=>el(0,0),el=(e,t)=>({major:e,minor:t}),no={nu:el,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?G1():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}})(e,t);if(!n)return{major:0,minor:0};const s=e=>Number(t.replace(n,"$"+e));return el(s(1),s(2))})(e,n)},unknown:G1},X1=(e,t)=>{const n=String(t).toLowerCase();return V(e,e=>e.search(n))},Q1=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Q=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return-1!==o&&(!!re(s)||o+t.length<=s)},Y=(e,t)=>Q1(e,t,0),J1=(e,t)=>Q1(e,t,e.length-t.length),Lc=e=>t=>t.replace(e,""),zn=Lc(/^\s+|\s+$/g),sj=Lc(/^\s+/g),r4=Lc(/\s+$/g),rt=e=>e.length>0,co=e=>!rt(e),ka=(t,n=10)=>{const s=parseInt(t,n);return isNaN(s)?e.none():e.some(s)},ec=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,yt=e=>t=>Q(t,e),Wb=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Q(e,"edge/")&&Q(e,"chrome")&&Q(e,"safari")&&Q(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ec],search:e=>Q(e,"chrome")&&!Q(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Q(e,"msie")||Q(e,"trident")},{name:"Opera",versionRegexes:[ec,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:yt("firefox")},{name:"Safari",versionRegexes:[ec,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Q(e,"safari")||Q(e,"mobile/"))&&Q(e,"applewebkit")}],Vb=[{name:"Windows",search:yt("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Q(e,"iphone")||Q(e,"ipad"),versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yt("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:yt("mac os x"),versionRegexes:[/.*?mac os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yt("linux"),versionRegexes:[]},{name:"Solaris",search:yt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],m4={browsers:a(Wb),oses:a(Vb)},x4="Edge",M4="Chromium",I4="Opera",B4="Firefox",q4="Safari",G4=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isEdge:t(x4),isChromium:t(M4),isIE:t("IE"),isOpera:t(I4),isFirefox:t(B4),isSafari:t(q4)}},rb=()=>G4({current:void 0,version:no.unknown()}),nb=G4,u0=(a(x4),a(M4),a("IE"),a(I4),a(B4),a(q4),"Windows"),h0="Android",j0="Linux",A0="macOS",S0="Solaris",H0="FreeBSD",I0="ChromeOS",K0=e=>{const n=e.current,s=e.version,t=e=>()=>n===e;return{current:n,version:s,isWindows:t(u0),isiOS:t("iOS"),isAndroid:t(h0),isMacOS:t(A0),isLinux:t(j0),isSolaris:t(S0),isFreeBSD:t(H0),isChromeOS:t(I0)}},E9=()=>K0({current:void 0,version:no.unknown()}),o9=K0,n9=(a(u0),a("iOS"),a(h0),a(j0),a(A0),a(S0),a(H0),a(I0),e=>window.matchMedia(e).matches);let t9=on(()=>((e,t,n)=>{const s=m4.browsers(),r=m4.oses(),o=t.bind(e=>((e,t)=>ls(t.brands,t=>{const n=t.brand.toLowerCase();return V(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:no.nu(parseInt(t.version,10),0)}))}))(s,e)).orThunk(()=>((e,t)=>X1(e,t).map(e=>{const n=no.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(s,e)).fold(rb,nb),i=((e,t)=>X1(e,t).map(e=>{const n=no.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(r,e).fold(E9,o9),c=((e,t,n,s)=>{const o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,r=e.isiOS()||e.isAndroid(),u=r||s("(pointer:coarse)"),c=o||!i&&r&&s("(min-device-width:768px)"),l=i||r&&!c,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),h=!l&&!c&&!d;return{isiPad:a(o),isiPhone:a(i),isTablet:a(c),isPhone:a(l),isTouch:a(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:a(d),isDesktop:a(h)}})(i,o,e,n);return{browser:o,os:i,deviceType:c}})(navigator.userAgent,e.from(navigator.userAgentData),n9));const On=()=>t9(),Xv=navigator.userAgent,rr=On(),qe=rr.browser,Ye=rr.os,rn=rr.deviceType,Gv=-1!==Xv.indexOf("Windows Phone"),b={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:qe.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!qe.isIE(),windowsPhone:Gv,browser:{current:qe.current,version:qe.version,isChromium:qe.isChromium,isEdge:qe.isEdge,isFirefox:qe.isFirefox,isIE:qe.isIE,isOpera:qe.isOpera,isSafari:qe.isSafari},os:{current:Ye.current,version:Ye.version,isAndroid:Ye.isAndroid,isChromeOS:Ye.isChromeOS,isFreeBSD:Ye.isFreeBSD,isiOS:Ye.isiOS,isLinux:Ye.isLinux,isMacOS:Ye.isMacOS,isSolaris:Ye.isSolaris,isWindows:Ye.isWindows},deviceType:{isDesktop:rn.isDesktop,isiPad:rn.isiPad,isiPhone:rn.isiPhone,isPhone:rn.isPhone,isTablet:rn.isTablet,isTouch:rn.isTouch,isWebView:rn.isWebView}},$v=/^\s*|\s*$/g,N2=e=>D(e)?"":(""+e).replace($v,""),B2=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),sa(e,(e,o)=>!1!==t.call(s,e,o,n)&&(B2(e,t,n,s),!0)))},i={trim:N2,isArray:gl,is:(e,t)=>t?"array"===t&&!!gl(e)||typeof e===t:void 0!==e,toArray:e=>{if(gl(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const s=h(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},each:sa,map:dl,grep:Ys,inArray:(e,t)=>{if(e)for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1},hasOwn:f,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const t in s)if(f(s,t)){const n=s[t];void 0!==n&&(e[t]=n)}}return e},walk:B2,resolve:(e,t=window)=>{const n=e.split(".");for(let e=0,s=n.length;e<s&&(t=t[n[e]]);e++);return t},explode:(e,t)=>L(e)?e:""===e?[]:dl(e.split(t||","),N2),_addCacheSuffix:e=>{const t=b.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},ts=(e,t,n=Uj)=>e.exists(e=>n(e,t)),se=(t,n,s)=>t.isSome()&&n.isSome()?e.some(s(t.getOrDie(),n.getOrDie())):e.none(),xo=(t,n)=>t?e.some(n):e.none();"undefined"!=typeof window?window:Function("return this;")();const k=e=>e.dom.nodeName.toLowerCase(),Z2=e=>e.dom.nodeType,Aa=e=>t=>Z2(t)===e,ge=Aa(1),we=Aa(3),Ov=Aa(9),_v=Aa(11),lc=e=>t=>ge(t)&&k(t)===e,t3=(e,t,n)=>{if(!(h(n)||bn(n)||We(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},U=(e,t,n)=>{t3(e.dom,t,n)},Ot=(e,t)=>{const n=e.dom;C(t,(e,t)=>{t3(n,t,e)})},Fe=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},gt=(t,n)=>e.from(Fe(t,n)),ya=(e,t)=>{const n=e.dom;return!!n&&!!n.hasAttribute&&n.hasAttribute(t)},K=(e,t)=>{e.dom.removeAttribute(t)},s3=e=>be(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),Dc=(e,t)=>{const n=Fe(e,t);return void 0===n||""===n?[]:n.split(" ")},So=e=>void 0!==e.dom.classList,d3=e=>Dc(e,"class"),y3=(e,t)=>((e,t,n)=>{const s=Dc(e,t).concat([n]);return U(e,t,s.join(" ")),!0})(e,"class",t),x3=(e,t)=>((e,t,n)=>{const s=m(Dc(e,t),e=>e!==n);return s.length>0?U(e,t,s.join(" ")):K(e,t),!1})(e,"class",t),To=(e,t)=>{So(e)?e.dom.classList.add(t):y3(e,t)},k3=e=>{0===(So(e)?e.dom.classList:d3(e)).length&&K(e,"class")},Ki=(e,t)=>{So(e)?e.dom.classList.remove(t):x3(e,t),k3(e)},Bl=(e,t)=>So(e)&&e.dom.classList.contains(t),zo=e=>void 0!==e.style&&j(e.style.getPropertyValue),Do=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Hi=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return Do(n.childNodes[0])},$=(e,t)=>{const n=(t||document).createElement(e);return Do(n)},In=(e,t)=>{const n=(t||document).createTextNode(e);return Do(n)},t=Do,Z7=(t,n,s)=>e.from(t.dom.elementFromPoint(n,s)).map(Do),M3=(e,t)=>{const s=[],o=e=>(s.push(e),t(e));let n=t(e);do n=n.bind(o);while(n.isSome())return s},De=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},F3=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,y=(e,t)=>e.dom===t.dom,ut=(e,t)=>{const n=e.dom,s=t.dom;return n!==s&&n.contains(s)},N3=e=>t(e.dom.ownerDocument),ht=e=>Ov(e)?e:N3(e),Ro=e=>t(ht(e).dom.defaultView),Ve=n=>e.from(n.dom.parentNode).map(t),L3=n=>e.from(n.dom.parentElement).map(t),P3=(e,n)=>{const i=j(n)?n:S;let s=e.dom;const o=[];for(;null!==s.parentNode&&void 0!==s.parentNode;){const e=s.parentNode,n=t(e);if(o.push(n),!0===i(n))break;s=e}return o},Cn=n=>e.from(n.dom.previousSibling).map(t),Os=n=>e.from(n.dom.nextSibling).map(t),H3=e=>Ls(M3(e,Cn)),I3=e=>M3(e,Os),q=e=>v(e.dom.childNodes,t),Qo=(n,s)=>{const o=n.dom.childNodes;return e.from(o[s]).map(t)},q3=e=>Qo(e,0),cu=e=>Qo(e,e.dom.childNodes.length-1),th=e=>e.dom.childNodes.length,nl=e=>_v(e)&&r(e.dom.host),ih=j(Element.prototype.attachShadow)&&j(Node.prototype.getRootNode),g7=a(ih),wt=ih?e=>t(e.dom.getRootNode()):ht,Bc=e=>nl(e)?e:(e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return t(n)})(ht(e)),p7=e=>t(e.dom.host),Ph=n=>{if(g7()&&r(n.target)){const e=t(n.target);if(ge(e)&&u7(e)&&n.composed&&n.composedPath){const e=n.composedPath();if(e)return ue(e)}}return e.from(n.target)},u7=e=>r(e.dom.shadowRoot),Vn=n=>{const s=we(n)?n.dom.parentNode:n.dom;if(s==null||null===s.ownerDocument)return!1;const o=s.ownerDocument;return(t=>{const n=wt(t);return nl(n)?e.some(n):e.none()})(t(s)).fold(()=>o.body.contains(s),Ku(Vn,p7))},Qh=(e,t,n)=>{if(!h(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);zo(e)&&e.style.setProperty(t,n)},cm=(e,t,n)=>{const s=e.dom;Qh(s,t,n)},Na=(e,t)=>{const n=e.dom;C(t,(e,t)=>{Qh(n,t,e)})},st=(e,t)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(t);return""!==s||Vn(e)?s:mm(n,t)},mm=(e,t)=>zo(e)?e.style.getPropertyValue(t):"",ua=(t,n)=>{const s=t.dom,o=mm(s,n);return e.from(o).filter(e=>e.length>0)},fm=e=>{const n={},t=e.dom;if(zo(t))for(let e=0;e<t.style.length;e++){const s=t.style.item(e);n[s]=t.style[s]}return n},pm=(e,t)=>{((e,t)=>{zo(e)&&e.style.removeProperty(t)})(e.dom,t),ts(gt(e,"style").map(zn),"")&&K(e,"style")},_e=(e,t)=>{Ve(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},At=(e,t)=>{Os(e).fold(()=>{Ve(e).each(e=>{H(e,t)})},e=>{_e(e,t)})},jm=(e,t)=>{q3(e).fold(()=>{H(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},H=(e,t)=>{e.dom.appendChild(t.dom)},ln=(e,t)=>{o(t,t=>{H(e,t)})},Gs=e=>{e.dom.textContent="",o(q(e),e=>{A(e)})},A=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ct=e=>{const t=q(e);var n,s;t.length>0&&(n=e,o(s=t,(e,t)=>{const o=0===t?n:s[t-1];At(o,e)})),A(e)},_m=e=>v(e,t),Tm=e=>e.dom.innerHTML,Wi=(e,n)=>{const s=N3(e).dom,o=t(s.createDocumentFragment()),i=((e,n)=>{const s=(n||document).createElement("div");return s.innerHTML=e,q(t(s))})(n,s);ln(o,i),Gs(e),H(e,o)},P5=(e,n,s,o)=>((e,n,s,o)=>{const a=((e,n)=>s=>{e(s)&&n((e=>{const o=t(Ph(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),i=Tn(s,n);return((e,t,n,s,o,i,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:i,raw:a}))(o,e.clientX,e.clientY,n,s,i,e)})(s))})(s,o);return e.dom.addEventListener(n,a,!1),{unbind:d(R5,e,n,a,!1)}})(e,n,s,o),R5=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Hm=(e,t)=>({left:e,top:t,translate:(n,s)=>Hm(e+n,t+s)}),hs=Hm,yi=(e,t)=>void 0!==e?e:void 0!==t?t:0,yd=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?hs(n.offsetLeft,n.offsetTop):Vn(e)?(e=>{const t=e.getBoundingClientRect();return hs(t.left,t.top)})(t):hs(0,0)},Ed=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return hs(n,s)},Im=(e,t,n)=>{const s=(void 0!==n?n.dom:document).defaultView;s&&s.scrollTo(e,t)},Bm=(e,t)=>{On().browser.isSafari()&&j(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Vm=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),qm=n=>{const o=void 0===n?window:n,i=o.document,s=Ed(t(i));return(t=>{const n=void 0===t?window:t;return On().browser.isFirefox()?e.none():e.from(n.visualViewport)})(o).fold(()=>{const e=o.document.documentElement,t=e.clientWidth,n=e.clientHeight;return Vm(s.left,s.top,t,n)},e=>Vm(Math.max(e.pageLeft,s.left),Math.max(e.pageTop,s.top),e.width,e.height))},t8=(e,t)=>{let n=[];return o(q(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(t8(e,t))}),n};hl=(t,n,s,o,i)=>t(s,o)?e.some(s):j(i)&&i(s)?e.none():n(s,o,i);const Lt=(n,s,o)=>{let i=n.dom;const a=j(o)?o:S;for(;i.parentNode;){i=i.parentNode;const n=t(i);if(s(n))return e.some(n);if(a(n))break}return e.none()},Kt=(e,t,n)=>hl((e,t)=>t(e),Lt,e,t,n),xs=(e,t,n)=>Lt(e,e=>De(e,t),n),Cs=(n,s)=>((n,s)=>{const o=void 0===s?document:s.dom;return F3(o)?e.none():e.from(o.querySelector(n)).map(t)})(s,n),qt=(e,t,n)=>hl((e,t)=>De(e,t),xs,e,t,n),r8=(e,t,n)=>xs(e,t,n).isSome();class P{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,n,s){if(e){if(!s&&e[t])return e[t];if(e!==this.rootNode){let t=e[n];if(t)return t;for(let s=e.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(t=s[n],t)return t}}}findPreviousNode(e,t){if(e){const n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t)for(let e=n.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return n}const s=e.parentNode;if(s&&s!==this.rootNode)return s}}}const Yt=e=>t=>!!t&&t.nodeType===e,pi=e=>!!e&&!Object.getPrototypeOf(e),c=Yt(1),Cd=e=>{const t=e.toLowerCase();return e=>r(e)&&e.nodeName.toLowerCase()===t},Re=e=>{const t=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return O(t,n)}return!1}},bi=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(c(t)){const s=t.ownerDocument.defaultView;if(s)for(let o=0;o<n.length;o++){const i=s.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[o])return!0}}return!1}},c8=e=>t=>c(t)&&t.hasAttribute(e),Jt=e=>c(e)&&e.hasAttribute("data-mce-bogus"),ft=e=>c(e)&&"TABLE"===e.tagName,l8=e=>t=>{if(c(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},od=Re(["textarea","input"]),s=Yt(3),j5=Yt(4),b5=Yt(7),xt=Yt(8),Ws=Yt(9),Hl=Yt(11),F=Cd("br"),V8=Cd("img"),Be=l8("true"),x=l8("false"),oa=Re(["td","th"]),G8=Re(["td","th","caption"]),it=Re(["video","audio","object","embed"]),$g=Cd("li"),eo="﻿",W="\xa0",mf=e=>e===eo,te=(e,n)=>((e,n)=>{const s=void 0===n?document:n.dom;return F3(s)?[]:v(s.querySelectorAll(e),t)})(n,e),jf=((t)=>{const s=n=>t(n)?e.from(n.dom.nodeValue):e.none();return{get:e=>{if(!t(e))throw new Error("Can only get text value of a text node");return s(e).getOr("")},getOption:s,set:(e,n)=>{if(!t(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=n}}})(we),Sc=e=>jf.get(e),Bf=e=>jf.getOption(e),dg=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),St=e=>{let t;return n=>(t=t||td(e,N),f(t,k(n)))},Ne=St(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Kr=e=>ge(e)&&!Ne(e),En=e=>ge(e)&&"br"===k(e),c6=St(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),hr=St(["ul","ol","dl"]),po=St(["li","dd","dt"]),cg=St(["thead","tbody","tfoot"]),vo=St(["td","th"]),qa=St(["pre","script","textarea","style"]),rg=St(dg),og=e=>rg(e)||Kr(e),Hr=()=>{const e=$("br");return U(e,"data-mce-bogus","1"),e},kn=e=>{Gs(e),H(e,Hr())},tg=e=>{cu(e).each(t=>{Cn(t).each(n=>{Ne(e)&&En(t)&&Ne(n)&&A(t)})})},X=eo,Fa=mf,_t=e=>e.replace(/\uFEFF/g,""),Kp=c,Pn=s,Ln=e=>(Pn(e)&&(e=e.parentNode),Kp(e)&&e.hasAttribute("data-mce-caret")),Tt=e=>Pn(e)&&Fa(e.data),Ee=e=>Ln(e)||Tt(e),D6=e=>e.firstChild!==e.lastChild||!F(e.firstChild),Wl=e=>{const t=e.container();return!!s(t)&&(t.data.charAt(e.offset())===X||e.isAtStart()&&Tt(t.previousSibling))},Ul=e=>{const t=e.container();return!!s(t)&&(t.data.charAt(e.offset()-1)===X||e.isAtEnd()&&Tt(t.nextSibling))},Di=e=>Pn(e)&&e.data[0]===X,zi=e=>Pn(e)&&e.data[e.data.length-1]===X,ud=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{var t;const s=e.getElementsByTagName("br"),n=s[s.length-1];Jt(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,W6=e=>Ln(e.startContainer),q6=Be,Hp=x,zp=F,wp=s,_p=Re(["script","style","textarea"]),dp=Re(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jp=Re(["table"]),vp=Ee,Te=e=>!vp(e)&&(wp(e)?!_p(e.parentNode):dp(e)||zp(e)||jp(e)||ru(e)),ru=e=>!(e=>c(e)&&"true"===e.getAttribute("unselectable"))(e)&&Hp(e),mp=(e,t)=>Te(e)&&((e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(ru(n))return!1;if(q6(n))return!0}return!0})(e,t),xp=/^[ \t\r\n]*$/,Mn=e=>xp.test(e),rp=e=>`
`===e||``===e,ip=(e,t=4,n=!0,s=!0)=>{const i=((e,t)=>t<=0?"":new Array(t+1).join(" "))(0,t),o=e.replace(/\t/g,i),a=be(o,(e,t)=>(e=>-1!==" 	".indexOf(e))(t)||t===W?e.pcIsSpace||""===e.str&&n||e.str.length===o.length-1&&s||((e,t)=>t<e.length&&t>=0&&rp(e[t]))(o,e.str.length+1)?{pcIsSpace:!1,str:e.str+W}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:rp(t),str:e.str+t},{pcIsSpace:!1,str:""});return a.str},ei=(e,n)=>Te(e)&&!((e,n)=>s(e)&&Mn(e.data)&&!((e,n)=>{const s=t(n),o=t(e);return r8(o,"pre,code",d(y,s))})(e,n))(e,n)||(e=>c(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||Ap(e),Ap=c8("data-mce-bookmark"),Pp=c8("data-mce-bogus"),Ip=("data-mce-bogus","all",e=>c(e)&&"all"===e.getAttribute("data-mce-bogus")),T=(e,t=!0)=>((e,t)=>{let n=0;if(ei(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new P(s,e);do{if(t){if(Ip(s)){s=o.next(!0);continue}if(Pp(s)){s=o.next();continue}}if(F(s))n++,s=o.next();else{if(ei(s,e))return!1;s=o.next()}}while(s)return n<=1}})(e.dom,t),ws="data-mce-block",Id=e=>(e=>m(pe(e),e=>!/[A-Z]/.test(e)))(e).join(","),V6=(e,t)=>r(t.querySelector(e))?(t.setAttribute(ws,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(ws),!1),P6=(e,t)=>{const n=Id(e.getTransparentElements()),s=Id(e.getBlockElements());return m(t.querySelectorAll(n),e=>V6(s,e))},R6=(e,n)=>{var s;const o=n?"lastChild":"firstChild";for(let n=e[o];n;n=n[o])if(T(t(n)))return void(null===(s=n.parentNode)||void 0===s||s.removeChild(n))},$p=(e,n,s)=>{const r=e.getBlockElements(),c=t(n),i=e=>k(e)in r,a=e=>y(e,c);o(_m(s),n=>{Lt(n,i,a).each(s=>{const r=((t)=>m(q(t),t=>i(t)&&!e.isValidChild(k(s),k(t))))(n);if(r.length>0){const n=L3(s);o(r,e=>{Lt(e,i,a).each(n=>{((e,n)=>{const s=document.createRange(),o=e.parentNode;if(o){s.setStartBefore(e),s.setEndBefore(n);const i=s.extractContents();R6(i,!0),s.setStartAfter(n),s.setEndAfter(e);const a=s.extractContents();R6(a,!1),T(t(i))||o.insertBefore(i,e),T(t(n))||o.insertBefore(n,e),T(t(a))||o.insertBefore(a,e),o.removeChild(e)}})(n.dom,e.dom)})}),n.each(t=>P6(e,t.dom))}})})},Td=(e,t)=>{const n=P6(e,t);$p(e,t,n)},Up=(e,t)=>{if(S6(e,t)){const n=Id(e.getBlockElements());V6(n,t)}},M6=e=>e.hasAttribute(ws),fi=(e,t)=>f(e.getTransparentElements(),t),S6=(e,t)=>c(t)&&fi(e,t.nodeName),Io=(e,t)=>S6(e,t)&&M6(t),A6=(e,t)=>1===t.type&&fi(e,t.name)&&re(t.attr(ws)),Xp=On().browser,O6=e=>V(e,ge),w6=(e,t)=>e.children&&O(e.children,t),_6=(e,n={})=>{let d=0;const s={},r=t(e),u=ht(r),h=n.maxLoadTime||5e3,c=t=>new Promise((a,c)=>{let m;const p=i._addCacheSuffix(t),l=(e=>E(s,e).getOrThunk(()=>({id:"mce-u"+d++,passed:[],failed:[],count:0})))(p);s[p]=l,l.count++;const v=(e,t)=>{o(e,Ss),l.status=t,l.passed=[],l.failed=[],m&&(m.onload=null,m.onerror=null,m=null)},b=()=>v(l.passed,2),g=()=>v(l.failed,3),j=()=>{var t=j;(()=>{const t=e.styleSheets;let n=t.length;for(;n--;){const e=t[n].ownerNode;if(e&&m&&e.id===m.id)return b(),!0}return!1})()||(Date.now()-_<h?setTimeout(t):g())};if(a&&l.passed.push(a),c&&l.failed.push(c),1===l.status)return;if(2===l.status)return void b();if(3===l.status)return void g();l.status=1;const f=$("link",u.dom);Ot(f,{rel:"stylesheet",type:"text/css",id:l.id});const _=Date.now();var y;n.contentCssCors&&U(f,"crossOrigin","anonymous"),n.referrerPolicy&&U(f,"referrerpolicy",n.referrerPolicy),m=f.dom,m.onload=j,m.onerror=g,y=f,H(Bc(r),y),U(f,"href",p)}),l=e=>{const t=i._addCacheSuffix(e);E(s,t).each(e=>{0==--e.count&&(delete s[t],(e=>{const t=Bc(r);Cs(t,"#"+e).each(A)})(e.id))})};return{load:c,loadAll:e=>Promise.allSettled(v(e,e=>c(e).then(a(e)))).then(e=>{const t=zs(e,e=>"fulfilled"===e.status);return t.fail.length>0?Promise.reject(v(t.fail,e=>e.reason)):v(t.pass,e=>e.value)}),unload:l,unloadAll:e=>{o(e,e=>{l(e)})},_setReferrerPolicy:e=>{n.referrerPolicy=e},_setContentCssCors:e=>{n.contentCssCors=e}}},b6=(()=>{const t=new WeakMap;return{forElement:(n,s)=>{const o=wt(n).dom;return e.from(t.get(o)).getOrThunk(()=>{const e=_6(o,s);return t.set(o,e),e})}}})(),l6=(e,n)=>r(e)&&(ei(e,n)||Kr(t(e))),Qf=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Zl=(e,t,n)=>{var o;const i=n||t;if(c(t)&&Qf(t))return t;const a=t.childNodes;for(let t=a.length-1;t>=0;t--)Zl(e,a[t],i);if(c(t)){const e=t.childNodes;1===e.length&&Qf(e[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(e[0],t))}return(e=>Hl(e)||Ws(e))(t)||ei(t,i)||(e=>!!c(e)&&e.childNodes.length>0)(t)||((e,t)=>s(e)&&e.data.length>0&&((e,t)=>{const n=new P(e,t).prev(!1),s=new P(e,t).next(!1),o=re(n)||l6(n,t),i=re(s)||l6(s,t);return o&&i})(e,t))(t,i)||e.remove(t),t},fg=i.makeMap,ki=/[&<>"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ai=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pg=/[<>&"']/g,bg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,kg={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},fn={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Sg={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},zf=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let e=0;e<s.length;e+=2){const o=String.fromCharCode(parseInt(s[e],t));if(!fn[o]){const t="&"+s[e+1]+";";n[o]=t,n[t]=o}}return n}},Xl=zf("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Tf=(e,t)=>e.replace(t?ki:Ai,e=>fn[e]||e),Sf=(e,t)=>e.replace(t?ki:Ai,e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":fn[e]||"&#"+e.charCodeAt(0)+";"),Kl=(e,t,n)=>{const s=n||Xl;return e.replace(t?ki:Ai,e=>fn[e]||s[e]||e)},It={encodeRaw:Tf,encodeAllRaw:e=>(""+e).replace(pg,e=>fn[e]||e),encodeNumeric:Sf,encodeNamed:Kl,getEncodeFunc:(e,t)=>{const s=zf(t)||Xl,n=fg(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?ki:Ai,e=>void 0!==fn[e]?fn[e]:void 0!==s[e]?s[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>Kl(e,t,s):Kl:n.numeric?Sf:Tf},decode:e=>e.replace(bg,(e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):kg[t]||String.fromCharCode(t):Sg[e]||Xl[e]||(e=>{const t=$("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e))},Ii={},Bi={},Fg={},os=i.makeMap,Z=i.each,Pl=i.extend,yf=i.explode,Lg=i.inArray,G=(e,t)=>(e=i.trim(e))?e.split(t||" "):[],bf=(e,t={})=>{const n=os(e," ",os(e.toUpperCase()," "));return Pl(n,t)},vf=e=>bf("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Tl=(e,t)=>{if(e){const n={};return h(e)&&(e={"*":e}),Z(e,(e,s)=>{n[s]=n[s.toUpperCase()]="map"===t?os(e,/[, ]/):yf(e,/[, ]/)}),n}},Bt=(e={})=>{var l;const t={},n={};let r=[];const O={},p={},s=(t,n,s)=>{const o=e[t];if(o)return os(o,/[, ]/,os(o.toUpperCase(),/[, ]/));{let e=Bi[t];return e||(e=bf(n,s),Bi[t]=e),e}},d=null!==(l=e.schema)&&void 0!==l?l:"html5",y=(e=>{const r={};let l,c,i,s;const t=(e,t="",n="")=>{const i=G(n),s=G(e);let o=s.length;for(;o--;){const e=G([l,t].join(" "));r[s[o]]={attributes:td(e,()=>({})),attributesOrder:e,children:td(i,a(Fg))}}},n=(e,t)=>{const s=G(e),n=G(t);let o=s.length;for(;o--;){const e=r[s[o]];for(let t=0,s=n.length;t<s;t++)e.attributes[n[t]]={},e.attributesOrder.push(n[t])}};if(Ii[e])return Ii[e];if(l="id accesskey class dir lang style tabindex title role",c="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(l+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",c+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e){l+=" xml:lang";const e="acronym applet basefont big font strike tt";i=[i,e].join(" "),Z(G(e),e=>{t(e,"",i)});const n="center dir isindex noframes";c=[c,n].join(" "),s=[c,i].join(" "),Z(G(n),e=>{t(e,"",s)})}return s=s||[c,i].join(" "),t("html","manifest","head body"),t("head","","base command link meta noscript script style title"),t("title hr noscript br"),t("base","href target"),t("link","href rel media hreflang type sizes hreflang"),t("meta","name http-equiv content charset"),t("style","media type scoped"),t("script","src async defer type charset"),t("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),t("address dt dd div caption","",s),t("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),t("blockquote","cite",s),t("ol","reversed start type","li"),t("ul","","li"),t("li","value",s),t("dl","","dt dd"),t("a","href target rel media hreflang type",s),t("q","cite",i),t("ins del","cite datetime",s),t("img","src sizes srcset alt usemap ismap width height"),t("iframe","src name width height",s),t("embed","src type width height"),t("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),t("param","name value"),t("map","name",[s,"area"].join(" ")),t("area","alt coords shape href target rel media hreflang type"),t("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),t("colgroup","span","col"),t("col","span"),t("tbody thead tfoot","","tr"),t("tr","","td th"),t("td","colspan rowspan headers",s),t("th","colspan rowspan headers scope abbr",s),t("form","accept-charset action autocomplete enctype method name novalidate target",s),t("fieldset","disabled form name",[s,"legend"].join(" ")),t("label","form for",i),t("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),t("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?s:i),t("select","disabled form multiple name required size","option optgroup"),t("optgroup","disabled label","option"),t("option","disabled label selected value"),t("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),t("menu","type label",[s,"li"].join(" ")),t("noscript","",s),"html4"!==e&&(t("wbr"),t("ruby","",[i,"rt rp"].join(" ")),t("figcaption","",s),t("mark rt rp summary bdi","",i),t("canvas","width height",s),t("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),t("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),t("picture","","img source"),t("source","src srcset type media sizes"),t("track","kind src srclang label default"),t("datalist","",[i,"option"].join(" ")),t("article section nav aside main header footer","",s),t("hgroup","","h1 h2 h3 h4 h5 h6"),t("figure","",[s,"figcaption"].join(" ")),t("time","datetime",i),t("dialog","open",s),t("command","type label icon disabled checked radiogroup command"),t("output","for form name",i),t("progress","value max",i),t("meter","value min max low high optimum",i),t("details","open",[s,"summary"].join(" ")),t("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(n("script","language xml:space"),n("style","xml:space"),n("object","declare classid code codebase codetype archive standby align border hspace vspace"),n("embed","align name hspace vspace"),n("param","valuetype type"),n("a","charset name rev shape coords"),n("br","clear"),n("applet","codebase archive code object alt name width height align hspace vspace"),n("img","name longdesc align border hspace vspace"),n("iframe","longdesc frameborder marginwidth marginheight scrolling align"),n("font basefont","size color face"),n("input","usemap align"),n("select"),n("textarea"),n("h1 h2 h3 h4 h5 h6 div p legend caption","align"),n("ul","type compact"),n("li","type"),n("ol dl menu dir","compact"),n("pre","width xml:space"),n("hr","align noshade size width"),n("isindex","prompt"),n("table","summary width frame rules cellspacing cellpadding align bgcolor"),n("col","width align char charoff valign"),n("colgroup","width align char charoff valign"),n("thead","align char charoff valign"),n("tr","align char charoff valign bgcolor"),n("th","axis align char charoff valign nowrap bgcolor width height"),n("form","accept"),n("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),n("tfoot","align char charoff valign"),n("tbody","align char charoff valign"),n("area","nohref"),n("body","background bgcolor text link vlink alink")),"html4"!==e&&(n("input button select textarea","autofocus"),n("input textarea","placeholder"),n("a","download"),n("link script img","crossorigin"),n("img","loading"),n("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&o([r.video,r.audio],e=>{delete e.children.audio,delete e.children.video}),Z(G("a form meter progress dfn"),e=>{r[e]&&delete r[e].children[e]}),delete r.caption.children.table,delete r.script,Ii[e]=r,r})(d);!1===e.verify_html&&(e.valid_elements="*[*]");const T=Tl(e.valid_styles),F=Tl(e.invalid_styles,"map"),M=Tl(e.valid_classes,"map"),S=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),A=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),k=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),j="td th iframe video audio object script code",u=s("non_empty_elements",j+" pre",f),L=s("move_caret_before_on_enter_elements",j+" table",f),w=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),c=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),_=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),x=s("transparent_elements","a ins del canvas map");Z("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{p[e]=new RegExp("</"+e+"[^>]*>","gi")});const b=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),i=e=>{const s=/^([#+-])?([^[!/]+)(?:\/([^[!]+))?(?:(!?)\[([^\]]+)])?$/,o=/^([!-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,n=/[*?+]/;if(e){const c=G(e,",");let i,a;t["@"]&&(i=t["@"].attributes,a=t["@"].attributesOrder);for(let l=0,d=c.length;l<d;l++){let e=s.exec(c[l]);if(e){const u=e[1],d=e[2],h=e[3],m=e[5],c={},l=[],s={attributes:c,attributesOrder:l};if("#"===u&&(s.paddEmpty=!0),"-"===u&&(s.removeEmpty=!0),"!"===e[4]&&(s.removeEmptyAttrs=!0),i&&(C(i,(e,t)=>{c[t]=e}),a&&l.push(...a)),m){const t=G(m,"|");for(let i=0,a=t.length;i<a;i++)if(e=o.exec(t[i]),e){const o={},r=e[1],t=e[2].replace(/[\\:]:/g,":"),a=e[3],i=e[4];if("!"===r&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(t),o.required=!0),"-"===r){delete c[t],l.splice(Lg(l,t),1);continue}if(a&&("="===a&&(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:t,value:i}),o.defaultValue=i),"~"===a&&(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:t,value:i}),o.forcedValue=i),"<"===a&&(o.validValues=os(i,"?"))),n.test(t)){const e=o;s.attributePatterns=s.attributePatterns||[],e.pattern=b(t),s.attributePatterns.push(e)}else c[t]||l.push(t),c[t]=o}}if(i||"@"!==d||(i=c,a=l),h&&(s.outputName=d,t[h]=s),n.test(d)){const e=s;e.pattern=b(d),r.push(e)}else t[d]=s}}}},g=e=>{r=[],o(pe(t),e=>{delete t[e]}),i(e),Z(y,(e,t)=>{n[t]=e.children})},v=e=>{const s=/^(~)?(.+)$/;e&&(delete Bi.text_block_elements,delete Bi.block_elements,Z(G(e,","),e=>{const o=s.exec(e);if(o){const i="~"===o[1],s=i?"span":"div",e=o[2];if(n[e]=n[s],O[e]=s,u[e.toUpperCase()]={},u[e]={},i||(c[e.toUpperCase()]={},c[e]={}),!t[e]){let n=t[s];n=Pl({},n),delete n.removeEmptyAttrs,delete n.removeEmpty,t[e]=n}Z(n,(t,o)=>{t[s]&&(n[o]=t=Pl({},n[o]),t[e]=t[s])})}}))},m=e=>{const t=/^([+-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Ii[d],e&&Z(G(e,","),e=>{const s=t.exec(e);if(s){const t=s[1];let e;e=t?n[s[2]]:n[s[2]]={"#comment":{}},e=n[s[2]],Z(G(s[3],"|"),n=>{"-"===t?delete e[n]:e[n]={}})}})},h=e=>{const n=t[e];if(n)return n;let s=r.length;for(;s--;){const t=r[s];if(t.pattern.test(e))return t}};e.valid_elements?g(e.valid_elements):(Z(y,(e,s)=>{t[s]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[s]=e.children}),Z(G("strong/b em/i"),e=>{const n=G(e,"/");t[n[1]].outputName=n[0]}),Z(_,(n,s)=>{t[s]&&(e.padd_empty_block_inline_children&&(t[s].paddInEmptyBlock=!0),t[s].removeEmpty=!0)}),Z(G("ol ul blockquote a table tbody"),e=>{t[e]&&(t[e].removeEmpty=!0)}),Z(G("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),e=>{t[e].paddEmpty=!0}),Z(G("span"),e=>{t[e].removeEmptyAttrs=!0})),v(e.custom_elements),m(e.valid_children),i(e.extended_valid_elements),m("+ol[ul|ol],+ul[ul|ol]"),Z({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,n)=>{t[n]&&(t[n].parentsRequired=G(e))}),e.invalid_elements&&Z(yf(e.invalid_elements),e=>{t[e]&&delete t[e]}),h("span")||i("span[!data-mce-type|*]");const z=a(T),D=a(F),N=a(M),E=a(k),R=a(c),P=a(w),H=a(_),I=a(Object.seal(f)),B=a(A),V=a(u),$=a(L),W=a(S),U=a(x),K=a(Object.seal(p)),q=a(O);return{type:d,children:n,elements:t,getValidStyles:z,getValidClasses:N,getBlockElements:R,getInvalidStyles:D,getVoidElements:I,getTextBlockElements:P,getTextInlineElements:H,getBoolAttrs:E,getElementRule:h,getSelfClosingElements:B,getNonEmptyElements:V,getMoveCaretBeforeOnEnterElements:$,getWhitespaceElements:W,getTransparentElements:U,getSpecialElements:K,isValidChild:(e,t)=>{const s=n[e.toLowerCase()];return!!s&&!!s[t.toLowerCase()]},isValid:(e,t)=>{const n=h(e);if(n){if(!t)return!0;{if(n.attributes[t])return!0;const e=n.attributePatterns;if(e){let n=e.length;for(;n--;)if(e[n].pattern.test(t))return!0}}}return!1},getCustomElements:q,addValidElements:i,setValidElements:g,addCustomElements:v,addValidChildren:m}},Ml=(e={},t)=>{const l=/(?:url(?:(?:\(\s*"([^"]+)"\s*\))|(?:\(\s*'([^']+)'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:'([^']+)')|(?:"([^"]+)")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,n={};let s,o;t&&(s=t.getValidStyles(),o=t.getInvalidStyles());const i=`\\" \\' \\; \\: ; : ﻿`.split(" ");for(let e=0;e<i.length;e++)n[i[e]]="﻿"+e,n["﻿"+e]=i[e];const c={parse:t=>{const s={};let u=!1;const v=e.url_converter,y=e.url_converter_scope||c,o=(e,t,n)=>{const a=s[e+"-top"+t];if(!a)return;const r=s[e+"-right"+t];if(!r)return;const c=s[e+"-bottom"+t];if(!c)return;const l=s[e+"-left"+t];if(!l)return;const o=[a,r,c,l];let i=o.length-1;for(;i--&&o[i]===o[i+1];);i>-1&&n||(s[e+t]=-1===i?o[0]:o.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t])},h=e=>{const n=s[e];if(!n)return;const t=n.split(" ");let o=t.length;for(;o--;)if(t[o]!==t[0])return!1;return s[e]=t[0],!0},g=e=>(u=!0,n[e]),f=(e,t)=>(u&&(e=e.replace(/\uFEFF[0-9]/g,e=>n[e])),t||(e=e.replace(/\\(['";:])/g,"$1")),e),b=e=>String.fromCharCode(parseInt(e.slice(1),16)),p=e=>e.replace(/\\[0-9a-f]+/gi,b),j=(t,n,s,o,i,a)=>{if(i=i||a)return"'"+(i=f(i)).replace(/'/g,"\\'")+"'";if(n=f(n||s||o||""),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return v&&(n=v.call(y,n,"style")),"url('"+n.replace(/'/g,"\\'")+"')"};if(t){let n;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\["';:\uFEFF]/g,g).replace(/"[^"]+"|'[^']+'/g,e=>e.replace(/[;:]/g,g));n=a.exec(t);){a.lastIndex=n.index+n[0].length;let i=n[1].replace(r,"").toLowerCase(),o=n[2].replace(r,"");if(i&&o){if(i=p(i),o=p(o),-1!==i.indexOf("﻿")||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=o.replace(l,j),s[i]=u?f(o,!0):o}}o("border","",!0),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),"border",d="border-style",i="border-color",h(m="border-width")&&h(d)&&h(i)&&(s.border=s[m]+" "+s[d]+" "+s[i],delete s[m],delete s[d],delete s[i]),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}var i,d,m;return s},serialize:(e,t)=>{let n="";const i=(t,s)=>{const o=s[t];if(o)for(let t=0,a=o.length;t<a;t++){const s=o[t],i=e[s];i&&(n+=(n.length>0?" ":"")+s+": "+i+";")}};return t&&s?(i("*",s),i(t,s)):C(e,(e,s)=>{e&&((e,t)=>{if(!o||!t)return!0;let n=o["*"];return!(n&&n[e]||(n=o[t],n&&n[e]))})(s,t)&&(n+=(n.length>0?" ":"")+s+": "+e+";")}),n}};return c},Wg={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ef=(e,t)=>{const n=t??{};for(const t in e)f(Wg,t)||(n[t]=e[t]);return r(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},ml=(e,t,n,s)=>{var i;const o=ef(t,s);return o.type=e,D(o.target)&&(o.target=null!==(i=o.srcElement)&&void 0!==i?i:n),(e=>D(e.preventDefault)||(e=>e instanceof Event||j(e.initEvent))(e))(t)&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=N,j(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=N,j(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=N,o.stopPropagation()},(e=>e.isDefaultPrevented===N||e.isDefaultPrevented===S)(o)||(o.isDefaultPrevented=!0===o.defaultPrevented?N:S,o.isPropagationStopped=!0===o.cancelBubble?N:S,o.isImmediatePropagationStopped=S)),o},qg=/^(?:mouse|contextmenu)|click/,il=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},ia=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},Fo=(e,t)=>{const n=ml(e.type,e,document,t);if((e=>r(e)&&qg.test(e.type))(e)&&re(e.pageX)&&!re(e.clientX)){const o=n.target.ownerDocument||document,t=o.documentElement,s=o.body,i=n;i.pageX=e.clientX+(t&&t.scrollLeft||s&&s.scrollLeft||0)-(t&&t.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(t&&t.scrollTop||s&&s.scrollTop||0)-(t&&t.clientTop||s&&s.clientTop||0)}return n},Yg=(e,t,n)=>{const o=e.document,i={type:"ready"};if(n.domLoaded)return void t(i);const s=()=>{ia(e,"DOMContentLoaded",s),ia(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(i)),e=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():il(e,"DOMContentLoaded",s),n.domLoaded||il(e,"load",s)};class Zt{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,o){const i=this;let a;const c=window,u=e=>{i.executeHandlers(Fo(e||c.event),r)};if(!e||s(e)||xt(e))return n;let r;e[i.expando]?r=e[i.expando]:(r=i.count++,e[i.expando]=r,i.events[r]={}),o=o||e;const l=t.split(" ");let d=l.length;for(;d--;){let t=l[d],s=u,h=!1,m=!1;"DOMContentLoaded"===t&&(t="ready"),i.domLoaded&&"ready"===t&&"complete"===e.readyState?n.call(o,Fo({type:t})):(i.hasFocusIn||"focusin"!==t&&"focusout"!==t||(h=!0,m="focusin"===t?"focus":"blur",s=e=>{const t=Fo(e||c.event);t.type="focus"===t.type?"focusin":"focusout",i.executeHandlers(t,r)}),a=i.events[r][t],a?"ready"===t&&i.domLoaded?n(Fo({type:t})):a.push({func:n,scope:o}):(i.events[r][t]=a=[{func:n,scope:o}],a.fakeName=m,a.capture=h,a.nativeHandler=s,"ready"===t?Yg(e,s,i):il(e,m||t,s,h)))}return e=a=null,n}unbind(e,t,n){if(!e||s(e)||xt(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(t){{const o=t.split(" ");let i=o.length;for(;i--;){const a=o[i],t=s[a];if(t){if(n){let e=t.length;for(;e--;)if(t[e].func===n){const o=t.nativeHandler,i=t.fakeName,r=t.capture,n=t.slice(0,e).concat(t.slice(e+1));n.nativeHandler=o,n.fakeName=i,n.capture=r,s[a]=n}}n&&0!==t.length||(delete s[a],ia(e,t.fakeName||a,t.nativeHandler,t.capture))}}}}else C(s,(t,n)=>{ia(e,t.fakeName||n,t.nativeHandler,t.capture)}),s={};for(const e in s)if(f(s,e))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||s(e)||xt(e))return this;const o=Fo({type:t,target:e},n);do{const t=e[this.expando];t&&this.executeHandlers(o,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped())return this}clean(e){if(!e||s(e)||xt(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const t=e.getElementsByTagName("*");let n=t.length;for(;n--;)(e=t[n])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const s=this.events[t],n=s&&s[e.type];if(n)for(let t=0,o=n.length;t<o;t++){const s=n[t];if(s&&!1===s.func.call(s.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Zt.Event=new Zt;const qc=i.each,Gg=i.grep,Wc="data-mce-style",Xg=i.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ao=(e,t,n)=>{D(n)||""===n?K(e,t):U(e,t,n)},q8=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),fs=(e,t)=>{let n=0;if(e)for(let i=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const a=o.nodeType;(!t||!s(o)||a!==i&&o.data.length)&&(n++,i=a)}return n},U8=(e,t)=>{const n=Fe(t,"style"),s=e.serialize(e.parse(n),k(t));Ao(t,Wc,s)},W8=(e,t,n)=>{const s=q8(t);D(n)||""===n?pm(e,s):cm(e,s,((e,t)=>We(e)?f(Xg,t)?e+"":e+"px":e)(n,s))},w=(e,n={})=>{const Z={},N=window,y={};let ce=0;const E=b6.forElement(t(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),d=[],u=n.schema?n.schema:Bt({}),v=Ml({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),m=n.ownEvents?new Zt:Zt.Event,se=u.getBlockElements(),l=t=>t&&e&&h(t)?e.getElementById(t):t,_=e=>{const n=l(e);return r(n)?t(n):null},p=(e,t,n="")=>{let o;const s=_(e);if(r(s)&&ge(s)){const e=re[t];o=e&&e.get?e.get(s.dom,t):Fe(s,t)}return r(o)?o:n},ee=e=>{const t=l(e);return D(t)?[]:t.attributes},T=(e,s,o)=>{i(e,e=>{if(c(e)){const i=t(e),a=""===o?null:o,c=Fe(i,s),r=re[s];r&&r.set?r.set(i.dom,a,s):Ao(i,s,a),c!==a&&n.onSetAttrib&&n.onSetAttrib({attrElm:i.dom,attrName:s,attrValue:a})}})},x=()=>n.root_element||e.body,U=(n,s)=>((e,n,s)=>{let i=0,o=0;const a=e.ownerDocument;if(s=s||e,n){if(s===e&&n.getBoundingClientRect&&"static"===st(t(e),"position")){const t=n.getBoundingClientRect();return i=t.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,o=t.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop,{x:i,y:o}}let r=n;for(;r&&r!==s&&r.nodeType&&!w6(r,s);){const e=r;i+=e.offsetLeft||0,o+=e.offsetTop||0,r=e.offsetParent}for(r=n.parentNode;r&&r!==s&&r.nodeType&&!w6(r,s);)i-=r.scrollLeft||0,o-=r.scrollTop||0,r=r.parentNode;o+=(e=>Xp.isFirefox()&&"table"===k(e)?O6(q(e)).filter(e=>"caption"===k(e)).bind(e=>O6(I3(e)).map(t=>{const n=t.dom.offsetTop,s=e.dom.offsetTop,o=e.dom.offsetHeight;return n<=s?-o:0})).getOr(0):0)(t(n))}return{x:i,y:o}})(e.body,l(n),s),R=(e,n,s)=>{const o=l(e);if(!D(o)&&c(o))return s?st(t(o),q8(n)):("float"===(n=n.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(n="cssFloat"),o.style?o.style[n]:void 0)},I=e=>{const t=l(e);if(!t)return{w:0,h:0};let n=R(t,"width"),s=R(t,"height");return n&&-1!==n.indexOf("px")||(n="0"),s&&-1!==s.indexOf("px")||(s="0"),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(s,10)||t.offsetHeight||t.clientHeight}},M=(e,n)=>{if(!e)return!1;const s=L(e)?e:[e];return z(s,e=>De(t(e),n))},V=(e,t,n,s)=>{const i=[];let o=l(e);s=void 0===s;const a=n||("BODY"!==x().nodeName?x().parentNode:null);if(h(t))if("*"===t)t=c;else{const e=t;t=t=>M(t,e)}for(;o&&!(o===a||D(o.nodeType)||Ws(o)||Hl(o));){if(!t||t(o)){if(!s)return[o];i.push(o)}o=o.parentNode}return s?i:null},W=(e,t,n)=>{let s=t;if(e){h(t)&&(s=e=>M(e,t));for(let t=e[n];t;t=t[n])if(j(s)&&s(t))return t}return null},i=function(e,t,n){const s=n??this;if(L(e)){const n=[];return qc(e,(e,o)=>{const i=l(e);i&&n.push(t.call(s,i,o))}),n}{const n=l(e);return!!n&&t.call(s,n)}},Y=(e,t)=>{i(e,e=>{C(t,(t,n)=>{T(e,n,t)})})},G=(e,n)=>{i(e,e=>{const s=t(e);Wi(s,n)})},X=(t,n,s,o,a)=>i(t,t=>{const i=h(n)?e.createElement(n):n;return r(s)&&Y(i,s),o&&(!h(o)&&o.nodeType?i.appendChild(o):h(o)&&G(i,o)),a?i:t.appendChild(i)}),Q=(t,n,s)=>X(e.createElement(t),t,n,s,!0),B=It.encodeAllRaw,J=(e,n)=>i(e,e=>{const s=t(e);return n&&o(q(s),e=>{we(e)&&0===e.dom.length?A(e):_e(s,e)}),A(s),s.dom}),F=(e,n,s)=>{i(e,e=>{if(c(e)){const i=t(e),a=n.split(" ");o(a,e=>{r(s)?(s?To:Ki)(i,e):((e,t)=>{const n=So(e)?e.dom.classList.toggle(t):((e,t)=>O(d3(e),t)?x3(e,t):y3(e,t))(e,t);k3(e)})(i,e)})}})},te=(e,t,n)=>i(t,s=>{var o;const i=L(t)?e.cloneNode(!0):e;return n&&qc(Gg(s.childNodes),e=>{i.appendChild(e)}),null===(o=s.parentNode)||void 0===o||o.replaceChild(i,s),s}),ne=e=>{if(c(e)){const t="a"===e.nodeName.toLowerCase()&&!p(e,"href")&&p(e,"id");if(p(e,"name")||p(e,"data-mce-bookmark")||t)return!0}return!1},S=()=>e.createRange(),oe=(t,s,o,i)=>{if(L(t)){let e=t.length;const n=[];for(;e--;)n[e]=oe(t[e],s,o,i);return n}return!n.collect||t!==e&&t!==N||d.push([t,s,o,i]),m.bind(t,s,o,i||b)},ie=(t,n,s)=>{if(L(t)){let e=t.length;const o=[];for(;e--;)o[e]=ie(t[e],n,s);return o}if(d.length>0&&(t===e||t===N)){let e=d.length;for(;e--;){const[o,i,a]=d[e];t!==o||n&&n!==i||s&&s!==a||m.unbind(o,i,a)}}return m.unbind(t,n,s)},ae=e=>{if(e&&c(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},b={doc:e,settings:n,win:N,files:y,stdMode:!0,boxModel:!0,styleSheetLoader:E,boundEvents:d,styles:v,schema:u,events:m,isBlock:e=>h(e)?f(se,e):c(e)&&(f(se,e.nodeName)||Io(u,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:x,getViewPort:e=>{const t=qm(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{const t=l(e),n=U(t),s=I(t);return{x:n.x,y:n.y,w:s.w,h:s.h}},getSize:I,getParent:(e,t,n)=>{const s=V(e,t,n,!1);return s&&s.length>0?s[0]:null},getParents:V,get:l,getNext:(e,t)=>W(e,t,"nextSibling"),getPrev:(e,t)=>W(e,t,"previousSibling"),select:(t,s)=>{var o,i;const a=null!==(i=null!==(o=l(s))&&void 0!==o?o:n.root_element)&&void 0!==i?i:e;return j(a.querySelectorAll)?fe(a.querySelectorAll(t)):[]},is:M,add:X,create:Q,createHTML:(e,t,n="")=>{let s="<"+e;for(const e in t)vs(t,e)&&(s+=" "+e+'="'+B(t[e])+'"');return co(n)&&f(u.getVoidElements(),e)?s+" />":s+">"+n+"</"+e+">"},createFragment:t=>{const n=e.createElement("div"),s=e.createDocumentFragment();let o;for(s.appendChild(n),t&&(n.innerHTML=t);o=n.firstChild;)s.appendChild(o);return s.removeChild(n),s},remove:J,setStyle:(e,s,o)=>{i(e,e=>{const i=t(e);W8(i,s,o),n.update_styles&&U8(v,i)})},getStyle:R,setStyles:(e,s)=>{i(e,e=>{const o=t(e);C(s,(e,t)=>{W8(o,t,e)}),n.update_styles&&U8(v,o)})},removeAllAttribs:e=>i(e,e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))}),setAttrib:T,setAttribs:Y,getAttrib:p,getPos:U,parseStyle:e=>v.parse(e),serializeStyle:(e,t)=>v.serialize(e,t),addStyle:t=>{if(b!==w.DOM&&e===document){if(Z[t])return;Z[t]=!0}let n=e.getElementById("mceDefaultStyles");if(!n){n=e.createElement("style"),n.id="mceDefaultStyles",n.type="text/css";const t=e.head;t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),o(e.split(","),e=>{y[e]=!0,E.load(e).catch(g)})},addClass:(e,t)=>{F(e,t,!0)},removeClass:(e,t)=>{F(e,t,!1)},hasClass:(e,t)=>{const n=_(e),s=t.split(" ");return r(n)&&Xt(s,e=>Bl(n,e))},toggleClass:F,show:e=>{i(e,e=>pm(t(e),"display"))},hide:e=>{i(e,e=>cm(t(e),"display","none"))},isHidden:e=>{const t=_(e);return r(t)&&ts(ua(t,"display"),"none")},uniqueId:e=>(e||"mce_")+ce++,setHTML:G,getOuterHTML:e=>{const n=_(e);return r(n)?c(n.dom)?n.dom.outerHTML:(e=>{const n=$("div"),s=t(e.dom.cloneNode(!0));return H(n,s),Tm(n)})(n):""},setOuterHTML:(e,t)=>{i(e,e=>{c(e)&&(e.outerHTML=t)})},decode:It.decode,encode:B,insertAfter:(e,t)=>{const n=l(t);return i(e,e=>{const t=n?.parentNode,s=n?.nextSibling;return t&&(s?t.insertBefore(e,s):t.appendChild(e)),e})},replace:te,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){const n=Q(t);return qc(ee(e),t=>{T(n,t.nodeName,p(e,t.nodeName))}),te(n,e,!0),n}return e},findCommonAncestor:(e,t)=>{let n=e;for(;n;){let e=t;for(;e&&n!==e;)e=e.parentNode;if(n===e)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},run:i,getAttribs:ee,isEmpty:(e,t)=>{let o=0;if(ne(e))return!1;const n=e.firstChild;if(n){const a=new P(n,e),l=u?u.getWhitespaceElements():{},r=t||(u?u.getNonEmptyElements():null);let i=n;do{if(c(i)){const e=i.getAttribute("data-mce-bogus");if(e){i=a.next("all"===e);continue}const t=i.nodeName.toLowerCase();if(r&&r[t]){if("br"===t){o++,i=a.next();continue}return!1}if(ne(i))return!1}if(xt(i))return!1;if(s(i)&&!Mn(i.data))return!1;if(s(i)&&i.parentNode&&l[i.parentNode.nodeName]&&Mn(i.data))return!1;i=a.next()}while(i)}return o<=1},createRng:S,nodeIndex:fs,split:(e,t,n)=>{let o,i,s=S();if(e&&t&&e.parentNode&&t.parentNode){const a=e.parentNode;return s.setStart(a,fs(e)),s.setEnd(t.parentNode,fs(t)),o=s.extractContents(),s=S(),s.setStart(t.parentNode,fs(t)+1),s.setEnd(a,fs(e)+1),i=s.extractContents(),a.insertBefore(Zl(b,o),e),n?a.insertBefore(n,e):a.insertBefore(t,e),a.insertBefore(Zl(b,i),e),J(e),n||t}},bind:oe,unbind:ie,fire:(e,t,n)=>m.dispatch(e,t,n),dispatch:(e,t,n)=>m.dispatch(e,t,n),getContentEditable:ae,getContentEditableParent:e=>{const n=x();let t=null;for(let s=e;s&&s!==n&&(t=ae(s),null===t);s=s.parentNode);return t},destroy:()=>{if(d.length>0){let e=d.length;for(;e--;){const[t,n,s]=d[e];m.unbind(t,n,s)}}C(y,(e,t)=>{E.unload(t),delete y[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},re=((e,n,s)=>{const i=n.keep_values,a={set:(e,o,i)=>{const a=t(e);j(n.url_converter)&&r(o)&&(o=n.url_converter.call(n.url_converter_scope||s(),String(o),i,e)),Ao(a,"data-mce-"+i,o),Ao(a,i,o)},get:(e,n)=>{const s=t(e);return Fe(s,"data-mce-"+n)||Fe(s,n)}},o={style:{set:(n,s)=>{const o=t(n);i&&Ao(o,Wc,s),K(o,"style"),h(s)&&Na(o,e.parse(s))},get:n=>{const s=t(n),o=Fe(s,Wc)||Fe(s,"style");return e.serialize(e.parse(o),k(s))}}};return i&&(o.href=o.src=a),o})(v,n,a(b));return b};w.DOM=w(document),w.nodeIndex=fs;const Qg=w.DOM;class pt{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,n)=>{const o=Qg;let s;const a=()=>{o.remove(r),s&&(s.onerror=s.onload=s=null)},r=o.uniqueId();s=document.createElement("script"),s.id=r,s.type="text/javascript",s.src=i._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),t()},s.onerror=()=>{a(),n("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise((n,s)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:s})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(t){const n=this,s=(e,t)=>{E(n.scriptLoadedCallbacks,t).each(n=>{o(n,n=>n[e](t))}),delete n.scriptLoadedCallbacks[t]},i=e=>{const t=m(e,e=>"rejected"===e.status);return t.length>0?Promise.reject(mt(t,({reason:e})=>L(e)?e:[e])):Promise.resolve()},a=e=>Promise.allSettled(v(e,e=>2===n.states[e]?(s("resolve",e),Promise.resolve()):3===n.states[e]?(s("reject",e),Promise.reject(e)):(n.states[e]=1,n.loadScript(e).then(()=>{n.states[e]=2,s("resolve",e);const t=n.queue;return t.length>0?(n.queue=[],a(t).then(i)):Promise.resolve()},()=>(n.states[e]=3,s("reject",e),Promise.reject(e)))))),r=t=>(n.loading=!0,a(t).then(t=>{n.loading=!1;const s=n.queueLoadedCallbacks.shift();return e.from(s).each(Ss),i(t)})),c=V1(t);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>r(c).then(e,t))}):r(c)}}pt.ScriptLoader=new pt;const I=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Eo={},yc=I("en"),P8=()=>E(Eo,yc.get()),Le={getData:()=>Ei(Eo,e=>({...e})),setCode:e=>{e&&yc.set(e)},getCode:()=>yc.get(),add:(e,t)=>{let n=Eo[e];n||(Eo[e]=n={}),C(t,(e,t)=>{n[t.toLowerCase()]=e})},translate:e=>{const a=P8().getOr({}),t=e=>j(e)?Object.prototype.toString.call(e):n(e)?"":""+e,n=e=>""===e||e==null,s=e=>{const n=t(e);return E(a,n.toLowerCase()).map(t).getOr(n)},o=e=>e.replace(/{context:\w+}$/,"");if(n(e))return"";if(ne(i=e)&&f(i,"raw"))return t(e.raw);var i;if((e=>L(e)&&e.length>1)(e)){const n=e.slice(1);return o(s(e[0]).replace(/\{([0-9]+)\}/g,(e,s)=>f(n,s)?t(n[s]):e))}return o(s(e))},isRtl:()=>P8().bind(e=>E(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>f(Eo,e)},J=()=>{const n=[],t={},e={},s=[],i=(e,t)=>{const n=m(s,n=>n.name===e&&n.state===t);o(n,e=>e.resolve())},a=e=>f(t,e),r=(e,n)=>{const s=Le.getCode();!s||n&&-1===(","+(n||"")+",").indexOf(","+s+",")||pt.ScriptLoader.add(t[e]+"/langs/"+s+".js")},c=(t,n="added")=>"added"===n&&(t=>f(e,t))(t)||"loaded"===n&&a(t)?Promise.resolve():new Promise(e=>{s.push({name:t,state:n,resolve:e})});return{items:n,urls:t,lookup:e,get:t=>{if(e[t])return e[t].instance},requireLangPack:(e,t)=>{!1!==J.languageLoad&&(a(e)?r(e,t):c(e,"loaded").then(()=>r(e,t)))},add:(t,s)=>(n.push(s),e[t]={instance:s},i(t,"added"),s),remove:n=>{delete t[n],delete e[n]},createUrl:(e,t)=>h(t)?h(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(n,s)=>{if(t[n])return Promise.resolve();let o=h(s)?s:s.prefix+s.resource+s.suffix;0!==o.indexOf("/")&&-1===o.indexOf("://")&&(o=J.baseURL+"/"+o),t[n]=o.substring(0,o.lastIndexOf("/"));const a=()=>(i(n,"loaded"),Promise.resolve());return e[n]?a():pt.ScriptLoader.add(o).then(a)},waitFor:c}};J.languageLoad=!0,J.baseURL="",J.PluginManager=J(),J.ThemeManager=J(),J.ModelManager=J();const m5=t=>{const n=I(e.none()),s=()=>n.get().each(e=>clearInterval(e));return{clear:()=>{s(),n.set(e.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{s(),n.set(e.some(setInterval(o,t)))}}},Rt=()=>{const t=(t=>{const n=I(e.none()),s=()=>n.get().each(t);return{clear:()=>{s(),n.set(e.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:t=>{s(),n.set(e.some(t))}}})(g);return{...t,on:e=>t.get().each(e)}},Sa=(e,t)=>{let n=null;return{cancel:()=>{gn(n)||(clearTimeout(n),n=null)},throttle:(...s)=>{gn(n)&&(n=setTimeout(()=>{n=null,e.apply(null,s)},t))}}},nc=(e,t)=>{let n=null;const s=()=>{gn(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...o)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},Co=a("mce-annotation"),pn=a("data-mce-annotation"),Wn=a("data-mce-annotation-uid"),Oo=a("data-mce-annotation-active"),wo=a("data-mce-annotation-classes"),_o=a("data-mce-annotation-attrs"),x8=e=>t=>y(t,e),O8=(e,n)=>{const s=e.selection.getRng(),o=t(s.startContainer),i=t(e.getBody()),a=n.fold(()=>"."+Co(),e=>`[${pn()}="${e}"]`),r=Qo(o,s.startOffset).getOr(o);return qt(r,a,x8(i)).bind(t=>gt(t,`${Wn()}`).bind(n=>gt(t,`${pn()}`).map(t=>{const s=g8(e,n);return{uid:n,name:t,elements:s}})))},j8=(e,t)=>ya(e,"data-mce-bogus")||r8(e,'[data-mce-bogus="all"]',x8(t)),g8=(e,n)=>{const s=t(e.getBody()),o=te(s,`[${Wn()}="${n}"]`);return m(o,e=>!j8(e,s))},u8=(e,n)=>{const i=t(e.getBody()),a=te(i,`[${pn()}="${n}"]`),s={};return o(a,e=>{if(!j8(e,i)){const t=Fe(e,Wn()),n=E(s,t).getOr([]);s[t]=n.concat([e])}}),s};let Zm=0;const Rm=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Zm++,e+"_"+n+Zm+String(t)},du=(e,n)=>t(e.dom.cloneNode(n)),Zn=e=>du(e,!1),Fm=e=>du(e,!0),Sm=(t,n,o=S)=>{const a=new P(t,n),i=t=>{let n;do n=a[t]();while(n&&!s(n)&&!o(n))return e.from(n).filter(s)};return{current:()=>e.from(a.current()).filter(s),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},cn=(t,n)=>{const i=n||(e=>t.isBlock(e)||F(e)||x(e)),o=(t,n,i,a)=>{if(s(t)){const s=a(t,n,t.data);if(-1!==s)return e.some({container:t,offset:s})}return i().bind(e=>o(e.container,e.offset,i,a))};return{backwards:(e,n,s,a)=>{const r=Sm(e,a??t.getRoot(),i);return o(e,n,()=>r.prev().map(e=>({container:e,offset:e.length})),s).getOrNull()},forwards:(e,n,s,a)=>{const r=Sm(e,a??t.getRoot(),i);return o(e,n,()=>r.next().map(e=>({container:e,offset:0})),s).getOrNull()}}},Gn=Math.round,sn=e=>e?{left:Gn(e.left),top:Gn(e.top),bottom:Gn(e.bottom),right:Gn(e.right),width:Gn(e.width),height:Gn(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Am=(e,t)=>(e=sn(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Em=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,yo=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Em(t.top-e.bottom,e,t)},jo=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Em(t.bottom-e.top,e,t),Cm=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},Xa=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Vt=(e,t)=>{if(c(e)&&e.hasChildNodes()){const n=e.childNodes,s=((e,t,n)=>Math.min(Math.max(e,0),n))(t,0,n.length-1);return n[s]}return e},W5=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Om=e=>h(e)&&e.charCodeAt(0)>=768&&W5.test(e),wm=c,U5=Te,bm=bi("display","block table"),Z5=bi("float","left right"),bo=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(wm,U5,ii(Z5)),e7=ii(bi("white-space","pre pre-line pre-wrap")),fo=s,mr=F,um=w.nodeIndex,Ka=(e,t)=>t<0&&c(e)&&e.hasChildNodes()?void 0:Vt(e,t),gr=e=>e?e.createRange():w.DOM.createRng(),vr=e=>h(e)&&/[\r\n\t ]/.test(e),dm=e=>!!e.setStart&&!!e.setEnd,jr=e=>{const t=e.startContainer,n=e.startOffset;if(vr(e.toString())&&e7(t.parentNode)&&s(t)){const e=t.data;if(vr(e[n-1])||vr(e[n+1]))return!0}return!1},rm=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Nt=e=>{var n;let t;const o=e.getClientRects();return t=sn(o.length>0?o[0]:e.getBoundingClientRect()),!dm(e)&&mr(e)&&rm(t)?(e=>{const s=e.ownerDocument,n=gr(s),t=s.createTextNode(W),o=e.parentNode;o.insertBefore(t,e),n.setStart(t,0),n.setEnd(t,1);const i=sn(n.getBoundingClientRect());return o.removeChild(t),i})(e):rm(t)&&dm(e)&&null!==(n=(e=>{const n=e.startContainer,t=e.endContainer,o=e.startOffset,i=e.endOffset;if(n===t&&s(t)&&0===o&&1===i){const n=e.cloneRange();return n.setEndAfter(t),Nt(n)}return null})(e))&&void 0!==n?n:t},_n=(e,t)=>{const n=Am(e,t);return n.width=1,n.right=n.left+1,n},n=(e,t,s)=>{const o=()=>(s||(s=(e=>{const t=[],n=e=>{var n,s;0!==e.height&&(t.length>0&&(n=e,s=t[t.length-1],n.left===s.left&&n.top===s.top&&n.bottom===s.bottom&&n.right===s.right)||t.push(e))},o=(e,t)=>{const s=gr(e.ownerDocument);if(t<e.data.length){if(Om(e.data[t]))return;if(Om(e.data[t-1])&&(s.setStart(e,t),s.setEnd(e,t+1),!jr(s)))return void n(_n(Nt(s),!1))}t>0&&(s.setStart(e,t-1),s.setEnd(e,t),jr(s)||n(_n(Nt(s),!1))),t<e.data.length&&(s.setStart(e,t),s.setEnd(e,t+1),jr(s)||n(_n(Nt(s),!0)))},s=e.container(),i=e.offset();if(fo(s))return o(s,i),t;if(wm(s))if(e.isAtEnd()){const e=Ka(s,i);fo(e)&&o(e,e.data.length),bo(e)&&!mr(e)&&n(_n(Nt(e),!1))}else{const a=Ka(s,i);if(fo(a)&&o(a,0),bo(a)&&e.isAtEnd())return n(_n(Nt(a),!1)),t;const r=Ka(e.container(),e.offset()-1);bo(r)&&!mr(r)&&(bm(r)||bm(a)||!bo(a))&&n(_n(Nt(r),!1)),bo(a)&&n(_n(Nt(a),!0))}return t})(n(e,t))),s);return{container:a(e),offset:a(t),toRange:()=>{const n=gr(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(fo(e),0===t),isAtEnd:()=>fo(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>Ka(e,n?t-1:t)}};n.fromRangeStart=e=>n(e.startContainer,e.startOffset),n.fromRangeEnd=e=>n(e.endContainer,e.endOffset),n.after=e=>n(e.parentNode,um(e)+1),n.before=e=>n(e.parentNode,um(e)),n.isAbove=(e,t)=>se(ue(t.getClientRects()),Gt(e.getClientRects()),yo).getOr(!1),n.isBelow=(e,t)=>se(Gt(t.getClientRects()),ue(e.getClientRects()),jo).getOr(!1),n.isAtStart=e=>!!e&&e.isAtStart(),n.isAtEnd=e=>!!e&&e.isAtEnd(),n.isTextPosition=e=>!!e&&s(e.container()),n.isElementPosition=e=>!n.isTextPosition(e);const Ba=(e,t)=>{s(t)&&0===t.data.length&&e.remove(t)},Cr=(t,n,s)=>{Hl(s)?((t,n,s)=>{const o=e.from(s.firstChild),i=e.from(s.lastChild);n.insertNode(s),o.each(e=>Ba(t,e.previousSibling)),i.each(e=>Ba(t,e.nextSibling))})(t,n,s):((e,t,n)=>{t.insertNode(n),Ba(e,n.previousSibling),Ba(e,n.nextSibling)})(t,n,s)},$e=s,am=Jt,em=w.nodeIndex,Jh=e=>{const t=e.parentNode;return am(t)?Jh(t):t},Mr=e=>e?aa(e.childNodes,(e,t)=>(am(t)&&"BR"!==t.nodeName?e=e.concat(Mr(t)):e.push(t),e),[]):[],Zh=e=>t=>e===t,Xh=e=>($e(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let t,n;t=Mr(Jh(e)),n=K1(t,Zh(e),e),t=t.slice(0,n+1);const s=aa(t,(e,n,s)=>($e(n)&&$e(t[s-1])&&e++,e),0);return t=Ys(t,Re([e.nodeName])),n=K1(t,Zh(e),e),n-s})(e)+"]",Gh=(e,t)=>{let s,o=[],n=t.container(),i=t.offset();if($e(n))s=((e,t)=>{let n=e;for(;(n=n.previousSibling)&&$e(n);)t+=n.data.length;return t})(n,i);else{const e=n.childNodes;i>=e.length?(s="after",i=e.length-1):s="before",n=e[i]}o.push(Xh(n));let a=((e,t)=>{const s=[];for(let n=t.parentNode;n&&n!==e;n=n.parentNode)s.push(n);return s})(e,n);return a=Ys(a,ii(Jt)),o=o.concat(dl(a,e=>Xh(e))),o.reverse().join("/")+","+s},Bh=(e,t)=>{if(!t)return null;const o=t.split(","),a=o[0].split("/"),i=o.length>1?o[1]:"before",s=aa(a,(e,t)=>{const n=/([\w\-()]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),((e,t,n)=>{let s=Mr(e);return s=Ys(s,(e,t)=>!$e(e)||!$e(s[t-1])),s=Ys(s,Re([t])),s[n]})(e,n[1],parseInt(n[2],10))):null},e);if(!s)return null;if(!$e(s)&&s.parentNode){let e;return e="after"===i?em(s)+1:em(s),n(s.parentNode,e)}return((e,t)=>{let s=e,o=0;for(;$e(s);){const n=s.data.length;if(t>=o&&t<=o+n){e=s,t-=o;break}if(!$e(s.nextSibling)){e=s,t=n;break}o+=n,s=s.nextSibling}return $e(e)&&t>e.data.length&&(t=e.data.length),n(e,t)})(s,parseInt(i,10))},Ra=x,Rh=(e,t,n,o,i)=>{const r=i?o.startContainer:o.endContainer;let a=i?o.startOffset:o.endOffset;const c=[],l=e.getRoot();if(s(r))c.push(n?((e,t,n)=>{let o=e(t.data.slice(0,n)).length;for(let n=t.previousSibling;n&&s(n);n=n.previousSibling)o+=e(n.data).length;return o})(t,r,a):a);else{let s=0;const t=r.childNodes;a>=t.length&&t.length&&(s=1,a=Math.max(0,t.length-1)),c.push(e.nodeIndex(t[a],n)+s)}for(let t=r;t&&t!==l;t=t.parentNode)c.push(e.nodeIndex(t,n));return c},Rr=(e,t,n)=>{let s=0;return i.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==n&&void s++),s},Mh=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(c(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Eh=e=>(Mh(e,!0),Mh(e,!1),e),Ch=(e,t)=>{if(c(e)&&(e=Vt(e,t),Ra(e)))return e;if(Ee(e)){s(e)&&Ln(e)&&(e=e.parentNode);let t=e.previousSibling;if(Ra(t))return t;if(t=e.nextSibling,Ra(t))return t}},Oh=(e,t,n)=>{const s=n.getNode(),i=n.getRng();if("IMG"===s.nodeName||Ra(s)){const e=s.nodeName;return{name:e,index:Rr(n.dom,e,s)}}const o=(e=>Ch(e.startContainer,e.startOffset)||Ch(e.endContainer,e.endOffset))(i);if(o){const e=o.tagName;return{name:e,index:Rr(n.dom,e,o)}}return((e,t,n,s)=>{const o=t.dom,i=Rh(o,e,n,s,!0),a=t.isForward(),r=W6(s)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:i,forward:a,...r}:{start:i,end:Rh(o,e,n,s,!1),forward:a,...r}})(e,n,t,i)},yh=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},gh=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),l=e.isCollapsed(),a=e.getNode(),i=a.nodeName,r=e.isForward();if("IMG"===i)return{name:i,index:Rr(n,i,a)};const c=Eh(s.cloneRange());if(!l){c.collapse(!1);const e=yh(n,o+"_end",t);Cr(n,c,e)}s=Eh(s),s.collapse(!0);const d=yh(n,o+"_start",t);return Cr(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:r}),{id:o,forward:r}},Wr=d(Oh,oe,!0),ph=t=>{const n=e=>e(t),s=a(t),o=()=>i,i={tag:!0,inner:t,fold:(e,n)=>n(t),isValue:N,isError:S,map:e=>ie.value(e(t)),mapError:o,bind:n,exists:n,forall:n,getOr:s,or:o,getOrThunk:s,orThunk:o,getOrDie:s,each:e=>{e(t)},toOptional:()=>e.some(t)};return i},rh=t=>{const n=()=>s,s={tag:!1,inner:t,fold:(e)=>e(t),isValue:S,isError:N,map:n,mapError:e=>ie.error(e(t)),bind:n,exists:S,forall:N,getOr:oe,or:oe,getOrThunk:Wd,orThunk:Wd,getOrDie:(o=String(t),()=>{throw new Error(o)}),each:g,toOptional:e.none};var o;return s},ie={value:ph,error:rh,fromOption:(e,t)=>e.fold(()=>rh(t),ph)},Ze=e=>{if(!L(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return o(e,(s,o)=>{const r=pe(s);if(1!==r.length)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!L(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...n)=>{const s=n.length;if(s!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+s);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,n)},match:e=>{const s=pe(e);if(t.length!==s.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+s.join(","));if(!Xt(t,e=>O(s,e)))throw new Error("Not all branches were specified when using match. Specified: "+s.join(", ")+`
Required: `+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}}),n};Ze([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const k7=e=>"inline-command"===e.type||"inline-format"===e.type,A7=e=>"block-command"===e.type||"block-format"===e.type,M7=e=>{const t=t=>ie.error({message:t,pattern:e}),n=(n,s,o)=>{if(void 0!==e.format){let o;if(L(e.format)){if(!Xt(e.format,h))return t(n+" pattern has non-string items in the `format` array");o=e.format}else{if(!h(e.format))return t(n+" pattern has non-string `format` parameter");o=[e.format]}return ie.value(s(o))}return void 0!==e.cmd?h(e.cmd)?ie.value(o(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!ne(e))return t("Raw pattern is not an object");if(!h(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!h(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return 0===o.length&&(o=s,s=""),n("Inline",e=>({type:"inline-format",start:s,end:o,format:e}),(e,t)=>({type:"inline-command",start:s,end:o,cmd:e,value:t}))}return void 0!==e.replacement?h(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):ie.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",t=>({type:"block-format",start:e.start,format:t[0]}),(t,n)=>({type:"block-command",start:e.start,cmd:t,value:n}))},Q3=e=>m(e,A7),X3=e=>m(e,k7),G3=e=>{const t=(e=>{const t=[],n=[];return o(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}})(v(e,M7));return o(t.errors,e=>console.error(e.message,e.pattern)),t.values},tc=On().deviceType,F7=tc.isTouch(),T7=w.DOM,W3=e=>Jo(e,RegExp),l=e=>t=>t.options.get(e),ac=e=>h(e)||ne(e),$3=(e,t="")=>n=>{const s=h(n);if(s){if(-1!==n.indexOf("=")){const o=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return be(t,(e,t)=>{const n=t.split("="),s=n[0],o=n.length>1?n[1]:s;return e[zn(s)]=zn(o),e},{})})(n);return{value:E(o,e.id).getOr(t),valid:s}}return{value:n,valid:s}}return{valid:!1,message:"Must be a string."}},V7=l("iframe_attrs"),$7=l("doctype"),uu=l("document_base_url"),q7=l("body_id"),X7=l("body_class"),A3=l("content_security_policy"),J7=l("br_in_pre"),ve=l("forced_root_block"),ro=l("forced_root_block_attrs"),ev=l("newline_behavior"),tv=l("br_newline_selector"),nv=l("no_newline_selector"),cv=l("keep_styles"),uv=l("end_container_on_empty_block"),m3=l("automatic_uploads"),h3=l("images_reuse_filename"),pv=l("images_replace_blob_uris"),i3=l("icons"),jv=l("icons_url"),xv=l("images_upload_url"),Cv=l("images_upload_base_path"),kv=l("images_upload_credentials"),Av=l("images_upload_handler"),Sv=l("content_css_cors"),Tc=l("referrer_policy"),$2=l("language"),Mv=l("language_url"),L2=l("indent_use_margin"),Hv=l("indentation"),Bv=l("content_css"),Uv=l("content_style"),x2=l("font_css"),s9=l("directionality"),i9=l("inline_boundaries_selector"),p2=l("object_resizing"),r9=l("resize_img_proportional"),l9=l("placeholder"),u2=l("event_root"),h9=l("service_message"),bs=l("theme"),m9=l("theme_url"),Gc=l("model"),f9=l("model_url"),to=l("inline_boundaries"),O9=l("formats"),x9=l("preview_styles"),F9=l("format_empty_lines"),T9=l("format_noneditable_selector"),z9=l("custom_ui_selector"),Ja=l("inline"),D9=l("hidden_input"),R9=l("submit_patch"),I9=l("add_form_submit_trigger"),V9=l("add_unload_trigger"),W9=l("custom_undo_redo_levels"),q9=l("disable_nodechange"),C0=l("readonly"),p0=l("content_css_cors"),Uo=l("plugins"),eb=l("external_plugins"),ib=l("block_unsupported_drop"),ab=l("visual"),cb=l("visual_table_class"),Z4=l("visual_anchor_class"),ub=l("iframe_aria_text"),mb=l("setup"),fb=l("init_instance_callback"),pb=l("urlconverter_callback"),gb=l("auto_focus"),bb=l("browser_spellcheck"),xb=l("protect"),Cb=l("paste_block_drop"),ea=l("paste_data_images"),Mb=l("paste_preprocess"),zb=l("paste_postprocess"),Lb=l("paste_webkit_styles"),Rb=l("paste_remove_styles_if_webkit"),Hb=l("paste_merge_formats"),Ib=l("smart_paste"),Xb=l("paste_as_text"),cj=l("paste_tab_spaces"),dj=l("allow_html_data_urls"),hj=l("text_patterns"),fj=l("text_patterns_lookup"),Y1=l("noneditable_class"),pj=l("editable_class"),bj=l("noneditable_regexp"),yj=l("preserve_cdata"),B1=e=>i.explode(e.options.get("images_file_types")),_j=l("table_tab_navigation"),xj=c,N1=s,D1=e=>{const t=e.parentNode;t&&t.removeChild(e)},E1=e=>{const t=_t(e);return{count:e.length-t.length,text:t}},y1=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(X));)e.deleteData(t,1)},j1=(e,t)=>(dn(e),t),Aj=(t,s)=>n.isTextPosition(s)?((e,t)=>N1(e)&&t.container()===e?((e,t)=>{const s=E1(e.data.substr(0,t.offset())),o=E1(e.data.substr(t.offset()));return(s.text+o.text).length>0?(y1(e),n(e,t.offset()-s.count)):t})(e,t):j1(e,t))(t,s):((t,s)=>s.container()===t.parentNode?((t,s)=>{const o=s.container(),i=((t,n)=>{const s=Ju(t,n);return-1===s?e.none():e.some(s)})(fe(o.childNodes),t).map(e=>e<s.offset()?n(o,s.offset()-1):s).getOr(s);return dn(t),i})(t,s):j1(t,s))(t,s),dn=e=>{xj(e)&&Ee(e)&&(D6(e)?e.removeAttribute("data-mce-caret"):D1(e)),N1(e)&&(y1(e),0===e.data.length&&D1(e))},zj=x,Dj=it,Lj=oa,n1=(e,t,n)=>{const s=Am(t.getBoundingClientRect(),n);let o,i;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;o=e.scrollLeft||t.scrollLeft,i=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();o=e.scrollLeft-t.left,i=e.scrollTop-t.top}s.left+=o,s.right+=o,s.top+=i,s.bottom+=i,s.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},Pj=(e,n,s,o)=>{const r=Rt();let c,i;const d=ve(e),a=e.dom,l=()=>{(e=>{var n,s;const o=te(t(e),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<o.length;t++){const i=o[t].dom;let e=i.previousSibling;if(zi(e)){const t=e.data;1===t.length?null===(n=e.parentNode)||void 0===n||n.removeChild(e):e.deleteData(t.length-1,1)}e=i.nextSibling,Di(e)&&(1===e.data.length?null===(s=e.parentNode)||void 0===s||s.removeChild(e):e.deleteData(0,1))}})(n),i&&(dn(i),i=null),r.on(e=>{a.remove(e.caret),r.clear()}),c&&(clearInterval(c),c=void 0)};return{show:(e,t)=>{let u;if(l(),Lj(t))return null;if(!s(t))return i=((e,t)=>{var o;const s=(null!==(o=e.ownerDocument)&&void 0!==o?o:document).createTextNode(X),n=e.parentNode;if(t){const t=e.previousSibling;if(Pn(t)){if(Ee(t))return t;if(zi(t))return t.splitText(t.data.length-1)}n==null||n.insertBefore(s,e)}else{const t=e.nextSibling;if(Pn(t)){if(Ee(t))return t;if(Di(t))return t.splitText(1),t}e.nextSibling?n==null||n.insertBefore(s,e.nextSibling):n==null||n.appendChild(s)}return s})(t,e),u=t.ownerDocument.createRange(),Hs(i.nextSibling)?(u.setStart(i,0),u.setEnd(i,0)):(u.setStart(i,1),u.setEnd(i,1)),u;{const s=((e,t,n)=>{var i;const s=(null!==(i=t.ownerDocument)&&void 0!==i?i:document).createElement(e);s.setAttribute("data-mce-caret",n?"before":"after"),s.setAttribute("data-mce-bogus","all"),s.appendChild(Hr().dom);const o=t.parentNode;return n?o==null||o.insertBefore(s,t):t.nextSibling?o==null||o.insertBefore(s,t.nextSibling):o==null||o.appendChild(s),s})(d,t,e),h=n1(n,t,e);a.setStyle(s,"top",h.top),i=s;const l=a.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});a.setStyles(l,{...h}),a.add(n,l),r.set({caret:l,element:t,before:e}),e&&a.addClass(l,"mce-visual-caret-before"),c=setInterval(()=>{r.on(e=>{o()?a.toggleClass(e.caret,"mce-visual-caret-hidden"):a.addClass(e.caret,"mce-visual-caret-hidden")})},500),u=t.ownerDocument.createRange(),u.setStart(s,0),u.setEnd(s,0)}return u},hide:l,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(e=>{const t=n1(n,e.element,e.before);a.setStyles(e.caret,{...t})})},destroy:()=>clearInterval(c)}},e1=()=>b.browser.isFirefox(),Hs=e=>zj(e)||Dj(e),Ps=e=>Hs(e)||ft(e)&&e1(),Ij=Be,rd=x,Bj=it,Xu=bi("display","block table table-cell table-caption list-item"),Gu=Ee,Yu=Ln,Kj=c,qj=s,Yj=Te,cs=e=>e>0,an=e=>e<0,ji=(e,t)=>{let n;for(;n=e(t);)if(!Yu(n))return n;return null},Ds=(e,t,n,s,o)=>{const a=new P(e,s),r=rd(e)||Yu(e);let i;if(an(t)){if(r&&(i=ji(a.prev.bind(a),!0),n(i)))return i;for(;i=ji(a.prev.bind(a),o);)if(n(i))return i}if(cs(t)){if(r&&(i=ji(a.next.bind(a),!0),n(i)))return i;for(;i=ji(a.next.bind(a),o);)if(n(i))return i}return null},Ht=(e,t)=>{for(;e&&e!==t;){if(Xu(e))return e;e=e.parentNode}return null},lt=(e,t,n)=>Ht(e.container(),n)===Ht(t.container(),n),_d=(t,n)=>{if(!n)return e.none();const s=n.container(),o=n.offset();return Kj(s)?e.from(s.childNodes[o+t]):e.none()},Iu=(e,t)=>{var s;const n=(null!==(s=t.ownerDocument)&&void 0!==s?s:document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Xj=(e,t,n)=>Ht(t,e)===Ht(n,e),Pu=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let s=n;for(;s&&s!==t;){let e=s[o];if(e&&Gu(e)&&(e=e[o]),rd(e)||Bj(e)){if(Xj(t,e,s))return e;break}if(Yj(e))break;s=s.parentNode}return null},Ts=d(Iu,!0),Fs=d(Iu,!1),kd=(e,t,n)=>{let o;const a=d(Pu,!0,t),r=d(Pu,!1,t),i=n.startContainer,c=n.startOffset;if(Ln(i)){const e=qj(i)?i.parentNode:i,t=e.getAttribute("data-mce-caret");if("before"===t&&(o=e.nextSibling,Ps(o)))return Ts(o);if("after"===t&&(o=e.previousSibling,Ps(o)))return Fs(o)}if(!n.collapsed)return n;if(s(i)){if(Gu(i)){if(1===e){if(o=r(i),o)return Ts(o);if(o=a(i),o)return Fs(o)}if(-1===e){if(o=a(i),o)return Fs(o);if(o=r(i),o)return Ts(o)}return n}if(zi(i)&&c>=i.data.length-1)return 1===e&&(o=r(i),o)?Ts(o):n;if(Di(i)&&c<=1)return-1===e&&(o=a(i),o)?Fs(o):n;if(c===i.data.length)return o=r(i),o?Ts(o):n;if(0===c)return o=a(i),o?Fs(o):n}return n},Lu=(e,t)=>_d(e?0:-1,t).filter(rd),Ms=(e,t,s)=>{const o=kd(e,t,s);return-1===e?n.fromRangeStart(o):n.fromRangeEnd(o)},mi=n=>e.from(n.getNode()).map(t),Fd=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},ui=(e,t)=>{const n=lt(e,t);return!n&&!!F(e.getNode())||n};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(B||(B={}));const Qj=x,ot=s,Du=c,Rd=F,$n=Te,zu=e=>dp(e)||(e=>!!ru(e)&&!be(fe(e.getElementsByTagName("*")),(e,t)=>e||q6(t),!1))(e),ai=mp,Tu=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Mu=(e,t)=>{if(cs(e)){if($n(t.previousSibling)&&!ot(t.previousSibling))return n.before(t);if(ot(t))return n(t,0)}if(an(e)){if($n(t.nextSibling)&&!ot(t.nextSibling))return n.after(t);if(ot(t))return n(t,t.data.length)}return an(e)?Rd(t)?n.before(t):n.after(t):n.before(t)},$d=(e,t,s)=>{let a,o,i,r;if(!Du(s)||!t)return null;if(t.isEqual(n.after(s))&&s.lastChild){if(r=n.after(s.lastChild),an(e)&&$n(s.lastChild)&&Du(s.lastChild))return Rd(s.lastChild)?n.before(s.lastChild):r}else r=t;const c=r.container();let l=r.offset();if(ot(c)){if(an(e)&&l>0)return n(c,--l);if(cs(e)&&l<c.length)return n(c,++l);a=c}else{if(an(e)&&l>0&&(o=Tu(c,l-1),$n(o)))return!zu(o)&&(i=Ds(o,e,ai,o),i)?ot(i)?n(i,i.data.length):n.after(i):ot(o)?n(o,o.data.length):n.before(o);if(cs(e)&&l<c.childNodes.length&&(o=Tu(c,l),$n(o)))return Rd(o)?((e,t)=>{const s=t.nextSibling;return s&&$n(s)?ot(s)?n(s,0):n.before(s):$d(B.Forwards,n.after(t),e)})(s,o):!zu(o)&&(i=Ds(o,e,ai,o),i)?ot(i)?n(i,0):n.before(i):ot(o)?n(o,0):n.after(o);a=o||r.getNode()}if(a&&(cs(e)&&r.isAtEnd()||an(e)&&r.isAtStart())&&(a=Ds(a,e,N,s,!0),ai(a,s)))return Mu(e,a);o=a&&Ds(a,e,ai,s);const d=wn(m(((e,t)=>{const s=[];let n=e;for(;n&&n!==t;)s.push(n),n=n.parentNode;return s})(c,s),Qj));return!d||o&&d.contains(o)?o?Mu(e,o):null:(r=cs(e)?n.after(d):n.before(d),r)},Ke=e=>({next:t=>$d(B.Forwards,t,e),prev:t=>$d(B.Backwards,t,e)}),Su=e=>n.isTextPosition(e)?0===e.offset():Te(e.getNode()),ku=e=>{if(n.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Te(e.getNode(!0))},Eu=(e,t)=>!n.isTextPosition(e)&&!n.isTextPosition(t)&&e.getNode()===t.getNode(!0),Oe=(t,n,s)=>{const o=Ke(n);return e.from(t?o.next(s):o.prev(s))},ni=(t,s,o)=>Oe(t,s,o).bind(i=>lt(o,i,s)&&((e,t,s)=>{return e?!Eu(t,s)&&(o=t,!!n.isTextPosition(o)||!F(o.getNode()))&&ku(t)&&Su(s):!Eu(s,t)&&Su(t)&&ku(s);var o})(t,o,i)?Oe(t,s,i):e.some(i)),yu=(t,n,s,o)=>ni(t,n,s).bind(s=>o(s)?yu(t,n,s,o):e.some(s)),es=(t,o)=>{const i=t?o.firstChild:o.lastChild;return s(i)?e.some(n(i,t?0:i.data.length)):i?Te(i)?e.some(t?n.before(i):F(a=i)?n.before(a):n.after(a)):((e,t,s)=>{const o=e?n.before(s):n.after(s);return Oe(e,t,o)})(t,o,i):e.none();var a},me=d(Oe,!0),je=d(Oe,!1),ae=d(es,!0),at=d(es,!1),nu="_mce_caret",Ie=e=>c(e)&&e.id===nu,tn=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ie(n))return n;n=n.parentNode}return null},ju=e=>f(e,"name"),bu=e=>i.isArray(e.start),Yo=e=>!!ju(e)||!bn(e.forward)||e.forward,vu=(e,t)=>(c(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),oy=(e,t)=>at(e).fold(S,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),hu=(e,t,n)=>!(!(e=>!e.hasChildNodes())(t)||!tn(e,t)||(((e,t)=>{var n;const s=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(X);e.appendChild(s),t.setStart(s,0),t.setEnd(s,0)})(t,n),0)),Pf=(e,t,n,o)=>{const i=n[t?"start":"end"],a=e.getRoot();if(i){let e=a,n=i[0];for(let t=i.length-1;e&&t>=1;t--){const n=e.childNodes;if(hu(a,e,o))return!0;if(i[t]>n.length-1)return!!hu(a,e,o)||oy(e,o);e=n[i[t]]}s(e)&&(n=Math.min(i[0],e.data.length)),c(e)&&(n=Math.min(i[0],e.childNodes.length)),t?o.setStart(e,n):o.setEnd(e,n)}return!0},Ud=e=>s(e)&&e.data.length>0,mu=(t,o,a)=>{const r=t.get(a.id+"_"+o),c=r?.parentNode,l=a.keep;if(r&&c){let d,u;if("start"===o?l?r.hasChildNodes()?(d=r.firstChild,u=1):Ud(r.nextSibling)?(d=r.nextSibling,u=0):Ud(r.previousSibling)?(d=r.previousSibling,u=r.previousSibling.data.length):(d=c,u=t.nodeIndex(r)+1):(d=c,u=t.nodeIndex(r)):l?r.hasChildNodes()?(d=r.firstChild,u=1):Ud(r.previousSibling)?(d=r.previousSibling,u=r.previousSibling.data.length):(d=c,u=t.nodeIndex(r)):(d=c,u=t.nodeIndex(r)),!l){const e=r.previousSibling,n=r.nextSibling;let c;for(i.each(i.grep(r.childNodes),e=>{s(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});c=t.get(a.id+"_"+o);)t.remove(c,!0);if(s(n)&&s(e)&&!b.browser.isOpera()){const s=e.data.length;e.appendData(n.data),t.remove(n),d=e,u=s}}return e.some(n(d,u))}return e.none()},dy=(e,t,s)=>((e,t,s=!1)=>2===t?Oh(_t,s,e):3===t?(e=>{const t=e.getRng();return{start:Gh(e.dom.getRoot(),n.fromRangeStart(t)),end:Gh(e.dom.getRoot(),n.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):gh(e,!1))(e,t,s),iy=(t,n)=>{((t,n)=>{const s=t.dom;if(n){if(bu(n))return((t,n)=>{const s=t.createRng();return Pf(t,!0,n,s)&&Pf(t,!1,n,s)?e.some({range:s,forward:Yo(n)}):e.none()})(s,n);if((e=>h(e.start))(n))return((t,n)=>{const s=e.from(Bh(t.getRoot(),n.start)),o=e.from(Bh(t.getRoot(),n.end));return se(s,o,(e,s)=>{const o=t.createRng();return o.setStart(e.container(),e.offset()),o.setEnd(s.container(),s.offset()),{range:o,forward:Yo(n)}})})(s,n);if((e=>f(e,"id"))(n))return((e,t)=>{const n=mu(e,"start",t),s=mu(e,"end",t);return se(n,s.or(n),(n,s)=>{const o=e.createRng();return o.setStart(vu(e,n.container()),n.offset()),o.setEnd(vu(e,s.container()),s.offset()),{range:o,forward:Yo(t)}})})(s,n);if(ju(n))return((t,n)=>e.from(t.select(n.name)[n.index]).map(e=>{const n=t.createRng();return n.selectNode(e),{range:n,forward:!0}}))(s,n);if((e=>f(e,"rng"))(n))return e.some({range:n.rng,forward:Yo(n)})}return e.none()})(t,n).each(({range:e,forward:n})=>{t.setRng(e,n)})},Me=e=>c(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),qo=(W,e=>"\xa0"===e),js=e=>""!==e&&-1!==` 
	`.indexOf(e),iu=e=>!js(e)&&!qo(e)&&!mf(e),Xd=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},sy=e=>(e=>({value:e}))(Xd(e.red)+Xd(e.green)+Xd(e.blue)),ty=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Jj=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,xu=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),Cu=(e,t,n,s)=>{const o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),r=parseFloat(s);return xu(o,i,a,r)},oi=t=>(t=>{if("transparent"===t)return e.some(xu(0,0,0,0));const s=ty.exec(t);if(null!==s)return e.some(Cu(s[1],s[2],s[3],"1"));const n=Jj.exec(t);return null!==n?e.some(Cu(n[1],n[2],n[3],n[4])):e.none()})(t).map(sy).map(e=>"#"+e.value).getOr(t),Kd=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Au=(e,n)=>{const s=te(n,"td[data-mce-selected],th[data-mce-selected]");return s.length>0?s:(e=>m((e=>mt(e,e=>{const n=Xa(e);return n?[t(n)]:[]}))(e),vo))(e)},Bn=e=>Au(Kd(e.selection.getSel()),t(e.getBody())),As=(e,t)=>xs(e,"table",t),Fu=e=>q3(e).fold(a([e]),t=>[e].concat(Fu(t))),Bd=e=>cu(e).fold(a([e]),t=>"br"===k(t)?Cn(t).map(t=>[e].concat(Bd(t))).getOr([]):[e].concat(Bd(t))),Hd=(n,o)=>se((n=>{const o=n.startContainer,i=n.startOffset;return s(o)?0===i?e.some(t(o)):e.none():e.from(o.childNodes[i]).map(t)})(o),(n=>{const o=n.endContainer,i=n.endOffset;return s(o)?i===o.data.length?e.some(t(o)):e.none():e.from(o.childNodes[i-1]).map(t)})(o),(e,t)=>{const s=V(Fu(n),d(y,e)),o=V(Bd(n),d(y,t));return s.isSome()&&o.isSome()}).getOr(!1),Ld=(e,t,n,o)=>{const r=n,c=new P(n,r),l=Us(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!O(["td","th","table"],t.toLowerCase()));let a=n;do{if(s(a)&&0!==i.trim(a.data).length)return void(o?t.setStart(a,0):t.setEnd(a,a.data.length));if(l[a.nodeName])return void(o?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a))}while(a=o?c.next():c.prev())"BODY"===r.nodeName&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},li=e=>{const t=e.selection.getSel();return r(t)&&t.rangeCount>0},Ad=(e,t)=>{const n=Bn(e);n.length>0?o(n,n=>{const o=n.dom,s=e.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),t(s,!0)}):t(e.selection.getRng(),!1)},Ru=(e,t,n)=>{const s=gh(e,t);n(s),e.moveToBookmark(s)},gi=e=>We(e?.nodeType),Od=e=>c(e)&&!Me(e)&&!Ie(e)&&!Jt(e),vn=e=>!0===e.isContentEditable,Bu=(e,t,n)=>{const{selection:s,dom:i}=e,o=s.getNode(),a=x(o);Ru(s,!0,()=>{t()}),a&&x(o)&&i.isChildOf(o,e.getBody())?e.selection.select(o):n(s.getStart())&&Gj(i,s)},Gj=(e,t)=>{var n,o;const i=t.getRng(),{startContainer:a,startOffset:r}=i;if(!((e,t)=>{if(Od(t)&&!/^(TD|TH)$/.test(t.nodeName)){const s=e.getAttrib(t,"data-mce-selected"),n=parseInt(s,10);return!isNaN(n)&&n>0}return!1})(e,t.getNode())&&c(a)){const l=a.childNodes,d=e.getRoot();let c;if(r<l.length){const t=l[r];c=new P(t,null!==(n=e.getParent(t,e.isBlock))&&void 0!==n?n:d)}else{const t=l[l.length-1];c=new P(t,null!==(o=e.getParent(t,e.isBlock))&&void 0!==o?o:d),c.next(!0)}for(let n=c.current();n;n=c.next()){if("false"===e.getContentEditable(n))return;if(s(n)&&!hd(n))return i.setStart(n,0),void t.setRng(i)}}},$u=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(c(e)||!hd(e))return e}},fd=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Io(e,t),ds=(e,t,n)=>e.schema.isValidChild(t,n),hd=(e,t=!1)=>{if(r(e)&&s(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Mn(n)}return!1},qu=(e,n)=>{const s=e.dom;return Od(n)&&"false"===s.getContentEditable(n)&&((e,n)=>{const s="[data-mce-cef-wrappable]",o=T9(e),i=co(o)?s:`${s},${o}`;return De(t(n),i)})(e,n)&&0===s.select('[contenteditable="true"]',n).length},$t=(e,t)=>j(e)?e(t):(r(t)&&(e=e.replace(/%(\w+)/g,(e,n)=>t[n]||e)),e),dd=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),ld=(e,t)=>{if(D(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=oi(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/['"]/g,"").replace(/,\s+/g,",")),n}},_i=(e,t,n)=>{const s=e.getStyle(t,n);return ld(s,n)},Zu=(e,t)=>{let n;return e.getParent(t,t=>!!c(t)&&(n=e.getStyle(t,"text-decoration"),!!n&&"none"!==n)),n},wi=(e,t,n)=>e.getParents(t,n,e.getRoot()),sd=(e,t,n)=>{const s=e.formatter.get(t);return r(s)&&z(s,n)},Je=e=>vs(e,"block"),Se=e=>vs(e,"selector"),R=e=>vs(e,"inline"),Jl=e=>Se(e)&&!1!==e.expand&&!R(e),Nn=Me,a1=wi,r1=hd,Tj=fd,l1=(e,t)=>{let n=t;for(;n;){if(c(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},d1=(e,t,n,s)=>{const o=t.data;if(e){for(let e=n;e>0;e--)if(s(o.charAt(e-1)))return e}else for(let e=n;e<o.length;e++)if(s(o.charAt(e)))return e;return-1},Mj=(e,t,n)=>d1(e,t,n,e=>qo(e)||js(e)),Sj=(e,t,n)=>d1(e,t,n,iu),m1=(t,n,s,o,i,a)=>{let r;const l=t.getParent(s,t.isBlock)||n,c=(n,s,o)=>{const a=cn(t),c=i?a.backwards:a.forwards;return e.from(c(n,s,(e,t)=>Nn(e.parentNode)?-1:(r=e,o(i,e,t)),l))};return c(s,o,Mj).bind(t=>a?c(t.container,t.offset+(i?-1:0),Sj):e.some(t)).orThunk(()=>r?e.some({container:r,offset:i?0:r.length}):e.none())},f1=(e,t,n,o,i)=>{const c=o[i];s(o)&&co(o.data)&&c&&(o=c);const a=a1(e,o);for(let s=0;s<a.length;s++)for(let i=0;i<t.length;i++){const o=t[i];if((!r(o.collapsed)||o.collapsed===n.collapsed)&&Se(o)&&e.is(a[s],o.selector))return a[s]}return o},p1=(e,t,n,o)=>{var r;let i=n;const c=e.getRoot(),a=t[0];if(Je(a)&&(i=a.wrapper?null:e.getParent(n,a.block,c)),!i){const t=null!==(r=e.getParent(n,"LI,TD,TH"))&&void 0!==r?r:c;i=e.getParent(s(n)?n.parentNode:n,t=>t!==c&&Tj(e.schema,t),t)}if(i&&Je(a)&&a.wrapper&&(i=a1(e,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i&&i[o]&&!e.isBlock(i[o])&&(i=i[o],!dd(i,"br")););return i||n},g1=(e,t,n,s)=>{const o=n.parentNode;return!r(n[s])&&(!(o!==t&&!D(o)&&!e.isBlock(o))||g1(e,t,o,s))},Ni=(e,t,n,o,i)=>{let a=n;const r=i?"previousSibling":"nextSibling",c=e.getRoot();if(s(n)&&!r1(n)&&(i?o>0:o<n.data.length))return n;for(var l;a;){if(!t[0].block_expand&&e.isBlock(a))return a;for(let t=a[r];t;t=t[r]){const n=s(t)&&!g1(e,c,t,r);if(!Nn(t)&&(!F(l=t)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!r1(t,n))return a}if(a===c||a.parentNode===c){n=a;break}a=a.parentNode}return n},b1=e=>Nn(e.parentNode)||Nn(e),yn=(e,t,n,o=!1)=>{let{startContainer:a,startOffset:l,endContainer:i,endOffset:r}=t;const d=n[0];return c(a)&&a.hasChildNodes()&&(a=Vt(a,l),s(a)&&(l=0)),c(i)&&i.hasChildNodes()&&(i=Vt(i,t.collapsed?r:r-1),s(i)&&(r=i.data.length)),a=l1(e,a),i=l1(e,i),b1(a)&&(a=Nn(a)?a:a.parentNode,a=t.collapsed?a.previousSibling||a:a.nextSibling||a,s(a)&&(l=t.collapsed?a.length:0)),b1(i)&&(i=Nn(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,s(i)&&(r=t.collapsed?0:i.length)),t.collapsed&&(m1(e,e.getRoot(),a,l,!0,o).each(({container:e,offset:t})=>{a=e,l=t}),m1(e,e.getRoot(),i,r,!1,o).each(({container:e,offset:t})=>{i=e,r=t})),(R(d)||d.block_expand)&&(R(d)&&s(a)&&0!==l||(a=Ni(e,n,a,l,!0)),R(d)&&s(i)&&r!==i.data.length||(i=Ni(e,n,i,r,!1))),Jl(d)&&(a=f1(e,n,t,a,"previousSibling"),i=f1(e,n,t,i,"nextSibling")),(Je(d)||Se(d))&&(a=p1(e,n,a,"previousSibling"),i=p1(e,n,i,"nextSibling"),Je(d)&&(e.isBlock(a)||(a=Ni(e,n,a,l,!0)),e.isBlock(i)||(i=Ni(e,n,i,r,!1)))),c(a)&&a.parentNode&&(l=e.nodeIndex(a),a=a.parentNode),c(i)&&i.parentNode&&(r=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:l,endContainer:i,endOffset:r}},Is=(e,t,n)=>{var d;const p=t.startOffset,o=Vt(t.startContainer,p),h=t.endOffset,i=Vt(t.endContainer,h-1),u=e=>{const t=e[0];s(t)&&t===o&&p>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return 0===h&&e.length>0&&n===i&&s(n)&&e.splice(e.length-1,1),e},f=(e,t,n)=>{const s=[];for(;e&&e!==n;e=e[t])s.push(e);return s},m=(t,n)=>e.getParent(t,e=>e.parentNode===n,n),a=(e,t,s)=>{const o=s?"nextSibling":"previousSibling";for(let i=e,r=i.parentNode;i&&i!==t;i=r){r=i.parentNode;const a=f(i===e?i:i[o],o);a.length&&(s||a.reverse(),n(u(a)))}};if(o===i)return n(u([o]));const l=null!==(d=e.findCommonAncestor(o,i))&&void 0!==d?d:e.getRoot();if(e.isChildOf(o,i))return a(o,l,!0);if(e.isChildOf(i,o))return a(i,l);const c=m(o,l)||o,r=m(i,l)||i;a(o,c,!0);const g=f(c===o?c:c.nextSibling,"nextSibling",r===i?r.nextSibling:r);g.length&&n(u(g)),a(i,r)},Ej=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],w1=(e,t,n,s,i,a)=>{const{uid:c=t,...d}=n;To(e,Co()),U(e,`${Wn()}`,c),U(e,`${pn()}`,s);const{attributes:l={},classes:r=[]}=i(c,d);if(Ot(e,l),((e,t)=>{o(t,t=>{To(e,t)})})(e,r),a){r.length>0&&U(e,`${wo()}`,r.join(","));const t=pe(l);t.length>0&&U(e,`${_o()}`,t.join(","))}},O1=(e,t,n,s,o)=>{const i=$("span",e);return w1(i,t,n,s,o,!1),i},Cj=(e,n,s,i,a,r)=>{const d=[],h=O1(e.getDoc(),s,r,i,a),l=Rt(),c=()=>{l.clear()},u=e=>{o(e,m)},m=t=>{switch(((e,t,n,s)=>Ve(t).fold(()=>"skipping",o=>"br"===s||(e=>we(e)&&Sc(e)===X)(t)?"valid":(e=>ge(e)&&Bl(e,Co()))(t)?"existing":Ie(t.dom)?"caret":z(Ej,e=>De(t,e))?"valid-block":ds(e,n,s)&&ds(e,k(o),n)?"valid":"invalid-child"))(e,t,"span",k(t))){case"invalid-child":{c();const e=q(t);u(e),c();break}case"valid-block":c(),w1(t,s,r,i,a,!0);break;case"valid":{const e=l.get().getOrThunk(()=>{const e=Zn(h);return d.push(e),l.set(e),e});((e,t)=>{_e(e,t),H(t,e)})(t,e);break}}};return Is(e.dom,n,e=>{c(),(e=>{const n=v(e,t);u(n)})(e)}),d},C1=t=>{const n=(()=>{const e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>E(e,t).map(e=>e.settings),getNames:()=>pe(e)}})();((t,n)=>{const s=pn(),i=t=>e.from(t.attr(s)).bind(n.lookup),a=t=>{var n,s;t.attr(Wn(),null),t.attr(pn(),null),t.attr(Oo(),null);const a=e.from(t.attr(_o())).map(e=>e.split(",")).getOr([]),r=e.from(t.attr(wo())).map(e=>e.split(",")).getOr([]);o(a,e=>t.attr(e,null));const c=null!==(s=null===(n=t.attr("class"))||void 0===n?void 0:n.split(" "))&&void 0!==s?s:[],i=nd(c,[Co()].concat(r));t.attr("class",i.length>0?i.join(" "):null),t.attr(wo(),null),t.attr(_o(),null)};t.serializer.addTempAttr(Oo()),t.serializer.addAttributeFilter(s,e=>{for(const t of e)i(t).each(e=>{!1===e.persistent&&("span"===t.name?t.unwrap():a(t))})})})(t,n);const i=((t,n)=>{const a=I({}),l=()=>({listeners:[],previous:Rt()}),r=(e,t)=>{s(e,e=>(t(e),e))},s=(e,t)=>{const n=a.get(),s=t(E(n,e).getOrThunk(l));n[e]=s,a.set(n)},i=(e,n)=>{o(g8(t,e),e=>{n?U(e,Oo(),"true"):K(e,Oo())})},c=nc(()=>{const a=Un(n.getNames());o(a,n=>{s(n,s=>{const a=s.previous.get();return O8(t,e.some(n)).fold(()=>{a.each(e=>{(e=>{r(e,t=>{o(t.listeners,t=>t(!1,e))})})(n),s.previous.clear(),i(e,!1)})},({uid:e,name:t,elements:n})=>{ts(a,e)||(a.each(e=>i(e,!1)),((e,t,n)=>{r(e,s=>{o(s.listeners,s=>s(!0,e,{uid:t,nodes:v(n,e=>e.dom)}))})})(t,e,n),s.previous.set(e),i(e,!0))}),{previous:s.previous,listeners:s.listeners}})})},30);return t.on("remove",()=>{c.cancel()}),t.on("NodeChange",()=>{c.throttle()}),{addListener:(e,t)=>{s(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(t,n),a=lc("span"),s=e=>{o(e,e=>{a(e)?Ct(e):(e=>{Ki(e,Co()),K(e,`${Wn()}`),K(e,`${pn()}`),K(e,`${Oo()}`);const n=gt(e,`${_o()}`).map(e=>e.split(",")).getOr([]),s=gt(e,`${wo()}`).map(e=>e.split(",")).getOr([]);var t;o(n,t=>K(e,t)),t=e,o(s,e=>{Ki(t,e)}),K(e,`${wo()}`),K(e,`${_o()}`)})(e)})};return{register:(e,t)=>{n.register(e,t)},annotate:(e,s)=>{n.lookup(e).each(n=>{((e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,i=o.getRng(),a=Bn(e).length>0,r=Rm("mce-annotation");if(i.collapsed&&!a&&((e,t)=>{const n=yn(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,i),o.getRng().collapsed&&!a){const i=O1(e.getDoc(),r,s,t,n.decorate);Wi(i,W),o.getRng().insertNode(i.dom),o.select(i.dom)}else Ru(o,!1,()=>{Ad(e,o=>{Cj(e,o,r,t,n.decorate,s)})})})})(t,e,n,s)})},annotationChanged:(e,t)=>{i.addListener(e,t)},remove:n=>{const o=t.selection.getBookmark();O8(t,e.some(n)).each(({elements:e})=>{s(e)}),t.selection.moveToBookmark(o)},removeAll:e=>{const n=t.selection.getBookmark();C(u8(t,e),(e)=>{s(e)}),t.selection.moveToBookmark(n)},getAll:e=>{const n=u8(t,e);return Ei(n,e=>v(e,e=>e.dom))}}},Bs=e=>({getBookmark:d(dy,e),moveToBookmark:d(iy,e)});Bs.isBookmarkNode=Me;const k1=(e,t,n)=>!n.collapsed&&z(n.getClientRects(),n=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(n,e,t)),A1=(e,t,n)=>{e.dispatch(t,n)},S1=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},M1=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},F1=(e,t)=>e.dispatch("SetContent",t),T1=(e,t)=>e.dispatch("GetContent",t),z1=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),u={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||u.metaKeyPressed(e),metaKeyPressed:e=>b.os.isMacOS()||b.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Vs="data-mce-selected",L1=Math.abs,$i=Math.round,$l={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},H1=(e,n)=>{const s=n.dom,f=n.getDoc(),p=document,h=n.getBody();let i,a,v,d,w,P,L,m,g,y,_,c,l,N,D;const T=e=>r(e)&&(V8(e)||s.is(e,"figure.image")),H=e=>it(e)||s.hasClass(e,"mce-preview-object"),V=e=>{const t=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){const n=e.touches[0];return T(e.target)&&!k1(n.clientX,n.clientY,t)}return T(e.target)&&!k1(e.clientX,e.clientY,t)})(e,n.selection.getRng())&&!e.isDefaultPrevented()&&n.selection.select(t)},I=e=>s.hasClass(e,"mce-preview-object")&&r(e.firstElementChild)?[e,e.firstElementChild]:s.is(e,"figure.image")?[e.querySelector("img")]:[e],z=e=>{const o=p2(n);return!!o&&"false"!==e.getAttribute("data-mce-resize")&&e!==n.getBody()&&(s.hasClass(e,"mce-preview-object")&&r(e.firstElementChild)?De(t(e.firstElementChild),o):De(t(e),o))},O=(e,t,i)=>{if(r(i)){const a=I(e);o(a,e=>{e.style[t]||!n.schema.isValid(e.nodeName.toLowerCase(),t)?s.setStyle(e,t,i):s.setAttrib(e,t,""+i)})}},R=(e,t,n)=>{O(e,"width",t),O(e,"height",n)},E=e=>{let t,o,p,r,f;t=e.screenX-P,o=e.screenY-L,c=t*d[2]+m,l=o*d[3]+g,c=c<5?5:c,l=l<5?5:l,p=(T(i)||H(i))&&!1!==r9(n)?!u.modifierPressed(e):u.modifierPressed(e),p&&(L1(t)>L1(o)?(l=$i(c*y),c=$i(l/y)):(c=$i(l/y),l=$i(c*y))),R(a,c,l),r=d.startPos.x+t,f=d.startPos.y+o,r=r>0?r:0,f=f>0?f:0,s.setStyles(v,{left:r,top:f,display:"block"}),v.innerHTML=c+" &times; "+l,d[2]<0&&a.clientWidth<=c&&s.setStyle(a,"left",void 0+(m-c)),d[3]<0&&a.clientHeight<=l&&s.setStyle(a,"top",void 0+(g-l)),t=h.scrollWidth-N,o=h.scrollHeight-D,t+o!==0&&s.setStyles(v,{left:r-t,top:f-o}),_||(((e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})})(n,i,m,g,"corner-"+d.name),_=!0)},x=()=>{const e=_;_=!1,e&&(O(i,"width",c),O(i,"height",l)),s.unbind(f,"mousemove",E),s.unbind(f,"mouseup",x),p!==f&&(s.unbind(p,"mousemove",E),s.unbind(p,"mouseup",x)),s.remove(a),s.remove(v),s.remove(w),k(i),e&&(((e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})})(n,i,c,l,"corner-"+d.name),s.setAttrib(i,"style",s.getAttrib(i,"style"))),n.nodeChanged()},k=e=>{S();const O=s.getPos(e,h),o=O.x,r=O.y,t=e.getBoundingClientRect(),u=t.width||t.right-t.left,_=t.height||t.bottom-t.top;i!==e&&(j(),i=e,c=l=0);const k=n.dispatch("ObjectSelected",{target:e});z(e)&&!k.isDefaultPrevented()?C($l,(e,t)=>{let n=s.get("mceResizeHandle"+t);n&&s.remove(n),n=s.add(h,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),s.bind(n,"mousedown",n=>{n.stopImmediatePropagation(),n.preventDefault(),(n=>{const c=I(i)[0];var l;P=n.screenX,L=n.screenY,m=c.clientWidth,g=c.clientHeight,y=g/m,d=e,d.name=t,d.startPos={x:u*e[0]+o,y:_*e[1]+r},N=h.scrollWidth,D=h.scrollHeight,w=s.add(h,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(w,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=H(l=i)?s.create("img",{src:b.transparentSrc}):l.cloneNode(!0),s.addClass(a,"mce-clonedresizable"),s.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",s.setStyles(a,{left:o,top:r,margin:0}),R(a,u,_),a.removeAttribute(Vs),h.appendChild(a),s.bind(f,"mousemove",E),s.bind(f,"mouseup",x),p!==f&&(s.bind(p,"mousemove",E),s.bind(p,"mouseup",x)),v=s.add(h,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},m+" &times; "+g)})(n)}),e.elm=n,s.setStyles(n,{left:u*e[0]+o-n.offsetWidth/2,top:_*e[1]+r-n.offsetHeight/2})}):j(!1)},A=Sa(k,0),j=(e=!0)=>{A.cancel(),S(),i&&e&&i.removeAttribute(Vs),C($l,(e,t)=>{const n=s.get("mceResizeHandle"+t);n&&(s.unbind(n),s.remove(n))})},F=(e,t)=>s.isChildOf(e,t),M=i=>{if(_||n.removed||n.composing)return;const c="mousedown"===i.type?i.target:e.getNode(),a=qt(t(c),"table,img,figure.image,hr,video,span.mce-preview-object").map(e=>e.dom).getOrUndefined(),l=r(a)?s.getAttrib(a,Vs,"1"):"1";if(o(s.select("img[data-mce-selected],hr[data-mce-selected]"),e=>{e.removeAttribute(Vs)}),r(a)&&F(a,h)){B();const t=e.getStart(!0);if(F(t,a)&&F(e.getEnd(!0),a))return s.setAttrib(a,Vs,l),void A.throttle(a)}j()},S=()=>{C($l,e=>{e.elm&&(s.unbind(e.elm),delete e.elm)})},B=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{B(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",M),n.on("keyup compositionend",e=>{i&&"TABLE"===i.nodeName&&M(e)}),n.on("hide blur",j),n.on("contextmenu longpress",V,!0)}),n.on("remove",S),{isResizable:z,showResizeRect:k,hideResizeRect:j,updateResizeRect:M,destroy:()=>{A.cancel(),i=a=w=null}}},I1=(e,t,n)=>{const o=e.document.createRange();var s;return s=o,t.fold(e=>{s.setStartBefore(e.dom)},(e,t)=>{s.setStart(e.dom,t)},e=>{s.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})})(o,n),o},Vl=(e,t,n,s,o)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(s.dom,o),i},$s=Ze([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),$1=(e,n,s)=>n(t(s.startContainer),s.startOffset,t(s.endContainer),s.endOffset);$s.ltr,$s.rtl;const W1=(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s}),jj=document.caretPositionFromPoint?(t,n,s)=>{var o,i;return e.from(null===(o=(i=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(i,n,s)).bind(n=>{if(null===n.offsetNode)return e.none();const s=t.dom.createRange();return s.setStart(n.offsetNode,n.offset),s.collapse(),e.some(s)})}:document.caretRangeFromPoint?(t,n,s)=>{var o,i;return e.from(null===(o=(i=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(i,n,s))}:e.none,Il=Ze([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),jt={before:Il.before,on:Il.on,after:Il.after,cata:(e,t,n,s)=>e.fold(t,n,s),getStart:e=>e.fold(oe,oe,oe)},Ui=Ze([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Hn={domRange:Ui.domRange,relative:Ui.relative,exact:Ui.exact,exactFromRange:e=>Ui.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const n=(e=>e.match({domRange:e=>t(e.startContainer),relative:(e)=>jt.getStart(e),exact:(e)=>e}))(e);return Ro(n)},range:W1},Yi=(e,t)=>{const n=k(e);return"input"===n?jt.after(e):O(["br","img"],n)?0===t?jt.before(e):jt.after(e):jt.on(e,t)},uj=(e,t)=>{const n=e.fold(jt.before,Yi,jt.after),s=t.fold(jt.before,Yi,jt.after);return Hn.relative(n,s)},Z1=(e,t,n,s)=>{const o=Yi(e,t),i=Yi(n,s);return Hn.relative(o,i)},Nl=(e,n)=>{const s=(n||document).createDocumentFragment();return o(e,e=>{s.appendChild(e.dom)}),t(s)},lj=n=>{const s=Hn.getWin(n).dom,o=(e,t,n,o)=>Vl(s,e,t,n,o),i=(e=>e.match({domRange:e=>{const n=t(e.startContainer),s=t(e.endContainer);return Z1(n,e.startOffset,s,e.endOffset)},relative:uj,exact:Z1}))(n);return((n,s)=>{const o=((t,n)=>n.match({domRange:t=>({ltr:a(t),rtl:e.none}),relative:(n,s)=>({ltr:on(()=>I1(t,n,s)),rtl:on(()=>e.some(I1(t,s,n)))}),exact:(n,s,o,i)=>({ltr:on(()=>Vl(t,n,s,o,i)),rtl:on(()=>e.some(Vl(t,o,i,n,s)))})}))(n,s);return((e,n)=>{const s=n.ltr();return s.collapsed?n.rtl().filter(e=>!1===e.collapsed).map(e=>$s.rtl(t(e.endContainer),e.endOffset,t(e.startContainer),e.startOffset)).getOrThunk(()=>$1(0,$s.ltr,s)):$1(0,$s.ltr,s)})(0,o)})(s,i).match({ltr:o,rtl:o})},t4=(e,n,s)=>((e,n,s)=>((e,n,s)=>{const o=t(e.document);return jj(o,n,s).map(e=>W1(t(e.startContainer),e.startOffset,t(e.endContainer),e.endOffset))})(e,n,s))(Ro(t(s)).dom,e,n).map(e=>{const t=s.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined(),Dl=(e,t)=>r(e)&&r(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,s4=(e,t,n)=>null!==((e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null})(e,t,n),oj=(e,t,n)=>s4(e,t,e=>e.nodeName===n),Jb=(e,t)=>Ee(e)&&!s4(e,t,Ie),a4=(e,t,n)=>{const s=t.parentNode;if(s){const i=new P(t,e.getParent(s,e.isBlock)||e.getRoot());let o;for(;o=i[n?"prev":"next"]();)if(F(o))return!0}return!1},zl=(t,o,i,a,r)=>{const d=t.getRoot(),m=t.schema.getNonEmptyElements(),u=r.parentNode;let l,c;if(!u)return e.none();const h=t.getParent(u,t.isBlock)||d;if(a&&F(r)&&o&&t.isEmpty(h))return e.some(n(u,t.nodeIndex(r)));const f=new P(r,h);for(;c=f[a?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||Jb(c,d))return e.none();if(s(c)&&c.data.length>0)return oj(c,d,"A")?e.none():e.some(n(c,a?c.data.length:0));if(t.isBlock(c)||m[c.nodeName.toLowerCase()])return e.none();l=c}return xt(l)?e.none():i&&l?e.some(n(l,0)):e.none()},c4=(t,o,i,a)=>{const m=t.getRoot();let l,u=!1,r=i?a.startContainer:a.endContainer,d=i?a.startOffset:a.endOffset;const f=c(r)&&d===r.childNodes.length,p=t.schema.getNonEmptyElements();let h=i;if(Ee(r))return e.none();if(c(r)&&d>r.childNodes.length-1&&(h=!1),Ws(r)&&(r=m,d=0),r===m){if(h&&(l=r.childNodes[d>0?d-1:0],l)){if(Ee(l))return e.none();if(p[l.nodeName]||ft(l))return e.none()}if(r.hasChildNodes()){if(d=Math.min(!h&&d>0?d-1:d,r.childNodes.length-1),r=r.childNodes[d],d=s(r)&&f?r.data.length:0,!o&&r===m.lastChild&&ft(r))return e.none();if(((e,t)=>{let n=t;for(;n&&n!==e;){if(x(n))return!0;n=n.parentNode}return!1})(m,r)||Ee(r))return e.none();if(r.hasChildNodes()&&!ft(r)){l=r;const e=new P(r,m);do{if(x(l)||Ee(l)){u=!1;break}if(s(l)&&l.data.length>0){d=h?0:l.data.length,r=l,u=!0;break}if(p[l.nodeName.toLowerCase()]&&!G8(l)){d=t.nodeIndex(l),r=l.parentNode,h||d++,u=!0;break}}while(l=h?e.next():e.prev())}}}return o&&(s(r)&&0===d&&zl(t,f,o,!0,r).each(e=>{r=e.container(),d=e.offset(),u=!0}),c(r)&&(l=r.childNodes[d],l||(l=r.childNodes[d-1]),!l||!F(l)||((e)=>{var n;return"A"===(null===(n=e.previousSibling)||void 0===n?void 0:n.nodeName)})(l)||a4(t,l,!1)||a4(t,l,!0)||zl(t,f,o,!0,l).each(e=>{r=e.container(),d=e.offset(),u=!0}))),h&&!o&&s(r)&&d===r.data.length&&zl(t,f,o,!1,r).each(e=>{r=e.container(),d=e.offset(),u=!0}),u&&r?e.some(n(r,d)):e.none()},Qi=(t,s)=>{const i=s.collapsed,o=s.cloneRange(),a=n.fromRangeStart(s);return c4(t,i,!0,o).each(e=>{i&&n.isAbove(a,e)||o.setStart(e.container(),e.offset())}),i||c4(t,i,!1,o).each(e=>{o.setEnd(e.container(),e.offset())}),i&&o.collapse(!0),Dl(s,o)?e.none():e.some(o)},Zi=(e,t)=>e.splitText(t),Ji=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,i=e.endOffset;if(t===o&&s(t)){if(n>0&&n<t.data.length)if(o=Zi(t,n),t=o.previousSibling,i>n){i-=n;const e=Zi(o,i).previousSibling;t=o=e,i=e.data.length,n=0}else i=0}else if(s(t)&&n>0&&n<t.data.length&&(t=Zi(t,n),n=0),s(o)&&i>0&&i<o.data.length){const e=Zi(o,i).previousSibling;o=e,i=e.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:i}},un=e=>({walk:(t,n)=>Is(e,t,n),split:Ji,expand:(t,n={type:"word"})=>{if("word"===n.type){const n=yn(e,t,[{inline:"span"}]),s=e.createRng();return s.setStart(n.startContainer,n.startOffset),s.setEnd(n.endContainer,n.endOffset),s}return t},normalize:t=>Qi(e,t).fold(S,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))});un.compareRanges=Dl,un.getCaretRangeFromPoint=t4,un.getSelectedNode=Xa,un.getNode=Vt;const Nb=((e)=>{const n=t=>{const n=(e=>{const t=e.dom;return Vn(e)?t.getBoundingClientRect().height:t.offsetHeight})(t);if(n<=0||null===n){const n=st(t,e);return parseFloat(n)||0}return n},s=(e,t)=>be(t,(t,n)=>{const s=st(e,n),o=void 0===s?0:parseInt(s,10);return isNaN(o)?t:t+o},0);return{set:(t,n)=>{if(!We(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const s=t.dom;zo(s)&&(s.style[e]=n+"px")},get:n,getOuter:n,aggregate:s,max:(e,t,n)=>{const o=s(e,n);return t>o?t-o:0}}})("height"),f4=()=>t(document),p4=(e,t)=>e.view(t).fold(a([]),t=>{const n=e.owner(t),s=p4(e,n);return[t].concat(s)});g4=Object.freeze({__proto__:null,view:n=>{var s;return(n.dom===document?e.none():e.from(null===(s=n.dom.defaultView)||void 0===s?void 0:s.frameElement)).map(t)},owner:e=>ht(e)});const Al=e=>"textarea"===k(e),b4=(e,t)=>{const n=(e=>{const o=e.dom.ownerDocument,t=o.body,n=o.defaultView,s=o.documentElement;if(t===e.dom)return hs(t.offsetLeft,t.offsetTop);const i=yi(n?.pageYOffset,s.scrollTop),a=yi(n?.pageXOffset,s.scrollLeft),r=yi(s.clientTop,t.clientTop),c=yi(s.clientLeft,t.clientLeft);return yd(e).translate(a-c,i-r)})(e),s=(e=>Nb.get(e))(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},j4=(e,t,n,s)=>{Fb(e,()=>Tb(e,t,n,s),n)},y4=(e,t,n,s,o)=>{const i={elm:s.element.dom,alignToTop:o};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,i)||(n(t,Ed(t).top,s,o),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,i))},Tb=(e,n,s,o)=>{const a=t(e.getBody()),r=t(e.getDoc());a.dom.offsetWidth;const i=((e,t)=>{const s=((e,t)=>{const n=q(e);if(0===n.length||Al(e))return{element:e,offset:t};if(t<n.length&&!Al(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return Al(s)?{element:e,offset:t}:"img"===k(s)?{element:s,offset:1}:we(s)?{element:s,offset:Sc(s).length}:{element:s,offset:q(s).length}}})(e,t),n=Hi('<span data-mce-bogus="all" style="display: inline-block;">﻿</span>');return _e(s.element,n),b4(n,()=>A(n))})(t(s.startContainer),s.startOffset);y4(e,r,n,i,o),i.cleanup()},w4=(e,n,s,o)=>{const i=t(e.getDoc());y4(e,i,s,(e=>b4(t(e),g))(n),o)},Fb=(e,n,s)=>{const o=s.startContainer,r=s.startOffset,i=s.endContainer,c=s.endOffset;n(t(o),t(i));const a=e.dom.createRng();a.setStart(o,r),a.setEnd(i,c),e.selection.setRng(s)},kl=(e,t,n,s)=>{const o=e.pos;if(n)Im(o.left,o.top,s);else{const n=o.top-t+e.height;Im(o.left,n,s)}},C4=(e,t,n,s,o)=>{const a=n+t,i=s.pos.top,r=s.bottom,c=r-i>=n;i<t?kl(s,n,!1!==o,e):i>a?kl(s,n,c?!1!==o:!0===o,e):r>a&&!c&&kl(s,n,!0===o,e)},E4=(e,t,n,s)=>{const o=Ro(e).dom.innerHeight;C4(e,t,o,n,s)},k4=(e,t,n,s)=>{const a=Ro(e).dom.innerHeight;C4(e,t,a,n,s);const o=(e=>{const o=f4(),t=Ed(o),i=((e,t)=>{const n=t.owner(e);return p4(t,n)})(e,g4),n=yd(e),s=vi(i,(e,t)=>{const n=yd(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return hs(s.left+n.left+t.left,s.top+n.top+t.top)})(n.element),i=qm(window);o.top<i.y?Bm(n.element,!1!==s):o.top>i.bottom&&Bm(n.element,!0===s)},Sb=(e,t,n)=>j4(e,E4,t,n),Ab=(e,t,n)=>w4(e,t,E4,n),kb=(e,t,n)=>j4(e,k4,t,n),Eb=(e,t,n)=>w4(e,t,k4,n),Ks=(e,t,n)=>{(e.inline?Sb:kb)(e,t,n)},z4=e=>e.dom.focus(),D4=e=>{const t=wt(e).dom;return e.dom===t.activeElement},xl=(n=f4())=>e.from(n.dom.activeElement).map(t),L4=(e,t)=>{const n=we(t)?Sc(t).length:q(t).length+1;return e>n?n:e<0?0:e},Ob=e=>Hn.range(e.start,L4(e.soffset,e.start),e.finish,L4(e.foffset,e.finish)),P4=(e,t)=>!pi(t.dom)&&(ut(e,t)||y(e,t)),H4=e=>t=>P4(e,t.start)&&P4(e,t.finish),wb=e=>Hn.range(t(e.startContainer),e.startOffset,t(e.endContainer),e.endOffset),yb=t=>{const n=document.createRange();try{return n.setStart(t.start.dom,t.soffset),n.setEnd(t.finish.dom,t.foffset),e.some(n)}catch{return e.none()}},Ol=n=>{const o=(e=>e.inline||b.browser.isFirefox())(n)?(s=t(n.getBody()),(t=>{const n=t.getSelection();return(n&&0!==n.rangeCount?e.from(n.getRangeAt(0)):e.none()).map(wb)})(Ro(s).dom).filter(H4(s))):e.none();var s;n.bookmark=o.isSome()?o:n.bookmark},wl=n=>(n.bookmark?n.bookmark:e.none()).bind(s=>{return o=t(n.getBody()),i=s,e.from(i).filter(H4(o)).map(Ob);var o,i}).bind(yb),W4={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},xe={setEditorTimeout:(e,t,n)=>((e,t)=>(We(t)||(t=0),setTimeout(e,t)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=((e,t)=>(We(t)||(t=0),setInterval(e,t)))(()=>{e.removed?clearInterval(s):t()},n);return s}};let ms;const jl=w.DOM,ta=(e,t)=>{const n=z9(e),s=jl.getParent(t,t=>(e=>c(e)&&W4.isEditorUIElement(e))(t)||!!n&&e.dom.is(t,n));return null!==s},db=(e,n)=>{const s=n.editor;(e=>{const t=Sa(()=>{Ol(e)},0);e.on("init",()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};w.DOM.bind(document,"mouseup",n),e.on("remove",()=>{w.DOM.unbind(document,"mouseup",n)})})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||Ol(e)})})(e,t)}),e.on("remove",()=>{t.cancel()})})(s),s.on("focusin",()=>{const t=e.focusedEditor;t!==s&&(t&&t.dispatch("blur",{focusedEditor:s}),e.setActive(s),e.focusedEditor=s,s.dispatch("focus",{blurredEditor:t}),s.focus(!0))}),s.on("focusout",()=>{xe.setEditorTimeout(s,()=>{const n=e.focusedEditor;ta(s,(e=>{try{const n=wt(t(e.getElement()));return xl(n).fold(()=>document.body,e=>e.dom)}catch{return document.body}})(s))||n!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ms||(ms=t=>{const n=e.activeEditor;n&&Ph(t).each(t=>{const s=t;s.ownerDocument===document&&(s===document.body||ta(n,s)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},jl.bind(document,"focusin",ms))},lb=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&ms&&(jl.unbind(document,"focusin",ms),ms=null)},Q4=(n,s)=>{((n,s)=>(n=>n.collapsed?e.from(Vt(n.startContainer,n.startOffset)).map(t):e.none())(s).bind(t=>cg(t)?e.some(t):ut(n,t)?e.none():e.some(n)))(t(n.getBody()),s).bind(e=>ae(e.dom)).fold(()=>{n.selection.normalize()},e=>n.selection.setRng(e.toRange()))},vl=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Wt=e=>e.inline?(e=>{const o=e.getBody();return o&&(n=t(o),D4(n)||(s=n,xl(wt(s)).filter(e=>s.dom.contains(e.dom))).isSome());var n,s})(e):(e=>r(e.iframeElement)&&D4(t(e.iframeElement)))(e),pl=e=>e.editorManager.setActive(e),t0=(n,s,o,i,a)=>{const r=o?s.startContainer:s.endContainer,c=o?s.startOffset:s.endOffset;return e.from(r).map(t).map(e=>i&&s.collapsed?e:Qo(e,a(e,c)).getOr(e)).bind(t=>ge(t)?e.some(t):Ve(t).filter(ge)).map(e=>e.dom).getOr(n)},n0=(e,t,n=!1)=>t0(e,t,!0,n,(e,t)=>Math.min(th(e),t)),s0=(e,t,n=!1)=>t0(e,t,!1,n,(e,t)=>t>0?t-1:t),o0=(e,t)=>{const n=e;for(;e&&s(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},fl=(e,t)=>v(t,t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t}),ob=["img","br"],r0=e=>{const t=Bf(e).filter(e=>0!==e.trim().length||e.indexOf(W)>-1).isSome();return t||O(ob,k(e))},c0="[data-mce-autocompleter]",sb=(n,s)=>{if(d0(t(n.getBody())).isNone()){const i=Hi('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',n.getDoc());H(i,t(s.extractContents())),s.insertNode(i.dom),Ve(i).each(e=>e.dom.normalize()),(o=i,((t,n)=>{const s=t=>{const o=q(t);for(let t=o.length-1;t>=0;t--){const i=o[t];if(n(i))return e.some(i);const a=s(i);if(a.isSome())return a}return e.none()};return s(t)})(o,r0)).map(e=>{n.selection.setCursorLocation(e.dom,(e=>"img"===k(e)?1:Bf(e).fold(()=>q(e).length,e=>e.length))(e))})}var o},d0=e=>Cs(e,c0),tb={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},na=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let n=e[o];if(n)return n;for(let s=e.parent;s&&s!==t;s=s.parent)if(n=s[o],n)return n}},J9=e=>{var t;const s=null!==(t=e.value)&&void 0!==t?t:"";if(!Mn(s))return!1;const n=e.parent;return!n||"span"===n.name&&!n.attr("style")||!/^[ ]+$/.test(s)},f0=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class le{constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}static create(e,t){const n=new le(e,tb[e]||1);return t&&C(t,(e,t)=>{n.attr(t,e)}),n}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const s=this;if(!h(e))return r(e)&&C(e,(e,t)=>{s.attr(t,e)}),s;const n=s.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];let t=n.length;for(;t--;)if(n[t].name===e)return n.splice(t,1),s}return s}if(e in n.map){{let s=n.length;for(;s--;)if(n[s].name===e){n[s].value=t;break}}}else n.push({name:e,value:t});return n.map[e]=t,s}return n.map[e]}}clone(){const e=this,t=new le(e.name,e.type),n=e.attributes;if(n){const e=[];e.map={};for(let s=0,o=n.length;s<o;s++){const t=n[s];"id"!==t.name&&(e[e.length]={name:t.name,value:t.value},e.map[t.name]=t.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,s=e.parent,t=e.next,n=e.prev;return s&&(s.firstChild===e?(s.firstChild=t,t&&(t.prev=null)):n&&(n.next=t),s.lastChild===e?(s.lastChild=n,n&&(n.next=null)):t&&(t.prev=n),e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const s=t.parent||this;return n?(t===s.firstChild?s.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===s.lastChild?s.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=s,e}getAll(e){const t=this,n=[];for(let s=t.firstChild;s;s=na(s,t))s.name===e&&n.push(s);return n}children(){const e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let n=e.firstChild;n;n=na(n,e))t.push(n);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){var o;const i=this;let s=i.firstChild;if(f0(i))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name])return!1;if(f0(s))return!1}if(8===s.type)return!1;if(3===s.type&&!J9(s))return!1;if(3===s.type&&s.parent&&t[s.parent.name]&&Mn(null!==(o=s.value)&&void 0!==o?o:""))return!1;if(n&&n(s))return!1}while(s=na(s,i))return!0}walk(e){return na(this,null,e)}}const g0=(e,t,n=0)=>{const s=e.toLowerCase();if(-1!==s.indexOf("[if ",n)&&((e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)))(s,n)){const e=s.indexOf("[endif]",n);return s.indexOf(">",e)}if(t){const e=s.indexOf(">",n);return-1!==e?e:s.length}{const o=/--!?>/g;o.lastIndex=n;const t=o.exec(e);return t?t.index+t[0].length:s.length}},Z9=(e,t,n)=>{const s=/<([!?/])?([A-Za-z0-9-_:.]+)/g,a=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,o=n;for(;0!==i;)for(s.lastIndex=o;;){const e=s.exec(t);if(null===e)return o;if("!"===e[1]){o=Y(e[2],"--")?g0(t,!1,e.index+"!--".length):g0(t,!0,e.index+1);break}{a.lastIndex=s.lastIndex;const n=a.exec(t);if(gn(n)||n.index!==s.lastIndex)continue;"/"===e[1]?i-=1:f(r,e[2])||(i+=1),o=s.lastIndex+n[0].length;break}}return o},b0=(e,t)=>{const s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=e.schema;let n=((e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")})(e.getTempAttrs(),t);const a=i.getVoidElements();let o;for(;o=s.exec(n);){const e=s.lastIndex,t=o[0].length;let r;r=a[o[1]]?e:Z9(i,n,e),n=n.substring(0,e-t)+n.substring(r),s.lastIndex=e-t}return _t(n)},Q9=b0,y0=e=>{const t=te(e,"[data-mce-bogus]");o(t,e=>{"all"===Fe(e,"data-mce-bogus")?A(e):En(e)?(_e(e,In(eo)),A(e)):Ct(e)})},_0=e=>{const t=te(e,"input");o(t,e=>{K(e,"name")})},X9=(e,n,s)=>{let o;return o="raw"===n.format?i.trim(Q9(e.serializer,s.innerHTML)):"text"===n.format?((e,n)=>{const o=e.getDoc(),i=wt(t(e.getBody())),s=$("div",o);U(s,"data-mce-bogus","all"),Na(s,{position:"fixed",left:"-9999999px",top:"0"}),Wi(s,n.innerHTML),y0(s),_0(s);const a=(e=>nl(e)?e:t(ht(e).dom.body))(i);H(a,s);const r=_t(s.dom.innerText);return A(s),r})(e,s):"tree"===n.format?e.serializer.serialize(s,n):((e,t)=>{const n=ve(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[
]*|<br \\/>[
]*)$`);return t.replace(s,"")})(e,e.serializer.serialize(s,n)),"text"!==n.format&&!qa(t(s))&&h(o)?i.trim(o):o},O0=i.makeMap,x0=e=>{const t=[],n=(e=e||{}).indent,i=O0(e.indent_before||""),o=O0(e.indent_after||""),s=It.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(e,r,c)=>{if(n&&i[e]&&t.length>0){const e=t[t.length-1];e.length>0&&`
`!==e&&t.push(`
`)}if(t.push("<",e),r)for(let e=0,o=r.length;e<o;e++){const n=r[e];t.push(" ",n.name,'="',s(n.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&o[e]&&t.length>0){const e=t[t.length-1];e.length>0&&`
`!==e&&t.push(`
`)}},end:e=>{let s;t.push("</",e,">"),n&&o[e]&&t.length>0&&(s=t[t.length-1],s.length>0&&`
`!==s&&t.push(`
`))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:s(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("<!--",e,"-->")},pi:(e,o)=>{o?t.push("<?",e," ",s(o),"?>"):t.push("<?",e,"?>"),n&&t.push(`
`)},doctype:e=>{t.push("<!DOCTYPE",e,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Dt=(e={},t=Bt())=>{const n=x0(e);return e.validate=!("validate"in e)||e.validate,{serialize:s=>{const a=e.validate,o={3:e=>{var t;n.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;n.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{n.pi(e.name,e.value)},10:e=>{var t;n.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;n.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do i(t);while(t=t.next)}};n.reset();const i=e=>{var s;const r=o[e.type];if(r)r(e);else{const r=e.name,c=r in t.getVoidElements();let o=e.attributes;if(a&&o&&o.length>1){const n=[];n.map={};const s=t.getElementRule(e.name);if(s){for(let t=0,i=s.attributesOrder.length;t<i;t++){const e=s.attributesOrder[t];if(e in o.map){const t=o.map[e];n.map[e]=t,n.push({name:e,value:t})}}for(let t=0,s=o.length;t<s;t++){const e=o[t].name;if(!(e in n.map)){const t=o.map[e];n.map[e]=t,n.push({name:e,value:t})}}o=n}}if(n.start(r,o,c),!c){let t=e.firstChild;if(t){"pre"!==r&&"textarea"!==r||3!==t.type||`
`!==(null===(s=t.value)||void 0===s?void 0:s[0])||n.text(`
`,!0);do i(t);while(t=t.next)}n.end(r)}}};return 1!==s.type||e.inner?3===s.type?o[3](s):o[11](s):i(s),n.getContent()}}},E0=new Set;o(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{E0.add(e)});const k0=["font","text-decoration","text-emphasis"],ll=(e,t)=>pe(e.parseStyle(e.getAttrib(t,"style"))),K9=(e,t,n)=>{const i=ll(e,t),s=ll(e,n),o=s=>{var o,i;const a=null!==(o=e.getStyle(t,s))&&void 0!==o?o:"",r=null!==(i=e.getStyle(n,s))&&void 0!==i?i:"";return rt(a)&&rt(r)&&a!==r};return z(i,e=>{const t=t=>z(t,t=>t===e);if(!t(s)&&t(k0)){const e=m(s,e=>z(k0,t=>Y(e,t)));return z(e,o)}return o(e)})},M0=(t,n,o)=>e.from(o.container()).filter(s).exists(e=>{const s=t?0:-1;return n(e.data.charAt(o.offset()+s))}),cl=d(M0,!0,js),rl=d(M0,!1,js),B9=e=>{const t=e.container();return s(t)&&(0===t.data.length||Fa(t.data)&&Bs.isBookmarkNode(t.parentNode))},zt=(e,t)=>n=>_d(e?0:-1,n).filter(t).isSome(),N0=e=>V8(e)&&"block"===st(t(e),"display"),L0=e=>x(e)&&!(e=>c(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),H9=zt(!0,N0),P9=zt(!1,N0),Xs=zt(!0,it),Zs=zt(!1,it),B0=zt(!0,ft),V0=zt(!1,ft),Ft=zt(!0,L0),Mt=zt(!1,L0),U0=(e,t)=>((e,t,n)=>ut(t,e)?P3(e,e=>n(e)||y(e,t)).slice(0,-1):[])(e,t,S),bt=(e,t)=>[e].concat(U0(e,t)),Jc=(e,t,n)=>yu(e,t,n,B9),Y0=(e,n)=>V(bt(t(n.container()),e),Ne),G0=(e,n,s)=>Jc(e,n.dom,s).forall(e=>Y0(n,s).fold(()=>!lt(e,s,n.dom),o=>!lt(e,s,n.dom)&&ut(o,t(e.container())))),X0=(e,t,n)=>Y0(t,n).fold(()=>Jc(e,t.dom,n).forall(e=>!lt(e,n,t.dom)),t=>Jc(e,t.dom,n).isNone()),Zc=d(X0,!1),Z0=d(X0,!0),w9=d(G0,!1),y9=d(G0,!0),g9=e=>mi(e).exists(En),ca=(e,n,s)=>{const o=m(bt(t(s.container()),n),Ne),i=ue(o).getOr(n);return Oe(e,i.dom,s).filter(g9)},Yc=(e,t)=>mi(t).exists(En)||ca(!0,e,t).isSome(),Kc=(n,s)=>(n=>e.from(n.getNode(!0)).map(t))(s).exists(En)||ca(!1,n,s).isSome(),u9=d(ca,!1),d9=d(ca,!0),r2=e=>n.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),c2=(e,n)=>{const s=m(bt(t(n.container()),e),Ne);return ue(s).getOr(e)},l2=(e,t)=>r2(t)?rl(t):rl(t)||je(c2(e,t).dom,t).exists(rl),d2=(e,t)=>r2(t)?cl(t):cl(t)||me(c2(e,t).dom,t).exists(cl),Uc=e=>mi(e).bind(e=>Kt(e,ge)).exists(e=>(e=>O(["pre","pre-wrap"],e))(st(e,"white-space"))),h2=(e,t)=>n=>{return s=new P(n,e)[t](),r(s)&&x(s)&&Xu(s);var s},so=(e,t)=>!Uc(t)&&(Zc(e,t)||w9(e,t)||Kc(e,t)||l2(e,t)||((e,t)=>{const s=je(e.dom,t).getOr(t),n=h2(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(s.container()))})(e,t)),oo=(e,t)=>!Uc(t)&&(Z0(e,t)||y9(e,t)||Yc(e,t)||d2(e,t)||((e,t)=>{const s=me(e.dom,t).getOr(t),n=h2(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(s.container()))})(e,t)),Vc=(e,t)=>so(e,t)||oo(e,(e=>{const t=e.container(),o=e.offset();return s(t)&&o<t.data.length?n(t,o+1):e})(t)),g2=(e,t)=>qo(e.charAt(t)),v2=(e,t)=>js(e.charAt(t)),b2=(e,t,s)=>{const o=t.data,i=n(t,0);return s||!g2(o,0)||Vc(e,i)?!!(s&&v2(o,0)&&so(e,i))&&(t.data=W+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},j2=(e,t,s)=>{const o=t.data,i=n(t,o.length-1);return s||!g2(o,o.length-1)||Vc(e,i)?!!(s&&v2(o,o.length-1)&&oo(e,i))&&(t.data=o.slice(0,-1)+W,!0):(t.data=o.slice(0,-1)+" ",!0)},a9=(t,n)=>{const o=n.container();if(!s(o))return e.none();if((e=>{const t=e.container();return s(t)&&Q(t.data,W)})(n)){const e=b2(t,o,!1)||(e=>{const t=e.data,n=(e=>{const t=e.split("");return v(t,(e,n)=>qo(e)&&n>0&&n<t.length-1&&iu(t[n-1])&&iu(t[n+1])?" ":e).join("")})(t);return n!==t&&(e.data=n,!0)})(o)||j2(t,o,!1);return xo(e,n)}if(Vc(t,n)){const e=b2(t,o,!0)||j2(t,o,!0);return xo(e,n)}return e.none()},_2=(e,s,o)=>{if(0===o)return;const i=t(e),a=Lt(i,Ne).getOr(i),r=e.data.slice(s,s+o),c=s+o>=e.data.length&&oo(a,n(e,e.data.length)),l=0===s&&so(a,n(e,0));e.replaceData(s,o,ip(r,4,l,c))},ma=(e,t)=>{const n=e.data.slice(t),s=n.length-sj(n).length;_2(e,t,s)},Ic=(e,t)=>{const n=e.data.slice(0,t),s=n.length-r4(n).length;_2(e,t-s,s)},Hc=(e,n,s,o=!0)=>{const r=r4(e.data).length,i=o?e:n,a=o?n:e;return o?i.appendData(a.data):i.insertData(0,a.data),A(t(a)),s&&ma(i,r),i},e9=(e,t)=>((e,t)=>{const s=e.container(),o=e.offset();return!n.isTextPosition(e)&&s===t.parentNode&&o>n.before(t).offset()})(t,e)?n(t.container(),t.offset()-1):t,E2=t=>{return Te(t.previousSibling)?e.some((o=t.previousSibling,s(o)?n(o,o.data.length):n.after(o))):t.previousSibling?at(t.previousSibling):e.none();var o},k2=t=>{return Te(t.nextSibling)?e.some((o=t.nextSibling,s(o)?n(o,0):n.before(o))):t.nextSibling?ae(t.nextSibling):e.none();var o},Yv=(t,s,o)=>((t,s,o)=>t?((e,t)=>k2(t).orThunk(()=>E2(t)).orThunk(()=>((e,t)=>me(e,n.after(t)).orThunk(()=>je(e,n.before(t))))(e,t)))(s,o):((t,s)=>E2(s).orThunk(()=>k2(s)).orThunk(()=>((t,s)=>e.from(s.previousSibling?s.previousSibling:s.parentNode).bind(e=>je(t,n.before(e))).orThunk(()=>me(t,n.after(s))))(t,s)))(s,o))(t,s,o).map(d(e9,o)),S2=(e,t,n)=>{n.fold(()=>{e.focus()},n=>{e.selection.setRng(n.toRange(),t)})},qv=(e,t)=>t&&f(e.schema.getBlockElements(),k(t)),Kv=t=>{if(T(t)){const s=Hi('<br data-mce-bogus="1">');return Gs(t),H(t,s),e.some(n.before(s.dom))}return e.none()},Qt=(t,s,o,i=!0)=>{const r=Yv(s,t.getBody(),o.dom),c=Lt(o,d(qv,t),(a=t.getBody(),e=>e.dom===a));var a;const l=((t,s,o)=>{const c=Cn(t).filter(we),l=Os(t).filter(we);return A(t),(i=c,a=l,r=s,d=(e,t,s)=>{const i=e.dom,a=t.dom,r=i.data.length;return Hc(i,a,o),s.container()===a?n(i,r):s},i.isSome()&&a.isSome()&&r.isSome()?e.some(d(i.getOrDie(),a.getOrDie(),r.getOrDie())):e.none()).orThunk(()=>(o&&(c.each(e=>Ic(e.dom,e.dom.length)),l.each(e=>ma(e.dom,0))),s));var i,a,r,d})(o,r,((e,t)=>f(e.schema.getTextInlineElements(),k(t)))(t,o));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):c.bind(Kv).fold(()=>{i&&S2(t,s,l)},n=>{i&&S2(t,s,e.some(n))})},Vv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,en=(e,n)=>De(t(n),i9(e))&&!Io(e.schema,n),kt=(t,n,s)=>{const o=((e,t,n)=>m(w.DOM.getParents(n.container(),"*",t),e))(t,n,s);return e.from(o[o.length-1])},Ae=(e,t)=>{const o=t.container(),i=t.offset();return e?Tt(o)?s(o.nextSibling)?n(o.nextSibling,0):n.after(o):Wl(t)?n(o,i+1):t:Tt(o)?s(o.previousSibling)?n(o.previousSibling,o.previousSibling.data.length):n.before(o):Ul(t)?n(o,i-1):t},R2=d(Ae,!0),P2=d(Ae,!1),H2=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},I2=e=>H2(e,"Delete"),Pv=e=>c6(e)||po(e),pa=(t,n)=>ut(t,n)?Kt(n,Pv,(e=>t=>ts(Ve(t),e,y))(t)):e.none(),zc=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},W2=t=>{var n;return(8===Z2(n=t)||"#comment"===k(n)?Cn(t):cu(t)).bind(W2).orThunk(()=>e.some(t))},U2=(e,n,s,i=!0)=>{var r,c;n.deleteContents();const l=W2(s).getOr(s),a=t(null!==(r=e.dom.getParent(l.dom,e.dom.isBlock))&&void 0!==r?r:s.dom);if(a.dom===e.getBody()?zc(e,i):T(a)&&(kn(a),i&&e.selection.setCursorLocation(a.dom,0)),!y(s,a)){const e=ts(Ve(a),s)?[]:Ve(c=a).map(q).map(e=>m(e,e=>!y(c,e))).getOr([]);o(e.concat(q(s)),e=>{y(e,a)||ut(e,a)||!T(e)||A(e)})}},Fc=e=>te(e,"td,th"),Mc=(e,t)=>({start:e,end:t}),io=Ze([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ga=(e,n)=>qt(t(e),"td,th",n),X2=e=>!y(e.start,e.end),Q2=(e,t)=>As(e.start,t).bind(n=>As(e.end,t).bind(e=>xo(y(n,e),n))),kc=e=>t=>Q2(t,e).map(e=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,e,Fc(e))),J2=(t,n,s,o)=>{if(s.collapsed||!t.forall(X2))return e.none();if(n.isSameTable){const n=t.bind(kc(o));return e.some({start:n,end:n})}{const t=ga(s.startContainer,o),n=ga(s.endContainer,o),i=t.bind((e=>t=>As(t,e).bind(e=>Gt(Fc(e)).map(e=>Mc(t,e))))(o)).bind(kc(o)),a=n.bind((e=>t=>As(t,e).bind(e=>ue(Fc(e)).map(e=>Mc(e,t))))(o)).bind(kc(o));return e.some({start:i,end:a})}},e3=(e,t)=>Ns(e,e=>y(e,t)),Ec=e=>se(e3(e.cells,e.rng.start),e3(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),n3=(e,t)=>{const{startTable:s,endTable:o}=t,n=e.cloneRange();return s.each(e=>n.setStartAfter(e.dom)),o.each(e=>n.setEndBefore(e.dom)),n},bv=(n,s)=>{const o=(e=>t=>y(e,t))(n),i=((e,t)=>{const n=ga(e.startContainer,t),s=ga(e.endContainer,t);return se(n,s,Mc)})(s,o),a=((e,n)=>{const i=e=>As(t(e),n),s=i(e.startContainer),o=i(e.endContainer),a=s.isSome(),r=o.isSome(),c=se(s,o,y).getOr(!1);return{startTable:s,endTable:o,isStartInTable:a,isEndInTable:r,isSameTable:c,isMultiTable:!c&&a&&r}})(s,o);return((e,t,n)=>e.exists(e=>((e,t)=>!X2(e)&&Q2(e,t).exists(e=>{const t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))(e,n)&&Hd(e.start,t)))(i,s,o)?i.map(e=>io.singleCellTable(s,e.start)):a.isMultiTable?((t,n,s,o)=>J2(t,n,s,o).bind(({start:t,end:o})=>{const i=t.bind(Ec).getOr([]),a=o.bind(Ec).getOr([]);if(i.length>0&&a.length>0){const t=n3(s,n);return e.some(io.multiTable(i,a,t))}return e.none()}))(i,a,s,o):((t,n,s,o)=>J2(t,n,s,o).bind(({start:e,end:t})=>e.or(t)).bind(t=>{const{isSameTable:i}=n,o=Ec(t).getOr([]);if(i&&t.cells.length===o.length)return e.some(io.fullTable(t.table));if(o.length>0){if(i)return e.some(io.partialTable(o,e.none()));{const t=n3(s,n);return e.some(io.partialTable(o,e.some({...n,rng:t})))}}return e.none()}))(i,a,s,o)},o3=e=>o(e,e=>{K(e,"contenteditable"),kn(e)}),Cc=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),xc(e,o,t,!1).each(e=>e())},a3=e=>{const s=Bn(e),n=t(e.selection.getNode());oa(n.dom)&&T(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),s.length>1&&z(s,e=>y(e,n))&&U(n,"data-mce-selected","1")},r3=(n,s,o)=>e.some(()=>{const i=n.selection.getRng(),a=o.bind(({rng:o,isStartInTable:a})=>{const c=((n,s)=>e.from(n.dom.getParent(s,n.dom.isBlock)).map(t))(n,a?o.endContainer:o.startContainer);o.deleteContents(),((e,t,n)=>{n.each(n=>{t?A(n):(kn(n),e.selection.setCursorLocation(n.dom,0))})})(n,a,c.filter(T));const r=a?s[0]:s[s.length-1];return Cc(n,r,i,a),T(r)?e.none():e.some(a?s.slice(1):s.slice(0,-1))}).getOr(s);o3(a),a3(n)}),gv=(t,n,s,o)=>e.some(()=>{const e=t.selection.getRng(),i=n[0],a=s[s.length-1];Cc(t,i,e,!0),Cc(t,a,e,!1);const r=T(i)?n:n.slice(1),c=T(a)?s:s.slice(0,-1);o3(r.concat(c)),o.deleteContents(),a3(t)}),xc=(t,n,s,o=!0)=>e.some(()=>{U2(t,n,s,o)}),mv=(t,n)=>e.some(()=>Qt(t,!1,n)),u3=(e,t)=>V(bt(t,e),vo),Oc=(e,t)=>V(bt(t,e),lc("caption")),va=(t,n)=>e.some(()=>{kn(n),t.selection.setCursorLocation(n.dom,0)}),f3=(e,t)=>e?B0(t):V0(t),hv=(s,o,i)=>{const a=t(s.getBody());return Oc(a,i).fold(()=>((s,o,i,a)=>{const r=n.fromRangeStart(s.selection.getRng());return u3(i,a).bind(n=>T(n)?va(s,n):((n,s,o,i,a)=>ni(o,n.getBody(),a).bind(n=>u3(s,t(n.getNode())).bind(t=>y(t,i)?e.none():e.some(g))))(s,i,o,n,r))})(s,o,a,i).orThunk(()=>xo(((e,t)=>{const s=n.fromRangeStart(e.selection.getRng());return f3(t,s)||Oe(t,e.getBody(),s).exists(e=>f3(t,e))})(s,o),g)),i=>((s,o,i,a)=>{const r=n.fromRangeStart(s.selection.getRng());return T(a)?va(s,a):((n,s,o,i,a)=>ni(o,n.getBody(),a).fold(()=>e.some(g),r=>((e,t,n,s)=>ae(e.dom).bind(o=>at(e.dom).map(e=>t?n.isEqual(o)&&s.isEqual(e):n.isEqual(e)&&s.isEqual(o))).getOr(!0))(i,o,a,r)?((e,t)=>va(e,t))(n,i):((n,s,o)=>Oc(n,t(o.getNode())).fold(()=>e.some(g),e=>xo(!y(e,s),g)))(s,i,r)))(s,i,o,a,r)})(s,o,a,i))},_c=(n,s)=>{const o=t(n.selection.getStart(!0)),i=Bn(n);return n.selection.isCollapsed()&&0===i.length?hv(n,s,o):((n,s,o)=>{const i=t(n.getBody()),a=n.selection.getRng();return 0!==o.length?r3(n,o,e.none()):((e,t,n,s)=>Oc(t,s).fold(()=>((e,t,n)=>bv(t,n).bind(t=>t.fold(d(xc,e),d(mv,e),d(r3,e),d(gv,e))))(e,t,n),t=>((e,t)=>va(e,t))(e,t)))(n,i,a,s)})(n,o,i)},xn=(e,t)=>{let n=t;for(;n&&n!==e;){if(Be(n)||x(n))return n;n=n.parentNode}return null},ov=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],sv=i.each,jc=e=>{const t=e.dom,s=new Set(e.serializer.getTempAttrs()),n=e=>z(ov,t=>Y(e,t))||s.has(e);return{compare:(e,s)=>{if(e.nodeName!==s.nodeName||e.nodeType!==s.nodeType)return!1;const o=e=>{const s={};return sv(t.getAttribs(e),o=>{const i=o.nodeName.toLowerCase();"style"===i||n(i)||(s[i]=t.getAttrib(e,i))}),s},i=(e,t)=>{for(const n in e)if(f(e,n)){const s=t[n];if(re(s))return!1;if(e[n]!==s)return!1;delete t[n]}for(const e in t)if(f(t,e))return!1;return!0};if(c(e)&&c(s)){if(!i(o(e),o(s)))return!1;if(!i(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(s,"style"))))return!1}return!Me(e)&&!Me(s)},isAttributeInternal:n}},_3=(e,t,n,s)=>{const o=n.name;for(let t=0,a=e.length;t<a;t++){const i=e[t];if(i.name===o){const e=s.nodes[o];e?e.nodes.push(n):s.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let e=0,a=t.length;e<a;e++){const i=t[e],o=i.name;if(o in n.attributes.map){const e=s.attributes[o];e?e.nodes.push(n):s.attributes[o]={filter:i,nodes:[n]}}}},w3=(e,t)=>{const n=(e,n)=>{C(e,e=>{const s=fe(e.nodes);o(e.filter.callbacks,o=>{for(let t=s.length-1;t>=0;t--){const o=s[t];(n?void 0!==o.attr(e.filter.name):o.name===e.filter.name)&&!D(o.parent)||s.splice(t,1)}s.length>0&&o(s,e.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},O3=(e,t,n,s={})=>{const o=((e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&((n)=>{let i=n;for(;i=i.walk();)_3(e,t,i,s)})(n),s})(e,t,n);w3(o,s)},bc=(e,t,n)=>{if(e.insert&&t(n)){const e=new le("br",1);e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new le("#text",3)).value=W},C3=(e,t)=>{const n=e?.firstChild;return r(n)&&n===e.lastChild&&n.name===t},ao=(e,t,n,s)=>s.isEmpty(t,n,t=>((e,t)=>{const n=e.getElementRule(t.name);return!0===n?.paddEmpty})(e,t)),fc=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const e of s)n&&!t.isValidChild(n.name,e.name)&&fc(e,t,n);e.unwrap()}},mc=(e,t,n=g)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),a=t.getWhitespaceElements(),c=i.makeMap("tr,td,th,tbody,thead,tfoot,table"),r=new Set;for(let m=0;m<e.length;m++){const i=e[m];let l,u,h;if(!i.parent||r.has(i))continue;if(s[i.name]&&"li"===i.parent.name){let e=i.next;for(;e&&s[e.name];)e.name="li",r.add(e),i.parent.insert(e,i.parent),e=e.next;i.unwrap();continue}const d=[i];for(l=i.parent;l&&!t.isValidChild(l.name,i.name)&&!c[l.name];l=l.parent)d.push(l);if(l&&d.length>1)if(t.isValidChild(l.name,i.name)){d.reverse(),u=d[0].clone(),n(u);let e=u;for(let s=0;s<d.length-1;s++){t.isValidChild(e.name,d[s].name)?(h=d[s].clone(),n(h),e.append(h)):h=e;for(let e=d[s].firstChild;e&&e!==d[s+1];){const t=e.next;h.append(e),e=t}e=h}ao(t,o,a,u)?l.insert(i,d[0],!0):(l.insert(u,d[0],!0),l.insert(i,u)),l=d[0],(ao(t,o,a,l)||C3(l,"br"))&&l.empty().remove()}else fc(i,t);else if(i.parent){if("li"===i.name){let e=i.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(i);continue}if(e=i.next,e&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(i,e.firstChild,!0);continue}const t=new le("ul",1);n(t),i.wrap(t);continue}if(t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)){const e=new le("div",1);n(e),i.wrap(e)}else fc(i,t)}}},S3=(e,t,n=t.parent)=>!(!n||!e.children[t.name]||e.isValidChild(n.name,t.name))||!(!n||"a"!==t.name||!((e)=>{let n=e;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n)),hc=e=>e.collapsed?e:(e=>{const t=n.fromRangeStart(e),o=n.fromRangeEnd(e),s=e.commonAncestorContainer;return Oe(!1,s,o).map(n=>!lt(t,o,s)&&lt(t,n,s)?((e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o})(t.container(),t.offset(),n.container(),n.offset()):e).getOr(e)})(e),G7=(e,t)=>{let s=t.firstChild,n=t.lastChild;return s&&"meta"===s.name&&(s=s.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),((e,t)=>{const n=e.getNonEmptyElements();return r(t)&&(t.isEmpty(n)||((e,t)=>e.getBlockElements()[t.name]&&(e=>r(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===W)(t.firstChild))(e,t))})(e,n)&&(n=n?.prev),!(!s||s!==n||"ul"!==s.name&&"ol"!==s.name)},Y7=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||r(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(e=>e.data===W||F(e))(t.firstChild))?e.slice(0,-1):e;var t,n},uc=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},D3=(e,t)=>{const o=n.after(e),s=Ke(t).prev(o);return s?s.toRange():null},K7=(e,t,s,o)=>{const h=((e,t,n)=>{const s=t.serialize(n);return(e=>{var s,o;const t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&(null===(s=t.parentNode)||void 0===s||s.removeChild(t)),n&&"mce_marker"===n.id&&(null===(o=n.parentNode)||void 0===o||o.removeChild(n)),e})(e.createFragment(s))})(t,e,o),a=uc(t,s.startContainer),r=Y7((c=h.firstChild,m(null!==(l=c?.childNodes)&&void 0!==l?l:[],e=>"LI"===e.nodeName)));var c,l;const d=t.getRoot(),u=e=>{const o=n.fromRangeStart(s),i=Ke(t.getRoot()),r=1===e?i.prev(o):i.next(o),c=r?.getNode();return!c||uc(t,c)!==a};return a?u(1)?((e,t,s)=>{const o=e.parentNode;return o&&i.each(t,t=>{o.insertBefore(t,e)}),((e,t)=>{const o=n.before(e),s=Ke(t).next(o);return s?s.toRange():null})(e,s)})(a,r,d):u(2)?((e,t,n,s)=>(s.insertAfter(t.reverse(),e),D3(t[0],n)))(a,r,d,t):((e,t,n,s)=>{const a=((e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]})(e,s),o=e.parentNode;return o&&(o.insertBefore(a[0],e),i.each(t,t=>{o.insertBefore(t,e)}),o.insertBefore(a[1],e),o.removeChild(e)),D3(t[t.length-1],n)})(a,r,d,s):null},U7=["pre"],dc=oa,W7=(o,a,c)=>{var j,_,C;const h=o.selection,d=o.dom,v=o.parser,k=c.merge,b=Dt({validate:!0},o.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===a.indexOf("{$caret}")&&(a+="{$caret}"),a=a.replace(/\{\$caret\}/,w);let f=h.getRng();const E=f.startContainer,p=o.getBody();E===p&&h.isCollapsed()&&d.isBlock(p.firstChild)&&((e,t)=>r(t)&&!e.schema.getVoidElements()[t.nodeName])(o,p.firstChild)&&d.isEmpty(p.firstChild)&&(f=d.createRng(),f.setStart(p.firstChild,0),f.setEnd(p.firstChild,0),h.setRng(f)),h.isCollapsed()||(e=>{const o=e.dom,n=hc(e.selection.getRng());e.selection.setRng(n);const i=o.getParent(n.startContainer,dc);((e,n,s)=>!!r(s)&&s===e.getParent(n.endContainer,dc)&&Hd(t(s),n))(o,n,i)?xc(e,n,t(i)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&s(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)})(o);const g=h.getNode(),x={context:g.nodeName.toLowerCase(),data:c.data,insert:!0},u=v.parse(a,x);if(!0===c.paste&&G7(o.schema,u)&&((e,t)=>!!uc(e,t))(d,g))return f=K7(b,d,h.getRng(),u),f&&h.setRng(f),a;!0===c.paste&&((t,n,s,o)=>{var a;const i=n.firstChild,r=n.lastChild,c=i===("bookmark"===r.attr("data-mce-type")?r.prev:r),l=O(U7,i.name);if(c&&l){const n="false"!==i.attr("contenteditable"),r=(null===(a=t.getParent(s,t.isBlock))||void 0===a?void 0:a.nodeName.toLowerCase())===i.name,c=e.from(xn(o,s)).forall(Be);return n&&r&&c}return!1})(d,u,g,o.getBody())&&(null===(j=u.firstChild)||void 0===j||j.unwrap()),(e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(u);let l=u.lastChild;if(l&&"mce_marker"===l.attr("id")){const e=l;for(l=l.prev;l;l=l.walk(!0))if(3===l.type||!d.isBlock(l.name)){l.parent&&o.schema.isValidChild(l.parent.name,"span")&&l.parent.insert(e,l,"br"===l.name);break}}if(o._selectionOverrides.showBlockCaretContainer(g),x.invalid){o.selection.setContent(w);let t,e=h.getNode();const n=o.getBody();for(Ws(e)?e=t=n:t=e;t&&t!==n;)e=t,t=t.parentNode;a=e===n?n.innerHTML:d.getOuterHTML(e);const s=v.parse(a);for(let e=s;e;e=e.walk())if("mce_marker"===e.attr("id")){e.replace(u);break}const i=u.children(),r=null!==(_=u.parent)&&void 0!==_?_:s;u.unwrap();const c=m(i,e=>S3(o.schema,e,r));mc(c,o.schema),O3(v.getNodeFilters(),v.getAttributeFilters(),s),a=b.serialize(s),e===n?d.setHTML(n,a):d.setOuterHTML(e,a)}else a=b.serialize(u),((e,t,n)=>{var s;if("all"===n.getAttribute("data-mce-bogus"))null===(s=n.parentNode)||void 0===s||s.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&"BR"===s.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(o,a,g);return((e,t)=>{const s=e.schema.getTextInlineElements(),n=e.dom;if(t){const t=e.getBody(),o=jc(e);i.each(n.select("*[data-mce-fragment]"),e=>{if(r(s[e.nodeName.toLowerCase()])&&((e,t)=>Xt(ll(e,t),e=>!(e=>E0.has(e))(e)))(n,e))for(let s=e.parentElement;r(s)&&s!==t&&!K9(n,e,s);s=s.parentElement)if(o.compare(s,e)){n.remove(e,!0);break}})}})(o,k),((e,o)=>{var l,d,u;let f;const i=e.dom,h=e.selection;if(!o)return;h.scrollIntoView(o);const m=xn(e.getBody(),o);if(m&&"false"===i.getContentEditable(m))return i.remove(o),void h.select(m);let r=i.createRng();const c=o.previousSibling;if(s(c)){r.setStart(c,null!==(d=null===(l=c.nodeValue)||void 0===l?void 0:l.length)&&void 0!==d?d:0);const e=o.nextSibling;s(e)&&(c.appendData(e.data),null===(u=e.parentNode)||void 0===u||u.removeChild(e))}else r.setStartBefore(o),r.setEndBefore(o);const a=i.getParent(o,i.isBlock);i.remove(o),a&&i.isEmpty(a)&&(Gs(t(a)),r.setStart(a,0),r.setEnd(a,0),dc(a)||(e=>!!e.getAttribute("data-mce-fragment"))(a)||!(f=(t=>{let s=n.fromRangeStart(t);return s=Ke(e.getBody()).next(s),s?.toRange()})(r))?i.add(a,i.create("br",{"data-mce-bogus":"1"})):(r=f,i.remove(a))),h.setRng(r)})(o,d.get("mce_marker")),C=o.getBody(),i.each(C.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),((n,s)=>{e.from(n.getParent(s,"td,th")).map(t).each(tg)})(d,h.getStart()),((e,n,s)=>{const o=P3(t(s),e=>y(e,t(n)));xi(o,o.length-2).filter(ge).fold(()=>Td(e,n),t=>Td(e,t.dom))})(o.schema,o.getBody(),h.getStart()),a},Ca=e=>e instanceof le,cc=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{Wt(e)&&ae(e.getBody()).each(t=>{const n=t.getNode(),s=ft(n)?ae(n).getOr(t):t;e.selection.setRng(s.toRange())})})(e)},B7=(n,s)=>((n,s)=>{const o=n.dom;return o.parentNode?((e,n)=>V(e.dom.childNodes,e=>n(t(e))).map(t))(t(o.parentNode),e=>!y(n,e)&&s(e)):e.none()})(n,s).isSome(),V3=e=>j(e)?e:S,rc=(n,s,o)=>{const a=s(n),i=V3(o);return a.orThunk(()=>i(n)?e.none():((n,s,o)=>{let i=n.dom;const a=V3(o);for(;i.parentNode;){i=i.parentNode;const e=t(i),n=s(e);if(n.isSome())return n;if(a(e))break}return e.none()})(n,s,i))},oc=dd,U3=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let n=0;n<s.length;n++){const o=s[n];if(Se(o)&&!1===o.inherit&&e.dom.is(t,o.selector))return!0}return!1},sc=(e,t,n,s,o)=>{const i=e.dom.getRoot();if(t===i)return!1;const a=e.dom.getParent(t,t=>!!U3(e,t,n)||t.parentNode===i||!!Ge(e,t,n,s,!0));return!!Ge(e,a,n,s,o)},Ma=(e,t,n)=>!!R(n)&&!!oc(t,n.inline)||!!Je(n)&&!!oc(t,n.block)||!!Se(n)&&c(t)&&e.is(t,n.selector),Y3=(e,t,n,s,o,i)=>{const a=n[s],r="attributes"===s;if(j(n.onmatch))return n.onmatch(t,n,s);if(a)if(U1(a)){for(let n=0;n<a.length;n++)if(r?e.getAttrib(t,a[n]):_i(e,t,a[n]))return!0}else for(const s in a)if(f(a,s)){const c=r?e.getAttrib(t,s):_i(e,t,s),l=$t(a[s],i),d=D(c)||co(c);if(d&&D(l))continue;if(o&&d&&!n.exact)return!1;if((!o||n.exact)&&!oc(c,ld(l,s)))return!1}return!0},Ge=(e,t,n,s,o)=>{const i=e.formatter.get(n),a=e.dom;if(i&&c(t))for(let r=0;r<i.length;r++){const n=i[r];if(Ma(e.dom,t,n)&&Y3(a,t,n,"attributes",o,s)&&Y3(a,t,n,"styles",o,s)){const o=n.classes;if(o)for(let n=0;n<o.length;n++)if(!e.dom.hasClass(t,$t(o[n],s)))return;return n}}},Jr=(e,t,n,s,o)=>{if(s)return sc(e,s,t,n,o);if(s=e.selection.getNode(),sc(e,s,t,n,o))return!0;const i=e.selection.getStart();return i!==s&&!!sc(e,i,t,n,o)},Rn=X,Z3=e=>(e=>{const n=[];let t=e;for(;t;){if(s(t)&&t.data!==Rn||t.childNodes.length>1)return[];c(t)&&n.push(t),t=t.firstChild}return n})(e).length>0,J3=e=>{if(e){const t=new P(e,e);for(let e=t.current();e;e=t.next())if(s(e))return e}return null},Qr=e=>{const t=$("span");return Ot(t,{id:nu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&H(t,In(Rn)),t},Xr=(e,n,s=!0)=>{const o=e.dom,i=e.selection;if(Z3(n))Qt(e,!1,t(n),s);else{const e=i.getRng(),a=o.getParent(n,o.isBlock),l=e.startContainer,r=e.startOffset,d=e.endContainer,c=e.endOffset,s=(e=>{const t=J3(e);return t&&t.data.charAt(0)===Rn&&t.deleteData(0,1),t})(n);o.remove(n,!0),l===s&&r>0&&e.setStart(s,r-1),d===s&&c>0&&e.setEnd(s,c-1),a&&o.isEmpty(a)&&kn(t(a)),i.setRng(e)}},Gr=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)Xr(e,t,n);else if(!(t=tn(e.getBody(),o.getStart())))for(;t=s.get(nu);)Xr(e,t,!1)},sh=(e,t)=>(e.appendChild(t),t),oh=(e,t)=>{var n;const s=vi(e,(e,t)=>sh(e,t.cloneNode(!1)),t),o=null!==(n=s.ownerDocument)&&void 0!==n?n:document;return sh(s,o.createTextNode(Rn))},j7=(n,i,a,r)=>{const f=n.dom,u=n.selection;let p=!1;const v=n.formatter.get(i);if(!v)return;const h=u.getRng(),g=h.startContainer,y=h.startOffset;let c=g;s(g)&&(y!==g.data.length&&(p=!0),c=c.parentNode);const b=[];let l;for(;c;){if(Ge(n,c,i,a,r)){l=c;break}c.nextSibling&&(p=!0),b.push(c),c=c.parentNode}if(l)if(p){const t=u.getBookmark();h.collapse(!0);let e=yn(f,h,v,!0);e=Ji(e),n.formatter.remove(i,a,e,r),u.moveToBookmark(t)}else{const s=tn(n.getBody(),l),c=Qr(!1).dom;((e,n,s)=>{var a,r;const i=e.dom,c=i.getParent(s,d(fd,e.schema));c&&i.isEmpty(c)?null===(a=s.parentNode)||void 0===a||a.replaceChild(n,s):((e=>{const s=te(e,"br"),n=m((e=>{const s=[];let n=e.dom;for(;n;)s.push(t(n)),n=n.lastChild;return s})(e).slice(-1),En);s.length===n.length&&o(n,A)})(t(s)),i.isEmpty(s)?null===(r=s.parentNode)||void 0===r||r.replaceChild(n,s):i.insertAfter(n,s))})(n,c,s??l);const h=((t,n,s,o,i,a)=>{const r=t.formatter,c=t.dom,l=m(pe(r.get()),e=>e!==o&&!Q(e,"removeformat")),d=((e,t,n)=>be(n,(n,s)=>{const o=((e,t)=>sd(e,t,e=>{const t=e=>j(e)||e.length>1&&"%"===e.charAt(0);return z(["styles","attributes"],n=>E(e,n).exists(e=>{const n=L(e)?e:Sl(e);return z(n,t)}))}))(e,s);return e.formatter.matchNode(t,s,{},o)?n.concat([s]):n},[]))(t,s,l);if(m(d,e=>!((e,t,n)=>{const o=["inline","block","selector","attributes","styles","classes"],s=e=>Us(e,(e,t)=>z(o,e=>e===t));return sd(e,t,t=>{const o=s(t);return sd(e,n,e=>{const t=s(e);return((e,t,n=su)=>_u(n).eq(e,t))(o,t)})})})(t,e,o)).length>0){const t=s.cloneNode(!1);return c.add(n,t),r.remove(o,i,t,a),c.remove(t),e.some(t)}return e.none()})(n,c,l,i,a,r),p=oh(b.concat(h.toArray()),c);s&&Xr(n,s,!1),u.setCursorLocation(p,1),f.isEmpty(l)&&f.remove(l)}},f7=(e,t)=>{const n=e.schema.getTextInlineElements();return f(n,k(t))&&!Ie(t.dom)&&!Jt(t.dom)},uo={},ch=Re(["pre"]);uo.pre||(uo.pre=[]),uo.pre.push(e=>{if(!e.selection.getRng().collapsed){const n=e.selection.getSelectedBlocks(),s=m(m(n,ch),(e=>t=>{const n=t.previousSibling;return ch(n)&&O(e,n)})(n));o(s,e=>{((e,n)=>{const s=t(n),o=ht(s).dom;A(s),ln(t(e),[$("br",o),$("br",o),...q(s)])})(e.previousSibling,e)})}});const lh=["fontWeight","fontStyle","color","fontSize","fontFamily"],dh=(t,n)=>{const s=t.get(n);return L(s)?V(s,e=>R(e)&&"span"===e.inline&&(e=>ne(e.styles)&&z(pe(e.styles),e=>O(lh,e)))(e)):e.none()},uh=(e,t)=>je(t,n.fromRangeStart(e)).isNone(),hh=(e,t)=>!1===me(t,n.fromRangeEnd(e)).exists(e=>!F(e.getNode())||me(t,e).isSome()),mh=e=>t=>$g(t)&&"false"!==e.getContentEditableParent(t),fh=e=>m(e.getSelectedBlocks(),mh(e.dom)),Ur=i.each,$r=e=>c(e)&&!Me(e)&&!Ie(e)&&!Jt(e),vh=(e,t)=>{for(let n=e;n;n=n[t]){if(s(n)&&rt(n.data))return e;if(c(n)&&!Me(n))return n}return e},bh=(e,t,n)=>{const s=jc(e),o=c(t)&&vn(t),a=c(n)&&vn(n);if(o&&a){const o=vh(t,"previousSibling"),a=vh(n,"nextSibling");if(s.compare(o,a)){for(let e=o.nextSibling;e&&e!==a;){const t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(a),i.each(i.grep(a.childNodes),e=>{o.appendChild(e)}),o}}return n},jh=(e,t,n,s)=>{var o;if(s&&!1!==t.merge_siblings){const t=null!==(o=bh(e,$u(s),s))&&void 0!==o?o:s;bh(e,t,$u(t,!0))}},Vr=(e,t,n)=>{Ur(e.childNodes,e=>{$r(e)&&(t(e)&&n(e),e.hasChildNodes()&&Vr(e,t,n))})},_h=(e,t)=>n=>!!n&&!!_i(e,n,t),wh=(e,t,n)=>s=>{e.setStyle(s,t,n),""===s.getAttribute("style")&&s.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,s)},Sn=Ze([{keep:[]},{rename:["name"]},{removed:[]}]),m7=/^(src|href|style)$/,Ir=i.each,La=dd,kh=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Ah=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];if(c(o)){const e=o.childNodes.length-1;!n&&i&&i--,o=o.childNodes[i>e?e:i]}return s(o)&&n&&i>=o.data.length&&(o=new P(o,e.getBody()).next()||o),s(o)&&!n&&0===i&&(o=new P(o,e.getBody()).prev()||o),o},Sh=(e,t)=>{const s=t?"firstChild":"lastChild",n=e[s];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&n?"TR"===e.nodeName&&n[s]||n:e},Pr=(e,t,n,s)=>{var o;const i=e.create(n,s);return null===(o=t.parentNode)||void 0===o||o.insertBefore(i,t),i.appendChild(t),i},Fh=(e,n,s,o,i)=>{const a=t(n),r=t(e.create(o,i)),c=s?I3(a):H3(a);return ln(r,c),s?(_e(a,r),jm(r,a)):(At(a,r),H(r,a)),r.dom},Th=(e,t,n)=>{const r=t.parentNode;let s;const i=e.dom,a=ve(e);Je(n)&&r===i.getRoot()&&(n.list_block&&La(t,n.list_block)||o(fe(t.childNodes),t=>{ds(e,a,t.nodeName.toLowerCase())?s?s.appendChild(t):(s=Pr(i,t,a),i.setAttribs(s,ro(e))):s=null})),(e=>Se(e)&&R(e)&&ts(E(e,"mixed"),!0))(n)&&!La(n.inline,t)||i.remove(t,!0)},zh=(e,t,n)=>We(e)?{name:t,value:null}:{name:e,value:$t(t,n)},Dh=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Nh=(e,t,n,s,o)=>{let i=!1;Ir(n.styles,(a,r)=>{const{name:l,value:d}=zh(r,a,s),u=ld(d,l);(n.remove_similar||gn(d)||!c(o)||La(_i(e,o,l),u))&&e.setStyle(t,l,""),i=!0}),i&&Dh(e,t)},Lh=(e,t,n,s,i)=>{const r=e.dom,u=jc(e),l=e.schema;if(R(t)&&fi(l,t.inline)&&Io(l,s)&&s.parentElement===e.getBody())return Th(e,s,t),Sn.removed();if(!t.ceFalseOverride&&s&&"false"===r.getContentEditableParent(s))return Sn.keep();if(s&&!Ma(r,s,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(s,t))return Sn.keep();const a=s,d=t.preserve_attributes;if(R(t)&&"all"===t.remove&&L(d)){const e=m(r.getAttribs(a),e=>O(d,e.name.toLowerCase()));if(r.removeAllAttribs(a),o(e,e=>r.setAttrib(a,e.name,e.value)),e.length>0)return Sn.rename("span")}if("all"!==t.remove){Nh(r,a,t,n,i),Ir(t.attributes,(e,s)=>{const{name:l,value:d}=zh(s,e,n);if(t.remove_similar||gn(d)||!c(i)||La(r.getAttrib(i,l),d)){if("class"===l){const e=r.getAttrib(a,l);if(e){let t="";if(o(e.split(/\s+/),e=>{/mce-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void r.setAttrib(a,l,t)}}if(m7.test(l)&&a.removeAttribute("data-mce-"+l),"style"===l&&Re(["li"])(a)&&"none"===r.getStyle(a,"list-style-type"))return a.removeAttribute(l),void r.setStyle(a,"list-style-type","none");"class"===l&&a.removeAttribute("className"),a.removeAttribute(l)}}),Ir(t.classes,e=>{e=$t(e,n),c(i)&&!r.hasClass(i,e)||r.removeClass(a,e)});const e=r.getAttribs(a);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(!u.isAttributeInternal(n))return Sn.keep()}}return"none"!==t.remove?(Th(e,a,t),Sn.removed()):Sn.keep()},mo=(e,t,n,s,o)=>Lh(e,t,n,s,o).fold(S,t=>(e.dom.rename(s,t),!0),N),h7=(e,t,n,s)=>Lh(e,t,n,s,s).fold(a(s),t=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,t)),a(null)),Hh=(t,n,i,a,l)=>{const m=t.formatter.get(n),u=m[0],d=t.dom,b=t.selection,h=e=>{const s=((e,t,n,s,i)=>{let a;return t.parentNode&&o(wi(e.dom,t.parentNode).reverse(),t=>{if(!a&&c(t)&&"_start"!==t.id&&"_end"!==t.id){const o=Ge(e,t,n,s,i);o&&!1!==o.split&&(a=t)}}),a})(t,e,n,i,l);return((e,t,n,s,o,i,a,r)=>{var d,u;let c,l;const h=e.dom;if(n){const i=n.parentNode;for(let o=s.parentNode;o&&o!==i;o=o.parentNode){let n=h.clone(o,!1);for(let s=0;s<t.length&&(n=h7(e,t[s],r,n),null!==n);s++);n&&(c&&n.appendChild(c),l||(l=n),c=n)}a.mixed&&h.isBlock(n)||(s=null!==(d=h.split(n,s))&&void 0!==d?d:s),c&&l&&(null===(u=o.parentNode)||void 0===u||u.insertBefore(c,o),l.appendChild(o),R(a)&&jh(e,a,0,c))}return s})(t,m,s,e,e,0,u,i)},g=e=>z(m,n=>mo(t,n,i,e,e)),v=e=>{const n=fe(e.childNodes),i=g(e)||z(m,t=>Ma(d,e,t)),s=e.parentNode;if(!i&&r(s)&&Jl(u)&&g(s),u.deep&&n.length)for(let e=0;e<n.length;e++)v(n[e]);o(["underline","line-through","overline"],n=>{c(e)&&t.dom.getStyle(e,"text-decoration")===n&&e.parentNode&&Zu(d,e.parentNode)===n&&mo(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,e)})},f=e=>{const t=d.get(e?"_start":"_end");if(t){let n=t[e?"firstChild":"lastChild"];return(e=>Me(e)&&c(e)&&("_start"===e.id||"_end"===e.id))(n)&&(n=n[e?"firstChild":"lastChild"]),s(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),d.remove(t,!0),n}return null},p=n=>{let s,i,a=yn(d,n,m,n.collapsed);if(u.split){if(a=Ji(a),s=Ah(t,a,!0),i=Ah(t,a),s!==i){if(s=Sh(s,!0),i=Sh(i,!1),kh(d,s,i)){const t=e.from(s.firstChild).getOr(s);return h(Fh(d,t,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void f(!0)}if(kh(d,i,s)){const t=e.from(i.lastChild).getOr(i);return h(Fh(d,t,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void f(!1)}s=Pr(d,s,"span",{id:"_start","data-mce-type":"bookmark"}),i=Pr(d,i,"span",{id:"_end","data-mce-type":"bookmark"});const t=d.createRng();t.setStartAfter(s),t.setEndBefore(i),Is(d,t,e=>{o(e,e=>{Me(e)||Me(e.parentNode)||h(e)})}),h(s),h(i),s=f(!0),i=f()}else s=i=h(s);a.startContainer=s.parentNode?s.parentNode:s,a.startOffset=d.nodeIndex(s),a.endContainer=i.parentNode?i.parentNode:i,a.endOffset=d.nodeIndex(i)+1}Is(d,a,e=>{o(e,v)})};if(a){if(gi(a)){const e=d.createRng();e.setStartBefore(a),e.setEndAfter(a),p(e)}else p(a);M1(t,n,a,i)}else b.isCollapsed()&&R(u)&&!Bn(t).length?j7(t,n,i,l):(Bu(t,()=>Ad(t,p),e=>R(u)&&Jr(t,n,i,e)),t.nodeChanged()),((e,t,n)=>{"removeformat"===t?o(fh(e.selection),t=>{o(lh,n=>e.dom.setStyle(t,n,"")),Dh(e.dom,t)}):dh(e.formatter,t).each(t=>{o(fh(e.selection),s=>Nh(e.dom,s,t,n,null))})})(t,n,i),M1(t,n,a,i)},Ih=i.each,Pa=i.each,Vh=(e,t,n,s)=>{if(Pa(n.styles,(n,o)=>{e.setStyle(t,o,$t(n,s))}),n.styles){const n=e.getAttrib(t,"style");n&&e.setAttrib(t,"data-mce-style",n)}},$h=(e,n,a,l)=>{const p=e.formatter.get(n),d=p[0],w=!l&&e.selection.isCollapsed(),u=e.dom,b=e.selection,g=(e,t=d)=>{j(t.onformat)&&t.onformat(e,t,a,l),Vh(u,e,t,a),Pa(t.attributes,(t,n)=>{u.setAttrib(e,n,$t(t,a))}),Pa(t.classes,t=>{const n=$t(t,a);u.hasClass(e,n)||u.addClass(e,n)})},v=(e,t)=>{let n=!1;return Pa(e,e=>!(!Se(e)||("false"!==u.getContentEditable(t)||e.ceFalseOverride)&&(!r(e.collapsed)||e.collapsed===w)&&u.is(t,e.selector)&&!Ie(t)&&(g(t,e),n=!0,1))),n},O=e=>{if(h(e)){const t=u.create(e);return g(t),t}return null},y=(l,u,h)=>{const b=[];let f=!0;const j=d.inline||d.block,y=O(j);Is(l,u,i=>{let c;const u=i=>{let m=!1,w=f,O=!1;const _=i.parentNode,x=_.nodeName.toLowerCase(),C=l.getContentEditable(i);r(C)&&(w=f,f="true"===C,m=!0,O=qu(e,i));const E=f&&!m;if(F(i)&&!((e,n,s,o)=>{if(F9(e)&&R(n)&&s.parentNode){const n=vf(e.schema),i=B7(t(s),e=>Ie(e.dom));return vs(n,o)&&T(t(s.parentNode),!1)&&!i}return!1})(e,d,i,x))return c=null,void(Je(d)&&l.remove(i));if((t=>(e=>Je(e)&&!0===e.wrapper)(d)&&Ge(e,t,n,a))(i))c=null;else{if(((t,n,s)=>{const o=(e=>Je(e)&&!0!==e.wrapper)(d)&&fd(e.schema,t)&&ds(e,n,j);return s&&o})(i,x,E)){const e=l.rename(i,j);return g(e),b.push(e),void(c=null)}if(Se(d)){let e=v(p,i);if(!e&&r(_)&&Jl(d)&&(e=v(p,_)),!R(d)||e)return void(c=null)}r(y)&&((t,n,o,i)=>{const a=t.nodeName.toLowerCase(),r=ds(e,j,a)&&ds(e,n,j),c=!h&&s(t)&&Fa(t.data),u=Ie(t),m=!R(d)||!l.isBlock(t);return(o||i)&&r&&!c&&!u&&m})(i,x,E,O)?(c||(c=l.clone(y,!1),_.insertBefore(c,i),b.push(c)),O&&m&&(f=w),c.appendChild(i)):(c=null,o(fe(i.childNodes),u),m&&(f=w),c=null)}};o(i,u)}),!0===d.links&&o(b,e=>{const t=e=>{"A"===e.nodeName&&g(e,d),o(fe(e.childNodes),t)};t(e)}),o(b,t=>{const u=(e=>{let t=0;return o(e.childNodes,e=>{(e=>r(e)&&s(e)&&0===e.length)(e)||Me(e)||t++}),t})(t);!(b.length>1)&&l.isBlock(t)||0!==u?(R(d)||Je(d)&&d.wrapper)&&(d.exact||1!==u||(t=(e=>{const t=V(e.childNodes,Od).filter(e=>"false"!==l.getContentEditable(e)&&Ma(l,e,d));return t.map(t=>{const n=l.clone(t,!1);return g(n),l.replace(n,e,!0),l.remove(t,!0),n}).getOr(e)})(t)),((e,t,n,s)=>{Ih(t,t=>{R(t)&&Ih(e.dom.select(t.inline,s),s=>{$r(s)&&mo(e,t,n,s,t.exact?s:null)}),((e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";Ur(e.select(s,n),n=>{$r(n)&&vn(n)&&Ur(t.styles,(t,s)=>{e.setStyle(n,s,"")})})}})(e.dom,t,s)})})(e,p,a,t),((e,t,n,s,o)=>{const i=o.parentNode;Ge(e,i,n,s)&&mo(e,t,s,o)||t.merge_with_parents&&i&&e.dom.getParent(i,i=>!!Ge(e,i,n,s)&&(mo(e,t,s,o),!0))})(e,d,n,a,t),((e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=_h(e,"fontSize");Vr(s,e=>o(e)&&vn(e),wh(e,"backgroundColor",$t(t.styles.backgroundColor,n)))}})(l,d,a,t),((e,t,n,s)=>{const o=t=>{if(c(t)&&c(t.parentNode)&&vn(t)){const n=Zu(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(i.walk(s,o,"childNodes"),o(s))})(l,d,0,t),((e,t,n,s)=>{if(R(t)&&("sub"===t.inline||"sup"===t.inline)){const n=_h(e,"fontSize");Vr(s,e=>n(e)&&vn(e),wh(e,"fontSize",""));const o=m(e.select("sup"===t.inline?"sub":"sup",s),vn);e.remove(o,!0)}})(l,d,0,t),jh(e,d,0,t)):l.remove(t,!0)})},_=gi(l)?l:b.getNode();if("false"===u.getContentEditable(_)&&!qu(e,_))return v(p,l=_),void S1(e,n,l,a);if(d){if(l)if(gi(l)){if(!v(p,l)){const e=u.createRng();e.setStartBefore(l),e.setEndAfter(l),y(u,yn(u,e,p),!0)}}else y(u,l,!0);else w&&R(d)&&!Bn(e).length?((e,t,n)=>{let s;const i=e.selection,c=e.formatter.get(t);if(!c)return;const a=i.getRng();let o=a.startOffset;const r=a.startContainer.nodeValue;s=tn(e.getBody(),i.getStart());const l=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(r&&o>0&&o<r.length&&l.test(r.charAt(o))&&l.test(r.charAt(o-1))){const o=i.getBookmark();a.collapse(!0);let s=yn(e.dom,a,c);s=Ji(s),e.formatter.apply(t,n,s),i.moveToBookmark(o)}else{let r=s?J3(s):null;s&&r?.data===Rn||(d=e.getDoc(),u=Qr(!0).dom,s=d.importNode(u,!0),r=s.firstChild,a.insertNode(s),o=1),e.formatter.apply(t,n,s),i.setCursorLocation(r,o)}var d,u})(e,n,a):(b.setRng(hc(b.getRng())),Bu(e,()=>{Ad(e,(e,t)=>{const n=t?e:yn(u,e,p);y(u,n,!1)})},N),e.nodeChanged()),dh(e.formatter,n).each(t=>{o((e=>m((e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return uh(n,t[0])&&hh(n,t[0])?t:[];{const e=ue(t).filter(e=>uh(n,e)).toArray(),s=Gt(t).filter(e=>hh(n,e)).toArray(),o=t.slice(1,-1);return e.concat(o).concat(s)}})(e),mh(e.dom)))(e.selection),e=>Vh(u,e,t,a))});((e,t)=>{f(uo,e)&&o(uo[e],e=>{e(t)})})(n,e)}S1(e,n,l,a)},Wh=e=>f(e,"vars"),Uh=e=>e.selection.getStart(),Kh=(e,t,n,s,o)=>i1(t,t=>{const i=e.formatter.matchNode(t,n,o??{},s);return!re(i)},t=>!!U3(e,t,n)||!s&&r(e.formatter.matchNode(t,n,o,!0))),qh=(e,t)=>{const n=t??Uh(e);return m(wi(e.dom,n),e=>c(e)&&!Jt(e))},Yh=(e,t,n)=>{const s=qh(e,t);C(n,(n,i)=>{const a=n=>{const r=Kh(e,s,i,n.similar,Wh(n)?n.vars:void 0),a=r.isSome();if(n.state.get()!==a){n.state.set(a);const e=r.getOr(t);Wh(n)?n.callback(a,{node:e,format:i,parents:s}):o(n.callbacks,t=>t(a,{node:e,format:i,parents:s}))}};o([n.withSimilar,n.withoutSimilar],a),o(n.withVars,a)})};function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function Tr(e,t){return Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tr(e,t)}function d7(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fr(){return Fr=d7()?Reflect.construct:function(e,t,n){var o,s=[null];return s.push.apply(s,t),o=new(Function.bind.apply(e,s)),n&&Tr(o,n.prototype),o},Fr.apply(null,arguments)}function Ue(e){return function(e){if(Array.isArray(e))return Ar(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ar(e,t):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ar(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var l7=Object.hasOwnProperty,nm=Object.setPrototypeOf,c7=Object.isFrozen,r7=Object.getPrototypeOf,a7=Object.getOwnPropertyDescriptor,he=Object.freeze,tt=Object.seal,i7=Object.create,lm="undefined"!=typeof Reflect&&Reflect,Ua=lm.apply,fr=lm.construct;Ua||(Ua=function(e,t,n){return e.apply(t,n)}),he||(he=function(e){return e}),tt||(tt=function(e){return e}),fr||(fr=function(e,t){return Fr(e,Ue(t))});var hm,o7=Pe(Array.prototype.forEach),n7=Pe(Array.prototype.pop),go=Pe(Array.prototype.push),Ya=Pe(String.prototype.toLowerCase),X5=Pe(String.prototype.match),Pt=Pe(String.prototype.replace),G5=Pe(String.prototype.indexOf),q5=Pe(String.prototype.trim),de=Pe(RegExp.prototype.test),ar=(hm=TypeError,function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return fr(hm,n)});function Pe(e){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];return Ua(e,t,o)}}function _(e,t){nm&&nm(e,null);for(var n,s,o=t.length;o--;)n=t[o],"string"==typeof n&&(s=Ya(n),s!==n&&(c7(t)||(t[o]=s),n=s)),e[n]=!0;return e}function Fn(e){var t,n=i7(null);for(t in e)Ua(l7,e,[t])&&(n[t]=e[t]);return n}function Ko(e,t){for(;null!==e;){var n=a7(e,t);if(n){if(n.get)return Pe(n.get);if("function"==typeof n.value)return Pe(n.value)}e=r7(e)}return function(e){return console.warn("fallback value for",e),null}}var B,hl,g4,km=he(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tr=he(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dr=he(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),V5=he(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),pr=he(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),B5=he(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zm=he(["#text"]),Dm=he(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_r=he(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Lm=he(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$a=he(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),I5=tt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),N5=tt(/<%[\w\W]*|[\w\W]*%>/gm),D5=tt(/^data-[-\w.\u00B7-\uFFFF]/),z5=tt(/^aria-[-\w]+$/),T5=tt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i),F5=tt(/^(?:\w+script|data):/i),M5=tt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),S5=tt(/^html$/i),A5=function(){return"undefined"==typeof window?null:window},k5=function(e,t){if("object"!==An(e)||"function"!=typeof e.createPolicy)return null;var s,n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o)),s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:function(e){return e}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},E5=function e(){if(n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A5(),t=function(t){return e(t)},t.version="2.3.8",t.removed=[],!n||!n.document||9!==n.document.nodeType)return t.isSupported=!1,t;var L=n.document,d=n.document,ae=n.DocumentFragment,De=n.HTMLTemplateElement,R=n.Node,fe=n.Element,P=n.NodeFilter,le=n.NamedNodeMap,ke=void 0===le?n.NamedNodeMap||n.MozNamedAttrMap:le,Ae=n.HTMLFormElement,Ne=n.DOMParser,Le=n.trustedTypes,S=fe.prototype,Pe=Ko(S,"cloneNode"),Be=Ko(S,"nextSibling"),Ve=Ko(S,"childNodes"),K=Ko(S,"parentNode");"function"==typeof De&&(E=d.createElement("template"),E.content&&E.content.ownerDocument&&(d=E.content.ownerDocument));var u=k5(Le,L),Z=u?u.createHTML(""):"",C=d,z=C.implementation,Ee=C.createNodeIterator,$e=C.createDocumentFragment,Ie=C.getElementsByTagName,Fe=L.importNode,ve={};try{ve=Fn(d).documentMode?d.documentMode:{}}catch{}a={},t.isSupported="function"==typeof K&&z&&void 0!==z.createHTMLDocument&&9!==ve;var t,n,a,m,j,x,E,W=I5,N=N5,He=D5,ze=z5,Me=F5,_e=M5,I=T5,o=null,ge=_({},[].concat(Ue(km),Ue(tr),Ue(dr),Ue(pr),Ue(zm))),i=null,ue=_({},[].concat(Ue(Dm),Ue(_r),Ue(Lm),Ue($a))),s=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),y=null,q=null,ee=!0,G=!0,J=!1,b=!1,h=!1,D=!1,Y=!1,v=!1,k=!1,A=!1,oe=!0,U=!0,w=!1,p={},f=null,Q=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),X=null,me=_({},["audio","video","img","source","image","track"]),$=null,pe=_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),V="http://www.w3.org/1998/Math/MathML",B="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xhtml",M=l,ye=!1,Oe=["application/xhtml+xml","text/html"],Ce="text/html",g=null,xe=d.createElement("form"),we=function(e){return e instanceof RegExp||e instanceof Function},H=function(e){g&&g===e||(e&&"object"===An(e)||(e={}),e=Fn(e),o="ALLOWED_TAGS"in e?_({},e.ALLOWED_TAGS):ge,i="ALLOWED_ATTR"in e?_({},e.ALLOWED_ATTR):ue,$="ADD_URI_SAFE_ATTR"in e?_(Fn(pe),e.ADD_URI_SAFE_ATTR):pe,X="ADD_DATA_URI_TAGS"in e?_(Fn(me),e.ADD_DATA_URI_TAGS):me,f="FORBID_CONTENTS"in e?_({},e.FORBID_CONTENTS):Q,y="FORBID_TAGS"in e?_({},e.FORBID_TAGS):{},q="FORBID_ATTR"in e?_({},e.FORBID_ATTR):{},p="USE_PROFILES"in e&&e.USE_PROFILES,ee=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,J=e.ALLOW_UNKNOWN_PROTOCOLS||!1,b=e.SAFE_FOR_TEMPLATES||!1,h=e.WHOLE_DOCUMENT||!1,v=e.RETURN_DOM||!1,k=e.RETURN_DOM_FRAGMENT||!1,A=e.RETURN_TRUSTED_TYPE||!1,Y=e.FORCE_BODY||!1,oe=!1!==e.SANITIZE_DOM,U=!1!==e.KEEP_CONTENT,w=e.IN_PLACE||!1,I=e.ALLOWED_URI_REGEXP||I,M=e.NAMESPACE||l,e.CUSTOM_ELEMENT_HANDLING&&we(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(s.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&we(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(s.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(s.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),j=j=-1===Oe.indexOf(e.PARSER_MEDIA_TYPE)?Ce:e.PARSER_MEDIA_TYPE,m="application/xhtml+xml"===j?function(e){return e}:Ya,b&&(G=!1),k&&(v=!0),p&&(o=_({},Ue(zm)),i=[],!0===p.html&&(_(o,km),_(i,Dm)),!0===p.svg&&(_(o,tr),_(i,_r),_(i,$a)),!0===p.svgFilters&&(_(o,dr),_(i,_r),_(i,$a)),!0===p.mathMl&&(_(o,pr),_(i,Lm),_(i,$a))),e.ADD_TAGS&&(o===ge&&(o=Fn(o)),_(o,e.ADD_TAGS)),e.ADD_ATTR&&(i===ue&&(i=Fn(i)),_(i,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&_($,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(f===Q&&(f=Fn(f)),_(f,e.FORBID_CONTENTS)),U&&(o["#text"]=!0),h&&_(o,["html","head","body"]),o.table&&(_(o,["tbody"]),delete y.tbody),he&&he(e),g=e)},je=_({},["mi","mo","mn","ms","mtext"]),be=_({},["foreignobject","desc","title","annotation-xml"]),Se=_({},["title","style","font","a","script"]),F=_({},tr);_(F,dr),_(F,V5),x=_({},pr),_(x,B5);var Te=function(e){t=K(e),t&&t.tagName||(t={namespaceURI:l,tagName:"template"});var t,n=Ya(e.tagName),s=Ya(t.tagName);return e.namespaceURI===B?t.namespaceURI===l?"svg"===n:t.namespaceURI===V?"svg"===n&&("annotation-xml"===s||je[s]):Boolean(F[n]):e.namespaceURI===V?t.namespaceURI===l?"math"===n:t.namespaceURI===B?"math"===n&&be[s]:Boolean(x[n]):e.namespaceURI===l&&!(t.namespaceURI===B&&!be[s])&&!(t.namespaceURI===V&&!je[s])&&!x[n]&&(Se[n]||!F[n])},c=function(e){go(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch{try{e.outerHTML=Z}catch{e.remove()}}},T=function(e,n){try{go(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch{go(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!i[e])if(v||k)try{c(n)}catch{}else try{n.setAttribute(e,"")}catch{}},ce=function(e){if(Y)e="<remove></remove>"+e;else{var t,n,s,o,i=X5(e,/^[\r\n\t ]+/);s=i&&i[0]}if("application/xhtml+xml"===j&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>"),o=u?u.createHTML(e):e,M===l)try{t=(new Ne).parseFromString(o,j)}catch{}if(!t||!t.documentElement){t=z.createDocument(M,"template",null);try{t.documentElement.innerHTML=ye?"":o}catch{}}return n=t.body||t.documentElement,e&&s&&n.insertBefore(d.createTextNode(s),n.childNodes[0]||null),M===l?Ie.call(t,h?"html":"body")[0]:h?t.documentElement:n},re=function(e){return Ee.call(e.ownerDocument||e,e,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,null,!1)},Re=function(e){return e instanceof Ae&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof ke)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},O=function(e){return"object"===An(R)?e instanceof R:e&&"object"===An(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},r=function(e,n,s){a[e]&&o7(a[e],function(e){e.call(t,n,s,g)})},ie=function(e){if(r("beforeSanitizeElements",e,null),Re(e))return c(e),!0;if(de(/[\u0080-\uFFFF]/,e.nodeName))return c(e),!0;if(n=m(e.nodeName),r("uponSanitizeElement",e,{tagName:n,allowedTags:o}),e.hasChildNodes()&&!O(e.firstElementChild)&&(!O(e.content)||!O(e.content.firstElementChild))&&de(/<[/\w]/g,e.innerHTML)&&de(/<[/\w]/g,e.textContent))return c(e),!0;if("select"===n&&de(/<template/i,e.innerHTML))return c(e),!0;if(!o[n]||y[n]){if(!y[n]&&ne(n)){if(s.tagNameCheck instanceof RegExp&&de(s.tagNameCheck,n))return!1;if(s.tagNameCheck instanceof Function&&s.tagNameCheck(n))return!1}if(U&&!f[n]){var n,i,a,d=K(e)||e.parentNode,l=Ve(e)||e.childNodes;if(l&&d)for(a=l.length-1;a>=0;--a)d.insertBefore(Pe(l[a],!0),Be(e))}return c(e),!0}return e instanceof fe&&!Te(e)?(c(e),!0):"noscript"!==n&&"noembed"!==n||!de(/<\/no(script|embed)/i,e.innerHTML)?(b&&3===e.nodeType&&(i=e.textContent,i=Pt(i,W," "),i=Pt(i,N," "),e.textContent!==i&&(go(t.removed,{element:e.cloneNode()}),e.textContent=i)),r("afterSanitizeElements",e,null),!1):(c(e),!0)},se=function(e,t,n){if(oe&&("id"===t||"name"===t)&&(n in d||n in xe))return!1;if(G&&!q[t]&&de(He,t));else if(ee&&de(ze,t));else if(!i[t]||q[t]){if(!(ne(e)&&(s.tagNameCheck instanceof RegExp&&de(s.tagNameCheck,e)||s.tagNameCheck instanceof Function&&s.tagNameCheck(e))&&(s.attributeNameCheck instanceof RegExp&&de(s.attributeNameCheck,t)||s.attributeNameCheck instanceof Function&&s.attributeNameCheck(t))||"is"===t&&s.allowCustomizedBuiltInElements&&(s.tagNameCheck instanceof RegExp&&de(s.tagNameCheck,n)||s.tagNameCheck instanceof Function&&s.tagNameCheck(n))))return!1}else if($[t]);else if(de(I,Pt(n,_e,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==G5(n,"data:")||!X[e])if(J&&!de(Me,Pt(n,_e,"")));else if(n)return!1;return!0},ne=function(e){return e.indexOf("-")>0},te=function(e){if(r("beforeSanitizeAttributes",e,null),o=e.attributes,o){n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:i};for(l=o.length;l--;){var t,n,o,a,c,l,h,f,d=a=o[l],s=d.name,u=d.namespaceURI;if(t="value"===s?a.value:q5(a.value),c=m(s),h=t,n.attrName=c,n.attrValue=t,n.keepAttr=!0,n.forceKeepAttr=void 0,r("uponSanitizeAttribute",e,n),t=n.attrValue,!n.forceKeepAttr)if(n.keepAttr)if(de(/\/>/i,t))T(s,e);else if(b&&(t=Pt(t,W," "),t=Pt(t,N," ")),f=m(e.nodeName),se(f,c,t)){if(t!==h)try{u?e.setAttributeNS(u,s,t):e.setAttribute(s,t)}catch{T(s,e)}}else T(s,e);else T(s,e)}r("afterSanitizeAttributes",e,null)}},We=function e(t){var n,s=re(t);for(r("beforeSanitizeShadowDOM",t,null);n=s.nextNode();)r("uponSanitizeShadowNode",n,null),ie(n)||(n.content instanceof ae&&e(n.content),te(n));r("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(e,s){if((ye=!e)&&(e="<!-->"),"string"!=typeof e&&!O(e)){if("function"!=typeof e.toString)throw ar("toString is not a function");if("string"!=typeof(e=e.toString()))throw ar("dirty is not a string, aborting")}if(!t.isSupported){if("object"===An(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof e)return n.toStaticHTML(e);if(O(e))return n.toStaticHTML(e.outerHTML)}return e}if(D||H(s),t.removed=[],"string"==typeof e&&(w=!1),w){if(e.nodeName){var a,r,l,d,f,p,j,g=m(e.nodeName);if(!o[g]||y[g])throw ar("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof R)1===(f=(a=ce("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===f.nodeName||"HTML"===f.nodeName?a=f:a.appendChild(f);else{if(!v&&!b&&!h&&-1===e.indexOf("<"))return u&&A?u.createHTML(e):e;if(!(a=ce(e)))return v?null:A?Z:""}a&&Y&&c(a.firstChild);for(j=re(w?e:a);l=j.nextNode();)3===l.nodeType&&l===p||ie(l)||(l.content instanceof ae&&We(l.content),te(l),p=l);if(p=null,w)return e;if(v){if(k)for(d=$e.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return i.shadowroot&&(d=Fe.call(L,d,!0)),d}return r=h?a.outerHTML:a.innerHTML,h&&o["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&de(S5,a.ownerDocument.doctype.name)&&(r="<!DOCTYPE "+a.ownerDocument.doctype.name+`>
`+r),b&&(r=Pt(r,W," "),r=Pt(r,N," ")),u&&A?u.createHTML(r):r},t.setConfig=function(e){H(e),D=!0},t.clearConfig=function(){g=null,D=!1},t.isValidAttribute=function(e,t,n){g||H({});var s=m(e),o=m(t);return se(s,o,n)},t.addHook=function(e,t){"function"==typeof t&&(a[e]=a[e]||[],go(a[e],t))},t.removeHook=function(e){if(a[e])return n7(a[e])},t.removeHooks=function(e){a[e]&&(a[e]=[])},t.removeAllHooks=function(){a={}},t}(),et,Bo,Qe,eh,ys;const Gm=i.explode,Xm=()=>{const e={};return{addFilter:(t,n)=>{o(Gm(t),t=>{f(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)})},getFilters:()=>Sl(e),removeFilter:(t,n)=>{o(Gm(t),t=>{if(f(e,t))if(r(n)){const s=e[t],o=m(s.callbacks,e=>e!==n);o.length>0?s.callbacks=o:delete e[t]}else delete e[t]})}}},C5=(e,t,n)=>{var s;const a=Ml();t.convert_fonts_to_spans&&((e,t,n)=>{e.addNodeFilter("font",e=>{o(e,e=>{const s=t.parse(e.attr("style")),i=e.attr("color"),a=e.attr("face"),r=e.attr("size");i&&(s.color=i),a&&(s["font-family"]=a),r&&ka(r).each(e=>{s["font-size"]=n[e-1]}),e.name="span",e.attr("style",t.serialize(s)),((e)=>{o(["color","face","size"],t=>{e.attr(t,null)})})(e)})})})(e,a,i.explode(null!==(s=t.font_size_legacy_values)&&void 0!==s?s:"")),((e,t,n)=>{e.addNodeFilter("strike",e=>{const s="html4"!==t.type;o(e,e=>{if(s)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}})})})(e,n,a)},Or=t=>{const[o,...i]=t.split(","),s=i.join(","),n=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(n){const t=";base64"===n[2],o=t?(e=>{const t=/([a-z0-9+/=\s]+)/i.exec(e);return t?t[1]:""})(s):decodeURIComponent(s);return e.some({type:n[1],data:o,base64Encoded:t})}return e.none()},Jm=(t,n,s=!0)=>{let o=n;if(s)try{o=atob(n)}catch{return e.none()}const i=new Uint8Array(o.length);for(let e=0;e<i.length;e++)i[e]=o.charCodeAt(e);return e.some(new Blob([i],{type:t}))},e8=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var e;n(null===(e=s.error)||void 0===e?void 0:e.message)},s.readAsDataURL(e)});let x5=0;const n8=(t,n,s)=>Or(t).bind(({data:t,type:o,base64Encoded:i})=>{if(n&&!i)return e.none();{const e=i?t:btoa(t);return s(e,o)}}),s8=(e,t,n)=>{const s=e.create("blobid"+x5++,t,n);return e.add(s),s},o8=(t,n,s=!1)=>n8(n,s,(n,s)=>e.from(t.getByData(n,s)).orThunk(()=>Jm(s,n).map(e=>s8(t,e,n)))),i8=i.each,O5=i.trim,w5=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_5={ftp:21,http:80,https:443,mailto:25},y5=["img","video"],d8=(e,t,n)=>{const s=(e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}})(t);return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(s)||!e.allow_html_data_urls&&(/^data:image\//i.test(s)?((e,t)=>r(e)?!e:!r(t)||!O(y5,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)))};class Xe{constructor(e,t={}){this.path="",this.directory="",e=O5(e),this.settings=t;const s=t.base_uri,n=this;if(/^([\w-]+):([^/]{2})/i.test(e)||/^\s*#/.test(e))return void(n.source=e);const o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(s&&s.protocol||"http")+"://mce_host"+e),!/^[\w-]*:?\/\//.test(e)){const t=s?s.path:new Xe(document.location.href).directory;if(""===s?.protocol)e="//mce_host"+n.toAbsPath(t,e);else{const o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(s&&s.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@/]*):?([^:@/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&i8(w5,(e,t)=>{let s=i[t];s&&(s=s.replace(/\(mce_at\)/g,"@@")),n[e]=s}),s&&(n.protocol||(n.protocol=s.protocol),n.userInfo||(n.userInfo=s.userInfo),n.port||"mce_host"!==n.host||(n.port=s.port),n.host&&"mce_host"!==n.host||(n.host=s.host),n.source=""),o&&(n.protocol="")}static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),s=/data:([^;]+)/.exec(n[0]);return s&&(t=s[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;{const s=It.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!d8(n,s,t)}}static getDocumentBaseUrl(e){var n;let t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^/]+\//.test(t)&&(t=t.replace(/[?#].*$/,"").replace(/[/\\][^/]+$/,""),/[/\\]$/.test(t)||(t+="/")),t}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const t=new Xe(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();const n=this.getURI(),o=t.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;let s=this.toRelPath(this.path,t.path);return t.query&&(s+="?"+t.query),t.anchor&&(s+="#"+t.anchor),s}toAbsolute(e,t){const n=new Xe(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=this.protocol?_5[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n,o,a=0,r="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(i.length>=s.length)for(n=0,o=i.length;n<o;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}if(i.length<s.length)for(n=0,o=s.length;n<o;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}if(1===a)return t;for(n=0,o=i.length-(a-1);n<o;n++)r+="../";for(n=a-1,o=s.length;n<o;n++)r+=n!==a-1?"/"+s[n]:s[n];return r}toAbsPath(e,t){let o=0;const r=/\/$/.test(t)?"/":"",l=e.split("/"),s=t.split("/"),i=[];i8(l,e=>{e&&i.push(e)});const a=[];for(let e=s.length-1;e>=0;e--)0!==s[e].length&&"."!==s[e]&&(".."!==s[e]?o>0?o--:a.push(s[e]):o++);const c=i.length-o;let n;return n=c<=0?Ls(a).join("/"):i.slice(0,c).join("/")+"/"+Ls(a).join("/"),0!==n.indexOf("/")&&(n="/"+n),r&&n.lastIndexOf("/")!==n.length-1&&(n+=r),n}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const h8=i.makeMap,m8=i.extend,v5={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},p5=i.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),kr="data-mce-type",f5=(e,n)=>{const s=E5(),r=n.getSpecialElements(),i=e.validate;let a=0;return s.addHook("uponSanitizeElement",(s,c)=>{var u,m,p;8===s.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(u=s.nodeValue)&&void 0!==u?u:"")&&(s.nodeValue=" "+s.nodeValue);const g=c.tagName;if(1!==s.nodeType||"body"===g)return;const l=t(s),v=g.toLowerCase(),b=ya(l,kr),j=Fe(l,"data-mce-bogus");if(!b&&h(j))return void("all"===j?A(l):Ct(l));const d=n.getElementRule(v);if(!i||d){if(c.allowedTags[g]=!0,i&&d&&!b){if(o(null!==(m=d.attributesForced)&&void 0!==m?m:[],e=>{U(l,e.name,"{$uid}"===e.value?"mce_"+a++:e.value)}),o(null!==(p=d.attributesDefault)&&void 0!==p?p:[],e=>{ya(l,e.name)||U(l,e.name,"{$uid}"===e.value?"mce_"+a++:e.value)}),d.attributesRequired&&!z(d.attributesRequired,e=>ya(l,e)))return void Ct(l);if(d.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return t==null||0===t.length})(l))return void Ct(l);d.outputName&&d.outputName!==v&&((e,t)=>{const n=((e,t)=>{const n=$(t),s=s3(e);return Ot(n,s),n})(e,t);At(e,n);const s=q(e);ln(n,s),A(e)})(l,d.outputName)}}else f(r,v)?A(l):Ct(l)}),s.addHook("uponSanitizeAttribute",(t,s)=>{const a=t.tagName.toLowerCase(),{attrName:o,attrValue:r}=s;s.keepAttr=!i||n.isValid(a,o)||Y(o,"data-")||Y(o,"aria-"),o in p5&&d8(e,r,a)&&(s.keepAttr=!1),s.keepAttr?(s.allowedAttributes[o]=!0,o in n.getBoolAttrs()&&(s.attrValue=o),e.allow_svg_data_urls&&Y(r,"data:image/svg+xml")&&(s.forceKeepAttr=!0)):!t.hasAttribute(kr)||"id"!==o&&"class"!==o&&"style"!==o||(s.forceKeepAttr=!0)}),s},b8=(e,t,n)=>{const o=e.name,a=o in n&&"title"!==o&&"textarea"!==o,i=t.childNodes;for(let r=0,l=i.length;r<l;r++){const t=i[r],o=new le(t.nodeName.toLowerCase(),t.nodeType);if(c(t)){const e=t.attributes;for(let t=0,s=e.length;t<s;t++){const n=e[t];o.attr(n.name,n.value)}}else s(t)?(o.value=t.data,a&&(o.raw=!0)):(xt(t)||j5(t)||b5(t))&&(o.value=t.data);b8(o,t,n),e.append(o)}},Jn=(e={},t=Bt())=>{const s=Xm(),a=Xm(),n={validate:!0,root_name:"body",...e},_=new DOMParser,u=f5(n,t),m=s.addFilter,d=s.getFilters,p=s.removeFilter,v=a.addFilter,l=a.getFilters,j=a.removeFilter,y=(e,n)=>{const s=h(n.attr(kr)),o=1===n.type&&!f(e,n.name)&&!((e,t)=>1===t.type&&fi(e,t.name)&&h(t.attr(ws)))(t,n);return 3===n.type||o&&!s},c={schema:t,addAttributeFilter:v,getAttributeFilters:l,removeAttributeFilter:j,addNodeFilter:m,getNodeFilters:d,removeNodeFilter:p,parse:(e,s={})=>{var c;const p=n.validate,v=null!==(c=s.context)&&void 0!==c?c:n.root_name,h=((e,s,o="html")=>{const a="xhtml"===o?"application/xhtml+xml":"text/html",r=f(t.getSpecialElements(),s.toLowerCase()),c=r?`<${s}>${e}</${s}>`:e,l="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${c}</body></html>`:`<body>${c}</body>`,i=_.parseFromString(l,a).body;return u.sanitize(i,((e,t)=>{const n={...v5};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(n,a)),u.removed=[],r?i.firstChild:i})(e,v,s.format);Td(t,h);const i=new le(v,11);b8(i,h,t.getSpecialElements()),h.innerHTML="";const[w,O]=((e,t,n,s)=>{const d=n.validate,a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),u=m8(h8("script,style,head,html,body,title,meta,param"),t.getBlockElements()),h=vf(t),m=/[ \t\r\n]+/g,f=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,c=e=>{let t=e.parent;for(;r(t);){if(t.name in i)return!0;t=t.parent}return!1},o=e=>e.name in u&&!A6(t,e),l=(t,n)=>{const i=n?t.prev:t.next;return!r(i)&&!D(t.parent)&&o(t.parent)&&(t.parent!==e||!0===s.isRootContent)};return[e=>{var t;if(3===e.type&&!c(e)){let n=null!==(t=e.value)&&void 0!==t?t:"";n=n.replace(m," "),(((e,t)=>r(e)&&(t(e)||"br"===e.name))(e.prev,o)||l(e,!0))&&(n=n.replace(f,"")),0===n.length?e.remove():e.value=n}},e=>{var n;if(1===e.type){{const n=t.getElementRule(e.name);if(d&&n){const c=ao(t,a,i,e);n.paddInEmptyBlock&&c&&(e=>{let n=e;for(;r(n);){if(n.name in h)return ao(t,a,i,n);n=n.parent}return!1})(e)?bc(s,o,e):n.removeEmpty&&c?o(e)?e.remove():e.unwrap():n.paddEmpty&&(c||(e=>{var t;return C3(e,"#text")&&(null===(t=e?.firstChild)||void 0===t?void 0:t.value)===W})(e))&&bc(s,o,e)}}}else if(3===e.type&&!c(e)){let t=null!==(n=e.value)&&void 0!==n?n:"";(e.next&&o(e.next)||l(e,!1))&&(t=t.replace(p,"")),0===t.length?e.remove():e.value=t}}]})(i,t,n,s),a=[],x=p?e=>((e,n)=>{S3(t,e)&&n.push(e)})(e,a):g,b={nodes:{},attributes:{}},m=e=>_3(d(),l(),e,b);if(((e,t,n)=>{const s=[];for(let n=e,a=n;n;a=n,n=n.walk()){const i=n;o(t,e=>e(i)),D(i.parent)&&i!==e?n=a:s.push(i)}for(let e=s.length-1;e>=0;e--){const t=s[e];o(n,e=>e(t))}})(i,[w,m],[O,x]),a.reverse(),p&&a.length>0)if(s.context){const{pass:e,fail:n}=zs(a,e=>e.parent===i);mc(n,t,m),s.invalid=e.length>0}else mc(a,t,m);const j=((e,t)=>{var n;const s=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===s?"":!0===s?"p":s})(n,s);return j&&("body"===i.name||s.isRootContent)&&((e,s)=>{const r=m8(h8("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=/^[ \t\r\n]+/,l=/[ \t\r\n]+$/;let o=e.firstChild,i=null;const a=e=>{var t,n;e&&(o=e.firstChild,o&&3===o.type&&(o.value=null===(t=o.value)||void 0===t?void 0:t.replace(c,"")),o=e.lastChild,o&&3===o.type&&(o.value=null===(n=o.value)||void 0===n?void 0:n.replace(l,"")))};if(t.isValidChild(e.name,s.toLowerCase())){for(;o;){const t=o.next;y(r,o)?(i||(i=new le(s,1),i.attr(n.forced_root_block_attrs),e.insert(i,o)),i.append(o)):(a(i),i=null),o=t}a(i)}})(i,j),s.invalid||w3(b,s),i}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(e,t,s)=>{const o=i.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),r=n.getWhitespaceElements();o.body=1;const c=e=>e.name in o&&A6(n,e);for(let l=0,d=e.length;l<d;l++){let i=e[l],t=i.parent;if(t&&o[t.name]&&i===t.lastChild){{let e=i.prev;for(;e;){const t=e.name;if("span"!==t||"bookmark"!==e.attr("data-mce-type")){"br"===t&&(i=null);break}e=e.prev}if(i&&(i.remove(),ao(n,a,r,t))){const e=n.getElementRule(t.name);e&&(e.removeEmpty?t.remove():e.paddEmpty&&bc(s,c,t))}}}else{let e=i;for(;t&&t.firstChild===e&&t.lastChild===e&&(e=t,!o[t.name]);)t=t.parent;if(e===t){const e=new le("#text",3);e.value=W,i.replace(e)}}}}),e.addAttributeFilter("href",e=>{let n=e.length;const s=e=>{const t=e?i.trim(e):"";return/\b(noopener)\b/g.test(t)?t:(e=>e.split(" ").filter(e=>e.length>0).concat(["noopener"]).sort().join(" "))(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",s(t.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let n,o,s,t,i=e.length;for(;i--;)if(t=e[i],"a"===t.name&&t.firstChild&&!t.attr("href"))for(s=t.parent,n=t.lastChild;n&&s;)o=n.prev,s.insert(n,t),n=o}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,n,s=e.length;for(;s--;)if(t=e[s],n=t.parent,n&&("ul"===n.name||"ol"===n.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new le("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",e=>{let n=e.length;for(var t;n--;){const a=e[n],c=null!==(t=a.attr("class"))&&void 0!==t?t:"",r=i.explode(c," ");let o="";for(let n=0;n<r.length;n++){const i=r[n];let t=!1,e=s["*"];e&&e[i]&&(t=!0),e=s[a.name],!t&&e&&e[i]&&(t=!0),t&&(o&&(o+=" "),o+=i)}o.length||(o=null),a.attr("class",o)}}),((e,t)=>{const{blob_cache:n}=t;if(n){const t=e=>{const t=e.attr("src");(e=>e.attr("src")===b.transparentSrc||r(e.attr("data-mce-placeholder")))(e)||(e=>r(e.attr("data-mce-bogus")))(e)||D(t)||o8(n,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>o(e,t))}})(e,t)})(c,n),((e,t,n)=>{t.inline_styles&&C5(e,t,n)})(c,n,t),c},y8=(e,t)=>{const s=(e=>Ca(e)?Dt({validate:!1}).serialize(e):e)(e),n=t(s);if(n.isDefaultPrevented())return n;if(Ca(e)){if(n.content!==s){const t=Jn({validate:!1,forced_root_block:!1}).parse(n.content,{context:e.name});return{...n,content:t}}return{...n,content:e}}return n},_8=(e,t)=>{if(t.no_events)return ie.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?ie.error(T1(e,{content:"",...n}).content):ie.value(n)}},w8=(e,t,n)=>n.no_events?t:y8(t,t=>T1(e,{...n,content:t})).content,Dr=(e,t)=>{if(t.no_events)return ie.value(t);{const n=y8(t.content,n=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,{...t,content:n}));return n.isDefaultPrevented()?(F1(e,n),ie.error(void 0)):ie.value(n)}},Nr=(e,t,n)=>{n.no_events||F1(e,{...n,content:t})},ic=(e,t,n)=>({element:e,width:t,rows:n}),E8=(e,t)=>({element:e,cells:t}),h5=(e,t)=>({x:e,y:t}),A8=(e,t)=>gt(e,t).bind(ka).getOr(1),u5=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},M8=e=>be(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),F8=(t,n)=>{const s=t.rows;for(let t=0;t<s.length;t++){const o=s[t].cells;for(let s=0;s<o.length;s++)if(y(o[s],n))return e.some(h5(s,t))}return e.none()},T8=(e,t,n,s,o)=>{const i=[],a=e.rows;for(let e=n;e<=o;e++){const r=a[e].cells,c=t<s?r.slice(t,s+1):r.slice(s,t+1);i.push(E8(a[e].element,c))}return i},l5=e=>((e,t)=>{const n=Zn(e.element),s=$("tbody");return ln(s,t),H(n,s),n})(e,(e=>v(e.rows,e=>{const n=v(e.cells,e=>{const t=Fm(e);return K(t,"colspan"),K(t,"rowspan"),t}),t=Zn(e.element);return ln(t,n),t}))(e)),i5=(e,n)=>{const s=t(n.commonAncestorContainer),o=bt(s,e),r=m(o,og),i=((e,t)=>V(e,e=>"li"===k(e)&&Hd(e,t)).fold(a([]),t=>(e=>V(e,e=>"ul"===k(e)||"ol"===k(e)))(e).map(e=>{const t=$(k(e)),n=Us(fm(e),(e,t)=>Y(t,"list-style"));return Na(t,n),[$("li"),t]}).getOr([])))(o,n),c=r.concat(i.length?i:(e=>po(e)?Ve(e).filter(hr).fold(a([]),t=>[e,t]):hr(e)?[e]:[])(s));return v(c,Zn)},N8=()=>Nl([]),n5=(e,t)=>((e,t)=>xs(t,"table",d(y,e)))(e,t[0]).bind(e=>{const n=t[0],s=t[t.length-1],i=(e=>{const t=ic(Zn(e),0,[]);return o(te(e,"tr"),(e,n)=>{o(te(e,"td,th"),(s,o)=>{((e,t,n,s,o)=>{const a=A8(o,"rowspan"),r=A8(o,"colspan"),i=e.rows;for(let e=n;e<n+a;e++){i[e]||(i[e]=E8(Fm(s),[]));for(let s=t;s<t+r;s++)i[e].cells[s]=e===n&&s===t?o:Zn(o)}})(t,((e,t,n)=>{for(;u5(e,t,n);)t++;return t})(t,o,n),n,e,s)})}),ic(t.element,M8(t.rows),t.rows)})(e);return((e,t,n)=>F8(e,t).bind(t=>F8(e,n).map(n=>((e,t,n)=>{const i=t.x,s=t.y,a=n.x,o=n.y,r=s<o?T8(e,i,s,a,o):T8(e,i,o,a,s);return ic(e.element,M8(r),r)})(e,t,n))))(i,n,s).map(e=>Nl([l5(e)]))}).getOrThunk(N8),e5=(e,n)=>{const s=Au(n,e);return s.length>0?n5(e,s):((e,n)=>n.length>0&&n[0].collapsed?N8():((e,n)=>((e,t)=>{const n=be(t,(e,t)=>(H(t,e),t),e);return t.length>0?Nl([n]):n})(t(n.cloneContents()),i5(e,n)))(e,n[0]))(e,n)},xa=(e,t)=>t>=0&&t<e.length&&js(e.charAt(t)),H8=e=>_t(e.innerText),I8=e=>c(e)?e.outerHTML:s(e)?It.encodeRaw(e.data,!1):xt(e)?"<!--"+e.data+"-->":"",Jg=(e,t)=>(((e,t)=>{let n=0;o(e,e=>{0===e[0]?n++:1===e[0]?(((e,t,n)=>{const s=(e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s})(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];e.insertBefore(s,t)}else e.appendChild(s)})(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}})(t,n)})})(((e,t)=>{const i=e.length+t.length+2,s=new Array(i),n=new Array(i),o=(n,s,i,a,r)=>{const l=c(n,s,i,a);if(null===l||l.start===s&&l.diag===s-a||l.end===n&&l.diag===n-i){let o=n,c=i;for(;o<s||c<a;)o<s&&c<a&&e[o]===t[c]?(r.push([0,e[o]]),++o,++c):s-n>a-i?(r.push([2,e[o]]),++o):(r.push([1,t[c]]),++c)}else{o(n,l.start,i,l.start-l.diag,r);for(let t=l.start;t<l.end;++t)r.push([0,e[t]]);o(l.end,s,l.end-l.diag,a,r)}},a=(n,s,o,i)=>{let a=n;for(;a-s<i&&a<o&&e[a]===t[a-s];)++a;return((e,t,n)=>({start:e,end:t,diag:n}))(n,a,s)},c=(o,i,r,c)=>{const g=i-o,v=c-r;if(0===g||0===v)return null;const h=g-v,b=v+g,p=(b%2==0?b:b+1)/2;let u,d,l,m,f;for(s[1+p]=o,n[1+p]=i+1,u=0;u<=p;++u){for(d=-u;d<=u;d+=2){for(l=d+p,d===-u||d!==u&&s[l-1]<s[l+1]?s[l]=s[l+1]:s[l]=s[l-1]+1,m=s[l],f=m-o+r-d;m<i&&f<c&&e[m]===t[f];)s[l]=++m,++f;if(h%2!=0&&h-u<=d&&d<=h+u&&n[l-h]<=s[l])return a(n[l-h],d+o-r,i,c)}for(d=h-u;d<=h+u;d+=2){for(l=d+p-h,d===h-u||d!==h+u&&n[l+1]<=n[l-1]?n[l]=n[l+1]-1:n[l]=n[l-1],m=n[l]-1,f=m-o+r-d;m>=o&&f>=r&&e[m]===t[f];)n[l]=m--,f--;if(h%2==0&&-u<=d&&d<=u&&n[l]<=s[l+h])return a(n[l],d+o-r,i,c)}}return null},r=[];return o(0,e.length,0,t.length,r),r})(v(fe(t.childNodes),I8),e),t),t),Zg=on(()=>document.implementation.createHTMLDocument("undo")),ja=e=>{const o=(t=e.getBody(),m(v(fe(t.childNodes),I8),e=>e.length>0));var t;const n=mt(o,t=>{const n=b0(e.serializer,t);return n.length>0?[n]:[]}),s=n.join("");return(e=>-1!==e.indexOf("</iframe>"))(s)?(e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}))(n):(e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}))(s)},wc=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?Jg(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!r(s)||!bu(s)||!s.isFakeCaret}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},Ac=e=>"fragmented"===e.type?e.fragments.join(""):e.content,K8=e=>{const t=$("body",Zg());return Wi(t,Ac(e)),o(te(t,"*[data-mce-bogus]"),Ct),Tm(t)},Pc=(e,t)=>!!e&&!!t&&(!!((e,t)=>Ac(e)===Ac(t))(e,t)||((e,t)=>K8(e)===K8(t))(e,t)),$c=e=>0===e.get(),da=(e,t,n)=>{$c(n)&&(e.typing=t)},X8=(e,t)=>{e.typing&&(da(e,!1,t),e.add())},Q8=n=>({init:{bindEvents:g},undoManager:{beforeChange:(e,t)=>((e,t,n)=>{$c(t)&&n.set(Wr(e.selection))})(n,e,t),add:(e,t,s,o,a,r)=>((e,t,n,s,o,a,r)=>{const h=ja(e),c=i.extend(a||{},h);if(!$c(s)||e.removed)return null;const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:l,originalEvent:r}).isDefaultPrevented())return null;if(l&&Pc(l,c))return null;t.data[n.get()]&&o.get().each(e=>{t.data[n.get()].beforeBookmark=e});const u=W9(e);if(u&&t.data.length>u){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}c.bookmark=Wr(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const d={level:c,lastLevel:l,originalEvent:r};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),c})(n,e,t,s,o,a,r),undo:(e,t,s)=>((e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,da(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],wc(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o})(n,e,t,s),redo:(e,t)=>((e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],wc(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s})(n,e,t),clear:(e,t)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(n,e,t),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(e,t)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Pc(ja(e),t.data[0]))(n,e,t),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,n)=>((e,t,n)=>(X8(e,t),e.beforeChange(),e.ignore(n),e.add()))(e,t,n),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(e,t,s,o)=>((e,t,n,s,o)=>{if(t.transact(s)){const s=t.data[n.get()].bookmark,i=t.data[n.get()-1];wc(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=s)}})(n,e,t,s,o)},formatter:{match:(e,t,s,o)=>Jr(n,e,t,s,o),matchAll:(e,t)=>((e,t,n)=>{const s=[],o={},i=e.selection.getStart();return e.dom.getParent(i,i=>{for(let r=0;r<t.length;r++){const a=t[r];!o[a]&&Ge(e,i,a,n)&&(o[a]=!0,s.push(a))}},e.dom.getRoot()),s})(n,e,t),matchNode:(e,t,s,o)=>Ge(n,e,t,s,o),canApply:e=>((e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),t=wi(s,o);for(let e=n.length-1;e>=0;e--){const o=n[e];if(!Se(o))return!0;for(let e=t.length-1;e>=0;e--)if(s.is(t[e],o.selector))return!0}}return!1})(n,e),closest:s=>((n,s)=>{const o=e=>y(e,t(n.getBody()));return e.from(n.selection.getStart(!0)).bind(i=>rc(t(i),t=>ls(s,s=>((t,s)=>Ge(n,t.dom,s)?e.some(s):e.none())(t,s)),o)).getOrNull()})(n,s),apply:(e,t,s)=>$h(n,e,t,s),remove:(e,t,s,o)=>Hh(n,e,t,s,o),toggle:(e,t,s)=>((e,t,n,s)=>{const o=e.formatter.get(t);o&&(!Jr(e,t,n,s)||"toggle"in o[0]&&!o[0].toggle?$h(e,t,n,s):Hh(e,t,n,s))})(n,e,t,s),formatChanged:(e,t,s,i,a)=>((e,t,n,s,i,a)=>(((e,t,n,s,i,a)=>{const r=t.get();o(n.split(","),t=>{const n=E(r,t).getOrThunk(()=>{const e={withSimilar:{state:I(!1),similar:!0,callbacks:[]},withoutSimilar:{state:I(!1),similar:!1,callbacks:[]},withVars:[]};return r[t]=e,e}),o=()=>{const n=qh(e);return Kh(e,n,t,i,a).isSome()};if(re(a)){const e=i?n.withSimilar:n.withoutSimilar;e.callbacks.push(s),1===e.callbacks.length&&e.state.set(o())}else n.withVars.push({state:I(o()),similar:i,vars:a,callback:s})}),t.set(r)})(e,t,n,s,i,a),{unbind:()=>((e,t,n)=>{const s=e.get();o(t.split(","),e=>E(s,e).each(t=>{s[e]={withSimilar:{...t.withSimilar,callbacks:m(t.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...t.withoutSimilar,callbacks:m(t.withoutSimilar.callbacks,e=>e!==n)},withVars:m(t.withVars,e=>e.callback!==n)}})),e.set(s)})(t,n,s)}))(n,e,t,s,i,a)},editor:{getContent:t=>((t,n)=>e.from(t.getBody()).fold(a("tree"===n.format?new le("body",11):""),e=>X9(t,n,e)))(n,t),setContent:(s,o)=>((n,s,o)=>e.from(n.getBody()).map(e=>Ca(s)?((e,n,s,o)=>{O3(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),s);const a=Dt({validate:!1},e.schema).serialize(s),r=qa(t(n))?a:i.trim(a);return cc(e,r,o.no_selection),{content:s,html:r}})(n,e,s,o):((e,n,s,o)=>{if(0===s.length||/^\s+$/.test(s)){const t='<br data-mce-bogus="1">';"TABLE"===n.nodeName?s="<tr><td>"+t+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(s="<li>"+t+"</li>");const i=ve(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),i.toLowerCase())?(s=t,s=e.dom.createHTML(i,ro(e),s)):s||(s=t),cc(e,s,o.no_selection),{content:s,html:s}}{"raw"!==o.format&&(s=Dt({validate:!1},e.schema).serialize(e.parser.parse(s,{isRootContent:!0,insert:!0})));const a=qa(t(n))?s:i.trim(s);return cc(e,a,o.no_selection),{content:a,html:a}}})(n,e,s,o)).getOr({content:s,html:Ca(o.content)?"":o.content}))(n,s,o),insertContent:(e,t)=>W7(n,e,t),addVisual:e=>((e,t)=>{const n=e.dom,s=r(t)?t:e.getBody();o(n.select("table,a",s),t=>{switch(t.nodeName){case"TABLE":const s=cb(e),o=n.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?n.removeClass(t,s):n.addClass(t,s);break;case"A":if(!n.getAttrib(t,"href")){const o=n.getAttrib(t,"name")||t.id,s=Z4(e);o&&e.hasVisual?n.addClass(t,s):n.removeClass(t,s)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(n,e)},selection:{getContent:(s,o)=>((n,s,o={})=>{const i=((e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}))(o,s);return _8(n,i).fold(oe,s=>{const o=((n,s)=>{if("text"===s.format)return(n=>e.from(n.selection.getRng()).map(s=>{var i;const l=e.from(n.dom.getParent(s.commonAncestorContainer,n.dom.isBlock)),d=n.getBody(),u=(e=>e.map(e=>e.nodeName).getOr("div").toLowerCase())(l),a=t(s.cloneContents());y0(a),_0(a);const r=n.dom.add(d,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),o=H8(r),c=_t(null!==(i=r.textContent)&&void 0!==i?i:"");if(n.dom.remove(r),xa(c,0)||xa(c,c.length-1)){const n=l.getOr(d),e=H8(n),t=e.indexOf(o);return-1===t?o:(xa(e,t-1)?" ":"")+o+(xa(e,t+o.length)?" ":"")}return o}).getOr(""))(n);{const e=((e,n)=>{const i=e.selection.getRng(),s=e.dom.create("body"),a=e.selection.getSel(),r=fl(e,Kd(a)),o=n.contextual?e5(t(e.getBody()),r).dom:i.cloneContents();return o&&s.appendChild(o),e.selection.serializer.serialize(s,n)})(n,s);return"tree"===s.format?e:n.selection.isCollapsed()?"":e}})(n,s);return w8(n,o,s)})})(n,s,o)},autocompleter:{addDecoration:e=>sb(n,e),removeDecoration:()=>((e,t)=>d0(t).each(t=>{const n=e.selection.getBookmark();Ct(t),e.selection.moveToBookmark(n)}))(n,t(n.getBody()))},raw:{getModel:()=>e.none()}}),ct=e=>f(e.plugins,"rtc"),ul=e=>e.rtcInstance?e.rtcInstance:Q8(e),M=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},tf=e=>M(e).init.bindEvents(),nf=t=>0===t.dom.length?(A(t),e.none()):e.some(t),sf=(e,t,s,o)=>{e.bind(e=>((o?Ic:ma)(e.dom,o?e.dom.length:0),t.filter(we).map(t=>((e,t,n,s)=>{const i=e.dom,o=t.dom,a=s?i.length:o.length;s?(Hc(i,o,!1,!s),n.setStart(o,a)):(Hc(o,i,!1,!s),n.setEnd(o,a))})(e,t,s,o)))).orThunk(()=>{const e=((e,t)=>e.filter(e=>Bs.isBookmarkNode(e.dom)).bind(t?Os:Cn))(t,o).or(t).filter(we);return e.map(e=>((e,t)=>{Ve(e).each(s=>{const o=e.dom;t&&so(s,n(o,0))?ma(o,0):!t&&oo(s,n(o,o.length))&&Ic(o,o.length)})})(e,o))})},af=(e,t,n)=>{if(f(e,t)){const s=m(e[t],e=>e!==n);0===s.length?delete e[t]:e[t]=s}},rf=e=>!!e&&!!e.ownerDocument&&ut(t(e.ownerDocument),t(e)),cf=(i,a,l,d)=>{let m,g;const{selectorChangedWithUnbind:b}=((e,t)=>{let n,s;const i=(t,n)=>V(n,n=>e.is(n,t)),a=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,r)=>(n||(n={},s={},t.on("NodeChange",e=>{const r=e.element,t=a(r),c={};C(n,(e,n)=>{i(n,t).each(i=>{s[n]||(o(e,e=>{e(!0,{node:i,selector:n,parents:t})}),s[n]=e),c[n]=e})}),C(s,(e,n)=>{c[n]||(delete s[n],o(e,e=>{e(!1,{node:r,selector:n,parents:t})}))})})),n[e]||(n[e]=[]),n[e].push(r),i(e,a(t.selection.getStart())).each(()=>{s[e]=n[e]}),{unbind:()=>{af(n,e,r),af(s,e,r)}})}})(i,d),j=(n,s)=>((n,s,o={})=>{const i=((e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}))(o,s);Dr(n,i).each(s=>{const i=((e,t)=>{if("raw"!==t.format){const s=e.selection.getRng(),n=e.dom.getParent(s.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},i=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Dt({validate:!1},e.schema).serialize(i)}return t.content})(n,s),o=n.selection.getRng();((n,s)=>{const o=e.from(s.firstChild).map(t),i=e.from(s.lastChild).map(t);n.deleteContents(),n.insertNode(s);const a=o.bind(Cn).filter(we).bind(nf),r=i.bind(Os).filter(we).bind(nf);sf(a,o,n,!0),sf(r,i,n,!1),n.collapse(!1)})(o,o.createContextualFragment(i)),n.selection.setRng(o),Ks(n,o),Nr(n,i,s)})})(d,n,s),y=e=>{const t=u();t.collapse(!!e),h(t)},f=()=>a.getSelection?a.getSelection():a.document.selection,u=()=>{let e;const n=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch{return-1}},t=a.document;if(r(d.bookmark)&&!Wt(d)){const e=wl(d);if(e.isSome())return e.map(e=>fl(d,[e])[0]).getOr(t.createRange())}try{const n=f();n&&!pi(n.anchorNode)&&(e=n.rangeCount>0?n.getRangeAt(0):t.createRange(),e=fl(d,[e])[0])}catch{}if(e||(e=t.createRange()),Ws(e.startContainer)&&e.collapsed){const t=i.getRoot();e.setStart(t,0),e.setEnd(t,0)}return m&&g&&(0===n(e.START_TO_START,e,m)&&0===n(e.END_TO_END,e,m)?e=g:(m=null,g=null)),e},h=(e,t)=>{if(!(e=>!!e&&rf(e.startContainer)&&rf(e.endContainer))(e))return;const n=f();if(e=d.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){g=e;try{n.removeAllRanges(),n.addRange(e)}catch{}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),m=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&n?.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(t,0,t,1))}d.dispatch("AfterSetSelectionRange",{range:e,forward:t})},_=()=>{const e=f(),n=e?.anchorNode,s=e?.focusNode;if(!e||!n||!s||pi(n)||pi(s))return!0;const t=i.createRng(),o=i.createRng();try{t.setStart(n,e.anchorOffset),t.collapse(!0),o.setStart(s,e.focusOffset),o.collapse(!0)}catch{return!0}return t.compareBoundaryPoints(t.START_TO_START,o)<=0},p={dom:i,win:a,serializer:l,editor:d,expand:(e={type:"word"})=>h(un(i).expand(u(),e)),collapse:y,setCursorLocation:(e,t)=>{const n=i.createRng();r(e)&&r(t)?(n.setStart(e,t),n.setEnd(e,t),h(n),y(!1)):(Ld(i,n,d.getBody(),!0),h(n))},getContent:e=>((e,t={})=>((e,t,n)=>M(e).selection.getContent(t,n))(e,t.format?t.format:"html",t))(d,e),setContent:j,getBookmark:(e,t)=>v.getBookmark(e,t),moveToBookmark:e=>v.moveToBookmark(e),select:(t,n)=>(((t,n,s)=>e.from(n).bind(n=>e.from(n.parentNode).map(e=>{const i=t.nodeIndex(n),o=t.createRng();return o.setStart(e,i),o.setEnd(e,i+1),s&&(Ld(t,o,n,!0),Ld(t,o,n,!1)),o})))(i,t,n).each(h),t),isCollapsed:()=>{const e=u(),t=f();return!!e&&!e.item&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:_,setNode:e=>(j(i.getOuterHTML(e)),e),getNode:()=>((e,t)=>{if(!t)return e;let n=t.startContainer,o=t.endContainer;const a=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===o&&r-a<2&&n.hasChildNodes()&&(i=n.childNodes[a]),s(n)&&s(o)&&(n=n.length===a?o0(n.nextSibling,!0):n.parentNode,o=0===r?o0(o.previousSibling,!1):o.parentNode,n&&n===o&&(i=n)));const l=s(i)?i.parentNode:i;return c(l)?l:e})(d.getBody(),u()),getSel:f,setRng:h,getRng:u,getStart:e=>n0(d.getBody(),u(),e),getEnd:e=>s0(d.getBody(),u(),e),getSelectedBlocks:(e,t)=>((e,t,n,s)=>{const r=[],a=e.getRoot(),o=e.getParent(n||n0(a,t,t.collapsed),e.isBlock),i=e.getParent(s||s0(a,t,t.collapsed),e.isBlock);if(o&&o!==a&&r.push(o),o&&i&&o!==i){let t=o;const n=new P(o,a);for(;(t=n.next())&&t!==i;)e.isBlock(t)&&r.push(t)}return i&&o!==i&&i!==a&&r.push(i),r})(i,u(),e,t),normalize:()=>{const e=u(),t=f();if(!(Kd(t).length>1)&&li(d)){const t=Qi(i,e);return t.each(e=>{h(e,_())}),t.getOr(e)}return e},selectorChanged:(e,t)=>(b(e,t),p),selectorChangedWithUnbind:b,getScrollContainer:()=>{let t,e=i.getRoot();for(;e&&"BODY"!==e.nodeName;){if(e.scrollHeight>e.clientHeight){t=e;break}e=e.parentNode}return t},scrollIntoView:(e,t)=>{r(e)?((e,t,n)=>{(e.inline?Ab:Eb)(e,t,n)})(d,e,t):Ks(d,u(),t)},placeCaretAt:(e,t)=>h(t4(e,t,d.getDoc())),getBoundingClientRect:()=>{const e=u();return e.collapsed?n.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{a=m=g=null,w.destroy()}},v=Bs(p),w=H1(p,d);return p.bookmarkManager=v,p.controlSelection=w,p},Kg=(e,t,n)=>{-1===i.inArray(t,n)&&(e.addAttributeFilter(n,(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.push(n))},Ug=(n,s)=>{const u=["data-mce-selected"],h=s&&s.dom?s.dom:w.DOM,l=s&&s.schema?s.schema:Bt(n);n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs;const c=Jn(n,l);return((t,n,s)=>{t.addAttributeFilter("data-mce-tabindex",(e,t)=>{let n=e.length;for(;n--;){const s=e[n];s.attr("tabindex",s.attr("data-mce-tabindex")),s.attr(t,null)}}),t.addAttributeFilter("src,href,style",(e,t)=>{const o="data-mce-"+t,i=n.url_converter,r=n.url_converter_scope;let a=e.length;for(;a--;){const c=e[a];let n=c.attr(o);void 0!==n?(c.attr(t,n.length>0?n:null),c.attr(o,null)):(n=c.attr(t),"style"===t?n=s.serializeStyle(s.parseStyle(n),c.name):i&&(n=i.call(r,n,t,c.name)),c.attr(t,n.length>0?n:null))}}),t.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){const s=e[t];let n=s.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),s.attr("class",n.length>0?n:null))}}),t.addAttributeFilter("data-mce-type",(t,n,s)=>{let o=t.length;for(;o--;){const n=t[o];if("bookmark"===n.attr("data-mce-type")&&!s.cleanup){const t=e.from(n.firstChild).exists(e=>{var t;return!Fa(null!==(t=e.value)&&void 0!==t?t:"")});t?n.unwrap():n.remove()}}}),t.addNodeFilter("noscript",e=>{let n=e.length;for(var t;n--;){const s=e[n].firstChild;s&&(s.value=It.decode(null!==(t=s.value)&&void 0!==t?t:""))}}),t.addNodeFilter("script,style",(e,t)=>{const o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=e.length;for(var s;i--;){const c=e[i],a=c.firstChild,r=null!==(s=a?.value)&&void 0!==s?s:"";if("script"===t){const e=c.attr("type");e&&c.attr("type","mce-no/type"===e?null:e.replace(/^mce-/,"")),"xhtml"===n.element_format&&a&&r.length>0&&(a.value=`// <![CDATA[
`+o(r)+`
// ]]>`)}else"xhtml"===n.element_format&&a&&r.length>0&&(a.value=`<!--
`+o(r)+`
-->`)}}),t.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){const o=e[t],i=o.value;n.preserve_cdata&&0===i?.indexOf("[CDATA[")?(o.name="#cdata",o.type=4,o.value=s.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):0===i?.indexOf("mce:protected ")&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(i).substr(14))}}),t.addNodeFilter("xml:namespace,input",(e,t)=>{let n=e.length;for(;n--;){const s=e[n];7===s.type?s.remove():1===s.type&&("input"!==t||s.attr("type")||s.attr("type","text"))}}),t.addAttributeFilter("data-mce-type",e=>{o(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)})})(c,n,h),{schema:l,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:(e,o={})=>{const a={format:"html",...o},u=((e,t,n)=>((e,t)=>r(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let o;const a=e.dom;let s=t.cloneNode(!0);const r=document.implementation;if(r.createHTMLDocument){const e=r.createHTMLDocument("");i.each("BODY"===s.nodeName?s.childNodes:[s],t=>{e.body.appendChild(e.importNode(t,!0))}),s="BODY"!==s.nodeName?e.body.firstChild:e.body,o=a.doc,a.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...n,node:s}),o&&(a.doc=o),s})(e,t,n):t)(s,e,a),m=((e,n,s)=>{const o=_t(s.getInner?n.innerHTML:e.getOuterHTML(n));return s.selection||qa(t(n))?o:i.trim(o)})(h,u,a),d=((e,t,n)=>{const o=n.selection?{forced_root_block:!1,...n}:n,s=e.parse(t,o);return(e=>{const n=e=>"br"===e?.name,t=e.lastChild;if(n(t)){const e=t.prev;n(e)&&(t.remove(),e.remove())}})(s),s})(c,m,a);return"tree"===a.format?d:((e,t,n,s,o)=>{const i=((e,t,n)=>Dt(e,t).serialize(n))(t,n,s);return((e,t,n)=>{if(!t.no_events&&e){const s=((e,t)=>e.dispatch("PostProcess",t))(e,{...t,content:n});return s.content}return n})(e,o,i)})(s,n,l,d,a)},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:d(Kg,c,u),getTempAttrs:a(u),getNodeFilters:c.getNodeFilters,getAttributeFilters:c.getAttributeFilters,removeNodeFilter:c.removeNodeFilter,removeAttributeFilter:c.removeAttributeFilter}},uf=(e,t)=>{const n=Ug(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},El=(e,t,n={})=>{const s=((e,t)=>({format:"html",...e,set:!0,content:t}))(n,t);return Dr(e,s).map(t=>{const n=((e,t,n)=>ul(e).editor.setContent(t,n))(e,t.content,t);return Nr(e,n.html,t),n.content}).getOr(t)},Vg="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Bg="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Ig=e=>{const t=m(Vg,t=>f(e,t)),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),Un(t)},Hg=e=>{const t=i.makeMap(e.plugins," "),n=m(Bg,e=>f(t,e));return Un(n)},Xi=w.DOM,Gi=t=>e.from(t).each(e=>e.destroy()),qi=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>f(e,t)}})(),rs=J.ModelManager,_f=(e,t)=>t.dom[e],wf=(e,t)=>parseInt(st(t,e),10),Ng=d(_f,"clientWidth"),Dg=d(_f,"clientHeight"),zg=d(wf,"margin-top"),Tg=d(wf,"margin-left"),kf=n=>{const s=[],r=()=>{const e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},c=()=>e.from(s[0]),i=()=>{o(s,e=>{e.reposition()})},l=e=>{Ns(s,t=>t===e).each(e=>{s.splice(e,1)})},d=(o,a=!0)=>n.removed||!(n=>{return(s=n.inline?n.getBody():n.getContentAreaContainer(),e.from(s).map(t)).map(Vn).getOr(!1);var s})(n)?{}:(a&&n.dispatch("BeforeOpenNotification",{notification:o}),V(s,e=>{return t=r().getArgs(e),n=o,!(t.type!==n.type||t.text!==n.text||t.progressBar||t.timeout||n.progressBar||n.timeout);var t,n}).getOrThunk(()=>{n.editorManager.setActive(n);const e=r().open(o,()=>{l(e),i(),c().fold(()=>n.focus(),e=>z4(t(e.getEl())))});return(e=>{s.push(e)})(e),i(),n.dispatch("OpenNotification",{notification:{...e}}),e})),u=a(s);return(e=>{e.on("SkinLoaded",()=>{const t=h9(e);t&&d({text:t,type:"warning",timeout:0},!1),i()}),e.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(i)}),e.on("remove",()=>{o(s.slice(),e=>{r().close(e)})})})(n),{open:d,close:()=>{c().each(e=>{r().close(e),l(e),i()})},getNotifications:u}},ns=J.PluginManager,mn=J.ThemeManager,Mf=t=>{let n=[];const s=()=>{const e=t.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},a=(e,t)=>(...n)=>t?t.apply(e,n):void 0,i=e=>{(e=>{t.dispatch("CloseWindow",{dialog:e})})(e),n=m(n,t=>t!==e),0===n.length&&t.focus()},r=e=>{t.editorManager.setActive(t),Ol(t),t.ui.show();const s=e();return(e=>{n.push(e),(e=>{t.dispatch("OpenWindow",{dialog:e})})(e)})(s),s};return t.on("remove",()=>{o(n,e=>{s().close(e)})}),{open:(e,t)=>r(()=>s().open(e,t,i)),openUrl:e=>r(()=>s().openUrl(e,i)),alert:(e,t,n)=>{const o=s();o.alert(e,a(n||o,t))},confirm:(e,t,n)=>{const o=s();o.confirm(e,a(n||o,t))},close:()=>{e.from(n[n.length-1]).each(e=>{s().close(e),i(e)})}}},Ff=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Li=(e,t)=>{e._skinLoaded?Ff(e,t):e.on("SkinLoaded",()=>{Ff(e,t)})},No=(e,t,n)=>{A1(e,t,{message:n}),console.error(n)},Lo=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Fi=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Lf=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",s=`content${e.editorManager.suffix}.css`;return v(t,t=>(e=>/^[a-z0-9-]+$/i.test(e))(t)&&!e.inline?`${n}/${t}/${s}`:e.documentBaseURI.toAbsolute(t))},Eg=N,fp=(t,n)=>{const s={};return{findAll:(o,i=N)=>{const a=m((e=>e?fe(e.getElementsByTagName("img")):[])(o),e=>{const n=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!!n&&n!==b.transparentSrc&&(Y(n,"blob:")?!t.isUploaded(n)&&i(e):!!Y(n,"data:")&&i(e))}),c=v(a,t=>{const o=t.src;if(f(s,o))return s[o].then(e=>h(e)?e:{image:t,blobInfo:e.blobInfo});{const i=((t,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Y(n,"blob:")){const a=t.getByUri(n);return r(a)?Promise.resolve(a):(s=n,Y(s,"blob:")?(e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)))(s):Y(s,"data:")?(i=s,new Promise((e,t)=>{Or(i).bind(({type:e,data:t,base64Encoded:n})=>Jm(e,t,n)).fold(()=>t("Invalid data URI"),e)})):Promise.reject("Unknown URI format")).then(n=>e8(n).then(s=>n8(s,!1,s=>e.some(s8(t,n,s))).getOrThunk(o)))}var s,i;return Y(n,"data:")?o8(t,n).fold(o,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(n,o).then(e=>(delete s[o],{image:t,blobInfo:e})).catch(e=>(delete s[o],e));return s[o]=i,i}});return Promise.all(c)}}},Hf=()=>{let e={};const n=(e,t)=>({status:e,resultUri:t}),t=t=>t in e;return{hasBlobUri:t,getResultUri:t=>{const n=e[t];return n?n.resultUri:null},isPending:n=>!!t(n)&&1===e[n].status,isUploaded:n=>!!t(n)&&2===e[n].status,markPending:t=>{e[t]=n(1,null)},markUploaded:(t,s)=>{e[t]=n(2,s)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}};let xg=0;const _g=(t,n)=>{const s={},a=(e,t)=>new Promise((s,o)=>{const i=new XMLHttpRequest;i.open("POST",n.url),i.withCredentials=n.credentials,i.upload.onprogress=e=>{t(e.loaded/e.total*100)},i.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=()=>{if(i.status<200||i.status>=300)return void o("HTTP Error: "+i.status);const e=JSON.parse(i.responseText);var t,a;e&&h(e.location)?s((t=n.basePath,a=e.location,t?t.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):o("Invalid JSON: "+i.responseText)};const a=new FormData;a.append("file",e.blob(),e.filename()),i.send(a)}),r=j(n.handler)?n.handler:a,c=(e,t)=>({url:t,blobInfo:e,status:!0}),o=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),l=(e,t)=>{i.each(s[e],e=>{e(t)}),delete s[e]};return{upload:(d,u)=>n.url||r!==a?((n,a)=>(n=i.grep(n,e=>!t.isUploaded(e.blobUri())),Promise.all(i.map(n,n=>t.isPending(n.blobUri())?(e=>{const t=e.blobUri();return new Promise(e=>{s[t]=s[t]||[],s[t].push(e)})})(n):((n,s,i)=>(t.markPending(n.blobUri()),new Promise(a=>{let r,d;try{const u=()=>{r&&(r.close(),d=g)},m=e=>{u(),t.markUploaded(n.blobUri(),e),l(n.blobUri(),c(n,e)),a(c(n,e))},f=e=>{u(),t.removeFailed(n.blobUri()),l(n.blobUri(),o(n,e)),a(o(n,e))};d=t=>{t<0||t>100||e.from(r).orThunk(()=>e.from(i).map(Wd)).each(e=>{r=e,e.progressBar.value(t)})},s(n,d).then(m,e=>{f(h(e)?{message:e}:e)})}catch(e){a(o(n,e))}})))(n,r,a)))))(d,u):new Promise(e=>{e([])})}},Vf=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),$f=(e,t)=>_g(t,{url:xv(e),basePath:Cv(e),credentials:kv(e),handler:Av(e)}),yg=e=>{const n=(()=>{let e=[];const n=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const n=e.id||"blobid"+xg+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),s=e.name||n,t=e.blob;var o;return{id:a(n),name:a(s),filename:a(e.filename||s+"."+(o=t.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[o.toLowerCase()]||"dat")),blob:a(t),base64:a(e.base64),blobUri:a(e.blobUri||URL.createObjectURL(t)),uri:a(e.uri)}},t=t=>V(e,t).getOrUndefined(),s=e=>t(t=>t.id()===e);return{create:(e,t,s,o,i)=>{if(h(e))return n({id:e,name:o,filename:i,blob:t,base64:s});if(ne(e))return n(e);throw new Error("Unknown input type")},add:t=>{s(t.id())||e.push(t)},get:s,getByUri:e=>t(t=>t.blobUri()===e),getByData:(e,n)=>t(t=>t.base64()===e&&t.blob().type===n),findFirst:t,removeByUri:t=>{e=m(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{o(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]}}})();let i,r;const s=Hf(),j=[],d=t=>n=>e.selection?t(n):[],u=(e,t,n)=>{let s=0;do s=e.indexOf(t,s),-1!==s&&(e=e.substring(0,s)+n+e.substr(s+t.length),s+=n.length-t.length+1);while(-1!==s)return e},f=(e,t,n)=>{const s=`src="${n}"${n===b.transparentSrc?' data-mce-placeholder="1"':""}`;return e=u(e,`src="${t}"`,s),u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},c=(t,n)=>{o(e.undoManager.data,e=>{"fragmented"===e.type?e.fragments=v(e.fragments,e=>f(e,t,n)):e.content=f(e.content,t,n)})},p=()=>(i||(i=$f(e,s)),l().then(d(s=>{const a=v(s,e=>e.blobInfo);return i.upload(a,Vf(e)).then(d(i=>{const a=[];let r=!1;const l=v(i,(o,i)=>{const{blobInfo:u,image:l}=s[i];let d=!1;return o.status&&pv(e)?(o.url&&!Q(l.src,o.url)&&(r=!0),n.removeByUri(l.src),ct(e)||((n,s)=>{const i=e.convertURL(s,"src");var o;c(n.src,s),Ot(t(n),{src:h3(e)?(o=s,o+(-1===o.indexOf("?")?"?":"&")+(new Date).getTime()):s,"data-mce-src":i})})(l,o.url)):o.error&&(o.error.remove&&(c(l.src,b.transparentSrc),a.push(l),d=!0),((e,t)=>{Li(e,Le.translate(["Failed to upload image: {0}",t]))})(e,o.error.message)),{element:l,status:o.status,uploadUri:o.url,blobInfo:u,removed:d}});return a.length>0&&!ct(e)?e.undoManager.transact(()=>{o(a,t=>{e.dom.remove(t),n.removeByUri(t.src)})}):r&&e.undoManager.dispatchChange(),l}))}))),g=()=>m3(e)?p():Promise.resolve([]),_=e=>Xt(j,t=>t(e)),l=()=>(r||(r=fp(s,n)),r.findAll(e.getBody(),_).then(d(t=>{const n=m(t,t=>!h(t)||(Li(e,t),!1));return ct(e)||o(n,e=>{c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),n}))),y=t=>t.replace(/src="(blob:[^"]+)"/g,(t,o)=>{const a=s.getResultUri(o);if(a)return'src="'+a+'"';let i=n.getByUri(o);return i||(i=be(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(o),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t});return e.on("SetContent",()=>{m3(e)?g():l()}),e.on("RawSaveContent",e=>{e.content=y(e.content)}),e.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=y(e.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{o(e,e=>{const t=e.attr("src");if(!t||n.getByUri(t))return;const o=s.getResultUri(t);o&&e.attr("src",o)})})}),{blobCache:n,addFilter:e=>{j.push(e)},uploadImages:p,uploadImagesAuto:g,scanForImages:l,destroy:()=>{n.destroy(),s.destroy(),r=i=null}}},Uf={remove_similar:!0,inherit:!1},Qn={selector:"td,th",...Uf},vg={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Qn},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Qn},tablecellbordercolor:{styles:{borderColor:"%value"},...Qn},tablecellclass:{classes:["%value"],...Qn},tableclass:{selector:"table",classes:["%value"],...Uf},tablecellborderstyle:{styles:{borderStyle:"%value"},...Qn},tablecellborderwidth:{styles:{borderWidth:"%value"},...Qn}},gg=a(vg),Si=i.each,ye=w.DOM,ed=e=>r(e)&&ne(e),Zf=(e,t)=>{const a=t&&t.schema||Bt({}),n=e=>{const t=h(e)?{name:e,classes:[],attrs:{}}:e,n=ye.create(t.name);return((e,t)=>{t.classes.length>0&&ye.addClass(e,t.classes.join(" ")),ye.setAttribs(e,t.attrs)})(n,t),n},s=(e,t,o)=>{let r;const c=t[0],u=ed(c)?c.name:void 0,l=((e,t)=>{const s=a.getElementRule(e.nodeName.toLowerCase()),n=s?.parentsRequired;return!!n&&!!n.length&&(t&&O(n,t)?t:n[0])})(e,u);if(l)u===l?(r=c,t=t.slice(1)):r=l;else if(c)r=c,t=t.slice(1);else if(!o)return e;const d=r?n(r):ye.create("div");d.appendChild(e),o&&i.each(o,t=>{const s=n(t);d.insertBefore(s,e)});const h=ed(r)?r.siblings:void 0;return s(d,t,h)},o=ye.create("div");if(e.length>0){const t=e[0],i=n(t),a=ed(t)?t.siblings:void 0;o.appendChild(s(i,e.slice(1),a))}return o},mg=e=>{let n="div";const t={name:n,classes:[],attrs:{},selector:e=i.trim(e)};return"*"!==e&&(n=e.replace(/(?:([#.]|::?)([\w-]+)|(\[)([^\]]+)\]?)/g,(e,n,s,o,a)=>{switch(n){case"#":t.attrs.id=s;break;case".":t.classes.push(s);break;case":":-1!==i.inArray("checked disabled enabled read-only required".split(" "),s)&&(t.attrs[s]=s)}if("["===o){const e=a.match(/([\w-]+)(?:="([^"]+))?/);e&&(t.attrs[e[1]]=e[2])}return""})),t.name=n||"div",t},hg=(e,t)=>{let l="",a=x9(e);if(""===a)return"";const d=e=>h(e)?e.replace(/%(\w+)/g,""):"",u=(t,n)=>ye.getStyle(n??e.getBody(),t,!0);if(h(t)){const n=e.formatter.get(t);if(!n)return"";t=n[0]}if("preview"in t){const e=t.preview;if(!1===e)return"";a=e||a}let n,r=t.block||t.inline||"span";const c=(s=t.selector,h(s)?(s=(s=s.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),i.map(s.split(/(?:>|\s+(?![^[\]]+\]))/),e=>{const t=i.map(e.split(/(?:~\+|~|\+)/),mg),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]);var s;c.length>0?(c[0].name||(c[0].name=r),r=t.selector,n=Zf(c,e)):n=Zf([r],e);const o=ye.select(r,n)[0]||n.firstChild;Si(t.styles,(e,t)=>{const n=d(e);n&&ye.setStyle(o,t,n)}),Si(t.attributes,(e,t)=>{const n=d(e);n&&ye.setAttrib(o,t,n)}),Si(t.classes,e=>{const t=d(e);ye.hasClass(o,t)||ye.addClass(o,t)}),e.dispatch("PreviewFormats"),ye.setStyles(n,{position:"absolute",left:-65535}),e.getBody().appendChild(n);const m=u("fontSize"),f=/px$/.test(m)?parseInt(m,10):0;return Si(a.split(" "),e=>{let t=u(e,o);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=u(e),"#ffffff"===oi(t).toLowerCase())||"color"===e&&"#000000"===oi(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===f)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*f+"px"}"border"===e&&t&&(l+="padding:0 2px;"),l+=e+":"+t+";"}}),e.dispatch("AfterPreviewFormats"),ye.remove(n),l},t6=t=>{const n=(e=>{const t={},n=(e,s)=>{e&&(h(e)?(L(s)||(s=[s]),o(s,e=>{re(e.deep)&&(e.deep=!Se(e)),re(e.split)&&(e.split=!Se(e)||R(e)),re(e.remove)&&Se(e)&&!R(e)&&(e.remove="none"),Se(e)&&R(e)&&(e.mixed=!0,e.block_expand=!0),h(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=s):C(e,(e,t)=>{n(t,e)}))};return n((e=>{const t=e.dom,s=e.schema.type,n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==s?[n,e,t]:[e,n,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e)=>c(e)&&e.hasAttribute("href"),onformat:(e,n,s)=>{i.each(s,(n,s)=>{t.setAttrib(e,s,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=e?.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return i.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{n[e]={block:e,remove:"all"}}),n})(e)),n(gg()),n(O9(e)),{get:e=>r(e)?t[e]:t,has:e=>f(t,e),register:n,unregister:e=>(e&&t[e]&&delete t[e],t)}})(t),s=I({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(e=>{e.on("mouseup keydown",t=>{((e,t)=>{const n=e.selection,s=e.getBody();Gr(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Rn||Gr(e,tn(s,n.getStart())),37!==t&&39!==t||Gr(e,tn(s,n.getStart()))})(e,t.keyCode)})})(t),ct(t)||((t,n)=>{t.set({}),n.on("NodeChange",e=>{Yh(n,e.element,t.get())}),n.on("FormatApply FormatRemove",s=>{const o=e.from(s.node).map(e=>gi(e)?e:e.startContainer).bind(t=>c(t)?e.some(t):e.from(t.parentElement)).getOrThunk(()=>Uh(n));Yh(n,o,t.get())})})(s,t),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(e,n,s)=>{((e,t,n,s)=>{M(e).formatter.apply(t,n,s)})(t,e,n,s)},remove:(e,n,s,o)=>{((e,t,n,s,o)=>{M(e).formatter.remove(t,n,s,o)})(t,e,n,s,o)},toggle:(e,n,s)=>{((e,t,n,s)=>{M(e).formatter.toggle(t,n,s)})(t,e,n,s)},match:(e,n,s,o)=>((e,t,n,s,o)=>M(e).formatter.match(t,n,s,o))(t,e,n,s,o),closest:e=>((e,t)=>M(e).formatter.closest(t))(t,e),matchAll:(e,n)=>((e,t,n)=>M(e).formatter.matchAll(t,n))(t,e,n),matchNode:(e,n,s,o)=>((e,t,n,s,o)=>M(e).formatter.matchNode(t,n,s,o))(t,e,n,s,o),canApply:e=>((e,t)=>M(e).formatter.canApply(t))(t,e),formatChanged:(e,n,o,i)=>((e,t,n,s,o,i)=>M(e).formatter.formatChanged(t,n,s,o,i))(t,s,e,n,o,i),getCssText:d(hg,t)}},n6=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},s6=e=>{const o=Rt(),s=I(0),n=I(0),t={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{M(e).undoManager.beforeChange(t,n)})(e,s,o)},add:(i,a)=>((e,t,n,s,o,i,a)=>M(e).undoManager.add(t,n,s,o,i,a))(e,t,n,s,o,i,a),dispatchChange:()=>{e.setDirty(!0);const s=ja(e);s.bookmark=Wr(e.selection),e.dispatch("change",{level:s,lastLevel:xi(t.data,n.get()).getOrUndefined()})},undo:()=>((e,t,n,s)=>M(e).undoManager.undo(t,n,s))(e,t,s,n),redo:()=>((e,t,n)=>M(e).undoManager.redo(t,n))(e,n,t.data),clear:()=>{((e,t,n)=>{M(e).undoManager.clear(t,n)})(e,t,n)},reset:()=>{((e,t)=>{M(e).undoManager.reset(t)})(e,t)},hasUndo:()=>((e,t,n)=>M(e).undoManager.hasUndo(t,n))(e,t,n),hasRedo:()=>((e,t,n)=>M(e).undoManager.hasRedo(t,n))(e,t,n),transact:n=>((e,t,n,s)=>M(e).undoManager.transact(t,n,s))(e,t,s,n),ignore:t=>{((e,t,n)=>{M(e).undoManager.ignore(t,n)})(e,s,t)},extra:(s,o)=>{((e,t,n,s,o)=>{M(e).undoManager.extra(t,n,s,o)})(e,t,n,s,o)}};return ct(e)||((e,t,n)=>{const o=I(!1),s=e=>{da(t,!1,n),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{const s=e.command;n6(s)||(X8(t,n),t.beforeChange())}),e.on("ExecCommand",e=>{const t=e.command;n6(t)||s(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",s),e.on("dragend",s),e.on("keyup",n=>{const i=n.keyCode;n.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||n.ctrlKey)&&(s(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),o.get()&&t.typing&&!Pc(ja(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),o.set(!1),e.nodeChanged()))}),e.on("keydown",e=>{const i=e.keyCode;if(e.isDefaultPrevented())return;if(i>=33&&i<=36||i>=37&&i<=40||45===i)return void(t.typing&&s(e));const a=e.ctrlKey&&!e.altKey||e.metaKey;!(i<16||i>20)||224===i||91===i||t.typing||a||(t.beforeChange(),da(t,!0,n),t.add({},e),o.set(!0))}),e.on("mousedown",e=>{t.typing&&s(e)}),e.on("input",e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&s(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})})(e,t,s),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),t},ug=[9,27,u.HOME,u.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,u.DOWN,u.UP,u.LEFT,u.RIGHT].concat(b.browser.isFirefox()?[224]:[]),i6="data-mce-placeholder",a6=e=>"keydown"===e.type||"keyup"===e.type,r6=e=>{const t=e.keyCode;return t===u.BACKSPACE||t===u.DELETE},lg=(e,t)=>({from:e,to:t}),id=(e,n)=>{const s=t(e),o=t(n.container());return pa(s,o).map(e=>((e,t)=>({block:e,position:t}))(e,n))},d6=(e,t)=>Kt(t,e=>vo(e)||Be(e.dom),t=>y(t,e)).filter(ge).getOr(e),u6=e=>{const t=(e=>{const t=q(e);return Ns(t,Ne).fold(a(t),e=>t.slice(0,e))})(e);return o(t,A),t},h6=(e,t)=>{const n=bt(t,e);return V(n.reverse(),e=>T(e)).each(A)},sg=(e,t,s,i)=>{if(T(s))return kn(s),ae(s.dom);0===m(H3(i),e=>!T(e)).length&&T(t)&&_e(i,$("br"));const a=je(s.dom,n.before(i.dom));return o(u6(t),e=>{_e(i,e)}),h6(e,t),a},ng=(e,t,n)=>{if(T(n))return A(n),T(t)&&kn(t),ae(t.dom);const s=at(n.dom);return o(u6(t),e=>{H(n,e)}),h6(e,t),s},p6=(n,s)=>{es(n,s.dom).bind(t=>e.from(t.getNode())).map(t).filter(En).each(A)},g6=(t,n,s)=>(p6(!0,n),p6(!1,s),((t,n)=>ut(n,t)?((t,n)=>{const s=bt(n,t);return e.from(s[s.length-1])})(n,t):e.none())(n,s).fold(d(ng,t,n,s),d(sg,t,n,s))),v6=(e,t,n,s)=>t?g6(e,s,n):g6(e,n,s),ad=(s,o)=>{const i=t(s.getBody()),a=((s,o,i)=>i.collapsed?((s,o,i)=>{const a=id(s,n.fromRangeStart(i)),r=a.bind(t=>Oe(o,s,t.position).bind(t=>id(s,t).map(t=>((t,n,s)=>F(s.position.getNode())&&!T(s.block)?es(!1,s.block.dom).bind(o=>o.isEqual(s.position)?Oe(n,t,o).bind(e=>id(t,e)):e.some(s)).getOr(s):s)(s,o,t))));return se(a,r,lg).filter(e=>(e=>!y(e.from.block,e.to.block))(e)&&((e,n)=>{const s=t(e);return y(d6(s,n.from.block),d6(s,n.to.block))})(s,e)&&(e=>!1===x(e.from.block.dom)&&!1===x(e.to.block.dom))(e)&&(e=>{const t=e=>c6(e)||M6(e.dom);return t(e.from.block)&&t(e.to.block)})(e))})(s,o,i):e.none())(i.dom,o,s.selection.getRng()).map(e=>()=>{v6(i,o,e.from.block,e.to.block).each(e=>{s.selection.setRng(e.toRange())})});return a},j6=(e,n)=>{const s=t(n),o=d(y,e);return Lt(s,vo,o).isSome()},Qp=s=>{const o=t(s.getBody());return((e,t)=>{const s=je(e.dom,n.fromRangeStart(t)).isNone(),o=me(e.dom,n.fromRangeEnd(t)).isNone();return!((e,t)=>j6(e,t.startContainer)||j6(e,t.endContainer))(e,t)&&s&&o})(o,s.selection.getRng())?(t=>e.some(()=>{t.setContent(""),t.selection.setCursorLocation()}))(s):((n,s)=>{const o=s.getRng();return se(pa(n,t(o.startContainer)),pa(n,t(o.endContainer)),(t,i)=>y(t,i)?e.none():e.some(()=>{o.deleteContents(),v6(n,!0,t,i).each(e=>{s.setRng(e.toRange())})})).getOr(e.none())})(o,s.selection)},cd=(t)=>t.selection.isCollapsed()?e.none():Qp(t),dt=(t,n,s,o,i)=>e.from(n._selectionOverrides.showCaret(t,s,o,i)),Po=(t,n)=>t.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?e.none():e.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(n)),bd=(t,s,o)=>s.collapsed?((t,s,o)=>{const l=kd(1,t.getBody(),s),i=n.fromRangeStart(l),a=i.getNode();if(Hs(a))return dt(1,t,a,!i.isAtEnd(),!1);const r=i.getNode(!0);if(Hs(r))return dt(1,t,r,!1,!1);const c=xn(t.dom.getRoot(),i.getNode());return Hs(c)?dt(1,t,c,!1,o):e.none()})(t,s,o).getOr(s):s,Yp=e=>Ft(e)||Xs(e),qp=e=>Mt(e)||Zs(e),k6=(e,t,n,o,i,a)=>{dt(o,e,a.getNode(!i),i,!0).each(n=>{if(t.collapsed){const e=t.cloneRange();i?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)}),((e,t)=>{s(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},jd=(t,n)=>((t,n)=>{const i=t.selection.getRng();if(!s(i.commonAncestorContainer))return e.none();const c=n?B.Forwards:B.Backwards,u=Ke(t.getBody()),h=d(Fd,n?u.next:u.prev),m=n?Yp:qp,a=Ms(c,t.getBody(),i),l=h(a),o=l&&Ae(n,l);if(!o||!ui(a,o))return e.none();if(m(o))return e.some(()=>k6(t,i,a.getNode(),c,n,o));const r=h(o);return r&&m(r)&&ui(o,r)?e.some(()=>k6(t,i,a.getNode(),c,n,r)):e.none()})(t,n),Sd=(e,t)=>{const n=e.getBody();return t?ae(n).filter(Ft):at(n).filter(Mt)},Md=e=>{const t=e.selection.getRng();return!t.collapsed&&(Sd(e,!0).exists(e=>e.isEqual(n.fromRangeStart(t)))||Sd(e,!1).exists(e=>e.isEqual(n.fromRangeEnd(t))))},Ce=Ze([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),T6=(n,s,o)=>Oe(s,n,o).bind(i=>{return a=i.getNode(),r(a)&&(vo(t(a))||po(t(a)))||((e,n,s,o)=>{const i=n=>Kr(t(n))&&!lt(s,o,e);return Lu(!n,s).fold(()=>Lu(n,o).fold(S,i),i)})(n,s,o,i)?e.none():s&&x(i.getNode())||!s&&x(i.getNode(!0))?((n,s,o,i)=>{const a=i.getNode(!s);return pa(t(n),t(o.getNode())).map(e=>T(e)?Ce.remove(e.dom):Ce.moveToElement(a)).orThunk(()=>e.some(Ce.moveToElement(a)))})(n,s,o,i):s&&Mt(o)||!s&&Ft(o)?e.some(Ce.moveToPosition(i)):e.none();var a}),z6=(t,n)=>e.from(xn(t.getBody(),n)),Wp=(s,o)=>{const i=s.selection.getNode();return z6(s,i).filter(x).fold(()=>((s,o,i)=>{const l=kd(o?1:-1,s,i),a=n.fromRangeStart(l),r=t(s);return!o&&Mt(a)?e.some(Ce.remove(a.getNode(!0))):o&&Ft(a)?e.some(Ce.remove(a.getNode())):!o&&Ft(a)&&Kc(r,a)?u9(r,a).map(e=>Ce.remove(e.getNode())):o&&Mt(a)&&Yc(r,a)?d9(r,a).map(e=>Ce.remove(e.getNode())):((t,n,s)=>((e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return c(n)&&n.getAttribute("data-mce-caret")===s})(n,s)?((t,n)=>D(n)?e.none():t&&x(n.nextSibling)?e.some(Ce.moveToElement(n.nextSibling)):!t&&x(n.previousSibling)?e.some(Ce.moveToElement(n.previousSibling)):e.none())(n,s.getNode(!n)).orThunk(()=>T6(t,n,s)):T6(t,n,s).bind(n=>((t,n,s)=>s.fold(t=>e.some(Ce.remove(t)),t=>e.some(Ce.moveToElement(t)),s=>lt(n,s,t)?e.none():e.some(Ce.moveToPosition(s))))(t,s,n)))(s,o,a)})(s.getBody(),o,s.selection.getRng()).map(e=>()=>e.fold(((e,n)=>s=>(e._selectionOverrides.hideFakeCaret(),Qt(e,n,t(s)),!0))(s,o),((e,t)=>s=>{const o=t?n.before(s):n.after(s);return e.selection.setRng(o.toRange()),!0})(s,o),(e=>t=>(e.selection.setRng(t.toRange()),!0))(s))),()=>e.some(g))},N6=e=>{const s=e.dom,o=e.selection,t=xn(e.getBody(),o.getNode());if(Be(t)&&s.isBlock(t)&&s.isEmpty(t)){const e=s.create("br",{"data-mce-bogus":"1"});s.setHTML(t,""),t.appendChild(e),o.setRng(n.before(e).toRange())}return!0},zd=(n,s)=>n.selection.isCollapsed()?Wp(n,s):((n,s)=>{const i=n.selection.getNode();return x(i)&&!oa(i)?z6(n,i.parentNode).filter(x).fold(()=>e.some(()=>{var e=t(n.getBody());o(te(e,".mce-offscreen-selection"),A),Qt(n,s,t(n.selection.getNode())),zc(n)}),()=>e.some(g)):Md(n)?e.some(()=>{U2(n,n.selection.getRng(),t(n.getBody()))}):e.none()})(n,s),Dd=(t,s)=>t.selection.isCollapsed()?((e,t)=>{const s=n.fromRangeStart(e.selection.getRng());return Oe(t,e.getBody(),s).filter(e=>t?H9(e):P9(e)).bind(e=>_d(t?0:-1,e)).map(t=>()=>e.selection.select(t))})(t,s):e.none(),Kn=s,H6=e=>Kn(e)&&e.data[0]===X,I6=e=>Kn(e)&&e.data[e.data.length-1]===X,B6=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(X)},ri=(e,t)=>e?(e=>{var t;if(Kn(e.previousSibling))return I6(e.previousSibling)||e.previousSibling.appendData(X),e.previousSibling;if(Kn(e))return H6(e)||e.insertData(0,X),e;{const n=B6(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),n}})(t):(e=>{var t,n;if(Kn(e.nextSibling))return H6(e.nextSibling)||e.nextSibling.insertData(0,X),e.nextSibling;if(Kn(e))return I6(e)||e.appendData(X),e;{const s=B6(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(s,e.nextSibling):null===(n=e.parentNode)||void 0===n||n.appendChild(s),s}})(t),Vp=d(ri,!0),Bp=d(ri,!1),U6=(e,t)=>s(e.container())?ri(t,e.container()):ri(t,e.getNode()),K6=(e,t)=>{const n=t.get();return n&&e.container()===n&&Tt(n)},Yd=(t,s)=>s.fold(s=>{dn(t.get());const o=Vp(s);return t.set(o),e.some(n(o,o.length-1))},e=>ae(e).map(e=>{if(K6(e,t)){const e=t.get();return n(e,1)}{dn(t.get());const s=U6(e,!0);return t.set(s),n(s,1)}}),e=>at(e).map(e=>{if(K6(e,t)){const e=t.get();return n(e,e.length-1)}{dn(t.get());const s=U6(e,!1);return t.set(s),n(s,s.length-1)}}),s=>{dn(t.get());const o=Bp(s);return t.set(o),e.some(n(o,1))}),Y6=(t,n)=>{for(let e=0;e<t.length;e++){const s=t[e].apply(null,n);if(s.isSome())return s}return e.none()},ee=Ze([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),X6=(e,t)=>Ht(t,e)||e,Rp=(t,n,s)=>{const o=R2(s),i=X6(n,o.container());return kt(t,i,o).fold(()=>me(i,o).bind(d(kt,t,i)).map(e=>ee.before(e)),e.none)},Dp=(e,t)=>null===tn(e,t),J6=(e,t,n)=>kt(e,t,n).filter(d(Dp,t)),Tp=(t,n,s)=>{const o=P2(s);return J6(t,n,o).bind(t=>je(t,o).isNone()?e.some(ee.start(t)):e.none())},Mp=(t,n,s)=>{const o=R2(s);return J6(t,n,o).bind(t=>me(t,o).isNone()?e.some(ee.end(t)):e.none())},Sp=(t,n,s)=>{const o=P2(s),i=X6(n,o.container());return kt(t,i,o).fold(()=>je(i,o).bind(d(kt,t,i)).map(e=>ee.after(e)),e.none)},sp=e=>{return t=Zd(e),"rtl"!==w.DOM.getStyle(t,"direction",!0)&&!(e=>Vv.test(e))(null!==(n=t.textContent)&&void 0!==n?n:"");var t,n},nt=(e,t,n)=>Y6([Rp,Tp,Mp,Sp],[e,t,n]).filter(sp),Zd=e=>e.fold(oe,oe,oe,oe),ap=e=>e.fold(a("before"),a("start"),a("end"),a("after")),Zo=e=>e.fold(ee.before,ee.before,ee.after,ee.after),Jd=e=>e.fold(ee.start,ee.start,ee.end,ee.end),Op=(e,t,n,s,o,i)=>se(kt(t,n,s),kt(t,n,o),(t,s)=>t!==s&&((e,t,n)=>{const s=Ht(t,e),o=Ht(n,e);return r(s)&&s===o})(n,t,s)?ee.after(e?t:s):i).getOr(i),yp=(e,t)=>e.fold(N,e=>{return n=t,ap(s=e)!==ap(n)||Zd(s)!==Zd(n);var n,s}),bp=(t,n)=>t?n.fold(Tn(e.some,ee.start),e.none,Tn(e.some,ee.after),e.none):n.fold(e.none,Tn(e.some,ee.before),e.none,Tn(e.some,ee.end)),hp=(e,t,s)=>{const o=e?1:-1;return t.setRng(n(s.container(),s.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(et||(et={}));const wa=(e,t)=>e===B.Backwards?Ls(t):t,pp=(e,t,n)=>e===B.Forwards?t.next(n):t.prev(n),gp=(e,t,n,s)=>F(s.getNode(t===B.Forwards))?et.Br:!1===lt(n,s)?et.Block:et.Wrap,R3=(t,n,s,o)=>{const r=Ke(s);let i=o;const a=[];for(;i;){const s=pp(n,r,i);if(!s)break;if(F(s.getNode(!1)))return n===B.Forwards?{positions:wa(n,a).concat([s]),breakType:et.Br,breakAt:e.some(s)}:{positions:wa(n,a),breakType:et.Br,breakAt:e.some(s)};if(s.isVisible()){if(t(i,s)){const t=gp(0,n,i,s);return{positions:wa(n,a),breakType:t,breakAt:e.some(s)}}a.push(s),i=s}else i=s}return{positions:wa(n,a),breakType:et.Eol,breakAt:e.none()}},up=(e,t,n,s)=>t(n,s).breakAt.map(s=>{const o=t(n,s).positions;return e===B.Backwards?o.concat(s):[s].concat(o)}).getOr([]),qd=(t,n)=>be(t,(t,s)=>t.fold(()=>e.some(s),e=>se(ue(e.getClientRects()),ue(s.getClientRects()),(t,o)=>{const i=Math.abs(n-t.left);return Math.abs(n-o.left)<=i?s:e}).or(t)),e.none()),ci=(e,t)=>ue(t.getClientRects()).bind(t=>qd(e,t.left)),$o=d(R3,n.isAbove,-1),Vo=d(R3,n.isBelow,1),lp=d(up,-1,$o),cp=d(up,1,Vo),Cp=(e,t)=>ci(lp(e,t),t),Ep=(e,t)=>ci(cp(e,t),t),kp=x,op=(e,t)=>Math.abs(e.left-t),np=(e,t)=>Math.abs(e.right-t),tp=(e,t)=>aa(e,(e,n)=>{const s=Math.min(op(e,t),np(e,t)),o=Math.min(op(n,t),np(n,t));return o===s&&vs(n,"node")&&kp(n.node)||o<s?n:e}),Fp=e=>{const t=t=>v(t,t=>{const n=sn(t);return n.node=e,n});if(c(e))return t(e.getClientRects());if(s(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},ep=e=>mt(e,Fp);!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Bo||(Bo={}));const Z6=(e,t,n,s,o,i)=>{let c=0;const a=[],l=s=>{let i=ep([s]);-1===e&&(i=i.reverse());for(let s=0;s<i.length;s++){const e=i[s];if(!n(e,d)){if(a.length>0&&t(e,wn(a))&&c++,e.line=c,o(e))return!0;a.push(e)}}return!1},d=wn(i.getClientRects());if(!d)return a;const r=i.getNode();return r&&(l(r),((e,t,n,s)=>{let o=s;for(;o=Ds(o,e,mp,t);)if(n(o))return})(e,s,l,r)),a},Np=d(Z6,Bo.Up,yo,jo),Lp=d(Z6,Bo.Down,jo,yo),Q6=e=>wn(e.getClientRects()),G6=e=>t=>((e,t)=>t.line>e)(e,t),xd=e=>t=>((e,t)=>t.line===e)(e,t),vt=(e,t)=>{e.selection.setRng(t),Ks(e,e.selection.getRng())},vd=(t,n,s)=>e.some(bd(t,n,s)),$6=(t,n,s,o,i,a)=>{const r=n===B.Forwards,m=Ke(t.getBody()),f=d(Fd,r?m.next:m.prev),u=r?o:i;if(!s.collapsed){const o=Xa(s);if(a(o))return dt(n,t,o,n===B.Backwards,!1);if(Md(t)){const t=s.cloneRange();return t.collapse(n===B.Backwards),e.from(t)}}const h=Ms(n,t.getBody(),s);if(u(h))return Po(t,h.getNode(!r));let c=f(h);const p=W6(s);if(!c)return p?e.some(s):e.none();if(c=Ae(r,c),u(c))return dt(n,t,c.getNode(!r),r,!1);const l=f(c);return l&&u(l)&&ui(c,l)?dt(n,t,l.getNode(!r),r,!1):p?vd(t,c.toRange(),!1):e.none()},L6=(t,s,o,i,a,r)=>{const c=Ms(s,t.getBody(),o),p=wn(c.getClientRects()),l=s===Bo.Down,h=t.getBody();if(!p)return e.none();if(Md(t)){const t=l?n.fromRangeEnd(o):n.fromRangeStart(o);return(l?Ep:Cp)(h,t).orThunk(()=>e.from(t)).map(e=>e.toRange())}const v=(l?Lp:Np)(h,G6(1),c),g=m(v,xd(1)),u=p.left,d=tp(g,u);if(d&&r(d.node)){const e=Math.abs(u-d.left),n=Math.abs(u-d.right);return dt(s,t,d.node,e<n,!1)}let f;if(f=i(c)?c.getNode():a(c)?c.getNode(!0):Xa(o),f){const o=((e,t,s,o)=>{const d=Ke(t);let r,c,l,i;const a=[];let u=0;1===e?(r=d.next,c=jo,l=yo,i=n.after(o)):(r=d.prev,c=yo,l=jo,i=n.before(o));const h=Q6(i);do{if(!i.isVisible())continue;const t=Q6(i);if(l(t,h))continue;a.length>0&&c(t,wn(a))&&u++;const e=sn(t);if(e.position=i,e.line=u,s(e))return a;a.push(e)}while(i=r(i))return a})(s,h,G6(1),f);let e=tp(m(o,xd(1)),u);if(e)return vd(t,e.position.toRange(),!1);if(e=wn(m(o,xd(0))),e)return vd(t,e.position.toRange(),!1)}return 0===g.length?Fl(t,l).filter(l?a:i).map(e=>bd(t,e.toRange(),!1)):e.none()},Fl=(e,s)=>{const a=e.selection.getRng(),o=s?n.fromRangeEnd(a):n.fromRangeStart(a),r=(c=o.container(),i=e.getBody(),Lt(t(c),e=>Ij(e.dom),e=>e.dom===i).map(e=>e.dom).getOr(i));var i,c;if(s){const e=Vo(r,o);return Gt(e.positions)}{const e=$o(r,o);return ue(e.positions)}},F6=(e,t,n)=>Fl(e,t).filter(n).exists(t=>(e.selection.setRng(t.toRange()),!0)),ba=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},E6=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},C6=(e,t,n)=>Yd(t,n).map(t=>(ba(e,t),n)),Gp=(e,t,s)=>{const o=e.getBody(),i=((e,t,s)=>{const o=n.fromRangeStart(e);if(e.collapsed)return o;{const i=n.fromRangeEnd(e);return s?je(t,i).getOr(i):me(t,o).getOr(o)}})(e.selection.getRng(),o,s);return((e,t,n,s)=>{const o=Ae(e,s),i=nt(t,n,o);return nt(t,n,o).bind(d(bp,e)).orThunk(()=>((e,t,n,s,o)=>{const i=Ae(e,o);return Oe(e,n,i).map(d(Ae,e)).fold(()=>s.map(Zo),o=>nt(t,n,o).map(d(Op,e,t,n,i,o)).filter(d(yp,s))).filter(sp)})(e,t,n,i,s))})(s,d(en,e),o,i).bind(n=>C6(e,t,n))},x6=(e,t,n)=>!!to(e)&&Gp(e,t,n).isSome(),y6=(e,t)=>!!to(t)&&((e,t)=>{const o=t.selection.getRng(),s=e?n.fromRangeEnd(o):n.fromRangeStart(o);return!!(e=>j(e.selection.getSel().modify))(t)&&(e&&Wl(s)?hp(!0,t.selection,s):!e&&!!Ul(s)&&hp(!1,t.selection,s))})(e,t),Zp=e=>{const s=I(null),i=d(en,e);return e.on("NodeChange",a=>{to(e)&&(((e,n,s)=>{const r=v(te(t(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),i=m(r,e),a=m(s,e);o(nd(i,a),d(E6,!1)),o(nd(a,i),d(E6,!0))})(i,e.dom,a.parents),((e,t)=>{const s=t.get();if(e.selection.isCollapsed()&&!e.composing&&s){const o=n.fromRangeStart(e.selection.getRng());n.isTextPosition(o)&&!(e=>Wl(e)||Ul(e))(o)&&(ba(e,Aj(s,o)),t.set(null))}})(e,s),((e,t,s,i)=>{if(t.selection.isCollapsed()){const a=m(i,e);o(a,o=>{const i=n.fromRangeStart(t.selection.getRng());nt(e,t.getBody(),i).bind(e=>C6(t,s,e))})}})(i,e,s,a.parents))}),s},Jp=d(y6,!0),eg=d(y6,!1),Da=(e,t,s)=>{if(to(e)){const o=Fl(e,t).getOrThunk(()=>{const s=e.selection.getRng();return t?n.fromRangeEnd(s):n.fromRangeStart(s)});return nt(d(en,e),e.getBody(),o).exists(t=>{const n=Zo(t);return Yd(s,n).exists(t=>(ba(e,t),!0))})}return!1},f6=(e,t)=>n=>Yd(t,n).map(t=>()=>ba(e,t)),m6=(e,t,s,o)=>{const i=e.getBody(),a=d(en,e);e.undoManager.ignore(()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(s,o)),I2(e),nt(a,i,n.fromRangeStart(e.selection.getRng())).map(Jd).bind(f6(e,t)).each(Ss)}),e.nodeChanged()},sl=(s,o,i)=>{if(s.selection.isCollapsed()&&to(s)){const r=n.fromRangeStart(s.selection.getRng());return((n,s,o,i)=>{const r=((e,t)=>Ht(t,e)||e)(n.getBody(),i.container()),c=d(en,n),l=nt(c,r,i);return l.bind(t=>o?t.fold(a(e.some(Jd(t))),e.none,a(e.some(Zo(t))),e.none):t.fold(e.none,a(e.some(Zo(t))),e.none,a(e.some(Jd(t))))).map(f6(n,s)).getOrThunk(()=>{const a=ni(o,r,i),d=a.bind(e=>nt(c,r,e));return se(l,d,()=>kt(c,r,i).bind(s=>(e=>se(ae(e),at(e),(t,n)=>{const s=Ae(!0,t),o=Ae(!1,n);return me(e,s).forall(e=>e.isEqual(o))}).getOr(!0))(s)?e.some(()=>{Qt(n,o,t(s))}):e.none())).getOrThunk(()=>d.bind(()=>a.map(e=>()=>{o?m6(n,s,i,e):m6(n,s,e,i)})))})})(s,o,i,r)}return e.none()},ig=e=>1===th(e),ag=(s,o)=>{const r=t(s.getBody()),c=t(s.selection.getStart()),i=m(((e,t)=>{const n=bt(t,e);return Ns(n,Ne).fold(a(n),e=>n.slice(0,e))})(r,c),ig);return Gt(i).bind(a=>{const c=n.fromRangeStart(s.selection.getRng());return!((e,t,n)=>se(ae(n),at(n),(s,o)=>{const i=Ae(!0,s),a=Ae(!1,o),r=Ae(!1,t);return e?me(n,r).exists(e=>e.isEqual(a)&&t.isEqual(i)):je(n,r).exists(e=>e.isEqual(i)&&t.isEqual(a))}).getOr(!0))(o,c,a.dom)||Ie((r=a).dom)&&Z3(r.dom)?e.none():e.some(()=>((e,s,o,i)=>{const r=d(f7,s),a=v(m(i,r),e=>e.dom);if(0===a.length)Qt(s,e,o);else{const e=((e,s)=>{const o=Qr(!1),i=oh(s,o.dom);return _e(t(e),o),A(t(e)),n(i,0)})(o.dom,a);s.selection.setRng(e.toRange())}})(o,s,a,i));var r})},er=(t,n)=>t.selection.isCollapsed()?ag(t,n):e.none(),ur=(n,s,o)=>r(o)?e.some(()=>{n._selectionOverrides.hideFakeCaret(),Qt(n,s,t(o))}):e.none(),Lr=(t,n)=>t.selection.isCollapsed()?((t,n)=>{const o=n?Xs:Zs,i=n?B.Forwards:B.Backwards,s=Ms(i,t.getBody(),t.selection.getRng());return o(s)?ur(t,n,s.getNode(!n)):e.from(Ae(n,s)).filter(e=>o(e)&&ui(s,e)).bind(e=>ur(t,n,e.getNode(!n)))})(t,n):((t,n)=>{const s=t.selection.getNode();return it(s)?ur(t,n,s):e.none()})(t,n),gc=e=>ka(e??"").getOr(0),o6=(e,t)=>(e||"table"===k(t)?"margin":"padding")+("rtl"===st(t,"direction")?"-right":"-left"),e6=e=>{const t=Xf(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>Xt(t,t=>{const n=o6(L2(e),t),s=ua(t,n).map(gc).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&s>0}))(e,t))},Jf=e=>hr(e)||po(e),Xf=e=>m(_m(e.selection.getSelectedBlocks()),e=>!Jf(e)&&!(e=>Ve(e).exists(Jf))(e)&&Kt(e,e=>Be(e.dom)||x(e.dom)).exists(e=>Be(e.dom))),Gf=(e,n)=>{var s,i;const{dom:r}=e,a=Hv(e),c=null!==(i=null===(s=/[a-z%]+$/i.exec(a))||void 0===s?void 0:s[0])&&void 0!==i?i:"px",l=gc(a),d=L2(e);o(Xf(e),e=>{((e,n,s,o,i,a)=>{const r=o6(s,t(a)),c=gc(e.getStyle(a,r));if("outdent"===n){const t=Math.max(0,c-o);e.setStyle(a,r,t?t+i:"")}else{const t=c+o+i;e.setStyle(a,r,t)}})(r,n,d,l,c,e.dom)})},Yf=e=>Gf(e,"outdent"),qf=s=>{if(s.selection.isCollapsed()&&e6(s)){const o=s.dom,i=s.selection.getRng(),r=n.fromRangeStart(i),a=o.getParent(i.startContainer,o.isBlock);if(null!==a&&Zc(t(a),r))return e.some(()=>Yf(s))}return e.none()},Kf=(e,t,n)=>ls([qf,zd,jd,(e,n)=>sl(e,t,n),ad,_c,Dd,Lr,cd,er],t=>t(e,n)),jg=(e,t)=>{e.addCommand("delete",()=>{((e,t)=>{Kf(e,t,!1).fold(()=>{I2(e),zc(e)},Ss)})(e,t)}),e.addCommand("forwardDelete",()=>{((e,t)=>{Kf(e,t,!0).fold(()=>(e=>H2(e,"ForwardDelete"))(e),Ss)})(e,t)})},Wf=t=>void 0===t.touches||1!==t.touches.length?e.none():e.some(t.touches[0]),vc=(e,t)=>f(e,t.nodeName),wg=(e,t)=>!!s(t)||!!c(t)&&!vc(e.getBlockElements(),t)&&!Me(t)&&!Io(e,t),Og=(e,t)=>{if(s(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||vc(e,t.nextSibling)))return!0}return!1},If=e=>e.dom.create(ve(e),ro(e)),Cg=e=>{const p=e.dom,l=e.selection,i=e.schema,h=i.getBlockElements(),d=l.getStart(),a=e.getBody();let s,r,u=!1;const m=ve(e);if(!d||!c(d))return;const f=a.nodeName.toLowerCase();if(!i.isValidChild(f,m.toLowerCase())||((e,n,s)=>z(U0(t(s),t(n)),t=>vc(e,t.dom)))(h,a,d))return;const o=l.getRng(),{startContainer:g,startOffset:v,endContainer:b,endOffset:j}=o,y=Wt(e);let n=a.firstChild;for(;n;)if(c(n)&&Up(i,n),wg(i,n)){if(Og(h,n)){r=n,n=n.nextSibling,p.remove(r);continue}s||(s=If(e),a.insertBefore(s,n),u=!0),r=n,n=n.nextSibling,s.appendChild(r)}else s=null,n=n.nextSibling;u&&y&&(o.setStart(g,v),o.setEnd(b,j),l.setRng(o),e.nodeChanged())},Rf=(e,n,s)=>{const a=t(If(e)),o=Hr();H(a,o),s(n,a);const i=document.createRange();return i.setStartBefore(o.dom),i.setEndBefore(o.dom),i},Nf=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),Ag=(e,t,n)=>function(s){const o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return s;if(">"===a){const e=t.lastIndexOf("<",i);if(-1!==e&&-1!==t.substring(e,i).indexOf('contenteditable="false"'))return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},Df=(e,t)=>{t.hasAttribute("data-mce-caret")&&(ud(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},Mg=(e,n)=>{const s=(e=>Cs(t(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull())(e);if(s)return"compositionstart"===n.type?(n.preventDefault(),n.stopPropagation(),void Df(e,s)):void(D6(s)&&(Df(e,s),e.undoManager.add()))},Af=x,Ef=(e,s,o)=>{const i=Ke(e.getBody()),a=d(Fd,1===s?i.next:i.prev);if(o.collapsed){const i=e.dom.getParent(o.startContainer,"PRE");if(!i)return;if(!a(n.fromRangeStart(o))){const n=t((e=>{const t=e.dom.create(ve(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===s?At(t(i),n):_e(t(i),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},Cf=(t,n)=>((t,n)=>{const s=n?B.Forwards:B.Backwards,o=t.selection.getRng();return((e,t,n)=>$6(t,e,n,Ft,Mt,Af))(s,t,o).orThunk(()=>(Ef(t,s,o),e.none()))})(t,n).exists(e=>(vt(t,e),!0)),xf=(t,n)=>((t,n)=>{const s=n?1:-1,o=t.selection.getRng();return((e,t,n)=>L6(t,e,n,e=>Ft(e)||B0(e),e=>Mt(e)||V0(e),Af))(s,t,o).orThunk(()=>(Ef(t,s,o),e.none()))})(t,n).exists(e=>(vt(t,e),!0)),Of=(e,t)=>F6(e,t,t?Mt:Ft),ha=(e,t)=>Sd(e,!t).map(n=>{const o=n.toRange(),s=e.selection.getRng();return t?o.setStart(s.startContainer,s.startOffset):o.setEnd(s.endContainer,s.endOffset),o}).exists(t=>(vt(e,t),!0)),Rg=e=>O(["figcaption"],k(e)),Pg=(e,s)=>{const o=t(e.getBody()),i=n.fromRangeStart(e.selection.getRng());return((e,n)=>{const s=d(y,n);return Kt(t(e.container()),Ne,s).filter(Rg)})(i,o).exists(()=>{if(((e,t,n)=>t?((e,t)=>Vo(e,t).breakAt.isNone())(e.dom,n):((e,t)=>$o(e,t).breakAt.isNone())(e.dom,n))(o,s,i)){const t=Rf(e,o,s?H:jm);return e.selection.setRng(t),!0}return!1})},gf=(e,t)=>!!e.selection.isCollapsed()&&Pg(e,t),pf={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ff=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,p=(e,...t)=>()=>e.apply(null,t),Js=(e,t)=>V(((e,t)=>mt((e=>v(e,e=>({...pf,...e})))(e),e=>ff(e,t)?[e]:[]))(e,t),e=>e.action()),hf=(e,t)=>ls(((e,t)=>mt((e=>v(e,e=>({...pf,...e})))(e),e=>ff(e,t)?[e]:[]))(e,t),e=>e.action()),df=(e,t)=>{const n=t?B.Forwards:B.Backwards,s=e.selection.getRng();return $6(e,n,s,Xs,Zs,it).exists(t=>(vt(e,t),!0))},lf=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return L6(e,n,s,Xs,Zs,it).exists(t=>(vt(e,t),!0))},J8=(e,t)=>F6(e,t,t?Zs:Xs),Z8=Ze([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Qs={...Z8,none:e=>Z8.none(e)},Y8=(e,t,n)=>mt(q(e),e=>De(e,t)?n(e)?[e]:[]:Y8(e,t,n)),$8=(e,t)=>qt(e,"table",t),yl=(e,t,n,s,o=N)=>{const i=1===s;if(!i&&n<=0)return Qs.first(e[0]);if(i&&n>=e.length-1)return Qs.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?Qs.middle(t,a):yl(e,t,i,s,o)}},B8=(e,t)=>$8(e,t).bind(t=>{const n=Y8(t,"th,td",N);return Ns(n,t=>y(e,t)).map(e=>({index:e,all:n}))}),R8=(e,t=!1)=>{return Vn(e)?e.dom.isContentEditable:(n=e,qt(n,"[contenteditable]")).fold(a(t),e=>"true"===t5(e));var n},t5=e=>e.dom.contentEditable,L8=(n,s,o,i,a)=>{const r=te(t(o),"td,th,caption").map(e=>e.dom),c=m(((e,t)=>mt(t,t=>{const n=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+-2,bottom:e.bottom+-2,width:e.width+t,height:e.height+t}))(sn(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))(n,r),e=>s(e,a));return((t,n,s)=>be(t,(t,o)=>t.fold(()=>e.some(o),t=>{const i=Math.sqrt(Math.abs(t.x-n)+Math.abs(t.y-s)),a=Math.sqrt(Math.abs(o.x-n)+Math.abs(o.y-s));return e.some(a<i?o:t)}),e.none()))(c,i,a).map(e=>e.cell)},s5=d(L8,e=>e.bottom,(e,t)=>e.y<t),o5=d(L8,e=>e.top,(e,t)=>e.y>t),D8=(e,t,n)=>{const s=e(t,n);return(e=>e.breakType===et.Wrap&&0===e.positions.length)(s)||!F(n.getNode())&&(e=>e.breakType===et.Br&&1===e.positions.length)(s)?!((e,t,n)=>n.breakAt.exists(n=>e(t,n).breakAt.isSome()))(e,t,s):s.breakAt.isNone()},a5=d(D8,$o),r5=d(D8,Vo),c5=(e,t,s)=>{const i=e.selection.getRng(),a=t?1:-1;return!(!e1()||!((e,t,s)=>{const o=n.fromRangeStart(t);return es(!e,s).exists(e=>e.isEqual(o))})(t,i,s)||(dt(a,e,s,!t,!1).each(t=>{vt(e,t)}),0))},z8=(n,s,o)=>{const i=((t,n)=>{const s=n.getNode(t);return ft(s)?e.some(s):e.none()})(!!s,o),a=!1===s;i.fold(()=>vt(n,o.toRange()),e=>es(a,n.getBody()).filter(e=>e.isEqual(o)).fold(()=>vt(n,o.toRange()),o=>((e,n,s)=>{n.undoManager.transact(()=>{const o=e?At:_e,i=Rf(n,t(s),o);vt(n,i)})})(s,n,e)))},d5=(e,t,s,o)=>{const r=e.selection.getRng(),i=n.fromRangeStart(r),a=e.getBody();if(!t&&a5(o,i)){const o=((e,t,s)=>((e,t)=>ue(t.getClientRects()).bind(t=>s5(e,t.left,t.top)).bind(e=>{return ci(at(n=e).map(e=>$o(n,e).positions.concat(e)).getOr([]),t);var n}))(t,s).orThunk(()=>ue(s.getClientRects()).bind(s=>qd(lp(e,n.before(t)),s.left))).getOr(n.before(t)))(a,s,i);return z8(e,t,o),!0}if(t&&r5(o,i)){const o=((e,t,s)=>((e,t)=>Gt(t.getClientRects()).bind(t=>o5(e,t.left,t.top)).bind(e=>{return ci(ae(n=e).map(e=>[e].concat(Vo(n,e).positions)).getOr([]),t);var n}))(t,s).orThunk(()=>ue(s.getClientRects()).bind(s=>qd(cp(e,n.after(t)),s.left))).getOr(n.after(t)))(a,s,i);return z8(e,t,o),!0}return!1},S8=(t,n,s)=>e.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>e.from(t.dom.getParent(o,"table")).map(e=>s(t,n,e,o))).getOr(!1),k8=(e,t)=>S8(e,t,c5),C8=(e,t)=>S8(e,t,d5),v8=(n,s,o)=>o.fold(e.none,e.none,(n,s)=>{return(o=s,((n,s)=>{const o=n=>{for(let i=0;i<n.childNodes.length;i++){const a=t(n.childNodes[i]);if(s(a))return e.some(a);const r=o(n.childNodes[i]);if(r.isSome())return r}return e.none()};return o(n.dom)})(o,r0)).map(e=>(e=>{const t=Hn.exact(e,0,e,0);return lj(t)})(e));var o},e=>(n.execCommand("mceTableInsertRowAfter"),p8(n,s,e))),p8=(e,t,n)=>{return v8(e,t,(o=R8,B8(s=n,void 0).fold(()=>Qs.none(s),e=>yl(e.all,s,e.index,1,o))));var s,o},g5=(e,t,n)=>{return v8(e,t,(o=R8,B8(s=n,void 0).fold(()=>Qs.none(),e=>yl(e.all,s,e.index,-1,o))));var s,o},f8=(n,s)=>{const a=["table","li","dl"],r=t(n.getBody()),o=e=>{const t=k(e);return y(e,r)||O(a,t)},i=n.selection.getRng();return((t,n)=>((t,n,s=S)=>s(n)?e.none():O(t,k(n))?e.some(n):xs(n,t.join(","),e=>De(e,"table")||s(e)))(["td","th"],t,n))(t(s?i.endContainer:i.startContainer),o).map(e=>($8(e,o).each(e=>{n.model.table.clearSelectedCells(e.dom)}),n.selection.collapse(!s),(s?p8:g5)(n,o,e).each(e=>{n.selection.setRng(e)}),!0)).getOr(!1)},He=(e,t)=>({container:e,offset:t}),Ri=w.DOM,Oi=e=>t=>e===t?-1:0,pd=(t,n,o)=>{if(s(t)&&n>=0)return e.some(He(t,n));{const s=cn(Ri);return e.from(s.backwards(t,n,Oi(t),o)).map(e=>He(e.container,e.container.data.length))}},au=(t,n,o)=>{if(!s(t))return e.none();const i=t.data;if(n>=0&&n<=i.length)return e.some(He(t,n));{const s=cn(Ri);return e.from(s.backwards(t,n,Oi(t),o)).bind(e=>{const t=e.container.data;return au(e.container,n+t.length,o)})}},a8=(t,n,o)=>{if(!s(t))return e.none();const i=t.data;if(n<=i.length)return e.some(He(t,n));{const s=cn(Ri);return e.from(s.forwards(t,n,Oi(t),o)).bind(e=>a8(e.container,n-i.length,o))}},lu=(t,n,s,o,i)=>{const a=cn(t,(e=>t=>e.isBlock(t)||O(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(t));return e.from(a.backwards(n,s,o,i))},Qm=e=>_t(e.toString().replace(/\u00A0/g," ")),Ym=e=>""!==e&&-1!==` \xa0
	`.indexOf(e),Vd=(e,t)=>e.substring(t.length),Km=(n,o,i,a=0)=>{return(r=t(o.startContainer),qt(r,c0)).fold(()=>((t,n,o,i=0)=>{if(!(r=n).collapsed||!s(r.startContainer))return e.none();var r;const a={text:"",offset:0},c=t.getParent(n.startContainer,t.isBlock)||t.getRoot();return lu(t,n.startContainer,n.startOffset,(t,n,s)=>(a.text=s+a.text,a.offset+=n,((t,n,s)=>{let o;const i=s.charAt(0);for(o=n-1;o>=0;o--){const a=t.charAt(o);if(Ym(a))return e.none();if(i===a&&Q(t,s,o,n))break}return e.some(o)})(a.text,a.offset,o).getOr(n)),c).bind(t=>{const s=n.cloneRange();if(s.setStart(t.container,t.offset),s.setEnd(n.endContainer,n.endOffset),s.collapsed)return e.none();const a=Qm(s);return 0!==a.lastIndexOf(o)||Vd(a,o).length<i?e.none():e.some({text:Vd(a,o),range:s,trigger:o})})})(n,o,i,a),t=>{const s=n.createRng();s.selectNode(t.dom);const o=Qm(s);return e.some({range:s,text:Vd(o,i),trigger:i})});var r},Um=e=>{if((e=>3===e.nodeType)(e))return He(e,e.data.length);{const t=e.childNodes;return t.length>0?Um(t[t.length-1]):He(e,t.length)}},Wm=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Wm(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?Um(n[n.length-1]):He(e,t)},$m=(t,n,s,o={})=>{var i;const r=n(),c=null!==(i=t.selection.getRng().startContainer.nodeValue)&&void 0!==i?i:"",a=m(r.lookupByTrigger(s.trigger),e=>s.text.length>=e.minChars&&e.matches.getOrThunk(()=>(e=>t=>{const n=Wm(t.startContainer,t.startOffset);return!((e,t)=>{var n;const s=null!==(n=e.getParent(t.container,e.isBlock))&&void 0!==n?n:e.getRoot();return lu(e,t.container,t.offset,(e,t)=>0===t?-1:t,s).filter(e=>{const t=e.container.data.charAt(e.offset-1);return!Ym(t)}).isSome()})(e,n)})(t.dom))(s.range,c,s.text));if(0===a.length)return e.none();const l=Promise.all(v(a,e=>e.fetch(s.text,e.maxResults,o).then(t=>({matchText:s.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))));return e.some({lookupData:l,context:s})};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Qe||(Qe={}));const Pd=(e,t,n)=>e.stype===Qe.Error?t(e.serror):n(e.svalue),gs=e=>({stype:Qe.Value,svalue:e}),Rs=e=>({stype:Qe.Error,serror:e}),L5=Pd,Yl=e=>ne(e)&&pe(e).length>100?" removed due to size":JSON.stringify(e,null,2),Vi=(e,t)=>Rs([{path:e,getErrorInfo:t}]),H5=(e,t)=>({extract:(n,s)=>E(s,e).fold(()=>((e,t)=>Vi(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(n,e),e=>((e,t,n,s)=>E(n,s).fold(()=>((e,t,n)=>Vi(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Yl(t)))(e,n,s),n=>n.extract(e.concat(["branch: "+s]),t)))(n,s,t,e)),toString:()=>"chooseOn("+e+"). Possible values: "+pe(t)}),Pm=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const t in o)f(o,t)&&(n[t]=e(n[t],o[t]))}return n},Cl=Pm((e,t)=>Wu(e)&&Wu(t)?Cl(e,t):t),Mm=(Pm((e,t)=>t),e=>({tag:"defaultedThunk",process:a(e)})),$5=e=>{const t=(e=>{const t=[],n=[];return o(e,e=>{Pd(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}})(e);return t.errors.length>0?(n=t.errors,Tn(Rs,u1)(n)):gs(t.values);var n},xm=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},al=e=>({extract:(t,n)=>{return s=e(n),o=e=>((e,t)=>Vi(e,a(t)))(t,e),s.stype===Qe.Error?o(s.serror):s;var s,o},toString:a("val")}),K5=al(gs),ym=(e,t,n,s)=>s(E(e,t).getOrThunk(()=>n(e))),Y5=(t,n,s,o,i)=>{const r=e=>i.extract(n.concat([o]),e),c=t=>t.fold(()=>gs(e.none()),t=>{const r=i.extract(n.concat([o]),t);return s=r,a=e.some,s.stype===Qe.Value?{stype:Qe.Value,svalue:a(s.svalue)}:s;var s,a});switch(t.tag){case"required":return((e,t,n,s)=>E(t,n).fold(()=>((e,t,n)=>Vi(e,()=>'Could not find valid *required* value for "'+t+'" in '+Yl(n)))(e,n,t),s))(n,s,o,r);case"defaultedThunk":return ym(s,o,t.process,r);case"option":return((e,t,n)=>n(E(e,t)))(s,o,c);case"defaultedOptionThunk":return((e,t,n,s)=>s(E(e,t).map(t=>!0===t?n(e):t)))(s,o,t.process,c);case"mergeWithThunk":return ym(s,o,a({}),e=>{const n=Cl(t.process(s),e);return r(n)})}},ol=e=>({extract:(t,n)=>((e,t,n)=>{const s={},o=[];for(const i of n)xm(i,(n,i,a,r)=>{const c=Y5(a,e,t,n,r);L5(c,e=>{o.push(...e)},e=>{s[i]=e})},(e,n)=>{s[e]=n(t)});return o.length>0?Rs(o):gs(s)})(t,n,e),toString:()=>{const t=v(e,e=>xm(e,(e,t,n,s)=>e+" -> "+s.toString(),(e)=>"state("+e+")"));return`obj{
`+t.join(`
`)+"}"}}),vm=e=>({extract:(t,n)=>{const s=v(n,(n,s)=>e.extract(t.concat(["["+s+"]"]),n));return $5(s)},toString:()=>"array("+e.toString()+")"}),Q5=(e,t,n)=>{return s=((e,t,n)=>((e,t)=>e.stype===Qe.Error?{stype:Qe.Error,serror:t(e.serror)}:e)(t.extract([e],n),e=>({input:n,errors:e})))(e,t,n),Pd(s,ie.error,ie.value);var s},gm=(e,t)=>H5(e,Ei(t,ol)),J5=a(K5),ra=(e,t)=>al(n=>{const s=typeof n;return e(n)?gs(n):Rs(`Expected type: ${t} but got: ${s}`)}),t7=ra(We,"number"),la=ra(h,"string"),s7=ra(bn,"boolean"),pc=ra(j,"function"),ho=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),im=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),om=(e,t)=>ho(e,e,{tag:"required",process:{}},t),sm=e=>om(e,la),tm=e=>om(e,pc),Yr=(e,t)=>ho(e,e,{tag:"option",process:{}},t),za=e=>Yr(e,la),Dn=(e,t,n)=>ho(e,e,Mm(t),n),xh=(e,t)=>Dn(e,t,t7),ah=(e,t,n)=>Dn(e,t,(e=>{return t=t=>O(e,t)?ie.value(t):ie.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),al(e=>t(e).fold(Rs,gs));var t})(n)),Za=(e,t)=>Dn(e,t,s7),Xc=(e,t)=>Dn(e,t,pc),v7=sm("type"),b7=tm("fetch"),Qc=tm("onAction"),y7=Xc("onSetup",()=>g),_7=za("text"),w7=za("icon"),O7=za("tooltip"),x7=za("label"),C7=Za("active",!1),E7=Za("enabled",!0),nh=Za("primary",!1),Ho=e=>((e,t)=>Dn("type",t,la))(0,e),S7=ol([v7,sm("trigger"),xh("minChars",1),(1,((e)=>ho(e,e,Mm(1),J5()))("columns")),xh("maxResults",10),("matches",Yr("matches",pc)),b7,Qc,(eh=la,Dn("highlightOn",[],vm(eh)))]),ou=[E7,O7,w7,_7,y7],K3=[C7].concat(ou),z7=[Xc("predicate",S),ah("scope","node",["node","editor"]),ah("position","selection",["node","selection","line"])],D7=ou.concat([Ho("contextformbutton"),nh,Qc,im("original",oe)]),N7=K3.concat([Ho("contextformbutton"),nh,Qc,im("original",oe)]),L7=ou.concat([Ho("contextformbutton")]),R7=K3.concat([Ho("contextformtogglebutton")]),P7=gm("type",{contextformbutton:D7,contextformtogglebutton:N7});ol([Ho("contextform"),Xc("initValue",a("")),x7,((e,t)=>ho(e,e,{tag:"required",process:{}},vm(t)))("commands",P7),Yr("launch",gm("type",{contextformbutton:L7,contextformtogglebutton:R7}))].concat(z7));const H7=e=>{const n=e.ui.registry.getAll().popups,t=Ei(n,e=>{return(t=e,Q5("Autocompleter",S7,{trigger:t.ch,...t})).fold(e=>{throw new Error(`Errors: 
`+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:a("... (only showing first ten failures)")}]):e;return v(t,e=>"Failed path: ("+e.path.join(" > ")+`)
`+e.getErrorInfo())})((t=e).errors).join(`
`)+`

Input object: `+Yl(t.input));var t},oe);var t}),s=V1(Rl(t,e=>e.trigger)),o=Sl(t);return{dataset:t,triggers:s,lookupByTrigger:e=>m(o,t=>t.trigger===e)}},I7=e=>{const t=Rt(),s=I(!1),o=t.isSet,n=()=>{o()&&((e=>{M(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),s.set(!1),t.clear())},i=on(()=>H7(e)),a=a=>{(n=>t.get().map(t=>Km(e.dom,e.selection.getRng(),t.trigger).bind(t=>$m(e,i,t,n))).getOrThunk(()=>((e,t)=>{const n=t(),s=e.selection.getRng();return((e,t,n)=>ls(n.triggers,n=>Km(e,t,n)))(e.dom,s,n).bind(n=>$m(e,t,n))})(e,i)))(a).fold(n,i=>{(n=>{o()||(((e,t)=>{M(e).autocompleter.addDecoration(t)})(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))})(i.context),i.lookupData.then(o=>{t.get().map(a=>{const r=i.context;a.trigger===r.trigger&&(r.text.length-a.matchLength>=10?n():(t.set({...a,matchLength:r.text.length}),s.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:o}):(s.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:o}))))})})})};e.addCommand("mceAutocompleterReload",(e,t)=>{const n=ne(t)?t.fetchOptions:{};a(n)}),e.addCommand("mceAutocompleterClose",n),((e,t)=>{const n=nc(t.load,50);e.on("keypress compositionend",e=>{27!==e.which&&n.throttle()}),e.on("keydown",e=>{const s=e.which;8===s?n.throttle():27===s&&t.cancelIfNecessary()}),e.on("remove",n.cancel)})(e,{cancelIfNecessary:n,load:a})},B3=e=>(t,n,s={})=>{const o=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:g,inputType:n},a=ef(new InputEvent(e));return t.dispatch(e,{...a,...i,...s})},Qd=B3("input"),Gd=B3("beforeinput"),Wo=(e,t)=>{const o=e.dom,i=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(c(e)||s(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(o.doc.createTextNode(W),t.firstChild)}const n=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new P(t,t);let e,o=t;for(;e=a.current();){if(s(e)){n.setStart(e,0),n.setEnd(e,0);break}if(i[e.nodeName.toLowerCase()]){n.setStartBefore(e),n.setEndBefore(e);break}o=e,e=a.next()}e||(n.setStart(o,0),n.setEnd(o,0))}else F(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)):(n.setStart(t,0),n.setEnd(t,0));e.selection.setRng(n),Ks(e,n)},hi=(e,t)=>{const s=e.getRoot();let o,n=t;for(;n!==s&&n&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(o=n),n=n.parentNode;return n!==s?o:s},Ql=t=>e.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),z3=(e,t)=>{const n=e?.parentNode;return r(n)&&n.nodeName===t},T3=e=>r(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Mi=e=>{const t=e.parentNode;return r(n=t)&&/^(LI|DT|DD)$/.test(n.nodeName)?t:e;var n},Ti=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!c(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},Q7=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),ql=e=>{e.innerHTML='<br data-mce-bogus="1">'},Ll=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,E3=(e,t)=>r(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t),bl=(e,t,n)=>s(t)?e?1===n&&t.data.charAt(n-1)===X?0:n:n===t.data.length-1&&t.data.charAt(n)===X?t.data.length:n:n,Mo=(n,s)=>{ve(n).toLowerCase()===s.tagName.toLowerCase()&&((n,s,o)=>{const i=n.dom;e.from(o.style).map(i.parseStyle).each(e=>{const n={...fm(t(s)),...e};i.setStyles(s,n)});const a=e.from(o.class).map(e=>e.split(/\s+/)),r=e.from(s.className).map(e=>m(e.split(/\s+/),e=>""!==e));se(a,r,(e,t)=>{const n=m(t,t=>!O(e,t)),o=[...e,...n];i.setAttrib(s,"class",o.join(" "))});const c=["style","class"],l=Us(o,(e,t)=>!O(c,t));i.setAttribs(s,l)})(n,s,ro(n))},j3={insert:(e,n)=>{let l,p,g,m,v=!1;const d=e.dom,k=e.schema,C=k.getNonEmptyElements(),f=e.selection.getRng(),j=ve(e),b=t=>{let s=l;const i=k.getTextInlineElements();let n;n=t||"TABLE"===g||"HR"===g?d.create(t||j):a.cloneNode(!1);let o=n;if(!1===cv(e))d.setAttrib(n,"style",null),d.setAttrib(n,"class",null);else do if(i[s.nodeName]){if(Ie(s)||Me(s))continue;const e=s.cloneNode(!1);d.setAttrib(e,"id",""),n.hasChildNodes()?(e.appendChild(n.firstChild),n.appendChild(e)):(o=e,n.appendChild(e))}while((s=s.parentNode)&&s!==x)return Mo(e,n),ql(o),n},_=e=>{const o=bl(e,l,p);if(s(l)&&(e?o>0:o<l.data.length))return!1;if(l.parentNode===a&&v&&!e)return!0;if(e&&c(l)&&l===a.firstChild)return!0;if(Ll(l,"TABLE")||Ll(l,"HR"))return v&&!e||!v&&e;const n=new P(l,a);let t;for(s(l)&&(e&&0===o?n.prev():e||o!==l.data.length||n.next());t=n.current();){if(c(t)){if(!t.getAttribute("data-mce-bogus")){const e=t.nodeName.toLowerCase();if(C[e]&&"br"!==e)return!1}}else if(s(t)&&!Mn(t.data))return!1;e?n.prev():n.next()}return!0},w=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(g)&&"HGROUP"!==y?b(j):b(),((e,t)=>{const n=uv(e);return!D(t)&&(h(n)?O(i.explode(n),t.nodeName.toLowerCase()):n)})(e,m)&&E3(d,m)&&d.isEmpty(a)?t=d.split(m,a):d.insertAfter(t,a),Wo(e,t),t};Qi(d,f).each(e=>{f.setStart(e.startContainer,e.startOffset),f.setEnd(e.endContainer,e.endOffset)}),l=f.startContainer,p=f.startOffset;const A=!!n&&!!n.shiftKey,S=!!n&&!!n.ctrlKey;c(l)&&l.hasChildNodes()&&(v=p>l.childNodes.length-1,l=l.childNodes[Math.min(p,l.childNodes.length-1)]||l,p=v&&s(l)?l.data.length:0);const x=hi(d,l);if(!x||((e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return null!==n&&"false"===e.dom.getContentEditableParent(n)})(e,l))return;A||(l=((e,t,n,s,o)=>{const a=e.dom,c=null!==(r=hi(a,s))&&void 0!==r?r:a.getRoot();let i=a.getParent(s,a.isBlock);if(!i||!E3(a,i)){let u;if(i=i||c,u=i===e.getBody()||G8(i)?i.nodeName.toLowerCase():i.parentNode?i.parentNode.nodeName.toLowerCase():"",!i.hasChildNodes()){const s=a.create(t);return Mo(e,s),i.appendChild(s),n.setStart(s,0),n.setEnd(s,0),s}let d,l=s;for(var r;l&&l.parentNode!==i;)l=l.parentNode;for(;l&&!a.isBlock(l);)d=l,l=l.previousSibling;if(d&&e.schema.isValidChild(u,t.toLowerCase())){const r=d.parentNode,i=a.create(t);for(Mo(e,i),r.insertBefore(i,d),l=d;l&&!a.isBlock(l);){const t=l.nextSibling;i.appendChild(l),l=t}n.setStart(s,o),n.setEnd(s,o)}}return s})(e,j,f,l,p));let a=d.getParent(l,d.isBlock)||d.getRoot();m=r(a?.parentNode)?d.getParent(a.parentNode,d.isBlock):null,g=a?a.nodeName.toUpperCase():"";const y=m?m.nodeName.toUpperCase():"";if("LI"!==y||S||(a=m,m=m.parentNode,g=y),/^(LI|DT|DD)$/.test(g)&&c(m)&&d.isEmpty(a))return void((e,t,n,s,o)=>{const i=e.dom,l=e.selection.getRng(),r=n.parentNode;if(n===e.getBody()||!r)return;var c;T3(c=n)&&T3(c.parentNode)&&(o="LI");let a=t(o);if(Ti(n,s,!0)&&Ti(n,s,!1))if(z3(n,"LI")){const e=Mi(n);i.insertAfter(a,e),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?i.remove(e):i.remove(n)}else i.replace(a,n);else if(Ti(n,s,!0))z3(n,"LI")?(i.insertAfter(a,Mi(n)),a.appendChild(i.doc.createTextNode(" ")),a.appendChild(n)):r.insertBefore(a,n),i.remove(s);else if(Ti(n,s,!1))i.insertAfter(a,Mi(n)),i.remove(s);else{n=Mi(n);const t=l.cloneRange();t.setStartAfter(s),t.setEndAfter(n);const e=t.extractContents();"LI"===o&&((e)=>e.firstChild&&"LI"===e.firstChild.nodeName)(e)?(a=e.firstChild,i.insertAfter(e,n)):(i.insertAfter(e,n),i.insertAfter(a,n)),i.remove(s)}Wo(e,a)})(e,b,m,a,j);if(a===e.getBody())return;const E=a.parentNode;let u;if(Ln(a))u=ud(a),d.isEmpty(a)&&ql(a),Mo(e,u),Wo(e,u);else if(_(!1))u=w();else if(_(!0)&&E)u=E.insertBefore(b(),a),Wo(e,Ll(a,"HR")?u:a);else{const i=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,bl(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,bl(!1,e.endContainer,e.endOffset)),t})(f).cloneRange();i.setEndAfter(a);const n=i.extractContents();(e=>{o(t8(t(e),we),e=>{const t=e.dom;t.nodeValue=_t(t.data)})})(n),(e=>{let t=e;do s(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)})(n),u=n.firstChild,d.insertAfter(n,a),((e,t,n)=>{const i=[];if(!n)return;let s=n;for(var o;s=s.firstChild;){if(e.isBlock(s))return;c(s)&&!t[s.nodeName.toLowerCase()]&&i.push(s)}let a=i.length;for(;a--;)s=i[a],(!s.hasChildNodes()||s.firstChild===s.lastChild&&""===(null===(o=s.firstChild)||void 0===o?void 0:o.nodeValue)||Q7(e,s))&&e.remove(s)})(d,C,u),((e,t)=>{t.normalize();const n=t.lastChild;(!n||c(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")})(d,a),d.isEmpty(a)&&ql(a),u.normalize(),d.isEmpty(u)?(d.remove(u),w()):(Mo(e,u),Wo(e,u))}d.setAttrib(u,"id",""),e.dispatch("NewBlock",{newBlock:u})},fakeEventName:"insertParagraph"},b3=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Ks(e,s)},iv=(e,n)=>{const s=$("br");_e(t(n),s),e.undoManager.add()},av=(e,n)=>{rv(e.getBody(),n)||At(t(n),$("br"));const s=$("br");At(t(n),s),b3(e,s.dom,!1),e.undoManager.add()},rv=(e,t)=>{return s=n.after(t),!!F(s.getNode())||me(e,n.after(t)).map(e=>F(e.getNode())).getOr(!1);var s},v3=e=>e&&"A"===e.nodeName&&"href"in e,lv=e=>e.fold(S,v3,v3,S),dv=(e,t)=>{t.fold(g,d(iv,e),d(av,e),g)},g3={insert:(e,t)=>{const o=(e=>{const t=d(en,e),s=n.fromRangeStart(e.selection.getRng());return nt(t,e.getBody(),s).filter(lv)})(e);o.isSome()?o.each(d(dv,e)):((e,t)=>{const h=e.selection,o=e.dom,i=h.getRng();let a,u=!1;Qi(o,i).each(e=>{i.setStart(e.startContainer,e.startOffset),i.setEnd(e.endContainer,e.endOffset)});let l=i.startOffset,n=i.startContainer;if(c(n)&&n.hasChildNodes()){const e=l>n.childNodes.length-1;n=n.childNodes[Math.min(l,n.childNodes.length-1)]||n,l=e&&s(n)?n.data.length:0}let r=o.getParent(n,o.isBlock);const d=r&&r.parentNode?o.getParent(r.parentNode,o.isBlock):null,m=d?d.nodeName.toUpperCase():"",f=!!t&&!!t.ctrlKey;"LI"!==m||f||(r=d),s(n)&&l>=n.data.length&&(((e,t,n)=>{const i=new P(t,n);let o;const a=e.getNonEmptyElements();for(;o=i.next();)if(a[o.nodeName.toLowerCase()]||s(o)&&o.length>0)return!0;return!1})(e.schema,n,r||o.getRoot())||(a=o.create("br"),i.insertNode(a),i.setStartAfter(a),i.setEndAfter(a),u=!0)),a=o.create("br"),Cr(o,i,a),b3(e,a,u),e.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},p3=(e,n)=>Ql(e).filter(e=>n.length>0&&De(t(e),n)).isSome(),ke=Ze([{br:[]},{block:[]},{none:[]}]),fv=(e)=>(e=>p3(e,nv(e)))(e),l3=e=>(n)=>(e=>Ql(e).filter(e=>po(t(e))).isSome())(n)===e,c3=(e,t)=>(n)=>{const o=(e=>Ql(e).fold(a(""),e=>e.nodeName.toUpperCase()))(n)===e.toUpperCase();return o===t},vv=e=>{const t=hi(e.dom,e.selection.getStart());return D(t)},ko=e=>c3("pre",e),_a=e=>(t)=>J7(t)===e,yv=(e)=>(e=>p3(e,tv(e)))(e),Ea=(e,t)=>t,wv=e=>{const n=ve(e),t=hi(e.dom,e.selection.getStart());return r(t)&&e.schema.isValidChild(t.nodeName,n)},ze=(t,n)=>(s,o)=>be(t,(e,t)=>e&&t(s,o),!0)?e.some(n):e.none(),Ta=(e,t,n)=>{t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),r(n)&&Gd(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),r(n)&&Qd(t,e.fakeEventName))},G2=(e,t)=>{const n=()=>Ta(g3,e,t),s=()=>Ta(j3,e,t),o=((e,t)=>Y6([ze([fv],ke.none()),ze([ko(!0),vv],ke.none()),ze([c3("summary",!0)],ke.br()),ze([ko(!0),_a(!1),Ea],ke.br()),ze([ko(!0),_a(!1)],ke.block()),ze([ko(!0),_a(!0),Ea],ke.block()),ze([ko(!0),_a(!0)],ke.br()),ze([l3(!0),Ea],ke.br()),ze([l3(!0)],ke.block()),ze([yv],ke.br()),ze([Ea],ke.br()),ze([wv],ke.block())],[e,!!t&&!!t.shiftKey]).getOr(ke.none()))(e,t);switch(ev(e)){case"linebreak":o.fold(n,n,g);break;case"block":o.fold(s,s,g);break;case"invert":o.fold(s,n,g);break;default:o.fold(n,s,g)}},Ev=On(),Y2=e=>e.stopImmediatePropagation(),q2=e=>e.keyCode===u.PAGE_UP||e.keyCode===u.PAGE_DOWN,K2=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",Y2,!0):!n&&e.get()&&t.off("NodeChange",Y2),e.set(n)},V2=(t,o)=>{const i=o.container(),a=o.offset();return s(i)?(i.insertData(a,t),e.some(n(i,a+t.length))):mi(o).map(e=>{const s=In(t);return o.isAtEnd()?At(e,s):_e(e,s),n(s.dom,t.length)})},Fv=d(V2,W),Tv=d(V2," "),zv=(e,t)=>n=>((e,t)=>!Uc(t)&&(((e,t)=>((e,t)=>je(e.dom,t).isNone())(e,t)||((e,t)=>me(e.dom,t).isNone())(e,t)||Zc(e,t)||Z0(e,t)||Kc(e,t)||Yc(e,t))(e,t)||l2(e,t)||d2(e,t)))(e,n)?Fv(t):Tv(t),Dv=s=>{const i=n.fromRangeStart(s.selection.getRng()),o=t(s.getBody());if(s.selection.isCollapsed()){const e=d(en,s),t=n.fromRangeStart(s.selection.getRng());return nt(e,s.getBody(),t).bind((e=>t=>t.fold(t=>je(e.dom,n.before(t)),e=>ae(e),e=>at(e),t=>me(e.dom,n.after(t))))(o)).map(e=>()=>zv(o,i)(e).each((e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0))(s)))}return e.none()},Nv=e=>_j(e)?[{keyCode:u.TAB,action:p(f8,e,!0)},{keyCode:u.TAB,shiftKey:!0,action:p(f8,e,!1)}]:[],Lv=e=>{if(e.addShortcut("Meta+P","","mcePrint"),I7(e),ct(e))return I(null);{const s=Zp(e);return(e=>{e.on("keyup compositionstart",d(Mg,e))})(e),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const s=b.os.isMacOS()||b.os.isiOS();Js([{keyCode:u.RIGHT,action:p(Cf,e,!0)},{keyCode:u.LEFT,action:p(Cf,e,!1)},{keyCode:u.UP,action:p(xf,e,!1)},{keyCode:u.DOWN,action:p(xf,e,!0)},...s?[{keyCode:u.UP,action:p(ha,e,!1),metaKey:!0,shiftKey:!0},{keyCode:u.DOWN,action:p(ha,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:u.RIGHT,action:p(k8,e,!0)},{keyCode:u.LEFT,action:p(k8,e,!1)},{keyCode:u.UP,action:p(C8,e,!1)},{keyCode:u.DOWN,action:p(C8,e,!0)},{keyCode:u.RIGHT,action:p(df,e,!0)},{keyCode:u.LEFT,action:p(df,e,!1)},{keyCode:u.UP,action:p(lf,e,!1)},{keyCode:u.DOWN,action:p(lf,e,!0)},{keyCode:u.RIGHT,action:p(x6,e,t,!0)},{keyCode:u.LEFT,action:p(x6,e,t,!1)},{keyCode:u.RIGHT,ctrlKey:!s,altKey:s,action:p(Jp,e,t)},{keyCode:u.LEFT,ctrlKey:!s,altKey:s,action:p(eg,e,t)},{keyCode:u.UP,action:p(gf,e,!1)},{keyCode:u.DOWN,action:p(gf,e,!0)}],n).each(e=>{n.preventDefault()})})(e,t,n)})})(e,s),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const s=n.keyCode===u.BACKSPACE?"deleteContentBackward":"deleteContentForward";hf([{keyCode:u.BACKSPACE,action:p(qf,e)},{keyCode:u.BACKSPACE,action:p(zd,e,!1)},{keyCode:u.DELETE,action:p(zd,e,!0)},{keyCode:u.BACKSPACE,action:p(jd,e,!1)},{keyCode:u.DELETE,action:p(jd,e,!0)},{keyCode:u.BACKSPACE,action:p(sl,e,t,!1)},{keyCode:u.DELETE,action:p(sl,e,t,!0)},{keyCode:u.BACKSPACE,action:p(_c,e,!1)},{keyCode:u.DELETE,action:p(_c,e,!0)},{keyCode:u.BACKSPACE,action:p(Dd,e,!1)},{keyCode:u.DELETE,action:p(Dd,e,!0)},{keyCode:u.BACKSPACE,action:p(Lr,e,!1)},{keyCode:u.DELETE,action:p(Lr,e,!0)},{keyCode:u.BACKSPACE,action:p(cd,e,!1)},{keyCode:u.DELETE,action:p(cd,e,!0)},{keyCode:u.BACKSPACE,action:p(ad,e,!1)},{keyCode:u.DELETE,action:p(ad,e,!0)},{keyCode:u.BACKSPACE,action:p(er,e,!1)},{keyCode:u.DELETE,action:p(er,e,!0)}],n).each(t=>{n.preventDefault(),Gd(e,s).isDefaultPrevented()||(t(),Qd(e,s))})})(e,t,n)}),e.on("keyup",t=>{t.isDefaultPrevented()||((e,t)=>{Js([{keyCode:u.BACKSPACE,action:p(N6,e)},{keyCode:u.DELETE,action:p(N6,e)}],t)})(e,t)})})(e,s),(e=>{e.on("keydown",t=>{t.keyCode===u.ENTER&&((e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{G2(e,t)}))})(e,t)})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{hf([{keyCode:u.SPACEBAR,action:p(Dv,e)}],t).each(n=>{t.preventDefault(),Gd(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Qd(e,"insertText",{data:" "}))})})(e,t)})})(e),(e=>{e.on("input",s=>{s.isComposing||(e=>{const s=t(e.getBody());e.selection.isCollapsed()&&a9(s,n.fromRangeStart(e.selection.getRng())).each(t=>{e.selection.setRng(t.toRange())})})(e)})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{Js([...Nv(e)],t).each(e=>{t.preventDefault()})})(e,t)})})(e),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const s=b.os.isMacOS()||b.os.isiOS();Js([{keyCode:u.END,action:p(Of,e,!0)},{keyCode:u.HOME,action:p(Of,e,!1)},...s?[]:[{keyCode:u.HOME,action:p(ha,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:u.END,action:p(ha,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:u.END,action:p(J8,e,!0)},{keyCode:u.HOME,action:p(J8,e,!1)},{keyCode:u.END,action:p(Da,e,!0,t)},{keyCode:u.HOME,action:p(Da,e,!1,t)}],n).each(e=>{n.preventDefault()})})(e,t,n)})})(e,s),((e,t)=>{if(Ev.os.isMacOS())return;const n=I(!1);e.on("keydown",t=>{q2(t)&&K2(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||((e,t,n)=>{Js([{keyCode:u.PAGE_UP,action:p(Da,e,!1,t)},{keyCode:u.PAGE_DOWN,action:p(Da,e,!0,t)}],n)})(e,t,s),q2(s)&&n.get()&&(K2(n,e,!1),e.nodeChanged())})})(e,s),s}};class Rv{constructor(e){let t;this.lastPath=[],this.editor=e;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",n=>{const s=e.selection.getRng(),o={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==n.type&&Dl(o,t)||e.dispatch("SelectionChange"),t=o}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const t=e.selection.getStart(!0);t&&li(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&li(e)&&("IMG"===e.selection.getNode().nodeName?xe.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let t;if(this.editor.initialized&&n&&!q9(this.editor)&&!this.editor.mode.isReadOnly()){const s=this.editor.getBody();t=n.getStart(!0)||s,t.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,s)||(t=s);const o=[];this.editor.dom.getParent(t,e=>e===s||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:t,parents:o})}}isSameElementPath(e){let t;const s=this.editor,n=Ls(s.dom.getParents(e,N,s.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}const Ha=a("x-tinymce/html"),xr="<!-- x-tinymce/html -->",Iv=e=>xr+e,D2=e=>-1!==e.indexOf(xr),z2="%MCEPASTEBIN%",br=e=>e.dom.get("mcepastebin"),Wv=e=>r(e)&&"mcepastebin"===e.id,T2=e=>e===z2,F2=(e,t)=>(i.each(t,t=>{e=Jo(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])}),e),M2=e=>F2(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>t||n?W:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),A2=(e,t)=>({content:e,cancelled:t}),lr=(e,t)=>(e.insertContent(t,{merge:Hb(e),paste:!0}),!0),nr=e=>/^https?:\/\/[\w\-/+=.,!;:&%@^~(){}?#]+$/i.test(e),Qv=(e,t,n)=>!e.selection.isCollapsed()&&!!nr(t)&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0))(e,t,n),Zv=(e,t,n)=>!!((e,t)=>nr(t)&&z(B1(e),e=>J1(t.toLowerCase(),`.${e.toLowerCase()}`)))(e,t)&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0))(e,t,n),Jv=(e=>{let t=0;return()=>"mceclip"+t++})(),C2=(e,t,n,s)=>{const o=((e,t,n)=>((e,t,n)=>{const s=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),o=((e,t)=>{const n=Jn({},e.schema);n.addNodeFilter("meta",e=>{i.each(e,e=>{e.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Dt({validate:!0},e.schema).serialize(s)})(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?((e,t,n)=>{const o=e.dom.create("div",{style:"display:none"},t),s=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,o,n);return A2(s.node.innerHTML,s.isDefaultPrevented())})(e,o,n):A2(o,s.isDefaultPrevented())})(e,t,n))(e,t,n);o.cancelled||((e,t,n)=>{n||!Ib(e)?lr(e,t):((e,t)=>{i.each([Qv,Zv,lr],n=>!n(e,t,lr))})(e,t)})(e,o.content,s)},Qa=(e,t,n)=>{const s=n||D2(t);C2(e,(e=>e.replace(xr,""))(t),s,!1)},sr=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=((e,t,n)=>{const o=e.split(/\n\n/),i=((e,t)=>{let n="<"+e;const s=Rl(t,(e,t)=>t+'="'+It.encodeAllRaw(e)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"})(t,n),a="</"+t+">",s=v(o,e=>e.split(/\n/).join("<br />"));return 1===s.length?s[0]:v(s,e=>i+e+a).join("")})(ip(n,cj(e)),ve(e),ro(e));C2(e,s,!1,!0)},O2=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},_s=(e,t)=>t in e&&e[t].length>0,w2=e=>_s(e,"text/html")||_s(e,"text/plain"),y2=(e,t,n)=>{const s="paste"===t.type?t.clipboardData:t.dataTransfer;var a;if(ea(e)&&s){const c=((e,t)=>{const n=t.items?mt(fe(t.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],s=t.files?fe(t.files):[];return m(n.length>0?n:s,(e=>{const t=B1(e);return e=>Y(e.type,"image/")&&z(t,t=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return i.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(t)===e.type)})(e))})(e,s);if(c.length>0)return t.preventDefault(),(a=c,Promise.all(v(a,e=>e8(e).then(t=>({file:e,uri:t}))))).then(t=>{n&&e.selection.setRng(n),o(t,t=>{((e,t)=>{Or(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const i=o?n:btoa(n),l=t.file,a=e.editorUpload.blobCache,c=a.getByData(i,s),d=c??((e,t,n,s)=>{const o=Jv(),i=h3(e)&&r(n.name),c=i?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return r(n)?e.dom.encode(n[1]):void 0})(e,n.name):o,l=i?n.name:void 0,a=t.create(o,n,s,c,l);return t.add(a),a})(e,a,l,i);Qa(e,`<img src="${d.blobUri()}">`,!1)})})(e,t)})}),!0}return!1},f2=(e,t,n,s)=>{let o=M2(n);const a=_s(t,Ha())||D2(n),r=!a&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(o),c=nr(o);(T2(o)||!o.length||r&&!c)&&(s=!0),(s||c)&&(o=_s(t,"text/plain")&&r?t["text/plain"]:(e=>{const n=Bt(),o=Jn({},n);let t="";const a=n.getVoidElements(),r=i.makeMap("script noscript style textarea video audio iframe object"," "),c=n.getBlockElements(),s=e=>{const o=e.name,i=e;if("br"!==o){if("wbr"!==o)if(a[o]&&(t+=" "),r[o])t+=" ";else{if(3===e.type&&(t+=e.value),!(e.name in n.getVoidElements())){let t=e.firstChild;if(t)do s(t);while(t=t.next)}c[o]&&i.next&&(t+=`
`,"p"===o&&(t+=`
`))}}else t+=`
`};return e=F2(e,[/<!\[[^\]]+\]>/g]),s(o.parse(e)),t})(o)),T2(o)||(s?sr(e,o):Qa(e,o,a))},c9=(e,t,n)=>{((e,t,n)=>{let s;e.on("keydown",e=>{(e=>u.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(s=e.shiftKey&&86===e.keyCode)}),e.on("paste",o=>{if(o.isDefaultPrevented()||(e=>{var t,n;return b.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(o))return;const a="text"===n.get()||s;s=!1;const i=O2(o.clipboardData);!w2(i)&&y2(e,o,t.getLastRng()||e.selection.getRng())||(_s(i,"text/html")?(o.preventDefault(),f2(e,i,i["text/html"],a)):(t.create(),xe.setEditorTimeout(e,()=>{const n=t.getHtml();t.remove(),f2(e,i,n,a)},0)))})})(e,t,n),(e=>{const t=e=>Y(e,"webkit-fake-url"),n=e=>Y(e,"data:");e.parser.addNodeFilter("img",(s,o,i)=>{if(!ea(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(i))for(const i of s){const o=i.attr("src");h(o)&&!i.attr("data-mce-object")&&o!==b.transparentSrc&&(t(o)||!dj(e)&&n(o))&&i.remove()}})})(e)},m2=(e,t,n,s)=>{((e,t,n)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Ha(),t),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},a2=e=>(t,n)=>{const{dom:s,selection:i}=e,o=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=s.create("div",{contenteditable:"true"},t);s.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(a),s.add(e.getBody(),o);const c=i.getRng();a.focus();const r=s.createRng();r.selectNodeContents(a),i.setRng(r),xe.setEditorTimeout(e,()=>{i.setRng(c),s.remove(o),n()},0)},i2=e=>({html:Iv(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),o2=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),s2=(e,t)=>{var n,s;return un.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(s=t.clientY)&&void 0!==s?s:0,e.getDoc())},n2=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},p9=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,t2=e=>i.trim(e).replace(p9,oi).toLowerCase(),v9=(e,t,n)=>{const o=Lb(e);if(n||"all"===o||!Rb(e))return t;const s=o?o.split(/[, ]/):[];if(s&&"none"!==o){const n=e.dom,o=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,i,a)=>{const l=n.parseStyle(n.decode(i)),r={};for(let e=0;e<s.length;e++){const a=l[s[e]];let t=a,i=n.getStyle(o,s[e],!0);/color/.test(s[e])&&(t=t2(t),i=t2(i)),i!==t&&(r[s[e]]=a)}const c=n.serializeStyle(r,"span");return c?t+' style="'+c+'"'+a:t+a})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,n,s)=>t+' style="'+n+'"'+s),t},b9=e=>{const n=I(!1),t=I(Xb(e)?"text":"html"),s=(e=>{const t=I(null);return{create:()=>((e,t)=>{const{dom:n,selection:o}=e,i=e.getBody();t.set(o.getRng());const s=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},z2);b.browser.isFirefox()&&n.setStyle(s,"left","rtl"===n.getStyle(i,"direction",!0)?65535:-65535),n.bind(s,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),s.focus(),o.select(s,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(br(e)){let s;const o=t.get();for(;s=br(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)})(e,t),getEl:()=>br(e),getHtml:()=>(e=>{const n=e.dom,i=(e,t)=>{e.appendChild(t),n.remove(t,!0)},[t,...a]=m(e.getBody().childNodes,Wv);o(a,e=>{i(t,e)});const s=n.select("div[id=mcepastebin]",t);for(let e=s.length-1;e>=0;e--){const o=n.create("div");t.insertBefore(o,s[e]),i(o,s[e])}return t?t.innerHTML:""})(e),getLastRng:t.get}})(e);(e=>{(b.browser.isChromium()||b.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})})(e,v9)})(e),((e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{((e,t)=>{"text"===t.get()?(t.set("html"),z1(e,!1)):(t.set("text"),z1(e,!0)),e.focus()})(e,t)}),e.addCommand("mceInsertClipboardContent",(t,n)=>{n.html&&Qa(e,n.html,n.internal),n.text&&sr(e,n.text)})})(e,t),(e=>{const t=t=>n=>{t(e,n)},n=Mb(e);j(n)&&e.on("PastePreProcess",t(n));const s=zb(e);j(s)&&e.on("PastePostProcess",t(s))})(e),e.on("PreInit",()=>{(e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&o2(e)&&m2(t,i2(e),a2(e),()=>{if(b.browser.isChromium()||b.browser.isFirefox()){const t=e.selection.getRng();xe.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&o2(e)&&m2(t,i2(e),a2(e),g)})(e))})(e),((e,t)=>{Cb(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),ea(e)||e.on("drop",e=>{const t=e.dataTransfer;t&&(e=>z(e.files,e=>/^image\//.test(e.type)))(t)&&e.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const o=s2(e,n);if(D(o))return;const s=O2(n.dataTransfer),r=_s(s,Ha());if((!w2(s)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(s))&&y2(e,n,o))return;const i=s[Ha()],a=i||s["text/html"]||s["text/plain"];a&&(n.preventDefault(),xe.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),n2(e,o);const t=M2(a);s["text/html"]?Qa(e,t,r):sr(e,t)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",n=>{ea(e)&&!t.get()&&(n.preventDefault(),n2(e,s2(e,n))),"dragend"===n.type&&t.set(!1)})})(e,n),c9(e,s,t)})},j9=F,e2=s,_9=e=>x(e.dom),J0=e=>n=>y(t(e),n),Q0=(e,n)=>Kt(t(e),_9,J0(n)),q0=(e,t,n)=>{const s=new P(e,t),o=n?s.next.bind(s):s.prev.bind(s);let i=e;for(let t=n?e:o();t&&!j9(t);t=o())Te(t)&&(i=t);return i},C9=e=>{const s=((e,s)=>{const c=n.fromRangeStart(e).getNode(),a=((e,n)=>Kt(t(e),e=>(e=>Be(e.dom))(e)||Ne(e),J0(n)).getOr(t(n)).dom)(c,s),r=q0(c,a,!1),i=q0(c,a,!0),o=document.createRange();return Q0(r,a).fold(()=>{e2(r)?o.setStart(r,0):o.setStartBefore(r)},e=>o.setStartBefore(e.dom)),Q0(i,a).fold(()=>{e2(i)?o.setEnd(i,i.data.length):o.setEndAfter(i)},e=>o.setEndAfter(e.dom)),o})(e.selection.getRng(),e.getBody());e.selection.setRng(hc(s))};!function(e){e.Before="before",e.After="after"}(ys||(ys={}));const k9=(e,t)=>Math.abs(e.left-t),A9=(e,t)=>Math.abs(e.right-t),S9=(t,n)=>(t=>be(t,(t,n)=>t.fold(()=>e.some(n),t=>{const s=Math.min(n.left,t.left),o=Math.min(n.top,t.top),i=Math.max(n.right,t.right),a=Math.max(n.bottom,t.bottom);return e.some({top:o,right:i,bottom:a,left:s,width:i-s,height:a-o})}),e.none()))(m(t,e=>{return(t=n)>=(s=e).top&&t<=s.bottom;var t,s})).fold(()=>[[],t],e=>{const{pass:n,fail:s}=zs(t,t=>((e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5})(t,e));return[n,s]}),M9=(e,t)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),or=(t,n,o)=>{const i=t=>Te(t.node)?e.some(t):c(t.node)?or(fe(t.node.childNodes),n,o):e.none(),a=(t,a)=>{const r=Un(t,(e,t)=>a(e,n,o)-a(t,n,o));return((t,a)=>{if(t.length>=2){const r=i(t[0]).getOr(t[0]),c=i(t[1]).getOr(t[1]);if(Math.abs(a(r,n,o)-a(c,n,o))<2){if(s(r.node))return e.some(r);if(s(c.node))return e.some(c)}}return e.none()})(r,a).orThunk(()=>ls(r,i))},[r,l]=S9(ep(t),o),{pass:d,fail:u}=zs(l,e=>e.top<o);return a(r,M9).orThunk(()=>a(u,Cm)).orThunk(()=>a(d,Cm))},W0=(n,s,o)=>((n,s,o)=>{const i=t(n),a=ht(i),r=Z7(a,s,o).filter(e=>ut(i,e)).getOr(i);return((t,n,s,o)=>{const i=(n,a)=>{const r=m(n.dom.childNodes,ii(e=>c(e)&&e.classList.contains("mce-drag-container")));return a.fold(()=>or(r,s,o),e=>{const t=m(r,t=>t!==e.dom);return or(t,s,o)}).orThunk(()=>(y(n,t)?e.none():L3(n)).bind(t=>i(t,e.some(n))))};return i(n,e.none())})(i,r,s,o)})(n,s,o).filter(e=>Ps(e.node)).map(e=>((e,t)=>({node:e.node,position:k9(e,t)<A9(e,t)?ys.Before:ys.After}))(e,s)),$0=e=>{var n,s;const o=e.getBoundingClientRect(),i=e.ownerDocument,a=i.documentElement,t=i.defaultView;return{top:o.top+(null!==(n=t?.scrollY)&&void 0!==n?n:0)-a.clientTop,left:o.left+(null!==(s=t?.scrollX)&&void 0!==s?s:0)-a.clientLeft}},ir=x,N9=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(ir,Be),L9=(e,t,n,s)=>{const o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:s}),o.setAttrib(i,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a},Ga=(e,t)=>n=>()=>{const s="left"===e?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},P0=Ga("left",-32),R0=Ga("left",32),D0=Ga("top",-32),z0=Ga("top",32),T0=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},$9=(e,t)=>{const n=Sa((e,n)=>{t._selectionOverrides.hideFakeCaret(),W0(t.getBody(),e,n).fold(()=>t.selection.placeCaretAt(e,n),s=>{const o=t._selectionOverrides.showCaret(1,s.node,s.position===ys.Before,!1);o?t.selection.setRng(o):t.selection.placeCaretAt(e,n)})},0);t.on("remove",n.cancel);const s=e;return o=>e.on(e=>{const r=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&r>10){if(t.dispatch("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const r=o.currentTarget===t.getDoc().documentElement,c=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,((e,t)=>{return n=(e=>e.inline?$0(e.getBody()):{left:0,top:0})(e),s=(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),o=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=$0(e.getContentAreaContainer()),s=(e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o})(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:o.left-n.left+s.left,pageY:o.top-n.top+s.top};var n,s,o})(t,o));i=e.ghost,a=t.getBody(),i.parentNode!==a&&a.appendChild(i),((e,t,n,s,o,i,a,r,c,l,d,u)=>{let h=0,m=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(h=t.pageX+n-o),t.pageY+s>i&&(m=t.pageY+s-i),e.style.width=n-h+"px",e.style.height=s-m+"px";const g=c.clientHeight,v=c.clientWidth,f=a+c.getBoundingClientRect().top,p=r+c.getBoundingClientRect().left;d.on(e=>{e.intervalId.clear(),e.dragging&&u&&(a+8>=g?e.intervalId.set(z0(l)):a-8<=0?e.intervalId.set(D0(l)):r+8>=v?e.intervalId.set(R0(l)):r-8<=0?e.intervalId.set(P0(l)):f+16>=window.innerHeight?e.intervalId.set(z0(window)):f-16<=0?e.intervalId.set(D0(window)):p+16>=window.innerWidth?e.intervalId.set(R0(window)):p-16<=0&&e.intervalId.set(P0(window)))})})(e.ghost,c,e.width,e.height,e.maxX,e.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,r),n.throttle(o.clientX,o.clientY)}var i,a})},F0=e=>{e.on(e=>{e.intervalId.clear(),T0(e.ghost)}),e.clear()},U9=e=>{const t=Rt(),n=w.DOM,o=document,c=((e,t)=>n=>{if((e=>0===e.button)(n)){const i=V(t.dom.getParents(n.target),N9).getOr(null);if(r(i)&&(s=t.getBody(),ir(o=i)&&o!==s)){const s=t.dom.getPos(i),o=t.getBody(),a=t.getDoc().documentElement;e.set({element:i,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?o.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?o.scrollHeight:a.offsetHeight)-2,relX:n.pageX-s.x,relY:n.pageY-s.y,width:i.offsetWidth,height:i.offsetHeight,ghost:L9(t,i,i.offsetWidth,i.offsetHeight),intervalId:m5(100)})}}var s,o})(t,e),i=$9(t,e),l=((e,t)=>n=>{e.on(e=>{if(e.intervalId.clear(),e.dragging){if(((e,t,n)=>!D(t)&&t!==n&&!e.dom.isChildOf(t,n)&&!ir(t))(t,(e=>{const t=e.getSel();if(r(t)){const e=t.getRangeAt(0).startContainer;return s(e)?e.parentNode:e}return null})(t.selection),e.element)){const s=(e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t})(e.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{T0(e.element),t.insertContent(t.dom.getOuterHTML(s)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),F0(e)})(t,e),a=((e,t)=>()=>{e.on(e=>{e.intervalId.clear(),e.dragging&&t.dispatch("dragend")}),F0(e)})(t,e);e.on("mousedown",c),e.on("mousemove",i),e.on("mouseup",l),n.bind(o,"mousemove",i),n.bind(o,"mouseup",a),e.on("remove",()=>{n.unbind(o,"mousemove",i),n.unbind(o,"mouseup",a)}),e.on("keydown",e=>{e.keyCode===u.ESC&&a()})},us=x,cr=(e,t)=>xn(e.getBody(),t),Y9=e=>{const l=e.selection,n=e.dom,a=e.getBody(),d=Pj(e,a,n.isBlock,()=>Wt(e)),v="sel-"+n.uniqueId(),h="data-mce-selected";let i;const j=e=>e!==a&&(us(e)||it(e))&&n.isChildOf(e,a),m=(t,n,s,o=!0)=>e.dispatch("ShowCaret",{target:n,direction:t,before:s}).isDefaultPrevented()?null:(o&&l.scrollIntoView(n,-1===t),d.show(s,n)),_=e=>Ee(e)||Di(e)||zi(e),C=e=>_(e.startContainer)||_(e.endContainer),E=t=>{const a=e.schema.getVoidElements(),s=n.createRng(),o=t.startContainer,r=t.startOffset,i=t.endContainer,c=t.endOffset;return f(a,o.nodeName.toLowerCase())?0===r?s.setStartBefore(o):s.setStartAfter(o):s.setStart(o,r),f(a,i.nodeName.toLowerCase())?0===c?s.setEndBefore(i):s.setEndAfter(i):s.setEnd(i,c),s},p=(d,u)=>{if(!d)return null;if(d.collapsed){if(!C(d)){const o=u?1:-1,s=Ms(o,a,d),e=s.getNode(!u);if(r(e)){if(Ps(e))return m(o,e,!!u&&!s.isAtEnd(),!1);if(Tt(e)&&x(e.nextSibling)){const t=n.createRng();return t.setStart(e,0),t.setEnd(e,0),t}}const t=s.getNode(u);if(r(t)){if(Ps(t))return m(o,t,!u&&!s.isAtEnd(),!1);if(Tt(t)&&x(t.previousSibling)){const e=n.createRng();return e.setStart(t,1),e.setEnd(t,1),e}}}return null}let f=d.startContainer,p=d.startOffset;const b=d.endOffset;if(s(f)&&0===p&&us(f.parentNode)&&(f=f.parentNode,p=n.nodeIndex(f),f=f.parentNode),!c(f))return null;if(b===p+1&&f===d.endContainer){const s=f.childNodes[p];if(j(s))return(s=>{const r=s.cloneNode(!0),a=e.dispatch("ObjectSelected",{target:s,targetClone:r});if(a.isDefaultPrevented())return null;const c=((s,o)=>{const d=t(e.getBody()),r=e.getDoc(),i=Cs(d,"#"+v).getOrThunk(()=>{const e=Hi('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',r);return U(e,"id",v),H(d,e),e}),a=n.createRng();Gs(i),ln(i,[In(W,r),t(o),In(W,r)]),a.setStart(i.dom.firstChild,1),a.setEnd(i.dom.lastChild,0),Na(i,{top:n.getPos(s,e.getBody()).y+"px"}),z4(i);const c=l.getSel();return c&&(c.removeAllRanges(),c.addRange(a)),a})(s,a.targetClone),d=t(s);return o(te(t(e.getBody()),"*[data-mce-selected]"),e=>{y(d,e)||K(e,h)}),n.getAttrib(s,h)||s.setAttribute(h,"1"),i=s,g(),c})(s)}return null},b=()=>{i&&i.removeAttribute(h),Cs(t(e.getBody()),"#"+v).each(A),i=null},g=()=>{d.hide()};return ct(e)||(e.on("click",t=>{const n=cr(e,t.target);n&&us(n)&&(t.preventDefault(),e.focus())}),e.on("blur NewBlock",b),e.on("ResizeWindow FullscreenStateChanged",d.reposition),e.on("tap",t=>{const n=t.target,s=cr(e,n);us(s)?(t.preventDefault(),Po(e,s).each(p)):j(n)&&Po(e,n).each(p)},!0),e.on("mousedown",s=>{const o=s.target;if(o!==a&&"HTML"!==o.nodeName&&!n.isChildOf(o,a))return;if(!((e,n,s)=>{const o=t(e.getBody()),i=e.inline?o:t(ht(o).dom.documentElement),a=((e,t,n,s)=>{const o=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?o.left+t.dom.clientLeft+Tg(t):0),y:s-(e?o.top+t.dom.clientTop+zg(t):0)}})(e.inline,i,n,s);return((e,t,n)=>{const s=Ng(e),o=Dg(e);return t>=0&&n>=0&&t<=s&&n<=o})(i,a.x,a.y)})(e,s.clientX,s.clientY))return;b(),g();const i=cr(e,o);us(i)?(s.preventDefault(),Po(e,i).each(p)):W0(a,s.clientX,s.clientY).each(t=>{var n;s.preventDefault(),(n=m(1,t.node,t.position===ys.Before,!1))&&l.setRng(n),c(i)?i.focus():e.getBody().focus()})}),e.on("keypress",e=>{u.modifierPressed(e)||us(l.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let t=e.range;if(i){if(!i.parentNode)return void(i=null);t=t.cloneRange(),t.selectNode(i),e.range=t}}),e.on("SetSelectionRange",e=>{e.range=E(e.range);const t=p(e.range,e.forward);t&&(e.range=t)}),e.on("AfterSetSelectionRange",e=>{const t=e.range,s=t.startContainer.parentElement;var o;C(t)||c(o=s)&&"mcepastebin"===o.id||g(),(e=>r(e)&&n.hasClass(e,"mce-offscreen-selection"))(s)||b()}),(e=>{U9(e),ib(e)&&(e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&(O(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Li(e,"Dropped file type is not supported"))}},n=n=>{ta(e,n.target)&&t(n)},s=()=>{const s=w.DOM,i=e.dom,a=document,r=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];o(c,e=>{s.bind(a,e,n),i.bind(r,e,t)}),e.on("remove",()=>{o(c,e=>{s.unbind(a,e,n),i.unbind(r,e,t)})})};e.on("init",()=>{xe.setEditorTimeout(e,s,0)})})(e)})(e),(e=>{const t=Sa(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=bd(e,t,!1);e.selection.setRng(n)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})})(e),(e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(it(n)){const t=xn(e.getBody(),n),s=x(t)?t:n;e.selection.getNode()!==s&&Po(e,s).each(t=>e.selection.setRng(t))}})})})(e)),{showCaret:m,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(ud(e),l.scrollIntoView(e))},hideFakeCaret:g,destroy:()=>{d.destroy(),i=null}}},G9=(e,t)=>{let n=t;for(let t=e.previousSibling;s(t);t=t.previousSibling)n+=t.data.length;return n},w0=(e,t,n,o,i)=>{if(s(n)&&(o<0||o>n.data.length))return[];const r=i&&s(n)?[G9(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)r.push(e.nodeIndex(a,i)),a=a.parentNode;return a===t?r.reverse():[]},yr=(e,t,n,s,o,i,a=!1)=>({start:w0(e,t,n,s,a),end:w0(e,t,o,i,a)}),v0=(t,n)=>{const i=n.slice(),o=i.pop();return We(o)?be(i,(t,n)=>t.bind(t=>e.from(t.childNodes[n])),e.some(t)).bind(t=>s(t)&&(o<0||o>t.data.length)?e.none():e.some({node:t,offset:o})):e.none()},m0=(e,t)=>v0(e,t.start).bind(({node:n,offset:s})=>v0(e,t.end).map(({node:e,offset:t})=>{const o=document.createRange();return o.setStart(n,s),o.setEnd(e,t),o})),Xn=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Xn(e,s,n)}},Wa=(e,t,n,o=!0)=>{const i=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(s(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),s(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),Xn(e,i,n),i!==a&&Xn(e,a,n))},wr=(t,n)=>e.from(t.dom.getParent(n.startContainer,t.dom.isBlock)),l0=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Q3(s).concat(e.blockPatterns),inlinePatterns:X3(s).concat(e.inlinePatterns)}},a0=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},i0=(t,n,o)=>{((t,n,o)=>{if(s(t)&&0>=t.length)return e.some(He(t,0));{const n=cn(Ri);return e.from(n.forwards(t,0,Oi(t),o)).map(e=>He(e.container,0))}})(n,0,n).each(e=>{const s=e.container;a8(s,o.start.length,n).each(e=>{const o=t.createRng();o.setStart(s,0),o.setEnd(e.container,e.offset),Wa(t,o,e=>e===n)})})},e0=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Va=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},J4=(e,t,n)=>{const s=m0(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,i=s.endContainer,a=0===s.endOffset?i:i.splitText(s.endOffset),r=0===s.startOffset?o:o.splitText(s.startOffset),c=r.parentNode;return{prefix:t,end:a.parentNode.insertBefore(e0(e,t+"-end"),a),start:c.insertBefore(e0(e,t+"-start"),r)}},X4=(e,t,n)=>{Xn(e,e.get(t.prefix+"-end"),n),Xn(e,e.get(t.prefix+"-start"),n)},Er=e=>0===e.start.length,Y4=(t,n,s,o)=>{const i=n.start;var a;return lu(t,o.container,o.offset,(a=i,(e,t)=>{const n=e.data.substring(0,t),s=n.lastIndexOf(a.charAt(a.length-1)),o=n.lastIndexOf(a);return-1!==o?o+a.length:-1!==s?s+1:-1}),s).bind(o=>{var a,r;const c=null!==(r=null===(a=s.textContent)||void 0===a?void 0:a.indexOf(i))&&void 0!==r?r:-1;if(-1!==c&&o.offset>=c+i.length){const n=t.createRng();return n.setStart(o.container,o.offset-i.length),n.setEnd(o.container,o.offset),e.some(n)}{const e=o.offset-i.length;return au(o.container,e,s).map(e=>{const n=t.createRng();return n.setStart(e.container,e.offset),n.setEnd(o.container,o.offset),n}).filter(e=>e.toString()===i).orThunk(()=>Y4(t,n,s,He(o.container,0)))}})},hb=(t,n,s,o)=>{const i=t.dom,r=i.getRoot(),a=s.pattern,c=s.position.container,l=s.position.offset;return au(c,l-s.pattern.end.length,n).bind(d=>{const u=yr(i,r,d.container,d.offset,c,l,o);if(Er(a))return e.some({matches:[{pattern:a,startRng:u,endRng:u}],position:d});{const c=Ia(t,s.remainingPatterns,d.container,d.offset,n,o),l=c.getOr({matches:[],position:d}),h=l.position,m=((t,n,s,o,i,a=!1)=>{if(0===n.start.length&&!a){const n=t.createRng();return n.setStart(s,o),n.setEnd(s,o),e.some(n)}return pd(s,o,i).bind(s=>Y4(t,n,i,s).bind(t=>{var n;if(a){if(t.endContainer===s.container&&t.endOffset===s.offset)return e.none();if(0===s.offset&&(null===(n=t.endContainer.textContent)||void 0===n?void 0:n.length)===t.endOffset)return e.none()}return e.some(t)}))})(i,a,h.container,h.offset,n,c.isNone());return m.map(e=>{const t=((e,t,n,s=!1)=>yr(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s))(i,r,e,o);return{matches:l.matches.concat([{pattern:a,startRng:t,endRng:u}]),position:He(e.startContainer,e.startOffset)}})}})},Ia=(t,n,s,o,i,a)=>{const r=t.dom;return pd(s,o,r.getRoot()).bind(c=>{const l=a0(r,i,s,o);for(let e=0;e<n.length;e++){const d=n[e];if(!J1(l,d.end))continue;const u=n.slice();u.splice(e,1);const r=hb(t,i,{pattern:d,remainingPatterns:u,position:c},a);if(r.isNone()&&o>0)return Ia(t,n,s,o-1,i,a);if(r.isSome())return r}return e.none()})},K4=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?o(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},U4=(e,t,n,s,o,i)=>{var a;return((e,t)=>{const n=Xt(e,e=>z(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t})(Ia(e,o.inlinePatterns,n,s,t,i).fold(()=>[],e=>e.matches),Ia(e,(a=o.inlinePatterns,Un(a,(e,t)=>t.end.length-e.end.length)),n,s,t,i).fold(()=>[],e=>e.matches))},$4=(e,t)=>{if(0===t.length)return;const n=e.dom,s=e.selection.getBookmark(),i=((e,t)=>{const n=Rm("mce_textpattern"),s=vi(t,(t,s)=>{const o=J4(e,n+`_end${t.length}`,s.endRng);return t.concat([{...s,endMarker:o}])},[]);return vi(s,(t,o)=>{const i=s.length-t.length-1,a=Er(o.pattern)?o.endMarker:J4(e,n+`_start${i}`,o.startRng);return t.concat([{...o,startMarker:a}])},[])})(n,t);o(i,t=>{const o=n.getParent(t.startMarker.start,n.isBlock),s=e=>e===o;Er(t.pattern)?((e,t,n,s)=>{const o=Va(e.dom,n);Wa(e.dom,o,s),K4(e,t,o)})(e,t.pattern,t.endMarker,s):((e,t,n,s,o)=>{const i=e.dom,a=Va(i,s),r=Va(i,n);Wa(i,r,o),Wa(i,a,o);const c={prefix:n.prefix,start:n.end,end:s.start},l=Va(i,c);K4(e,t,l)})(e,t.pattern,t.startMarker,t.endMarker,s),X4(n,t.endMarker,s),X4(n,t.startMarker,s)}),e.selection.moveToBookmark(s)},vb=(e,t)=>{const n=e.selection.getRng();return wr(e,n).map(s=>{var a;const d=Math.max(0,n.startOffset),r=l0(t,s,null!==(a=s.textContent)&&void 0!==a?a:""),c=U4(e,s,n.startContainer,d,r,!0),l=((e,t,n)=>{var o;const a=e.dom,c=ve(e);if(!a.is(t,c))return[];const r=null!==(o=t.textContent)&&void 0!==o?o:"";return((e,t)=>{const n=(e=>Un(e,(e,t)=>t.start.length-e.start.length))(e),s=t.replace(W," ");return V(n,e=>0===t.indexOf(e.start)||0===s.indexOf(e.start))})(n.blockPatterns,r).map(e=>i.trim(r).length===e.start.length?[]:[{pattern:e,range:yr(a,a.getRoot(),t,0,t,0,!0)}]).getOr([])})(e,s,r);return(l.length>0||c.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(eo),$4(e,c),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();o(t,t=>((e,t)=>{const s=e.dom,n=t.pattern,o=m0(s.getRoot(),t.range).getOrDie("Unable to resolve path range");return wr(e,o).each(t=>{"block-format"===n.type?((e,t)=>{const n=t.get(e);return L(n)&&ue(n).exists(e=>f(e,"block"))})(n.format,e.formatter)&&e.undoManager.transact(()=>{i0(e.dom,t,n),e.formatter.apply(n.format)}):"block-command"===n.type&&e.undoManager.transact(()=>{i0(e.dom,t,n),e.execCommand(n.cmd,!1,n.value)})}),!0})(e,t)),e.selection.moveToBookmark(n)})(e,l);const t=e.selection.getRng(),n=pd(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),n.each(t=>{const n=t.container;n.data.charAt(t.offset-1)===eo&&(n.deleteData(t.offset-1,1),Xn(e.dom,n.parentNode,t=>t===e.dom.getRoot()))})}),!0)}).getOr(!1)},V4=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},jb=e=>{const p=i.each,c=u.BACKSPACE,A=u.DELETE,t=e.dom,n=e.selection,k=e.parser,a=b.browser,r=a.isFirefox(),_=a.isChromium()||a.isSafari(),h=b.deviceType.isiPhone()||b.deviceType.isiPad(),S=b.os.isMacOS()||b.os.isiOS(),o=(t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},s=e=>e.isDefaultPrevented(),v=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},j=()=>{e.inline||t.bind(e.getDoc(),"mousedown mouseup",t=>{let s;if(t.target===e.getDoc().documentElement)if(s=n.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Ee(s.startContainer))return;n.placeCaretAt(t.clientX,t.clientY)}else n.setRng(s)})},y=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!s(t)&&"HTML"===t.target.nodeName){const t=e.getBody();t.blur(),xe.setEditorTimeout(e,()=>{t.focus()})}})},d=()=>{const s=Z4(e);e.on("click",o=>{const i=o.target;/^(IMG|HR)$/.test(i.nodeName)&&"false"!==t.getContentEditableParent(i)&&(o.preventDefault(),e.selection.select(i),e.nodeChanged()),"A"===i.nodeName&&t.hasClass(i,s)&&0===i.childNodes.length&&(o.preventDefault(),n.select(i))})},w=()=>{e.on("keydown",e=>{if(!s(e)&&e.keyCode===c&&n.isCollapsed()&&0===n.getRng().startOffset){const t=n.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},O=()=>{C0(e)||e.on("BeforeExecCommand mousedown",()=>{o("StyleWithCSS",!1),o("enableInlineTableEditing",!1),p2(e)||o("enableObjectResizing",!1)})},x=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},l=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},E=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())}))},C=()=>{S&&e.on("keydown",t=>{!u.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},f=()=>{e.on("click",e=>{let t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},m=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})},M=g;return ct(e)?(_&&(j(),d(),m(),v(),h&&(l(),E(),f())),r&&(y(),O(),x(),C())):(e.on("keydown",o=>{if(s(o)||o.keyCode!==u.BACKSPACE)return;let a=n.getRng();const r=a.startContainer,c=a.startOffset,l=t.getRoot();let i=r;if(a.collapsed&&0===c){for(;i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==l;)i=i.parentNode;"BLOCKQUOTE"===i.nodeName&&(e.formatter.toggle("blockquote",void 0,i),a=t.createRng(),a.setStart(r,0),a.setEnd(r,0),n.setRng(a))}}),(()=>{const o=e=>{const s=t.create("body"),o=e.cloneContents();return s.appendChild(o),n.serializer.serialize(s,{format:"html"})};e.on("keydown",n=>{const i=n.keyCode;if(!s(n)&&(i===A||i===c)){const i=e.selection.isCollapsed(),s=e.getBody();if(i&&!t.isEmpty(s))return;if(!i&&!(n=>{const i=o(n),s=t.createRng();return s.selectNode(e.getBody()),i===o(s)})(e.selection.getRng()))return;n.preventDefault(),e.setContent(""),s.firstChild&&t.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})})(),b.windowsPhone||e.on("keyup focusin mouseup",t=>{u.modifierPressed(t)||(e=>{const n=e.getBody(),t=e.selection.getRng();return t.startContainer===t.endContainer&&t.startContainer===n&&0===t.startOffset&&t.endOffset===n.childNodes.length})(e)||n.normalize()},!0),_&&(j(),d(),e.on("init",()=>{o("DefaultParagraphSeparator",ve(e))}),m(),w(),k.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),h?(l(),E(),f()):v()),r&&(e.on("keydown",o=>{if(!s(o)&&o.keyCode===c){if(!e.getBody().getElementsByTagName("hr").length)return;if(n.isCollapsed()&&0===n.getRng().startOffset){const s=n.getNode(),e=s.previousSibling;if("HR"===s.nodeName)return t.remove(s),void o.preventDefault();e&&e.nodeName&&"hr"===e.nodeName.toLowerCase()&&(t.remove(e),o.preventDefault())}}}),y(),(()=>{const o=()=>{const s=t.getAttribs(n.getStart().cloneNode(!1));return()=>{const o=n.getStart();o!==e.getBody()&&(t.setAttrib(o,"style",null),p(s,e=>{o.setAttributeNode(e.cloneNode(!0))}))}},i=()=>!n.isCollapsed()&&t.getParent(n.getStart(),t.isBlock)!==t.getParent(n.getEnd(),t.isBlock);e.on("keypress",t=>{let n;return!(!(s(t)||8!==t.keyCode&&46!==t.keyCode)&&i()&&(n=o(),e.getDoc().execCommand("delete",!1),n(),t.preventDefault(),1))}),t.bind(e.getDoc(),"cut",t=>{if(!s(t)&&i()){const t=o();xe.setEditorTimeout(e,()=>{t()})}})})(),O(),e.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||p(t.select("a:not([data-mce-block])"),e=>{let n=e.parentNode;const o=t.getRoot();if(n?.lastChild===e){for(var s;n&&!t.isBlock(n);){if((null===(s=n.parentNode)||void 0===s?void 0:s.lastChild)!==n||n===o)return;n=n.parentNode}t.add(n,"br",{"data-mce-bogus":1})}})}),x(),C(),w())),{refreshContentEditable:M,isHidden:()=>{if(!r||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},Sr=w.DOM,_b=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,zr=e=>Us(e,e=>!1===re(e)),R4=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return zr({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:_b(e),validate:!0,blob_cache:n,document:e.getDoc()})},N4=e=>{const t=e.options.get;return zr({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},T4=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,F4=e=>{const c=T4(e),n=x2(e),s=e.contentCSS,o=()=>{c.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},a=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let t="";i.each(e.contentStyles,e=>{t+=e+`
`}),e.dom.addStyle(t)}const l=Promise.all(((e,t,n)=>{const s=[T4(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,s,n)).then(a).catch(a),r=Uv(e);return r&&((e,n)=>{const o=t(e.getBody()),i=Bc(wt(o)),s=$("style");U(s,"type","text/css"),H(s,In(n)),H(i,s),e.on("remove",()=>{A(s)})})(e,r),l},Br=e=>{!0!==e.removed&&((e=>{ct(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();e.inline||li(e)&&e.selection.getStart(!0)!==t||ae(t).each(t=>{const n=t.getNode(),s=ft(n)?ae(n).getOr(t):t;e.selection.setRng(s.toRange())})})(e),e.nodeChanged({initial:!0});const t=fb(e);j(t)&&t.call(e,e),(e=>{const t=gb(e);t&&xe.setEditorTimeout(e,()=>{let n;n=!0===t?e:e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(e)})(e))},S4=n=>{const r=n.getElement();let c=n.getDoc();n.inline&&(Sr.addClass(r,"mce-content-body"),n.contentDocument=c=document,n.contentWindow=window,n.bodyElement=r,n.contentAreaContainer=r);const s=n.getBody();s.disabled=!0,n.readonly=C0(n),n.readonly||(n.inline&&"static"===Sr.getStyle(s,"position",!0)&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,n.editorUpload=yg(n),n.schema=Bt(N4(n)),n.dom=w(c,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,update_styles:!0,root_element:n.inline?n.getBody():null,collect:n.inline,schema:n.schema,contentCssCors:Sv(n),referrerPolicy:Tc(n),onSetAttrib:e=>{n.dispatch("SetAttrib",e)}}),n.parser=(e=>{const t=Jn(R4(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,n)=>{const o=e.dom,s="data-mce-"+n;let i=t.length;for(;i--;){const r=t[i];let a=r.attr(n);if(a&&!r.attr(s)){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===n?(a=o.serializeStyle(o.parseStyle(a),r.name),a.length||(a=null),r.attr(s,a),r.attr(n,a)):"tabindex"===n?(r.attr(s,a),r.attr(n,null)):r.attr(s,e.convertURL(a,n,r.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){const n=e[t],s=n.attr("type")||"no/type";0!==s.indexOf("mce-")&&n.attr("type","mce-"+s)}}),yj(e)&&t.addNodeFilter("#cdata",t=>{let s=t.length;for(var n;s--;){const o=t[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(n=o.value)&&void 0!==n?n:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let n=t.length;const s=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(s)&&0===e.getAll("br").length&&e.append(new le("br",1))}}),t})(n),n.serializer=uf((e=>{const t=e.options.get;return{...R4(e),...N4(e),...zr({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(n),n),n.selection=cf(n.dom,n.getWin(),n.serializer,n),n.annotator=C1(n),n.formatter=t6(n),n.undoManager=s6(n),n._nodeChangeDispatcher=new Rv(n),n._selectionOverrides=Y9(n),(e=>{const t=Rt(),n=I(!1),s=nc(t=>{e.dispatch("longpress",{...t,type:"longpress"}),n.set(!0)},400);e.on("touchstart",e=>{Wf(e).each(o=>{s.cancel();const i={x:o.clientX,y:o.clientY,target:e.target};s.throttle(e),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),Wf(o).each(s=>{t.on(o=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>5||s>5})(s,o)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),"touchcancel"!==o.type&&t.get().filter(e=>e.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)})(n),(e=>{(e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})})(e),(e=>{e.parser.addNodeFilter("details",e=>{o(e,e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",e=>{o(e,e=>{const t=e.attr("data-mce-open");e.attr("open",h(t)?t:null),e.attr("data-mce-open",null)})})})(e)})(n),(e=>{const t="contenteditable",a=" "+i.trim(pj(e))+" ",r=" "+i.trim(Y1(e))+" ",s=Nf(a),o=Nf(r),n=bj(e);n.length>0&&e.on("BeforeSetContent",t=>{((e,t,n)=>{let o=t.length,s=n.content;if("raw"!==n.format){for(;o--;)s=s.replace(t[o],Ag(e,s,Y1(e)));n.content=s}})(e,n,t)}),e.parser.addAttributeFilter("class",e=>{let n=e.length;for(;n--;){const i=e[n];s(i)?i.attr(t,"true"):o(i)&&i.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let i=e.length;for(;i--;){const a=e[i];(s(a)||o(a))&&(n.length>0&&a.attr("data-mce-content")?(a.name="#text",a.type=3,a.raw=!0,a.value=a.attr("data-mce-content")):a.attr(t,null))}})})(n),ct(n)||((e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),C9(e))})})(n),(e=>{(e=>{const o=[",",".",";",":","!","?"],i=[32],t=()=>{return t=hj(e),n=fj(e),{inlinePatterns:X3(t),blockPatterns:Q3(t),dynamicPatternsLookup:n};var t,n},n=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",s=>{if(13===s.keyCode&&!u.modifierPressed(s)&&e.selection.isCollapsed()){const o=t();(o.inlinePatterns.length>0||o.blockPatterns.length>0||n())&&vb(e,o)&&s.preventDefault()}},!0);const s=()=>{if(e.selection.isCollapsed()){const s=t();(s.inlinePatterns.length>0||n())&&((e,t)=>{const n=e.selection.getRng();wr(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),a=a0(e.dom,s,n.startContainer,o),r=l0(t,s,a),i=U4(e,s,n.startContainer,o,r,!1);i.length>0&&e.undoManager.transact(()=>{$4(e,i)})})})(e,s)}};e.on("keyup",e=>{V4(i,e,(e,t)=>e===t.keyCode&&!u.modifierPressed(t))&&s()}),e.on("keypress",t=>{V4(o,t,(e,t)=>e.charCodeAt(0)===t.charCode)&&xe.setEditorTimeout(e,s)})})(e)})(n));const l=Lv(n);jg(n,l),(e=>{e.on("NodeChange",d(Cg,e))})(n),(e=>{var o;const s=e.dom,a=ve(e),i=null!==(o=l9(e))&&void 0!==o?o:"",n=(o,r)=>{if((e=>{if(a6(e)){const t=e.keyCode;return!r6(e)&&(u.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||O(ug,t))}return!1})(o))return;const l=e.getBody(),c=!(e=>a6(e)&&!(r6(e)||"keyup"===e.type&&229===e.keyCode))(o)&&((e,n,s)=>{if(T(t(n),!1)){const t=n.firstElementChild;return!t||!e.getStyle(n.firstElementChild,"padding-left")&&!e.getStyle(n.firstElementChild,"padding-right")&&s===t.nodeName.toLowerCase()}return!1})(s,l,a);(""!==s.getAttrib(l,i6)!==c||r)&&(s.setAttrib(l,i6,c?i:null),s.setAttrib(l,"aria-placeholder",c?i:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,c),e.on(c?"keydown":"keyup",n),e.off(c?"keyup":"keydown",n))};rt(i)&&e.on("init",t=>{n(t,!0),e.on("change SetContent ExecCommand",n),e.on("paste",t=>xe.setEditorTimeout(e,()=>n(t)))})})(n),b9(n);const m=(t=>{const n=t;return(t=>E(t.plugins,"rtc").bind(t=>e.from(t.setup)))(t).fold(()=>(n.rtcInstance=Q8(t),e.none()),t=>(n.rtcInstance=(()=>{const t=a(null),n=a("");return{init:{bindEvents:g},undoManager:{beforeChange:g,add:t,undo:t,redo:t,clear:g,reset:g,hasUndo:S,hasRedo:S,transact:t,ignore:g,extra:g},formatter:{match:S,matchAll:a([]),matchNode:a(void 0),canApply:S,closest:n,apply:g,remove:g,toggle:g,formatChanged:a({unbind:g})},editor:{getContent:n,setContent:a({content:"",html:""}),insertContent:a(""),addVisual:g},selection:{getContent:n},autocompleter:{addDecoration:g,removeDecoration:g},raw:{getModel:a(e.none())}}})(),e.some(()=>t().then(t=>(n.rtcInstance=(t=>{const o=e=>ne(e)?e:{},{init:r,undoManager:n,formatter:s,editor:i,selection:c,autocompleter:a,raw:l}=t;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,s)=>n.transact(s),ignore:(e,t)=>n.ignore(t),extra:(e,t,s,o)=>n.extra(s,o)},formatter:{match:(e,t,n,i)=>s.match(e,o(t),i),matchAll:s.matchAll,matchNode:s.matchNode,canApply:e=>s.canApply(e),closest:e=>s.closest(e),apply:(e,t)=>s.apply(e,o(t)),remove:(e,t)=>s.remove(e,o(t)),toggle:(e,t)=>s.toggle(e,o(t)),formatChanged:(e,t,n,o,i)=>s.formatChanged(t,n,o,i)},editor:{getContent:e=>i.getContent(e),setContent:(e,t)=>({content:i.setContent(e,t),html:""}),insertContent:(e)=>(i.insertContent(e),""),addVisual:i.addVisual},selection:{getContent:(e,t)=>c.getContent(t)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>e.some(l.getRawModel())}}})(t),t.rtc.isRemote)))))})(n);(e=>{const o=e.getDoc(),t=e.getBody();(e=>{e.dispatch("PreInit")})(e),bb(e)||(o.body.spellcheck=!1,Sr.setAttrib(t,"spellcheck","false")),e.quirks=jb(e),(e=>{e.dispatch("PostRender")})(e);const n=s9(e);void 0!==n&&(t.dir=n);const s=xb(e);s&&e.on("BeforeSetContent",e=>{i.each(s,t=>{e.content=e.content.replace(t,e=>"<!--mce:protected "+escape(e)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing="compositionstart"===t.type})})(n),m.fold(()=>{F4(n).then(()=>Br(n))},e=>{n.setProgressState(!0),F4(n).then(()=>{e().then(e=>{n.setProgressState(!1),Br(n),tf(n)},e=>{n.notificationManager.open({type:"error",text:String(e)}),Br(n),tf(n)})})})},A4=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),n||e.inline)S4(e);else{const n=e.iframeElement,o=(s=t(n),P5(s,"load",Eg,()=>{o.unbind(),e.contentDocument=n.contentDocument,S4(e)}));if(b.browser.isFirefox()){const t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close()}else n.srcdoc=e.iframeHTML}var s},qr=w.DOM,O4=w.DOM,_4=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),v4=e=>{const t=e.getElement();return e.inline?_4(null):(e=>{const t=O4.create("div");return O4.insertAfter(t,e),_4(t,t)})(t)},Db=n=>{n.dispatch("ScriptsLoaded"),(e=>{const t=i.trim(i3(e)),n=e.ui.registry.getAll().icons,s={...qi.get("default").icons,...qi.get(t).icons};C(s,(t,s)=>{f(n,s)||e.ui.registry.addIcon(s,t)})})(n),(e=>{const t=bs(e);if(h(t)){const n=mn.get(t);e.theme=n(e,mn.urls[t])||{},j(e.theme.init)&&e.theme.init(e,mn.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(n),(e=>{const t=Gc(e),n=rs.get(t);e.model=n(e,rs.urls[t])})(n),(e=>{const t=[];o(Uo(e),n=>{((e,t,n)=>{const s=ns.get(n),o=ns.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=i.trim(n),s&&-1===i.inArray(t,n)){if(e.plugins[n])return;try{const i=s(e,o)||{};e.plugins[n]=i,j(i.init)&&(i.init(e,o),t.push(n))}catch(t){((e,t,n)=>{const s=Le.translate(["Failed to initialize plugin: {0}",t]);A1(e,"PluginLoadError",{message:s}),Fi(s,n),Li(e,s)})(e,n,t)}}})(e,t,(e=>e.replace(/^-/,""))(n))})})(n);const s=(e=>{const t=e.getElement();return e.orgDisplay=t.style.display,h(bs(e))?(e=>{const t=e.theme.renderUI;return t?t():v4(e)})(e):j(bs(e))?(e=>{const n=e.getElement(),t=bs(e)(e,n);return t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t})(e):v4(e)})(n);((t,n)=>{const s={show:e.from(n.show).getOr(g),hide:e.from(n.hide).getOr(g),isEnabled:e.from(n.isEnabled).getOr(N),setEnabled:s=>{t.mode.isReadOnly()||e.from(n.setEnabled).each(e=>e(s))}};t.ui={...t.ui,...s}})(n,e.from(s.api).getOr({})),n.editorContainer=s.editorContainer,(e=>{e.contentCSS=e.contentCSS.concat((e=>Lf(e,Bv(e)))(e),(e=>Lf(e,x2(e)))(e))})(n),n.inline?A4(n):((e,n)=>{((e,n)=>{const o=e.translate("Rich Text Area"),i=gt(t(e.getElement()),"tabindex").bind(ka),s=((e,t,n,s)=>{const o=$("iframe");return s.each(e=>U(o,"tabindex",e)),Ot(o,n),Ot(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),To(o,"tox-edit-area__iframe"),o})(e.id,o,V7(e),i).dom;s.onload=()=>{s.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=s,e.iframeHTML=(e=>{let t=$7(e)+"<html><head>";uu(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=q7(e),s=X7(e),o=e.translate(ub(e));return A3(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+A3(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t})(e),qr.add(n.iframeContainer,s)})(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=qr.isHidden(n.editorContainer)),e.getElement().style.display="none",qr.setAttrib(e.id,"aria-hidden","true"),A4(e)})(n,{editorContainer:s.editorContainer,iframeContainer:s.iframeContainer})},Ut=w.DOM,h4=e=>"-"===e.charAt(0),u4=(t,n,s)=>e.from(n).filter(e=>rt(e)&&!qi.has(e)).map(n=>({url:`${t.editorManager.baseURL}/icons/${n}/icons${s}.js`,name:e.some(n)})),Pb=(t,n)=>{const s=pt.ScriptLoader,a=()=>{!t.removed&&(e=>{const t=bs(e);return!h(t)||r(mn.get(t))})(t)&&(e=>{const t=Gc(e);return r(rs.get(t))})(t)&&Db(t)};((e,t)=>{const n=bs(e);if(h(n)&&!h4(n)&&!f(mn.urls,n)){const s=m9(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;mn.load(n,o).catch(()=>{((e,t,n)=>{No(e,"ThemeLoadError",Lo("theme",t,n))})(e,o,n)})}})(t,n),((e,t)=>{const n=Gc(e);if("plugin"!==n&&!f(rs.urls,n)){const s=f9(e),o=h(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;rs.load(n,o).catch(()=>{((e,t,n)=>{No(e,"ModelLoadError",Lo("model",t,n))})(e,o,n)})}})(t,n),((e,t)=>{const n=$2(t),s=Mv(t);if(!Le.hasCode(n)&&"en"!==n){const o=rt(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{((e,t,n)=>{No(e,"LanguageLoadError",Lo("language",t,n))})(t,o,n)})}})(s,t),((t,n,s)=>{const i=u4(n,"default",s),a=(t=>e.from(jv(t)).filter(rt).map(t=>({url:t,name:e.none()})))(n).orThunk(()=>u4(n,i3(n),""));o((e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})([i,a]),e=>{t.add(e.url).catch(()=>{((e,t,n)=>{No(e,"IconsLoadError",Lo("icons",t,n))})(n,e.url,e.name.getOrUndefined())})})})(s,t,n),((e,t)=>{const n=(t,n)=>{ns.load(t,n).catch(()=>{((e,t,n)=>{No(e,"PluginLoadError",Lo("plugin",t,n))})(e,n,t)})};C(eb(e),(t,s)=>{n(s,t),e.options.set("plugins",Uo(e).concat(s))}),o(Uo(e),e=>{!(e=i.trim(e))||ns.urls[e]||h4(e)||n(e,`plugins/${e}/plugin${t}.js`)})})(t,n),s.loadQueue().then(a,a)},d4=On().deviceType,l4=d4.isPhone(),Bb=d4.isTablet(),lo=e=>{if(D(e))return[];{const t=L(e)?e:e.split(/[ ,]/),n=v(t,zn);return m(n,rt)}},$b=(e,t)=>{const n=((t)=>{const s={},o={};return P1(t,(t,n)=>O(e,n),Gl(s),Gl(o)),{t:s,f:o}})(t);return s=n.t,o=n.f,{sections:a(s),options:a(o)};var s,o},Zr=(e,t)=>f(e.sections(),t),Ub=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:E(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),Kb=(e,t)=>{var n;const s=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?i.extend({},e.external_plugins,s):s},qb=(e,t,n,s,o)=>{var r;const c=e?{mobile:Ub(null!==(r=o.mobile)&&void 0!==r?r:{},t)}:{},a=$b(["mobile"],Cl(c,o)),l=i.extend(n,s,a.options(),((e,t)=>e&&Zr(t,"mobile"))(e,a)?((e,t,n={})=>{const s=e.sections(),o=E(s,t).getOr({});return i.extend({},n,o)})(a,"mobile"):{},{external_plugins:Kb(s,a.options())});return((e,t,n,s)=>{const o=lo(n.forced_plugins),a=lo(s.plugins),r=((e,t)=>Zr(e,t)?e.sections()[t]:{})(t,"mobile"),c=((e,t,n,s)=>e&&Zr(t,"mobile")?s:n)(e,t,a,r.plugins?lo(r.plugins):a),l=((e,t)=>[...lo(e),...lo(t)])(o,c);return i.extend(s,{forced_plugins:o,plugins:l})})(e,a,s,l)},Yb=e=>{(e=>{const t=t=>()=>{o("left,center,right,justify".split(","),n=>{t!==n&&e.formatter.remove("align"+n)}),"none"!==t&&((t)=>{e.formatter.toggle(t,void 0),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(e),(e=>{const t=t=>()=>{const n=e.selection,s=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return z(s,n=>r(e.formatter.matchNode(n,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},Gb=(e,s)=>{const o=e.selection,i=e.dom;return/^ | $/.test(s)?((e,s,o)=>{const i=t(e.getRoot());return o=so(i,n.fromRangeStart(s))?o.replace(/^ /,"&nbsp;"):o.replace(/^&nbsp;/," "),oo(i,n.fromRangeEnd(s))?o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o.replace(/&nbsp;(<br( \/)?>)?$/," ")})(i,o.getRng(),s):s},Oa=(e,t)=>{const{content:s,details:n}=(e=>{if("string"!=typeof e){const t=i.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);Dr(e,{...n,content:Gb(e,s),format:"html",set:!1,selection:!0}).each(t=>{const s=((e,t,n)=>ul(e).editor.insertContent(t,n))(e,t.content,n);Nr(e,s,t),e.addVisual()})},Qb={"font-size":"size","font-family":"face"},Zb=lc("font"),i4=n=>(s,o)=>e.from(o).map(t).filter(ge).bind(o=>((n,s,o)=>rc(t(o),t=>(t=>ua(t,n).orThunk(()=>Zb(t)?E(Qb,n).bind(e=>gt(t,e)):e.none()))(t),e=>y(t(s),e)))(n,s,o.dom).or(((t,n)=>e.from(w.DOM.getStyle(n,t,!0)))(n,o.dom))).getOr(""),ej=i4("font-size"),tj=Tn(e=>e.replace(/['"\\]/g,"").replace(/,\s+/g,","),i4("font-family")),nj=t=>ae(t.getBody()).bind(t=>{const n=t.container();return e.from(s(n)?n.parentNode:n)}),Nc=(n,s)=>((n,s)=>(t=>e.from(t.selection.getRng()).bind(n=>{const s=t.getBody();return n.startContainer===s&&0===n.startOffset?e.none():e.from(t.selection.getStart(!0))}))(n).orThunk(d(nj,n)).map(t).filter(ge).bind(s))(n,Ku(e.some,s)),o4=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(e=>i.explode(e.options.get("font_size_style_values")))(e),s=(e=>i.explode(e.options.get("font_size_classes")))(e);return s.length>0?s[n-1]||t:o[n-1]||t}return t}return t},ij=e=>{const t=e.split(/\s*,\s*/);return v(t,e=>-1===e.indexOf(" ")||Y(e,'"')||Y(e,"'")?e:`'${e}'`).join(",")},aj=e=>{Yb(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if("paste"!==t||n.queryCommandEnabled(t)||(s=!0),s||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(b.os.isMacOS()||b.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),t=>!c(t)||o++!==s||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Be);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Oa(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Oa(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Oa(e,s)},mceInsertContent:(t,n,s)=>{Oa(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(e),(e=>{const t=(t,n,s)=>{const o=h(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");ne(o)&&h(o.href)&&(o.href=o.href.replace(/ /g,"%20"),i&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},mceInsertLink:t,createLink:t})})(e),(e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{Gf(e,"indent")})(e)},Outdent:()=>{Yf(e)}}),e.editorCommands.addCommands({Outdent:()=>e6(e)},"state")})(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Ta(j3,e)},mceInsertNewLine:(t,n,s)=>{G2(e,s)},InsertLineBreak:()=>{Ta(g3,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const s=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(s)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{(e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,s)=>{t(e,{value:s})},BackColor:(e,n,s)=>{t("hilitecolor",{value:s})},FontName:(t,n,s)=>{((e,t)=>{const n=o4(e,t);e.formatter.toggle("fontname",{value:ij(n)}),e.nodeChanged()})(e,s)},FontSize:(t,n,s)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:o4(e,t)}),e.nodeChanged()})(e,s)},LineHeight:(t,n,s)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,s)},Lang:(e,n,s)=>{var o;t(e,{value:s.code,customValue:null!==(o=s.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,s)=>{t(h(s)?s:"p")},mceToggleFormat:(e,n,s)=>{t(s)}})})(e),(e=>{const n=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>n(e),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>(e=>Nc(e,t=>tj(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>(e=>Nc(e,t=>ej(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>(e=>Nc(e,n=>{const s=t(e.getBody()),o=rc(n,e=>ua(e,"line-height"),d(y,s));return o.getOrThunk(()=>{const e=parseFloat(st(n,"line-height")),t=parseFloat(st(n,"font-size"));return String(e/t)})}).getOr(""))(e))})(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{((e,t)=>{e.removed||(t?pl(e):(e=>{const o=e.selection,t=e.getBody();let n=o.getRng();e.quirks.refreshContentEditable(),r(e.bookmark)&&!Wt(e)&&wl(e).each(t=>{e.selection.setRng(t),n=t});const s=((e,t)=>e.dom.getParent(t,t=>"true"===e.dom.getContentEditable(t)))(e,o.getNode());if(s&&e.dom.isChildOf(s,t))return vl(s),Q4(e,n),void pl(e);e.inline||(b.browser.isOpera()||vl(t),e.getWin().focus()),(b.browser.isFirefox()||e.inline)&&(vl(t),Q4(e,n)),pl(e)})(e))})(e,!0===s)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},rj=["toggleview"],n4=e=>O(rj,e.toLowerCase());class e4{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,n,s){const o=this.editor,i=e.toLowerCase(),r=s?.skip_focus;if(o.removed)return!1;if("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||r?(e=>{wl(e).each(t=>e.selection.setRng(t))})(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;const a=this.commands.exec[i];return!!j(a)&&(a(i,t,n),o.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(!n4(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!j(n)&&n(t)}queryCommandValue(e){if(!n4(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return j(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;C(e,(e,s)=>{o(s.toLowerCase().split(","),s=>{n[t][s]=e})})}addCommand(e,t,n){const s=e.toLowerCase();this.commands.exec[s]=(e,s,o)=>t.call(n??this.editor,s,o)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(n??this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(n??this.editor)}}const is="data-mce-contenteditable",Rc=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},fa=(e,t)=>{e.dom.contentEditable=t?"true":"false"},mj=(n,s)=>{const i=t(n.getBody());((e,t,n)=>{Bl(e,t)&&!n?Ki(e,t):n&&To(e,t)})(i,"mce-content-readonly",s),s?(n.selection.controlSelection.hideResizeRect(),n._selectionOverrides.hideFakeCaret(),(t=>{e.from(t.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})})(n),n.readonly=!0,fa(i,!1),o(te(i,'*[contenteditable="true"]'),e=>{U(e,is,"true"),fa(e,!1)})):(n.readonly=!1,fa(i,!0),o(te(i,'*[data-mce-contenteditable="true"]'),e=>{K(e,is),fa(e,!0)}),Rc(n,"StyleWithCSS",!1),Rc(n,"enableInlineTableEditing",!1),Rc(n,"enableObjectResizing",!1),(e=>Wt(e)||(e=>{const n=wt(t(e.getElement()));return xl(n).filter(t=>!(e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))})(t.dom)&&ta(e,t.dom)).isSome()})(e))(n)&&n.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(n),n.nodeChanged())},nn=e=>e.readonly,q1=e=>{e.parser.addAttributeFilter("contenteditable",t=>{nn(e)&&o(t,e=>{e.attr(is,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(is,t=>{nn(e)&&o(t,e=>{e.attr("contenteditable",e.attr(is))})}),e.serializer.addTempAttr(is)},gj=["copy"],vj=i.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class tl{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||S}static isNative(e){return!!vj[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const s=e.toLowerCase(),n=ml(s,t??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);const o=this.bindings[s];if(o)for(let t=0,i=o.length;t<i;t++){const e=o[t];if(!e.removed){if(e.once&&this.off(s,e.func),n.isImmediatePropagationStopped())return n;if(!1===e.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,t,n,s){if(!1===t&&(t=S),t){const o={func:t,removed:!1};s&&i.extend(o,s);const a=e.toLowerCase().split(" ");let r=a.length;for(;r--;){const t=a[r];let e=this.bindings[t];e||(e=[],this.toggleEvent(t,!0)),e=n?[o,...e]:[...e,o],this.bindings[t]=e}}return this}off(e,t){if(e){{const n=e.toLowerCase().split(" ");let s=n.length;for(;s--;){const a=n[s];let i=this.bindings[a];if(!a)return C(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(i){if(t){const e=zs(i,e=>e.func===t);i=e.fail,this.bindings[a]=i,o(e.pass,e=>{e.removed=!0})}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}}}else C(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){e=e.toLowerCase();const t=this.bindings[e];return!!t&&0!==t.length}}const qs=e=>(e._eventDispatcher||(e._eventDispatcher=new tl({scope:e,toggleEvent:(t,n)=>{tl.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),_l={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&"remove"!==e&&"detach"!==e)return ml(e.toLowerCase(),t??{},s);const o=qs(s).dispatch(e,t);if(!1!==n&&s.parent){let t=s.parent();for(;t&&!o.isPropagationStopped();)t.dispatch(e,o,!1),t=t.parent?t.parent():void 0}return o},on(e,t,n){return qs(this).on(e,t,n)},off(e,t){return qs(this).off(e,t)},once(e,t){return qs(this).once(e,t)},hasEventListeners(e){return qs(this).has(e)}},Pi=w.DOM;let hn;const Ci=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=u2(e);return n?(e.eventRoot||(e.eventRoot=Pi.select(n)[0]),e.eventRoot):e.getBody()},R1=(e,n,s)=>{(e=>!e.hidden&&!nn(e))(e)?e.dispatch(n,s):nn(e)&&((e,n)=>{if((e=>"click"===e.type)(n)&&!u.metaKeyPressed(n)){const s=t(n.target);((e,n)=>qt(n,"a",n=>y(n,t(e.getBody()))).bind(e=>gt(e,"href")))(e,s).each(t=>{if(n.preventDefault(),/^#/.test(t)){const n=e.dom.select(`${t},[name="${s=t,Y(s,"#")?((e,t)=>e.substring(t))(s,"#".length):s}"]`);n.length&&e.selection.scrollIntoView(n[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var s})}else(e=>O(gj,e.type))(n)&&e.dispatch(n.type,n)})(e,s)},x1=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Ci(e,t);if(u2(e)){if(hn||(hn={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||hn&&(C(hn,(t,n)=>{e.dom.unbind(Ci(e,n))}),hn=null)})),hn[t])return;const s=n=>{const i=n.target,s=e.editorManager.get();let o=s.length;for(;o--;){const e=s[o].getBody();(e===i||Pi.isChildOf(i,e))&&R1(s[o],t,n)}};hn[t]=s,Pi.bind(n,t,s)}else{const s=n=>{R1(e,t,n)};Pi.bind(n,t,s),e.delegates[t]=s}},_1={..._l,bindPendingEventDelegates(){const e=this;i.each(e._pendingNativeEvents,t=>{x1(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?x1(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Ci(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,n=e.getBody(),t=e.dom;e.delegates&&(C(e.delegates,(t,n)=>{e.dom.unbind(Ci(e,n),n,t)}),delete e.delegates),!e.inline&&n&&t&&(n.onload=null,t.unbind(e.getWin()),t.unbind(e.getDoc())),t&&(t.unbind(n),t.unbind(e.getContainer()))}},kj=e=>h(e)?{value:e.split(/[ ,]/),valid:!0}:Yn(e,h)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},v1=(e,t)=>e+(co(t.message)?"":`. ${t.message}`),h1=e=>e.valid,md=(e,t,n="")=>{const s=t(e);return bn(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},Fj=["design","readonly"],c1=(e,t,n,s)=>{const i=n[t.get()],o=n[s];try{o.activate()}catch(e){return void console.error(`problem while activating editor mode ${s}:`,e)}i.deactivate(),i.editorReadOnly!==o.editorReadOnly&&mj(e,o.editorReadOnly),t.set(s),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,s)},gd=i.each,wd=i.explode,Nj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},s1=i.makeMap("alt,ctrl,shift,meta,access"),Rj=e=>{const t={},s=b.os.isMacOS()||b.os.isiOS();gd(wd(e.toLowerCase(),"+"),e=>{(e=>e in s1)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=Nj[e]||e.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let n;for(n in s1)t[n]?o.push(n):t[n]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,s?t.ctrl=!0:t.shift=!0),t.meta&&(s?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class t1{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(gd(t.shortcuts,n=>{t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n))}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,n,s){const o=this,a=o.normalizeCommandFunc(n);return gd(wd(i.trim(e)),e=>{const n=o.createShortcut(e,t,a,s);o.shortcuts[n.id]=n}),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const n=this,t=e;return"string"==typeof t?()=>{n.editor.execCommand(t,!1,null)}:i.isArray(t)?()=>{n.editor.execCommand(t[0],t[1],t[2])}:t}createShortcut(e,t,n,s){const o=i.map(wd(e,">"),Rj);return o[o.length-1]=i.extend(o[o.length-1],{func:n,scope:s||this.editor}),i.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const Hj=()=>{const e=(()=>{const t={},n={},o={},i={},a={},s={},r={},c={},e=(e,t)=>(n,s)=>{e[n.toLowerCase()]={...s,type:t}};return{addButton:e(t,"button"),addGroupToolbarButton:e(t,"grouptoolbarbutton"),addToggleButton:e(t,"togglebutton"),addMenuButton:e(t,"menubutton"),addSplitButton:e(t,"splitbutton"),addMenuItem:e(n,"menuitem"),addNestedMenuItem:e(n,"nestedmenuitem"),addToggleMenuItem:e(n,"togglemenuitem"),addAutocompleter:e(o,"autocompleter"),addContextMenu:e(a,"contextmenu"),addContextToolbar:e(s,"contexttoolbar"),addContextForm:e(s,"contextform"),addSidebar:e(r,"sidebar"),addView:e(c,"views"),addIcon:(e,t)=>i[e.toLowerCase()]=t,getAll:()=>({buttons:t,menuItems:n,icons:i,popups:o,contextMenus:a,contextToolbars:s,sidebars:r,views:c})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},jn=w.DOM,Qu=i.extend,Vj=i.each;class di{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,Qu(this,_1);const s=this;this.id=e,this.hidden=!1;const a=((e,t)=>qb(l4||Bb,l4,t,e,t))(n.defaultOptions,t);this.options=((e,t)=>{const s={},n={},i=(e,t,s)=>{const o=md(t,s);return h1(o)?(n[e]=o.value,!0):(console.warn(v1(`Invalid value passed for the ${e} option`,o)),!1)},o=e=>f(s,e);return{register:(e,o)=>{const a=(e=>h(e.processor))(o)?(e=>{const t=(()=>{switch(e){case"array":return L;case"boolean":return bn;case"function":return j;case"number":return We;case"object":return ne;case"string":return h;case"string[]":return kj;case"object[]":return e=>Yn(e,ne);case"regexp":return e=>Jo(e,RegExp);default:return N}})();return n=>md(n,t,`The value must be a ${e}.`)})(o.processor):o.processor,r=((e,t,n)=>{if(!re(t)){const s=md(t,n);if(h1(s))return s.value;console.error(v1(`Invalid default value passed for the "${e}" option`,s))}})(e,o.default,a);s[e]={...o,default:r,processor:a},E(n,e).orThunk(()=>E(t,e)).each(t=>i(e,t,a))},isRegistered:o,get:e=>E(n,e).orThunk(()=>E(s,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{if(o(e)){const n=s[e];return n.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):i(e,t,n.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{const t=o(e);return t&&delete n[e],t},isSet:e=>f(n,e)}})(0,a),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:$3(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:$3(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=h(e)&&rt(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{const t=O(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>bn(e)||h(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=!1===e||h(e)||Yn(e,h);return t?h(e)?{value:v(e.split(","),zn),valid:t}:L(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ja(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=h(e)||Yn(e,h);return t?{value:L(e)?e:v(e.split(","),zn),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{const t=bn(e)||h(e);return t?!1===e||tc.isiPhone()||tc.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!F7}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||h(e)||j(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{const t=!1===e||h(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:ac}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:ac}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:ac}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>h(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>Yn(e,ne)||!1===e?{value:G3(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>{return j(e)?{value:(t=e,e=>{const n=t(e);return G3(n)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>Yn(e,W3)?{value:e,valid:!0}:W3(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Le.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:T7.getAttrib(e.getElement(),"placeholder")})})})(s);const o=this.options.get;o("deprecation_warnings")&&((e,t)=>{((e,t)=>{const n=Ig(e),s=Hg(t),o=s.length>0,i=n.length>0,a="mobile"===t.theme;if(o||i||a){const e=`
- `,t=a?`

Themes:${e}mobile`:"",r=o?`

Plugins:${e}${s.join(e)}`:"",c=i?`

Options:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+r+c)}})(e,t)})(t,a);const c=o("suffix");c&&(n.suffix=c),this.suffix=n.suffix;const l=o("base_url");l&&n._setBaseUrl(l),this.baseUri=n.baseURI;const i=Tc(s);i&&(pt.ScriptLoader._setReferrerPolicy(i),w.DOM.styleSheetLoader._setReferrerPolicy(i));const d=p0(s);r(d)&&w.DOM.styleSheetLoader._setContentCssCors(d),J.languageLoad=o("language_load"),J.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Xe(uu(s),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ja(s),this.hasVisual=ab(s),this.shortcuts=new t1(this),this.editorCommands=new e4(this),aj(this);const u=o("cache_suffix");u&&(b.cacheSuffix=u.replace(/^[?&]+/,"")),this.ui={registry:Hj(),styleSheetLoader:void 0,show:g,hide:g,setEnabled:g,isEnabled:N},this.mode=(e=>{const n=I("design"),t=I({design:{activate:g,deactivate:g,editorReadOnly:!1},readonly:{activate:g,deactivate:g,editorReadOnly:!0}});return(e=>{e.serializer?q1(e):e.on("PreInit",()=>{q1(e)})})(e),(e=>{e.on("ShowCaret",t=>{nn(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{nn(e)&&t.preventDefault()})})(e),{isReadOnly:()=>nn(e),set:s=>((e,t,n,s)=>{if(s!==n.get()){if(!f(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?c1(e,n,t,s):e.on("init",()=>c1(e,n,t,s))}})(e,t.get(),n,s),get:()=>n.get(),register:(e,n)=>{t.set(((e,t,n)=>{if(O(Fj,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(t.get(),e,n))}}})(s),n.dispatch("SetupEditor",{editor:this});const m=mb(s);j(m)&&m.call(s,s)}render(){(e=>{const o=e.id;Le.setCode($2(e));const i=()=>{Ut.unbind(window,"ready",i),e.render()};if(!Zt.Event.domLoaded)return void Ut.bind(window,"ready",i);if(!e.getElement())return;const s=t(e.getElement()),a=s3(s);e.on("remove",()=>{o1(s.dom.attributes,e=>K(s,e.name)),Ot(s,a)}),e.ui.styleSheetLoader=((e,t)=>b6.forElement(e,{contentCssCors:p0(t),referrerPolicy:Tc(t)}))(s,e),Ja(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const n=e.getElement().form||Ut.getParent(o,"form");n&&(e.formElement=n,D9(e)&&!od(e.getElement())&&(Ut.insertAfter(Ut.create("input",{type:"hidden",name:o}),o),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},Ut.bind(n,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!R9(e)||n.submit.nodeType||n.submit.length||n._mceOldSubmit||(n._mceOldSubmit=n.submit,n.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),n._mceOldSubmit(n)))),e.windowManager=Mf(e),e.notificationManager=kf(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",e=>{e.save&&(e.content=Ut.encode(e.content))}),I9(e)&&e.on("submit",()=>{e.initialized&&e.save()}),V9(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Pb(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Wt(this)}translate(e){return Le.translate(e)}getParam(e,t,n){const s=this.options;return s.isRegistered(e)||(r(n)?s.register(e,{processor:n,default:t}):s.register(e,{processor:N,default:t})),s.isSet(e)||re(t)?s.get(e):t}hasPlugin(e,t){return!(!O(Uo(this),e)||t&&void 0===ns.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,s){this.shortcuts.add(e,t,n,s)}execCommand(e,t,n,s){return this.editorCommands.execCommand(e,t,n,s)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(jn.show(e.getContainer()),jn.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(jn.hide(e.getContainer()),jn.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){const n=this,t=n.getElement();if(n.removed)return"";if(t){const s={...e,load:!0},o=od(t)?t.value:t.innerHTML,i=n.setContent(o,s);return s.no_events||n.dispatch("LoadContent",{...s,element:t}),i}return""}save(e={}){const t=this;let s=t.getElement();if(!s||!t.initialized||t.removed)return"";const i={...e,save:!0,element:s};let o=t.getContent(i);const n={...i,content:o};if(n.no_events||t.dispatch("SaveContent",n),"raw"===n.format&&t.dispatch("RawSaveContent",n),o=n.content,od(s))s.value=o;else{!e.is_removing&&t.inline||(s.innerHTML=o);const n=jn.getParent(t.id,"form");n&&Vj(n.elements,e=>e.name!==t.id||(e.value=o,!1))}return n.element=i.element=s=null,!1!==n.set_dirty&&t.setDirty(!1),o}setContent(e,t){return El(this,e,t)}getContent(e){return((e,t={})=>{const n=((e,t)=>({...e,format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return _8(e,n).fold(oe,t=>{const n=((e,t)=>ul(e).editor.getContent(t))(e,t);return w8(e,n,t)})})(this,e)}insertContent(e,t){t&&(e=Qu({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?El(this,this.startContent,{format:"raw"}):El(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||jn.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=jn.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;const n=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:n?.body)&&void 0!==t?t:null}convertURL(e,t,n){const s=this,o=s.options.get,i=pb(s);return j(i)?i.call(s,e,n,!0,t):!o("convert_urls")||"link"===n||ne(n)&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:o("relative_urls")?s.documentBaseURI.toRelative(e):e=s.documentBaseURI.toAbsolute(e,o("remove_script_host"))}addVisual(e){((e,t)=>{((e,t)=>{M(e).editor.addVisual(t)})(e,t)})(this,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:s,editorUpload:o}=e,n=e.getBody(),t=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&r(t?.nextSibling)&&Xi.remove(t.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&n&&(e=>{Xi.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),Xi.remove(e.getContainer()),Gi(s),Gi(o),e.destroy()}})(this)}destroy(e){((e,t)=>{const{selection:n,dom:s}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Gi(n),Gi(s)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Xi.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const e=n.dom;t.selection=n.win=n.dom=e.doc=null}})(e),e.destroyed=!0):e.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const qn=w.DOM,si=i.each;let ti,Uu=!1,ce=[];const Xo=e=>{const t=e.type;si(Et.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},Hu=e=>{if(e!==Uu){const t=w.DOM;e?(t.bind(window,"resize",Xo),t.bind(window,"scroll",Xo)):(t.unbind(window,"resize",Xo),t.unbind(window,"scroll",Xo)),Uu=e}},Nu=e=>{const t=ce;return ce=m(ce,t=>e!==t),Et.activeEditor===e&&(Et.activeEditor=ce.length>0?ce[0]:null),Et.focusedEditor===e&&(Et.focusedEditor=null),t.length!==ce.length},Zj="CSS1Compat"!==document.compatMode,Et={..._l,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.1",releaseDate:"2022-12-06",i18n:Le,activeEditor:null,focusedEditor:null,setup(){const t=this;let n="",s="",e=Xe.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^/]+\//.test(e)&&(e=e.replace(/[?#].*$/,"").replace(/[/\\][^/]+$/,""),/[/\\]$/.test(e)||(e+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)n=o.base||o.baseURL,s=o.suffix;else{const e=document.getElementsByTagName("script");for(let o=0;o<e.length;o++){const t=e[o].src||"";if(""===t)continue;const i=t.substring(t.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(t)){-1!==i.indexOf(".min")&&(s=".min"),n=t.substring(0,t.lastIndexOf("/"));break}}if(!n&&document.currentScript){const e=document.currentScript.src;-1!==e.indexOf(".min")&&(s=".min"),n=e.substring(0,e.lastIndexOf("/"))}}var i;t.baseURL=new Xe(e).toAbsolute(n),t.documentBaseURL=e,t.baseURI=new Xe(t.baseURL),t.suffix=s,(i=t).on("AddEditor",d(db,i)),i.on("RemoveEditor",d(lb,i))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;void 0!==s&&C(s,(e,t)=>{J.PluginManager.urls[t]=e})},init(e){const t=this;let n;const a=i.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let s=e=>{n=e};const o=()=>{let l=0;const c=[];let n;qn.unbind(window,"ready",o),(n=>{const s=e.onpageload;s&&s.apply(t,[])})(),n=((e,t)=>{const n=[],s=j(t)?e=>z(n,n=>t(n,e)):e=>O(n,e);for(let t=0,i=e.length;t<i;t++){const o=e[t];s(o)||n.push(o)}return n})((e=>b.browser.isIE()||b.browser.isEdge()?(Fi("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Zj?(Fi("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):h(e.selector)?qn.select(e.selector):r(e.target)?[e.target]:[])(e)),i.each(n,e=>{var n;(n=t.get(e.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(Nu(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)}),n=i.grep(n,e=>!t.get(e.id)),0===n.length?s([]):si(n,o=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in a)(e,o)?Fi("Could not initialize inline editor on invalid inline target element",o):((e,o,i)=>{const a=new di(e,o,t);c.push(a),a.on("init",()=>{++l===n.length&&s(c)}),a.targetElm=a.targetElm||i,a.render()})((e=>{let t=e.id;return t||(t=E(e,"name").filter(e=>!qn.get(e)).getOrThunk(qn.uniqueId),e.setAttribute("id",t)),t})(o),e,o)})};return qn.bind(window,"ready",o),new Promise(e=>{n?e(n):s=t=>{e(t)}})},get(e){return 0===arguments.length?ce.slice(0):h(e)?V(ce,t=>t.id===e).getOr(null):We(e)&&ce[e]?ce[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&ce.push(e),Hu(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),ti||(ti=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",ti))),e},createEditor(e,t){return this.add(new di(e,t,this))},remove(e){const n=this;let t;if(e){if(!h(e))return t=e,gn(n.get(t.id))?null:(Nu(t)&&n.dispatch("RemoveEditor",{editor:t}),0===ce.length&&window.removeEventListener("beforeunload",ti),t.remove(),Hu(ce.length>0),t);si(qn.select(e),e=>{t=n.get(e.id),t&&n.remove(t)})}else for(let e=ce.length-1;e>=0;e--)n.remove(ce[e])},execCommand(e,t,n){var i;const s=this,o=ne(n)?null!==(i=n.id)&&void 0!==i?i:n.index:n;switch(e){case"mceAddEditor":if(!s.get(o)){const e=n.options;new di(o,e,s).render()}return!0;case"mceRemoveEditor":{const e=s.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{const e=s.get(o);return e?(e.isHidden()?e.show():e.hide(),!0):(s.execCommand("mceAddEditor",!1,n),!0)}}return!!s.activeEditor&&s.activeEditor.execCommand(e,t,n)},triggerSave:()=>{si(ce,e=>{e.save()})},addI18n:(e,t)=>{Le.add(e,t)},translate:e=>Le.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Xe(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Xe(this.baseURL)}};Et.setup();const ey=(()=>{const e=Rt();return{FakeClipboardItem:e=>({items:e,types:pe(e),getType:t=>E(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),wu=Math.min,ss=Math.max,Go=Math.round,gu=(e,t,n)=>{let o=t.x,i=t.y;const a=e.w,r=e.h,c=t.w,l=t.h,s=(n||"").split("");return"b"===s[0]&&(i+=l),"r"===s[1]&&(o+=c),"c"===s[0]&&(i+=Go(l/2)),"c"===s[1]&&(o+=Go(c/2)),"b"===s[3]&&(i-=r),"r"===s[4]&&(o-=a),"c"===s[3]&&(i-=Go(r/2)),"c"===s[4]&&(o-=Go(a/2)),ps(o,i,a,r)},ps=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),ay={inflate:(e,t,n)=>ps(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:gu,findBestRelativePosition:(e,t,n,s)=>{for(let i=0;i<s.length;i++){const o=gu(e,t,s[i]);if(o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[i]}return null},intersect:(e,t)=>{const n=ss(e.x,t.x),s=ss(e.y,t.y),o=wu(e.x+e.w,t.x+t.w),i=wu(e.y+e.h,t.y+t.h);return o-n<0||i-s<0?null:ps(n,s,o-n,i-s)},clamp:(e,t,n)=>{let s=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h;const u=t.x+t.w,h=t.y+t.h,r=ss(0,t.x-s),c=ss(0,t.y-o),l=ss(0,i-u),d=ss(0,a-h);return s+=r,o+=c,n&&(i+=r,a+=c,s-=l,o-=d),i-=l,a-=d,ps(s,o,i-s,a-o)},create:ps,fromClientRect:e=>ps(e.left,e.top,e.width,e.height)},ry=(()=>{const e={},t={};return{load:(n,s)=>{const o=`Script at URL "${s}" failed to load`,i=`Script at URL "${s}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const a=new Promise((e,a)=>{const r=((e,t,n=1e3)=>{let o=!1,s=null;const i=e=>(...t)=>{o||(o=!0,null!==s&&(clearTimeout(s),s=null),e.apply(null,t))},r=i(e),a=i(t);return{start:(...e)=>{o||null!==s||(s=setTimeout(()=>a.apply(null,e),n))},resolve:r,reject:a}})(e,a);t[n]=r.resolve,pt.ScriptLoader.loadScript(s).then(()=>r.start(i),()=>r.reject(o))});return e[n]=a,a}},add:(n,s)=>{void 0!==t[n]&&(t[n](s),delete t[n]),e[n]=Promise.resolve(s)},unload:t=>{delete e[t]}}})();let ks;try{const e="__storage_test__";ks=window.localStorage,ks.setItem(e,e),ks.removeItem(e)}catch{ks=(()=>{let t={},e=[];const n={getItem:e=>t[e]||null,setItem:(n,s)=>{e.push(n),t[n]=String(s)},key:t=>e[t],removeItem:n=>{e=e.filter(e=>e===n),delete t[n]},clear:()=>{e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>e.length,configurable:!1,enumerable:!1}),n})()}const ly={geom:{Rect:ay},util:{Delay:xe,Tools:i,VK:u,URI:Xe,EventDispatcher:tl,Observable:_l,I18n:Le,LocalStorage:ks,ImageUploader:e=>{const t=Hf(),n=$f(e,t);return{upload:(t,s=!0)=>n.upload(t,s?Vf(e):void 0)}}},dom:{EventUtils:Zt,TreeWalker:P,TextSeeker:cn,DOMUtils:w,ScriptLoader:pt,RangeUtils:un,Serializer:uf,StyleSheetLoader:_6,ControlSelection:H1,BookmarkManager:Bs,Selection:cf,Event:Zt.Event},html:{Styles:Ml,Entities:It,Node:le,Schema:Bt,DomParser:Jn,Writer:x0,Serializer:Dt},Env:b,AddOnManager:J,Annotator:C1,Formatter:t6,UndoManager:s6,EditorCommands:e4,WindowManager:Mf,NotificationManager:kf,EditorObservable:_1,Shortcuts:t1,Editor:di,FocusManager:W4,EditorManager:Et,DOM:w.DOM,ScriptLoader:pt.ScriptLoader,PluginManager:ns,ThemeManager:mn,ModelManager:rs,IconManager:qi,Resource:ry,FakeClipboard:ey,trim:i.trim,isArray:i.isArray,is:i.is,toArray:i.toArray,makeMap:i.makeMap,each:i.each,map:i.map,grep:i.grep,inArray:i.inArray,extend:i.extend,walk:i.walk,resolve:i.resolve,explode:i.explode,_addCacheSuffix:i._addCacheSuffix},fu=i.extend(Et,ly);(e=>{window.tinymce=e,window.tinyMCE=e})(fu),(e=>{if("object"==typeof module)try{module.exports=e}catch{}})(fu)}()