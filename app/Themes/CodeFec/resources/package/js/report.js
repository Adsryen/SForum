import axios from"axios";import iziToast from"izitoast";import swal from"sweetalert";if(document.getElementById("report-data-card-footer")){const e={data(){return{btn:{class:{isPrimary:!1,isDanger:!1},text:"loading ..."}}},methods:{submit(){axios.post("/api/core/report/update",{_token:csrf_token,report_id}).then(e=>{e.data.success?(e.data.result.forEach(function(e){iziToast.success({title:"Success",message:e,position:"topRight"})}),this.init()):e.data.result.forEach(function(e){iziToast.error({title:"error",message:e,position:"topRight",timeout:1e4})})}).catch(e=>{console.error(e),iziToast.error({position:"topRight",title:"Error",message:"请求出错,详细查看控制台"})})},remove(){swal("确定要删除此举报吗? 删除后不可恢复",{dangerMode:!0,buttons:!0}).then(e=>{e===!0&&axios.post("/api/core/report/remove",{_token:csrf_token,report_id}).then(e=>{e.data.success?(e.data.result.forEach(function(e){iziToast.success({title:"Success",message:e,position:"topRight"})}),location.href="/report"):e.data.result.forEach(function(e){iziToast.error({title:"error",message:e,position:"topRight",timeout:1e4})})}).catch(e=>{console.error(e),iziToast.error({position:"topRight",title:"Error",message:"请求出错,详细查看控制台"})})})},init(){axios.post("/api/core/report/data",{_token:csrf_token,report_id}).then(e=>{if(e.data.success){var t=e.data.result;t.status==="pending"&&(this.btn.class.isPrimary=!0,this.btn.class.isDanger=!1,this.btn.text="批准"),t.status==="approve"&&(this.btn.class.isPrimary=!1,this.btn.class.isDanger=!0,this.btn.text="驳回"),t.status==="reject"&&(this.btn.class.isPrimary=!0,this.btn.class.isDanger=!1,this.btn.text="批准")}else e.data.result.forEach(function(e){iziToast.error({title:"error",message:e,position:"topRight",timeout:1e4})})}).catch(e=>{console.error(e),iziToast.error({title:"Error",message:"请求出错,详细查看控制台",position:"topRight"})})}},mounted(){this.init()}};Vue.createApp(e).mount("#report-data-card-footer")}