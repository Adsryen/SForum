(function(){"use strict";function t(e,t,n,s,o,i){return{tag:e,key:t,attrs:n,children:s,text:o,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):e==null||typeof e=="boolean"?null:typeof e=="object"?e:t("#",void 0,void 0,String(e),void 0,void 0)},t.normalizeChildren=function(e){var n,s,o=[];if(e.length){s=e[0]!=null&&e[0].key!=null;for(n=1;n<e.length;n++)if((e[n]!=null&&e[n].key!=null)!==s)throw new TypeError("Vnodes must either always have keys or never have keys!");for(n=0;n<e.length;n++)o[n]=t.normalize(e[n])}return o};var e,n,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,w,x,y=function(){var n,e=arguments[this],s=this+1;if(e==null?e={}:(typeof e!="object"||e.tag!=null||Array.isArray(e))&&(e={},s=this),arguments.length===s+1)n=arguments[s],Array.isArray(n)||(n=[n]);else for(n=[];s<arguments.length;)n.push(arguments[s++]);return t("",e.key,e,n)},C=/(?:(^|#|\.)([^#.[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,_={},o={}.hasOwnProperty;function O(e){for(var t in e)if(o.call(e,t))return!1;return!0}function E(e){for(var t,n,s,o,r="div",i=[],a={};n=C.exec(e);)o=n[1],s=n[2],o===""&&s!==""?r=s:o==="#"?a.id=s:o==="."?i.push(s):n[3][0]==="["&&(t=n[6],t&&(t=t.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),n[4]==="class"?i.push(t):a[n[4]]=t===""?t:t||!0);return i.length>0&&(a.className=i.join(" ")),_[e]={tag:r,attrs:a}}function k(e,n){var i,c,s=n.attrs,a=t.normalizeChildren(n.children),l=o.call(s,"class"),r=l?s.class:s.className;if(n.tag=e.tag,n.attrs=null,n.children=void 0,!O(e.attrs)&&!O(s)){c={};for(i in s)o.call(s,i)&&(c[i]=s[i]);s=c}for(i in e.attrs)o.call(e.attrs,i)&&i!=="className"&&!o.call(s,i)&&(s[i]=e.attrs[i]);(r!=null||e.attrs.className!=null)&&(s.className=r!=null?e.attrs.className!=null?String(e.attrs.className)+" "+String(r):r:e.attrs.className!=null?e.attrs.className:null),l&&(s.class=null);for(i in s)if(o.call(s,i)&&i!=="key"){n.attrs=s;break}return Array.isArray(a)&&a.length===1&&a[0]!=null&&a[0].tag==="#"?n.text=a[0].children:n.children=a,n}function s(e){if(e==null||typeof e!="string"&&typeof e!="function"&&typeof e.view!="function")throw Error("The selector must be either a string or a component.");var n=y.apply(1,arguments);return typeof e=="string"&&(n.children=t.normalizeChildren(n.children),e!=="[")?k(_[e]||E(e),n):(n.tag=e,n)}s.trust=function(e){return e==null&&(e=""),t("<",void 0,void 0,e,void 0,void 0)},s.fragment=function(){var e=y.apply(0,arguments);return e.tag="[",e.children=t.normalizeChildren(e.children),e},e=function(t){if(!(this instanceof e))throw new Error("Promise must be called with `new`");if(typeof t!="function")throw new TypeError("executor must be a function");var o=this,n=[],s=[],l=r(n,!0),i=r(s,!1),a=o._instance={resolvers:n,rejectors:s},d=typeof setImmediate=="function"?setImmediate:setTimeout;function r(e,t){return function r(l){var u;try{if(t&&l!=null&&(typeof l=="object"||typeof l=="function")&&typeof(u=l.then)=="function"){if(l===o)throw new TypeError("Promise can't be resolved w/ itself");c(u.bind(l))}else d(function(){!t&&e.length===0&&console.error("Possible unhandled promise rejection:",l);for(var o=0;o<e.length;o++)e[o](l);n.length=0,s.length=0,a.state=t,a.retry=function(){r(l)}})}catch(e){i(e)}}}function c(e){var t,s=0;function n(e){return function(t){if(s++>0)return;e(t)}}t=n(i);try{e(n(l),t)}catch(e){t(e)}}c(t)},e.prototype.then=function(t,n){var o,i,a,c=this,s=c._instance;function r(e,t,n,a){t.push(function(t){if(typeof e!="function")n(t);else try{i(e(t))}catch(e){o&&o(e)}}),typeof s.retry=="function"&&a===s.state&&s.retry()}return a=new e(function(e,t){i=e,o=t}),r(t,s.resolvers,i,!0),r(n,s.rejectors,o,!1),a},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(t){return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},e.resolve=function(t){return t instanceof e?t:new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.all=function(t){return new e(function(e,n){var s,a=t.length,o=0,i=[];if(t.length===0)e([]);else for(s=0;s<t.length;s++)(function(s){function r(t){o++,i[s]=t,o===a&&e(i)}t[s]!=null&&(typeof t[s]=="object"||typeof t[s]=="function")&&typeof t[s].then=="function"?t[s].then(r,n):r(t[s])})(s)})},e.race=function(t){return new e(function(e,n){for(var s=0;s<t.length;s++)t[s].then(e,n)})},typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=e:window.Promise.prototype.finally||(window.Promise.prototype.finally=e.prototype.finally),e=window.Promise):typeof global!="undefined"&&(typeof global.Promise=="undefined"?global.Promise=e:global.Promise.prototype.finally||(global.Promise.prototype.finally=e.prototype.finally),e=global.Promise),g=function(e){var i,m,T,D,n=e&&e.document,J={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function k(e){return e.attrs&&e.attrs.xmlns||J[e.tag]}function w(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function s(e){var t=e.state;try{return this.apply(t,arguments)}finally{w(e,t)}}function l(){try{return n.activeElement}catch{return null}}function r(e,t,n,s,o,i,r){for(var c,l=n;l<s;l++)c=t[l],c!=null&&a(e,c,o,r,i)}function a(e,t,n,s,o){var i=t.tag;if(typeof i=="string")switch(t.state={},t.attrs!=null&&x(t.attrs,t,n),i){case"#":Z(e,t,o);break;case"<":S(e,t,s,o);break;case"[":Q(e,t,n,s,o);break;default:X(e,t,n,s,o)}else Y(e,t,n,s,o)}function Z(e,t,s){t.dom=n.createTextNode(t.children),c(e,t.dom,s)}T={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function S(e,t,s,o){var a,r,l=t.children.match(/^\s*?<(\w+)/im)||[],i=n.createElement(T[l[1]]||"div");for(s==="http://www.w3.org/2000/svg"?(i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",i=i.firstChild):i.innerHTML=t.children,t.dom=i.firstChild,t.domSize=i.childNodes.length,t.instance=[],a=n.createDocumentFragment();r=i.firstChild;)t.instance.push(r),a.appendChild(r);c(e,a,o)}function Q(e,t,s,o,i){var l,a=n.createDocumentFragment();t.children!=null&&(l=t.children,r(a,l,0,l.length,s,null,o)),t.dom=a.firstChild,t.domSize=a.childNodes.length,c(e,a,i)}function X(e,s,o,i,a){var d,m,u=s.tag,l=s.attrs,h=l&&l.is;i=k(s)||i,d=i?h?n.createElementNS(i,u,{is:h}):n.createElementNS(i,u):h?n.createElement(u,{is:h}):n.createElement(u),s.dom=d,l!=null&&H(s,l,i),c(e,d,a),z(s)||(s.text!=null&&(s.text!==""?d.textContent=s.text:s.children=[t("#",void 0,void 0,s.text,void 0,void 0)]),s.children!=null&&(m=s.children,r(d,m,0,m.length,o,null,i),s.tag==="select"&&l!=null&&V(s,l)))}function G(e,n){var o;if(typeof e.tag.view=="function"){if(e.state=Object.create(e.tag),o=e.state.view,o.$$reentrantLock$$!=null)return;o.$$reentrantLock$$=!0}else{if(e.state=void 0,o=e.tag,o.$$reentrantLock$$!=null)return;o.$$reentrantLock$$=!0,e.state=e.tag.prototype!=null&&typeof e.tag.prototype.view=="function"?new e.tag(e):e.tag(e)}if(x(e.state,e,n),e.attrs!=null&&x(e.attrs,e,n),e.instance=t.normalize(s.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");o.$$reentrantLock$$=null}function Y(e,t,n,s,o){G(t,n),t.instance!=null?(a(e,t.instance,n,s,o),t.dom=t.instance.dom,t.domSize=t.dom!=null?t.instance.domSize:0):t.domSize=0}function y(e,t,n,s,i,c){if(t===n||t==null&&n==null)return;if(t==null||t.length===0)r(e,n,0,n.length,s,i,c);else if(n==null||n.length===0)d(e,t,0,t.length);else{if(C=t[0]!=null&&t[0].key!=null,x=n[0]!=null&&n[0].key!=null,l=0,f=0,!C)for(;f<t.length&&t[f]==null;)f++;if(!x)for(;l<n.length&&n[l]==null;)l++;if(x===null&&C==null)return;if(C!==x)d(e,t,f,t.length),r(e,n,l,n.length,s,i,c);else if(x){for(y=t.length-1,v=n.length-1;y>=f&&v>=l;){if(j=t[y],m=n[v],j.key!==m.key)break;j!==m&&o(e,j,m,s,i,c),m.dom!=null&&(i=m.dom),y--,v--}for(;y>=f&&v>=l;){if(_=t[f],g=n[l],_.key!==g.key)break;f++,l++,_!==g&&o(e,_,g,s,h(t,f,i),c)}for(;y>=f&&v>=l;){if(l===v)break;if(_.key!==m.key||j.key!==g.key)break;A=h(t,f,i),b(e,j,A),j!==g&&o(e,j,g,s,A,c),++l<=--v&&b(e,_,i),_!==m&&o(e,_,m,s,i,c),m.dom!=null&&(i=m.dom),f++,y--,j=t[y],m=n[v],_=t[f],g=n[l]}for(;y>=f&&v>=l;){if(j.key!==m.key)break;j!==m&&o(e,j,m,s,i,c),m.dom!=null&&(i=m.dom),y--,v--,j=t[y],m=n[v]}if(l>v)d(e,t,f,y+1);else if(f>y)r(e,n,l,v+1,s,i,c);else{var l,m,f,g,v,j,y,_,w,x,C,E,k,A,S,D=i,z=v-l+1,O=new Array(z),M=0,p=0,F=2147483647,T=0;for(p=0;p<z;p++)O[p]=-1;for(p=v;p>=l;p--)S==null&&(S=N(t,f,y+1)),m=n[p],w=S[m.key],w!=null&&(F=w<F?w:-1,O[p-l]=w,j=t[w],t[w]=null,j!==m&&o(e,j,m,s,i,c),m.dom!=null&&(i=m.dom),T++);if(i=D,T!==y-f+1&&d(e,t,f,y+1),T===0)r(e,n,l,v+1,s,i,c);else if(F===-1){k=L(O),M=k.length-1;for(p=v;p>=l;p--)g=n[p],O[p-l]===-1?a(e,g,s,c,i):k[M]===p-l?M--:b(e,g,i),g.dom!=null&&(i=n[p].dom)}else for(p=v;p>=l;p--)g=n[p],O[p-l]===-1&&a(e,g,s,c,i),g.dom!=null&&(i=n[p].dom)}}else{for(E=t.length<n.length?t.length:n.length,l=l<f?l:f;l<E;l++){if(_=t[l],g=n[l],_===g||_==null&&g==null)continue;_==null?a(e,g,s,c,h(t,l+1,i)):g==null?u(e,_):o(e,_,g,s,h(t,l+1,i),c)}t.length>E&&d(e,t,l,t.length),n.length>E&&r(e,n,l,n.length,s,i,c)}}}function o(e,t,n,s,o,i){var r=t.tag,c=n.tag;if(r===c){if(n.state=t.state,n.events=t.events,ee(n,t))return;if(typeof r=="string")switch(n.attrs!=null&&_(n.attrs,n,s),r){case"#":K(t,n);break;case"<":U(e,t,n,i,o);break;case"[":I(e,t,n,s,o,i);break;default:P(t,n,s,i)}else R(e,t,n,s,o,i)}else u(e,t),a(e,n,s,i,o)}function K(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}function U(e,t,n,s,o){t.children!==n.children?(A(e,t),S(e,n,s,o)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance)}function I(e,t,n,s,o,i){y(e,t.children,n.children,s,o,i);var a,r,c=0,l=n.children;if(n.dom=null,l!=null){for(r=0;r<l.length;r++)a=l[r],a!=null&&a.dom!=null&&(n.dom==null&&(n.dom=a.dom),c+=a.domSize||1);c!==1&&(n.domSize=c)}}function P(e,n,s,o){var i=n.dom=e.dom;o=k(n)||o,n.tag==="textarea"&&(n.attrs==null&&(n.attrs={}),n.text!=null&&(n.attrs.value=n.text,n.text=void 0)),$(n,e.attrs,n.attrs,o),z(n)||(e.text!=null&&n.text!=null&&n.text!==""?e.text.toString()!==n.text.toString()&&(e.dom.firstChild.nodeValue=n.text):(e.text!=null&&(e.children=[t("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),n.text!=null&&(n.children=[t("#",void 0,void 0,n.text,void 0,void 0)]),y(i,e.children,n.children,s,null,o)))}function R(e,n,i,r,c,l){if(i.instance=t.normalize(s.call(i.state.view,i)),i.instance===i)throw Error("A view cannot return the vnode it received as argument");_(i.state,i,r),i.attrs!=null&&_(i.attrs,i,r),i.instance!=null?(n.instance==null?a(e,i.instance,r,l,c):o(e,n.instance,i.instance,r,c,l),i.dom=i.instance.dom,i.domSize=i.instance.domSize):n.instance!=null?(u(e,n.instance),i.dom=void 0,i.domSize=0):(i.dom=n.dom,i.domSize=n.domSize)}function N(e,t,n){for(var s,o,i=Object.create(null);t<n;t++)s=e[t],s!=null&&(o=s.key,o!=null&&(i[o]=t));return i}i=[];function L(e){for(var a,r,s=[0],n=0,o=0,t=0,c=i.length=e.length,t=0;t<c;t++)i[t]=e[t];for(t=0;t<c;++t){if(e[t]===-1)continue;if(r=s[s.length-1],e[r]<e[t]){i[t]=r,s.push(t);continue}for(n=0,o=s.length-1;n<o;)a=(n>>>1)+(o>>>1)+(n&o&1),e[s[a]]<e[t]?n=a+1:o=a;e[t]<e[s[n]]&&(n>0&&(i[t]=s[n-1]),s[n]=t)}for(n=s.length,o=s[n-1];n-- >0;)s[n]=o,o=i[o];return i.length=0,s}function h(e,t,n){for(;t<e.length;t++)if(e[t]!=null&&e[t].dom!=null)return e[t].dom;return n}function b(e,t,s){var o=n.createDocumentFragment();F(e,o,t),c(e,o,s)}function F(e,t,n){for(;n.dom!=null&&n.dom.parentNode===e;){if(typeof n.tag!="string"){if(n=n.instance,n!=null)continue}else if(n.tag==="<")for(var o,s=0;s<n.instance.length;s++)t.appendChild(n.instance[s]);else if(n.tag!=="[")t.appendChild(n.dom);else if(n.children.length===1){if(n=n.children[0],n!=null)continue}else for(s=0;s<n.children.length;s++)o=n.children[s],o!=null&&F(e,t,o);break}}function c(e,t,n){n!=null?e.insertBefore(t,n):e.appendChild(t)}function z(e){if(e.attrs==null||e.attrs.contenteditable==null&&e.attrs.contentEditable==null)return!1;var n,t=e.children;if(t!=null&&t.length===1&&t[0].tag==="<")n=t[0].children,e.dom.innerHTML!==n&&(e.dom.innerHTML=n);else if(e.text!=null||t!=null&&t.length!==0)throw new Error("Child node of a contenteditable must be trusted");return!0}function d(e,t,n,s){for(var o,i=n;i<s;i++)o=t[i],o!=null&&u(e,o)}function u(e,t){var o,i,a,r,n=0,c=t.state;typeof t.tag!="string"&&typeof t.state.onbeforeremove=="function"&&(o=s.call(t.state.onbeforeremove,t),o!=null&&typeof o.then=="function"&&(n=1,a=o)),t.attrs&&typeof t.attrs.onbeforeremove=="function"&&(o=s.call(t.attrs.onbeforeremove,t),o!=null&&typeof o.then=="function"&&(n|=2,r=o)),w(t,c),n?(a!=null&&(i=function(){n&1&&(n&=2,n||l())},a.then(i,i)),r!=null&&(i=function(){n&2&&(n&=1,n||l())},r.then(i,i))):(f(t),p(e,t));function l(){w(t,c),f(t),p(e,t)}}function A(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function p(e,t){for(;t.dom!=null&&t.dom.parentNode===e;){if(typeof t.tag!="string"){if(t=t.instance,t!=null)continue}else if(t.tag==="<")A(e,t);else{if(t.tag!=="["&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(t.children.length===1){if(t=t.children[0],t!=null)continue}else for(var n,s=0;s<t.children.length;s++)n=t.children[s],n!=null&&p(e,n)}break}}function f(e){if(typeof e.tag!="string"&&typeof e.state.onremove=="function"&&s.call(e.state.onremove,e),e.attrs&&typeof e.attrs.onremove=="function"&&s.call(e.attrs.onremove,e),typeof e.tag!="string")e.instance!=null&&f(e.instance);else{var t,n,o=e.children;if(Array.isArray(o))for(t=0;t<o.length;t++)n=o[t],n!=null&&f(n)}}function H(e,t,n){for(var s in t)g(e,s,null,t[s],n)}function g(e,t,n,s,o){if(t==="key"||t==="is"||s==null||O(t)||n===s&&!W(e,t)&&typeof s!="object")return;if(t[0]==="o"&&t[1]==="n")return C(e,t,s);if(t.slice(0,6)==="xlink:")e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),s);else if(t==="style")M(e.dom,n,s);else if(E(e,t,o)){if(t==="value"){if((e.tag==="input"||e.tag==="textarea")&&e.dom.value===""+s&&e.dom===l())return;if(e.tag==="select"&&n!==null&&e.dom.value===""+s)return;if(e.tag==="option"&&n!==null&&e.dom.value===""+s)return}e.tag==="input"&&t==="type"?e.dom.setAttribute(t,s):e.dom[t]=s}else typeof s=="boolean"?s?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute(t==="className"?"class":t,s)}function B(e,t,n,s){if(t==="key"||t==="is"||n==null||O(t))return;if(t[0]==="o"&&t[1]==="n"&&!O(t))C(e,t,void 0);else if(t==="style")M(e.dom,n,null);else if(E(e,t,s)&&t!=="className"&&!(t==="value"&&(e.tag==="option"||e.tag==="select"&&e.dom.selectedIndex===-1&&e.dom===l()))&&(e.tag!=="input"||t!=="type"))e.dom[t]=null;else{var o=t.indexOf(":");o!==-1&&(t=t.slice(o+1)),n!==!1&&e.dom.removeAttribute(t==="className"?"class":t)}}function V(e,t){if("value"in t)if(t.value===null)e.dom.selectedIndex!==-1&&(e.dom.value=null);else{var n=""+t.value;(e.dom.value!==n||e.dom.selectedIndex===-1)&&(e.dom.value=n)}"selectedIndex"in t&&g(e,"selectedIndex",null,t.selectedIndex,void 0)}function $(e,t,n,s){if(n!=null)for(o in n)g(e,o,t&&t[o],n[o],s);var o,i;if(t!=null)for(o in t)(i=t[o])!=null&&(n==null||n[o]==null)&&B(e,o,i,s)}function W(e,t){return t==="value"||t==="checked"||t==="selectedIndex"||t==="selected"&&e.dom===l()||e.tag==="option"&&e.dom.parentNode===n.activeElement}function O(e){return e==="oninit"||e==="oncreate"||e==="onupdate"||e==="onremove"||e==="onbeforeremove"||e==="onbeforeupdate"}function E(e,t,n){return n===void 0&&(e.tag.indexOf("-")>-1||e.attrs!=null&&e.attrs.is||t!=="href"&&t!=="list"&&t!=="form"&&t!=="width"&&t!=="height")&&t in e.dom}D=/[A-Z]/g;function q(e){return"-"+e.toLowerCase()}function j(e){return e[0]==="-"&&e[1]==="-"?e:e==="cssFloat"?"float":e.replace(D,q)}function M(e,t,n){if(t===n);else if(n==null)e.style.cssText="";else if(typeof n!="object")e.style.cssText=n;else if(t==null||typeof t!="object"){e.style.cssText="";for(s in n){var s,o=n[s];o!=null&&e.style.setProperty(j(s),String(o))}}else{for(s in n)o=n[s],o!=null&&(o=String(o))!==String(t[s])&&e.style.setProperty(j(s),o);for(s in t)t[s]!=null&&n[s]==null&&e.style.removeProperty(j(s))}}function v(){this._=m}v.prototype=Object.create(null),v.prototype.handleEvent=function(e){var n,t=this["on"+e.type];typeof t=="function"?n=t.call(e.currentTarget,e):typeof t.handleEvent=="function"&&t.handleEvent(e),this._&&e.redraw!==!1&&(0,this._)(),n===!1&&(e.preventDefault(),e.stopPropagation())};function C(e,t,n){if(e.events!=null){if(e.events[t]===n)return;n!=null&&(typeof n=="function"||typeof n=="object")?(e.events[t]==null&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n):(e.events[t]!=null&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0)}else n!=null&&(typeof n=="function"||typeof n=="object")&&(e.events=new v,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function x(e,t,n){typeof e.oninit=="function"&&s.call(e.oninit,t),typeof e.oncreate=="function"&&n.push(s.bind(e.oncreate,t))}function _(e,t,n){typeof e.onupdate=="function"&&n.push(s.bind(e.onupdate,t))}function ee(e,t){do{if(e.attrs!=null&&typeof e.attrs.onbeforeupdate=="function"){var n=s.call(e.attrs.onbeforeupdate,e,t);if(n!==void 0&&!n)break}if(typeof e.tag!="string"&&typeof e.state.onbeforeupdate=="function"&&(n=s.call(e.state.onbeforeupdate,e,t),n!==void 0&&!n))break;return!1}while(!1)return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}return function(e,n,s){if(!e)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var o,r,a=[],i=l(),c=e.namespaceURI;e.vnodes==null&&(e.textContent=""),n=t.normalizeChildren(Array.isArray(n)?n:[n]),r=m;try{m=typeof s=="function"?s:void 0,y(e,e.vnodes,n,a,null,c==="http://www.w3.org/1999/xhtml"?void 0:c)}finally{m=r}e.vnodes=n,i!=null&&l()!==i&&typeof i.focus=="function"&&i.focus();for(o=0;o<a.length;o++)a[o]()}},h=g(window),p=function(e,n,s){var o=[],a=!1,r=!1;function c(){if(a)throw new Error("Nested m.redraw.sync() call");a=!0;for(var n=0;n<o.length;n+=2)try{e(o[n],t(o[n+1]),i)}catch(e){s.error(e)}a=!1}function i(){r||(r=!0,n(function(){r=!1,c()}))}i.sync=c;function l(n,s){if(s!=null&&s.view==null&&typeof s!="function")throw new TypeError("m.mount(element, component) expects a component, not a vnode");var a=o.indexOf(n);a>=0&&(o.splice(a,2),e(n,[],i)),s!=null&&(o.push(n,s),e(n,t(s),i))}return{mount:l,redraw:i}},m=p(h,requestAnimationFrame,console),f=function(e){if(Object.prototype.toString.call(e)!=="[object Object]")return"";var t,s=[];for(t in e)n(t,e[t]);return s.join("&");function n(e,t){if(Array.isArray(t))for(var o=0;o<t.length;o++)n(e+"["+o+"]",t[o]);else if(Object.prototype.toString.call(t)==="[object Object]")for(o in t)n(e+"["+o+"]",t[o]);else s.push(encodeURIComponent(e)+(t!=null&&t!==""?"="+encodeURIComponent(t):""))}},l=Object.assign||function(e,t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})},r=function(e,t){if(/:([^/.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names *must* be separated");if(t==null)return e;var n,s,o,a,d,u,h,i=e.indexOf("?"),r=e.indexOf("#"),m=r<0?e.length:r,p=i<0?m:i,g=e.slice(0,p),c={};return l(c,t),s=g.replace(/:([^/.-]+)(\.{3})?/g,function(e,n,s){return delete c[n],t[n]==null?e:s?t[n]:encodeURIComponent(String(t[n]))}),o=s.indexOf("?"),a=s.indexOf("#"),d=a<0?s.length:a,h=o<0?d:o,n=s.slice(0,h),i>=0&&(n+=e.slice(i,m)),o>=0&&(n+=(i<0?"?":"&")+s.slice(o,d)),u=f(c),u&&(n+=(i<0&&o<0?"?":"&")+u),r>=0&&(n+=e.slice(r)),a>=0&&(n+=(r<0?"":"&")+s.slice(a)),n},w=function(e,t,n){var a=0;function s(e){return new t(e)}s.prototype=t.prototype,s.__proto__=t;function o(e){return function(o,i){typeof o!="string"?(i=o,o=o.url):i==null&&(i={});var a,c=new t(function(t,n){e(r(o,i.params),i,function(e){if(typeof i.type=="function")if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new i.type(e[n]);else e=new i.type(e);t(e)},n)});if(i.background===!0)return c;a=0;function l(){--a===0&&typeof n=="function"&&n()}return d(c);function d(e){var t=e.then;return e.constructor=s,e.then=function(){a++;var n=t.apply(e,arguments);return n.then(l,function(e){if(l(),a===0)throw e}),d(n)},e}}}function i(e,t){for(var n in e.headers)if({}.hasOwnProperty.call(e.headers,n)&&t.test(n))return!0;return!1}return{request:o(function(t,n,s,o){var c,u,h=n.method!=null?n.method.toUpperCase():"GET",r=n.body,m=(n.serialize==null||n.serialize===JSON.serialize)&&!(r instanceof e.FormData),l=n.responseType||(typeof n.extract=="function"?"":"json"),a=new e.XMLHttpRequest,d=!1,f=a,p=a.abort;a.abort=function(){d=!0,p.call(this)},a.open(h,t,n.async!==!1,typeof n.user=="string"?n.user:void 0,typeof n.password=="string"?n.password:void 0),m&&r!=null&&!i(n,/^content0-type1$/i)&&a.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof n.deserialize!="function"&&!i(n,/^accept$/i)&&a.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(a.withCredentials=n.withCredentials),n.timeout&&(a.timeout=n.timeout),a.responseType=l;for(c in n.headers)({}.hasOwnProperty.call(n.headers,c)&&a.setRequestHeader(c,n.headers[c]));a.onreadystatechange=function(e){if(d)return;if(e.target.readyState===4)try{var a,r,c=e.target.status>=200&&e.target.status<300||e.target.status===304||/^file:\/\//i.test(t),i=e.target.response;if(l==="json"?!e.target.responseType&&typeof n.extract!="function"&&(i=JSON.parse(e.target.responseText)):(!l||l==="text")&&i==null&&(i=e.target.responseText),typeof n.extract=="function"?(i=n.extract(e.target,n),c=!0):typeof n.deserialize=="function"&&(i=n.deserialize(i)),c)s(i);else{try{r=e.target.responseText}catch{r=i}a=new Error(r),a.code=e.target.status,a.response=i,o(a)}}catch(e){o(e)}},typeof n.config=="function"&&(a=n.config(a,n,t)||a,a!==f&&(u=a.abort,a.abort=function(){d=!0,u.call(this)})),r==null?a.send():typeof n.serialize=="function"?a.send(n.serialize(r)):r instanceof e.FormData?a.send(r):a.send(JSON.stringify(r))}),jsonp:o(function(t,n,s,o){var r=n.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+a++,i=e.document.createElement("script");e[r]=function(t){delete e[r],i.parentNode.removeChild(i),s(t)},i.onerror=function(){delete e[r],i.parentNode.removeChild(i),o(new Error("JSONP request failed"))},i.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(r),e.document.documentElement.appendChild(i)})}},u=w(window,e,m.redraw),c=m,n=function(){return s.apply(this,arguments)},n.m=s,n.trust=s.trust,n.fragment=s.fragment,n.mount=c.mount,x=s,v=e,d=function(e){if(e===""||e==null)return{};e.charAt(0)==="?"&&(e=e.slice(1));for(var t,n,s,o,i,a,r,c,l,h,m=e.split("&"),d={},f={},u=0;u<m.length;u++){c=m[u].split("="),a=decodeURIComponent(c[0]),r=c.length===2?decodeURIComponent(c[1]):"",r==="true"?r=!0:r==="false"&&(r=!1),t=a.split(/\]\[?|\[/),i=f,a.indexOf("[")>-1&&t.pop();for(o=0;o<t.length;o++){if(s=t[o],l=t[o+1],h=l==""||!isNaN(parseInt(l,10)),s==="")a=t.slice(0,o).join(),d[a]==null&&(d[a]=Array.isArray(i)?i.length:0),s=d[a]++;else if(s==="__proto__")break;o===t.length-1?i[s]=r:(n=Object.getOwnPropertyDescriptor(i,s),n!=null&&(n=n.value),n==null&&(i[s]=n=h?[]:{}),i=n)}}return f},i=function(e){var n=e.indexOf("?"),s=e.indexOf("#"),o=s<0?e.length:s,i=n<0?o:n,t=e.slice(0,i).replace(/\/{2,}/g,"/");return t?(t[0]!=="/"&&(t="/"+t),t.length>1&&t[t.length-1]==="/"&&(t=t.slice(0,-1))):t="/",{path:t,params:n<0?{}:d(e.slice(n+1,o))}},b=function(e){var n=i(e),s=Object.keys(n.params),t=[],o=new RegExp("^"+n.path.replace(/:([^/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|[\]{}]/g,function(e,n,s){return n==null?"\\"+e:(t.push({k:n,r:s==="..."}),s==="..."?"(.*)":s==="."?"([^/]+)\\.":"([^/]+)"+(s||""))})+"$");return function(e){for(var a,i=0;i<s.length;i++)if(n.params[s[i]]!==e.params[s[i]])return!1;if(!t.length)return o.test(e.path);if(a=o.exec(e.path),a==null)return!1;for(i=0;i<t.length;i++)e.params[t[i].k]=t[i].r?a[i+1]:decodeURIComponent(a[i+1]);return!0}},a={},j=function(e,n){function h(t,n,i){if(t=r(t,n),o!=null){o();var a=i?i.state:null,c=i?i.title:null;i&&i.replace?e.history.replaceState(a,c,s.prefix+t):e.history.pushState(a,c,s.prefix+t)}else e.location.href=s.prefix+t}var o,c,d,m,f,u=a,p=s.SKIP={};function s(r,g,j){if(r==null)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var O,C,y=0,_=Object.keys(j).map(function(e){if(e[0]!=="/")throw new SyntaxError("Routes must start with a `/`");if(/:([^/.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:e,component:j[e],check:b(e)}}),E=typeof setImmediate=="function"?setImmediate:setTimeout,k=v.resolve(),x=!1;if(o=null,g!=null&&(C=i(g),!_.some(function(e){return e.check(C)})))throw new ReferenceError("Default route doesn't match any known routes");function w(){x=!1;var o,a,t=e.location.hash;s.prefix[0]!=="#"&&(t=e.location.search+t,s.prefix[0]!=="?"&&(t=e.location.pathname+t,t[0]!=="/"&&(t="/"+t))),o=t.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(s.prefix.length),a=i(o),l(a.params,e.history.state);function r(){if(o===g)throw new Error("Could not resolve default route "+g);h(g,null,{replace:!0})}v(0);function v(e){for(;e<_.length;e++)if(_[e].check(a)){var t=_[e].component,i=_[e].route,l=t,s=d=function(i){if(s!==d)return;if(i===p)return v(e+1);m=i!=null&&(typeof i.view=="function"||typeof i=="function")?i:"div",c=a.params,f=o,d=null,u=t.render?t:null,y===2?n.redraw():(y=2,n.redraw.sync())};t.view||typeof t=="function"?(t={},s(l)):t.onmatch?k.then(function(){return t.onmatch(a.params,o,i)}).then(s,r):s("div");return}r()}}return o=function(){x||(x=!0,E(w))},typeof e.history.pushState=="function"?(O=function(){e.removeEventListener("popstate",o,!1)},e.addEventListener("popstate",o,!1)):s.prefix[0]==="#"&&(o=null,O=function(){e.removeEventListener("hashchange",w,!1)},e.addEventListener("hashchange",w,!1)),n.mount(r,{onbeforeupdate:function(){return y=y?2:1,!!y&&a!==u},oncreate:w,onremove:O,view:function(){if(!y||a===u)return;var e=[t(m,c.key,c)];return u&&(e=u.render(e[0])),e}})}return s.set=function(e,t,n){d!=null&&(n=n||{},n.replace=!0),d=null,h(e,t,n)},s.get=function(){return f},s.prefix="#!",s.Link={view:function(e){var t,o,i,a=e.attrs.options,n={};return l(n,e.attrs),n.selector=n.options=n.key=n.oninit=n.oncreate=n.onbeforeupdate=n.onupdate=n.onbeforeremove=n.onremove=null,t=x(e.attrs.selector||"a",n,e.children),(t.attrs.disabled=Boolean(t.attrs.disabled))?(t.attrs.href=null,t.attrs["aria-disabled"]="true",t.attrs.onclick=null):(o=t.attrs.onclick,i=t.attrs.href,t.attrs.href=s.prefix+i,t.attrs.onclick=function(e){var t;typeof o=="function"?t=o.call(e.currentTarget,e):o==null||typeof o!="object"||typeof o.handleEvent=="function"&&o.handleEvent(e),t!==!1&&!e.defaultPrevented&&(e.button===0||e.which===0||e.which===1)&&(!e.currentTarget.target||e.currentTarget.target==="_self")&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey&&(e.preventDefault(),e.redraw=!1,s.set(i,null,a))}),t}},s.param=function(e){return c&&e!=null?c[e]:c},s},n.route=j(window,c),n.render=h,n.redraw=c.redraw,n.request=u.request,n.jsonp=u.jsonp,n.parseQueryString=d,n.buildQueryString=f,n.parsePathname=i,n.buildPathname=r,n.vnode=t,n.PromisePolyfill=e,typeof module!="undefined"?module.exports=n:window.m=n})()